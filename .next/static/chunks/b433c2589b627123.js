(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,766482,(e,t,n)=>{function i(e,t,n){function i(){var d=Date.now()-s;d<t&&d>=0?l=setTimeout(i,t-d):(l=null,n||(a=e.apply(r,o),r=o=null))}null==t&&(t=100);var l,o,r,s,a,d=function(){r=this,o=arguments,s=Date.now();var d=n&&!l;return l||(l=setTimeout(i,t)),d&&(a=e.apply(r,o),r=o=null),a};return d.clear=function(){l&&(clearTimeout(l),l=null)},d.flush=function(){l&&(a=e.apply(r,o),r=o=null,clearTimeout(l),l=null)},d}i.debounce=i,t.exports=i},274789,(e,t,n)=>{"use strict";t.exports=function(e){for(var t=function(e){var t,n=(e.length+8>>6)+1,i=Array(16*n);for(t=0;t<16*n;t++)i[t]=0;for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(8*e.length+t)%4*8;i[t>>2]|=128<<(8*e.length+t)%4*8;var l=8*e.length;return i[16*n-2]=255&l,i[16*n-2]|=(l>>>8&255)<<8,i[16*n-2]|=(l>>>16&255)<<16,i[16*n-2]|=(l>>>24&255)<<24,i}(e),n=0x67452301,i=-0x10325477,l=-0x67452302,o=0x10325476,r=0;r<t.length;r+=16){var d=n,h=i,f=l,g=o;n=c(n,i,l,o,t[r+0],7,-0x28955b88),o=c(o,n,i,l,t[r+1],12,-0x173848aa),l=c(l,o,n,i,t[r+2],17,0x242070db),i=c(i,l,o,n,t[r+3],22,-0x3e423112),n=c(n,i,l,o,t[r+4],7,-0xa83f051),o=c(o,n,i,l,t[r+5],12,0x4787c62a),l=c(l,o,n,i,t[r+6],17,-0x57cfb9ed),i=c(i,l,o,n,t[r+7],22,-0x2b96aff),n=c(n,i,l,o,t[r+8],7,0x698098d8),o=c(o,n,i,l,t[r+9],12,-0x74bb0851),l=c(l,o,n,i,t[r+10],17,-42063),i=c(i,l,o,n,t[r+11],22,-0x76a32842),n=c(n,i,l,o,t[r+12],7,0x6b901122),o=c(o,n,i,l,t[r+13],12,-0x2678e6d),l=c(l,o,n,i,t[r+14],17,-0x5986bc72),i=c(i,l,o,n,t[r+15],22,0x49b40821),n=u(n,i,l,o,t[r+1],5,-0x9e1da9e),o=u(o,n,i,l,t[r+6],9,-0x3fbf4cc0),l=u(l,o,n,i,t[r+11],14,0x265e5a51),i=u(i,l,o,n,t[r+0],20,-0x16493856),n=u(n,i,l,o,t[r+5],5,-0x29d0efa3),o=u(o,n,i,l,t[r+10],9,0x2441453),l=u(l,o,n,i,t[r+15],14,-0x275e197f),i=u(i,l,o,n,t[r+4],20,-0x182c0438),n=u(n,i,l,o,t[r+9],5,0x21e1cde6),o=u(o,n,i,l,t[r+14],9,-0x3cc8f82a),l=u(l,o,n,i,t[r+3],14,-0xb2af279),i=u(i,l,o,n,t[r+8],20,0x455a14ed),n=u(n,i,l,o,t[r+13],5,-0x561c16fb),o=u(o,n,i,l,t[r+2],9,-0x3105c08),l=u(l,o,n,i,t[r+7],14,0x676f02d9),i=u(i,l,o,n,t[r+12],20,-0x72d5b376),n=p(n,i,l,o,t[r+5],4,-378558),o=p(o,n,i,l,t[r+8],11,-0x788e097f),l=p(l,o,n,i,t[r+11],16,0x6d9d6122),i=p(i,l,o,n,t[r+14],23,-0x21ac7f4),n=p(n,i,l,o,t[r+1],4,-0x5b4115bc),o=p(o,n,i,l,t[r+4],11,0x4bdecfa9),l=p(l,o,n,i,t[r+7],16,-0x944b4a0),i=p(i,l,o,n,t[r+10],23,-0x41404390),n=p(n,i,l,o,t[r+13],4,0x289b7ec6),o=p(o,n,i,l,t[r+0],11,-0x155ed806),l=p(l,o,n,i,t[r+3],16,-0x2b10cf7b),i=p(i,l,o,n,t[r+6],23,0x4881d05),n=p(n,i,l,o,t[r+9],4,-0x262b2fc7),o=p(o,n,i,l,t[r+12],11,-0x1924661b),l=p(l,o,n,i,t[r+15],16,0x1fa27cf8),i=p(i,l,o,n,t[r+2],23,-0x3b53a99b),n=m(n,i,l,o,t[r+0],6,-0xbd6ddbc),o=m(o,n,i,l,t[r+7],10,0x432aff97),l=m(l,o,n,i,t[r+14],15,-0x546bdc59),i=m(i,l,o,n,t[r+5],21,-0x36c5fc7),n=m(n,i,l,o,t[r+12],6,0x655b59c3),o=m(o,n,i,l,t[r+3],10,-0x70f3336e),l=m(l,o,n,i,t[r+10],15,-1051523),i=m(i,l,o,n,t[r+1],21,-0x7a7ba22f),n=m(n,i,l,o,t[r+8],6,0x6fa87e4f),o=m(o,n,i,l,t[r+15],10,-0x1d31920),l=m(l,o,n,i,t[r+6],15,-0x5cfebcec),i=m(i,l,o,n,t[r+13],21,0x4e0811a1),n=m(n,i,l,o,t[r+4],6,-0x8ac817e),o=m(o,n,i,l,t[r+11],10,-0x42c50dcb),l=m(l,o,n,i,t[r+2],15,0x2ad7d2bb),i=m(i,l,o,n,t[r+9],21,-0x14792c6f),n=s(n,d),i=s(i,h),l=s(l,f),o=s(o,g)}return a(n)+a(i)+a(l)+a(o)};var i="0123456789abcdef";function l(e,t){return 1&e|1&t|(e>>>1|t>>>1)<<1}function o(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t}function r(e,t){return(e>>>1&t>>>1)<<1|1&e&(1&t)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e){var t,n="";for(t=0;t<=3;t++)n+=i.charAt(e>>8*t+4&15)+i.charAt(e>>8*t&15);return n}function d(e,t,n,i,l,o){var r;return s((r=s(s(t,e),s(i,o)))<<l|r>>>32-l,n)}function c(e,t,n,i,o,s,a){return d(l(r(t,n),r(~t,i)),e,t,o,s,a)}function u(e,t,n,i,o,s,a){return d(l(r(t,i),r(n,~i)),e,t,o,s,a)}function p(e,t,n,i,l,r,s){return d(o(o(t,n),i),e,t,l,r,s)}function m(e,t,n,i,r,s,a){return d(o(n,l(t,~i)),e,t,r,s,a)}},126047,988942,e=>{"use strict";let t,n,i,l;var o,r=e.i(843476),s=e.i(500932),a=e.i(725917),d=e.i(678491),c=e.i(271645),u=e.i(548837),p=e.i(846932),m=e.i(88653),h=e.i(216024),f=e.i(677160),g=e.i(364308),x=e.i(263486),b=e.i(528696),y=e.i(179684),v=e.i(447912),j=e.i(181625),w=e.i(948253),I=(0,w.default)(function(e,t,n){return t=t.toLowerCase(),e+(n?(0,j.default)(t):t)}),S=e.i(984199),C=(0,w.default)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),_=e.i(540589),T=e.i(735962),R=e.i(398017),P=e.i(809054),E=e.i(116606);let D="structure",k=(0,f.defineLocaleResourceBundle)({locale:"en-US",namespace:D,resources:()=>e.A(353713)}),F=["_id","_type","_createdAt","_updatedAt","_rev"];function A(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...o]=n;if(!("fields"in t))return"";let r=t.fields.find(e=>e.name===l);if(!r){if(!F.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in r.type&&"reference"===r.type.name){let t=r.type.to;return`${l}->{${t.map(t=>e(t,o)).join(",")}}`}let s=o.length>0&&e(r.type,o),a=s?`{${s}}`:"";return o.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class L extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let M={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",DOCUMENT_TYPE_REQUIRED:"structure-document-type-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},V={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:D}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},O=[V,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:D}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function z(e,t,n){return e instanceof B?e.serialize({path:n,index:t}):e}class B{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new L("`title` is required for menu item",e.path,e.index,t).withHelpUrl(M.TITLE_REQUIRED)}if(!n&&!i)throw new L(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl(M.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new L("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl(M.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new B(this._context);return t.spec={...this.spec,...e},t}}function N(e,{by:t,title:n,i18n:i},l){let o=new B(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(v.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(o=o.i18n(i)),o}function H(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(O):O).map(t=>N(e,t,A(i,t.by))):[]}function $(e,t,n){return e instanceof U?e.serialize({path:n,index:t}):e}class U{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new U(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new U(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new U(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new L("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(M.ID_REQUIRED);if(!this._title)throw new L("`title` is required for a menu item group",e.path,this._id).withHelpUrl(M.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}}let G=/([^A-Za-z0-9-_.])/;function q(e,t,n){if("string"!=typeof e)throw new L(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(G)||[];if(i)throw new L(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new L("Structure node id cannot start with __edit__",t,n);return e}function W(e,t){if(t)return t;let n=I(e);return G.test(n)?I((0,P.default)(e)):n}class K{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:W(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:o}=this.spec;if(!t)throw new L("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(M.ID_REQUIRED);if(!o)throw new L("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(M.ID_REQUIRED);return{id:q(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>z(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>$(t,n,e.path))}}clone(e){let t=new K;return t.spec={...this.spec,...e},t}}class Y{constructor(e){this.spec={id:(0,S.uniqueId)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new Y;return t.spec={...this.spec,...e},t}}async function X(e,t){return await e(f.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,h.getPublishedId)(t)},{tag:"structure.resolve-type"})}class Q{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||C(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new L("`id` is required for view item",e.path,e.index).withHelpUrl(M.ID_REQUIRED);if(!n)throw new L("`title` is required for view item",e.path,e.index).withHelpUrl(M.TITLE_REQUIRED);return{id:q(t,e.path,e.index),title:n,icon:i}}}function J(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class Z extends Q{constructor(e){const t=(e=>(0,f.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new L("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(M.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new Z;return t.spec={...this.spec,...e},t}}class ee extends Q{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new ee;return t.spec={...this.spec,...e},t}}let et=e=>new ee(e),en=e=>new Z(e);var ei=Object.freeze({__proto__:null,ComponentViewBuilder:Z,FormViewBuilder:ee,GenericViewBuilder:Q,component:en,form:et,maybeSerializeView:J});class el{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:W(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}defaultPanes(e){return this.clone({defaultPanes:e})}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,o,r=e[t||e.length-1],s=this.spec.id||r&&`${r}`||"",a={id:s,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof s||!s)throw new L("`id` is required for document nodes",e,t,n).withHelpUrl(M.ID_REQUIRED);if(!a||!a.id)throw new L("document id (`id`) is required for document nodes",e,s,n).withHelpUrl(M.DOCUMENT_ID_REQUIRED);if(!a||!a.type)throw new L("document type (`schemaType`) is required for document nodes",e,s,n);let d=(this.spec.views&&this.spec.views.length>0?this.spec.views:[et()]).map((t,n)=>J(t,n,e)),c=d.map(e=>e.id),u=(0,_.uniq)(c.filter((e,t)=>c.includes(e,t+1)));if(u.length>0)throw new L(`document node has views with duplicate IDs: ${u.join(",  ")}`,e,s,n);if(this.spec.defaultPanes&&this.spec.defaultPanes.length>0){let e=this.spec.defaultPanes.filter(e=>c.includes(e)),t=this.spec.defaultPanes.filter(e=>!c.includes(e));t.length>0&&console.warn(`DefaultPanes contains invalid view IDs that don't match any defined views: ${t.join(", ")}. Valid view IDs are: ${c.join(", ")}`),e.length>=2&&(o=e)}return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let o=i.type,r=l.slice(0,l.length-1),s=l[l.length-1];if(o||(o=await X(t,n)),!o)throw new L("Failed to resolve document, and no type provided in parameters.",r,s);return e({documentId:n,schemaType:o})})(this._context),id:q(s,e,t),type:"document",options:(l={id:(i=a).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:d,defaultPanes:o}}clone(e={}){let t=new el(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}function eo(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new el(e);if(!t)return n;let{id:i,type:l,template:o,templateParameters:r}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),o&&(n=n.initialValueTemplate(o,r)),t.child&&(n=n.child(t.child)),n}function er({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)}class es{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new L("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(M.ID_REQUIRED);if(!this.spec.templateId)throw new L("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(M.ID_REQUIRED);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new L("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(M.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new es(this._context);return t.spec={...this.spec,...e},t}}function ea(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}function ed(e,t,n){return e instanceof es?e.serialize({path:n,index:t}):e}function ec(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),o=t.title||l?.title||"Create",r={};l&&l.schemaType&&(r.type=l.schemaType),t.templateId&&(r.template=t.templateId);let s=t.parameters?[r,t.parameters]:r,a=l&&n.get(l.schemaType),d=t.i18n||l?.i18n,c=new B(e).title(o).icon(l&&l.icon||a?.icon||v.AddIcon).intent({type:"create",params:s});return d&&(c=c.i18n(d)),c.serialize()})}let eu=Symbol("Document type list canHandleIntent"),ep=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",o=n.options?.params||{},r=n.schemaTypeName?[n.schemaTypeName]:eb(l,o),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&r.includes(t.type)||i&&r.includes(t.type)};ep.identity=eu;let em=["default","card","media","detail","block"];function eh(){}let ef=(e,t,{pane:n,index:i})=>i<=1&&ep(e,t,{pane:n});class eg{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:W(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!em.includes(i))throw new L(`\`layout\` must be one of ${em.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>ed(e,t,n));return{id:q(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||eh,canHandleIntent:this.spec.canHandleIntent||ef,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>z(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>$(e,t,n))}}}class ex extends eg{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new L("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(M.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new L("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl(M.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,E.generateHelpUrl)(M.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||X(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new el(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||f.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new L(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl(M.QUERY_PROVIDED_FOR_FILTER);return n})(this.spec,e)}}}clone(e){let t=new ex(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:o,params:r}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(eb(o,r)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:v.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=eb(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function eb(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let ey=e=>"listItem"===e.type,ev=(e,t,n)=>(n.pane.items||[]).filter(eC).some(e=>e.schemaType.name===t.type&&e._id===t.id)||ef(e,t,n),ej=(e,t)=>{let n=(t.parent.items.filter(ey).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class ew extends eg{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new L("`id` is required for lists",e.path,e.index).withHelpUrl(M.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new L("`items` must be an array of items",e.path,e.index).withHelpUrl(M.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof eI)return e.serialize({path:n,index:t});if(e instanceof Y)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof ew?"ListBuilder":(i=e,(0,f.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new L(`List items must be of type "listItem", got "${l}"${"array"===l?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl(M.INVALID_LIST_ITEM)}return e})(e,t,i)),o=l.filter((e,t)=>(0,T.find)(l,{id:e.id},t+1));if(o.length>0){let t=o.map(e=>e.id).slice(0,5),n=o.length>5?`${t.join(", ")}...`:t.join(", ");throw new L(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl(M.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||ev,child:this.spec.child||ej,items:l}}clone(e){let t=new ew(this._context);return t.spec={...this.spec,...e},t}}class eI{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:W(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new L("`id` is required for list items",e.path,e.index).withHelpUrl(M.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new L("`title` is required for list items",e.path,t).withHelpUrl(M.TITLE_REQUIRED);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new L(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl(M.SCHEMA_TYPE_NOT_FOUND);l=n}let o={path:e.path.concat(t),hint:"child"},r=i instanceof K||i instanceof ex||i instanceof el||i instanceof ew?i.serialize(o):i;if("function"==typeof r){let e=r;r=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:q(t,e.path,e.index),schemaType:l,child:r,title:n,type:"listItem"}}clone(e){let t=new eI(this._context);return t.spec={...this.spec,...e},t}}class eS extends eI{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new L("`schemaType` is required for document list items",e.path,e.index).withHelpUrl(M.SCHEMA_TYPE_REQUIRED);let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new el(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new eS(this._context);return t.spec={...this.spec,...e},t}}function eC(e){return(0,f.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class e_ extends ex{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new e_(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new e_(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===eu?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let eT=["sanity.imageAsset","sanity.fileAsset"];function eR(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!eT.includes(e))})(e).map(t=>eP(e,t))}function eP(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,R.startCase)(t);return new eI(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,o="list"===l.type?l.items.find(e=>e.id===n):null,r=eE(e,t);return o&&o.title&&(r=r.title(o.title)),r})}function eE(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,o="string"==typeof l?l:l.name,r="string"==typeof t?{}:t,s=n.get(o);if(!s)throw Error(`Schema type with name "${o}" not found`);let a=s.title||(0,R.startCase)(o);return new e_(e).id(r.id||o).title(r.title||a).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(V.by).menuItemGroups(r.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:D}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:D}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:D}}}]).child(r.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(r.canHandleIntent||ep).menuItems(r.menuItems||[...H(e,s),new B(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:D}}).title("Compact view").icon(v.StackCompactIcon).action("setLayout").params({layout:"default"}),new B(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:D}}).title("Detailed view").icon(v.StackIcon).action("setLayout").params({layout:"detail"})])}function eD({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,f.getConfigContextFromSource)(t),l={...t,getStructureBuilder:()=>o,resolveDocumentNode:t=>{let n=e?.(o,{...t,...i})||new el(l);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,h.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},o={defaults:()=>{let e;return e=eR(l),new ew(l).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:D}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>eE(l,...e),documentTypeListItem:(...e)=>eP(l,...e),documentTypeListItems:(...e)=>eR(l,...e),document:(...e)=>new el(l,...e),documentWithInitialValueTemplate:(...e)=>er(l,...e),defaultDocument:l.resolveDocumentNode,list:(...e)=>new ew(l,...e),listItem:(...e)=>new eI(l,...e),menuItem:(...e)=>new B(l,...e),menuItemGroup:(...e)=>new U(l,...e),menuItemsFromInitialValueTemplateItems:(...e)=>ec(l,...e),documentList:(...e)=>new ex(l,...e),documentListItem:(...e)=>new eS(l,...e),orderingMenuItem:(...e)=>N(l,...e),orderingMenuItemsForType:(...e)=>H(l,...e),editor:(...e)=>eo(l,...e),defaultInitialValueTemplateItems:(...e)=>ea(l,...e),initialValueTemplateItem:(e,t)=>new es(l,{id:e,parameters:t,templateId:e}),component:e=>(0,y.isValidElementType)(e)?new K().component(e):new K(e),divider:e=>new Y(e),view:ei,context:l};return o}function ek(e){let t,n,i,l,o,a=(0,s.c)(26),{defaultDocumentNode:d,structure:p,children:m}=e,[h,g]=(0,c.useState)(!1),x=(0,f.useSource)(),b=(0,f.useConfigContextFromSource)(x),y=(0,f.useDocumentStore)(),{perspectiveStack:v}=(0,f.usePerspective)();a[0]!==d||a[1]!==v||a[2]!==x?(t=eD({defaultDocumentNode:d,source:x,perspectiveStack:v}),a[0]=d,a[1]=v,a[2]=x,a[3]=t):t=a[3];let j=t;e:{let e;if(p){let e;a[4]!==j||a[5]!==b||a[6]!==y||a[7]!==v||a[8]!==p?(e=p(j,{...b,documentStore:y,perspectiveStack:v}),a[4]=j,a[5]=b,a[6]=y,a[7]=v,a[8]=p,a[9]=e):e=a[9],n=e;break e}a[10]!==j?(e=j.defaults(),a[10]=j,a[11]=e):e=a[11],n=e}let w=n,I=!h,S=!h,C=!h,_=!h;a[12]!==h||a[13]!==I||a[14]!==S||a[15]!==C||a[16]!==_?(i={backButton:h,resizablePanes:I,reviewChanges:S,splitPanes:C,splitViews:_},a[12]=h,a[13]=I,a[14]=S,a[15]=C,a[16]=_,a[17]=i):i=a[17];let T=i;a[18]!==j.context||a[19]!==T||a[20]!==h||a[21]!==w?(l={features:T,layoutCollapsed:h,setLayoutCollapsed:g,rootPaneNode:w,structureContext:j.context},a[18]=j.context,a[19]=T,a[20]=h,a[21]=w,a[22]=l):l=a[22];let R=l;return a[23]!==m||a[24]!==R?(o=(0,r.jsx)(u.StructureToolContext.Provider,{value:R,children:m}),a[23]=m,a[24]=R,a[25]=o):o=a[25],o}e.s(["ComponentBuilder",()=>K,"ComponentViewBuilder",()=>Z,"DEFAULT_INTENT_HANDLER",()=>eu,"DocumentBuilder",()=>el,"DocumentListBuilder",()=>ex,"DocumentListItemBuilder",()=>eS,"DocumentTypeListBuilder",()=>e_,"FormViewBuilder",()=>ee,"GenericListBuilder",()=>eg,"GenericViewBuilder",()=>Q,"HELP_URL",()=>M,"InitialValueTemplateItemBuilder",()=>es,"ListBuilder",()=>ew,"ListItemBuilder",()=>eI,"MenuItemBuilder",()=>B,"MenuItemGroupBuilder",()=>U,"SerializeError",()=>L,"StructureToolProvider",()=>ek,"component",()=>en,"createStructureBuilder",()=>eD,"defaultInitialValueTemplateItems",()=>ea,"defaultIntentChecker",()=>ep,"documentFromEditor",()=>eo,"documentFromEditorWithInitialValue",()=>er,"form",()=>et,"getExtendedProjection",()=>A,"getOrderingMenuItem",()=>N,"getOrderingMenuItemsForSchemaType",()=>H,"getTypeNamesFromFilter",()=>eb,"isDocumentListItem",()=>eC,"maybeSerializeInitialValueTemplateItem",()=>ed,"maybeSerializeMenuItem",()=>z,"maybeSerializeMenuItemGroup",()=>$,"maybeSerializeView",()=>J,"menuItemsFromInitialValueTemplateItems",()=>ec,"shallowIntentChecker",()=>ef,"structureLocaleNamespace",()=>D,"structureUsEnglishLocaleBundle",()=>k],988942);var eF=e.i(963647),eA=e.i(997053),eL=e.i(433483),eM=e.i(597083),eV=e.i(408659),eO=e.i(374e3),ez=e.i(722249),eB=e.i(94059),eN=e.i(245281),eH=e.i(993817),e$=e.i(58832),eU=e.i(992481),eG=e.i(602400),eq=e.i(839338),eW=e.i(878856),eK=e.i(330823),eY=e.i(807136),eX=e.i(96623),eQ=e.i(817312),eJ=e.i(134352),eZ=e.i(172441),e0=e.i(484973),e1=e.i(254201),e2=e.i(277497),e3=e.i(873904),e4=e.i(55083),e5=e.i(629437),e6=e.i(789196),e8=e.i(218692),e7=e.i(424981),e9=e.i(177433),te=e.i(567e3),tt=e.i(128676),tn=e.i(856179),ti=e.i(666133),ti=ti,tl=e.i(421634),to=e.i(61510),tr=e.i(343894),ts=e.i(368233),ta=e.i(148077),td=e.i(100374),tc=e.i(449242),tu=e.i(827492),tp=e.i(827341),tm=e.i(711308),th=e.i(960739),tf=e.i(10839),tg=e.i(800879),tx=e.i(714494),tb=e.i(733327),ty=e.i(482065),tv=e.i(645456);let tj=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,tw=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},tI=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:o,clientWidth:r}=e;return{x:l?l/Math.max(1e-5,o-r):0,y:t?t/Math.max(1e-5,n-i):0}};function tS(){return(tS=Object.assign.bind()).apply(null,arguments)}function tC(e){return e.matches("body *")?e:window}class t_{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(tI(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=tS({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tj(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!tw(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(tI(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tC(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tC(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;n&&o&&t.scrollTo({top:o*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return tI(this.elements.find(e=>tj(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=tS({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var tT=e.i(432892),tR=e.i(224019),tP=c,tE=e.i(766482),tD=e.i(274789);let tk=Math.ceil(10*Math.random());function tF(e){return Object.prototype.toString.call(e).slice(8,-1)}function tA(e){let t=tF(e);return"Object"!==t&&"Array"!==t}class tL extends tP.Component{shouldComponentUpdate(e){return e.highlight!==this.props.highlight}render(){let e=this.props.string||"",t=this.props.highlight||"",n=e.search(t);if(!t||-1===n)return(0,r.jsx)("span",{children:e});let i=t.source.length,l=e.slice(n,n+i);return(0,r.jsx)("span",{children:e.split(t).map(function(e,t){return(0,r.jsxs)("span",{children:[t>0?(0,r.jsx)("span",{className:"json-inspector__hl",children:l}):null,e]},t)})})}}function tM(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}class tV extends tP.Component{constructor(e){super(e),this.state={expanded:this._isInitiallyExpanded(this.props)}}render(){let{label:e,data:t,root:n,id:i}=this.props,l="id_"+ ++tk,o={path:this.keypath(),key:e.toString(),value:t},s=this._onClick.bind(this,o);return(0,r.jsxs)("div",{"data-testid":n?"leaf-root":"leaf-child","aria-expanded":this.state.expanded,"data-root":n||void 0,className:this.getClassName(),id:"leaf-"+this._rootPath(),children:[(0,r.jsx)("input",{className:"json-inspector__radio",type:"radio",name:l,id:i,tabIndex:-1}),(0,r.jsxs)("label",{className:"json-inspector__line",htmlFor:l,onClick:s,children:[(0,r.jsx)("div",{className:"json-inspector__flatpath",children:o.path}),(0,r.jsxs)("span",{className:"json-inspector__key",children:[this.format(o.key),":",this.renderInteractiveLabel(o.key,!0)]}),this.renderTitle(),this.renderShowOriginalButton()]}),this.renderChildren()]})}renderTitle(){var e,t;let n=this.data(),i=tF(n);if(Array.isArray(n)){let t=n.length;return(0,r.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[t>0?"[…] ":"[] ",(e=t)+(1===e?" item":" items")]})}if("object"==typeof n&&null!==n){let e=Object.keys(n).length;return(0,r.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[e>0?"{…} ":"{} ",(t=e)+(1===t?" property":" properties")]})}return(0,r.jsxs)("span",{className:"json-inspector__value json-inspector__value_"+i.toLowerCase(),children:[this.format(String(n)),this.renderInteractiveLabel(n,!1)]})}renderChildren(){let{verboseShowOriginal:e,query:t,id:n,isExpanded:i,interactiveLabel:l,onClick:o,getOriginal:s}=this.props,a=this._rootPath(),d=this.data();return this.state.expanded&&(tM(d)||Array.isArray(d))?Object.keys(d).map(c=>{var u,p;let m=d[c],h=!this.state.original||!!e&&t;return(0,r.jsx)(tV,{data:m,label:c,prefix:a,onClick:o,id:n,query:t,getOriginal:h?s:void 0,isExpanded:i,interactiveLabel:l,verboseShowOriginal:e},(u=c,tA(p=m)?u+":"+(0,tD.default)(String(p)):u+"["+tF(p)+"]"))}):null}renderShowOriginalButton(){let{data:e,getOriginal:t,query:n}=this.props;return tA(e)||this.state.original||!t||!n||n.test(this.keypath())?null:(0,r.jsx)("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})}renderInteractiveLabel(e,t){let n=this.props.interactiveLabel;return"function"==typeof n?(0,r.jsx)(n,{value:String(e),originalValue:e,isKey:t,keypath:this.keypath()}):null}static getDerivedStateFromProps(e,t){return e.query?{expanded:!e.query.test(e.label)}:null}componentDidUpdate(e){e.query&&!this.props.query&&this.setState({expanded:this._isInitiallyExpanded(this.props)})}_rootPath(){return(this.props.prefix||"")+"."+this.props.label}keypath(){return this._rootPath().slice(6)}data(){return this.state.original||this.props.data}format(e){return(0,r.jsx)(tL,{string:e,highlight:this.props.query})}getClassName(){let e="json-inspector__leaf";return this.props.root&&(e+=" json-inspector__leaf_root"),this.state.expanded&&(e+=" json-inspector__leaf_expanded"),tA(this.props.data)||(e+=" json-inspector__leaf_composite"),e}toggle(){this.setState({expanded:!this.state.expanded})}_onClick(e,t){this.toggle(),this.props.onClick&&this.props.onClick(e),t.stopPropagation()}_onShowOriginalClick=e=>{this.setState({original:this.props.getOriginal?.(this.keypath())}),e.stopPropagation()};_isInitiallyExpanded(e){if(e.root)return!0;let t=this.keypath();return e.query?!e.query.test(t)&&"function"==typeof e.getOriginal:!!e.isExpanded&&e.isExpanded(t,e.data)}}let tO=(...e)=>{},tz=({onChange:e=tO})=>{let t=(0,tP.useCallback)(t=>e(t.target.value),[e]);return(0,r.jsx)("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:t})};function tB(e){return tM(e)?0===Object.keys(e).length:Array.isArray(e)?0===e.length:null===e||"string"!=typeof e||"number"!=typeof e||0===Object.keys(e).length}let tN=(o=(e,t)=>{let n=t||{cacheResults:!0},i={};return function(t){let l;if(!n.cacheResults)return tH(e,t,n);if(!i[t]){for(var o=t.length-1;o>0;o-=1)if(i[l=t.slice(0,o)]){i[t]=tH(i[l],t,n);break}}return i[t]||(i[t]=tH(e,t,n)),i[t]}},(e,t)=>(l&&e===n&&t===i||(n=e,i=t,l=o(e,t)),l));function tH(e,t,n){return tM(e)||Array.isArray(e)?Object.keys(e).reduce(function(i,l){let o,r=e[l];return r&&("object"!=typeof r?(t$(t,l,n)||t$(t,r,n))&&(i[l]=r):t$(t,l,n)?i[l]=r:tB(o=tH(r,t,n))||Object.assign(i,{[l]:o})),i},{}):{}}function t$(e,t,n){if(!t)return!1;var i=String(t),l=e;return n?.ignoreCase&&(i=i.toLowerCase(),l=l.toLowerCase()),-1!==i.indexOf(l)}function tU(e){return parseInt(e,10)}let tG=e=>e.length>=2,tq={cacheResults:!0,ignoreCase:!1};class tW extends tP.Component{static defaultProps={data:null,search:tz,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:tO,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(e){return e.length>=2},isExpanded:function(e,t){return!1},verboseShowOriginal:!1};constructor(e){super(e),this.state={query:"",filterer:tN(e.data,e.filterOptions)}}render(){let{data:e,className:t,onClick:n,id:i,isExpanded:l,interactiveLabel:o,verboseShowOriginal:s,filterOptions:a=tq,validateQuery:d=tG}=this.props,c=""!==this.state.query&&d(this.state.query),u=c?this.state.filterer(this.state.query):e,p=c&&tB(u);return(0,r.jsxs)("div",{"data-testid":"json-inspector",className:"json-inspector "+t,children:[this.renderToolbar(),p?(0,r.jsx)("div",{className:"json-inspector__not-found",children:"Nothing found"}):(0,r.jsx)(tV,{data:u,onClick:n,id:i,getOriginal:this.getOriginal,query:c?new RegExp(this.state.query,a.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:l,interactiveLabel:o,verboseShowOriginal:s})]})}renderToolbar(){let e=this.props.search;return e?(0,r.jsx)("div",{className:"json-inspector__toolbar",children:(0,r.jsx)(e,{onChange:(0,tE.default)(this.search,this.props.searchOptions?.debounceTime),data:this.props.data,query:this.state.query})}):null}search=e=>{this.setState({query:e})};static getDerivedStateFromProps(e,t){let n=tN(e.data,e.filterOptions);return n===t.filterer?null:{...t,filterer:n}}shouldComponentUpdate(e,t){return t.query!==this.state.query||e.data!==this.props.data||e.onClick!==this.props.onClick}createFilterer=(e,t)=>{this.setState({filterer:tN(e,t)})};getOriginal=e=>(function e(t,n){var i=n.split("."),l=i.shift();return l?Array.isArray(t)&&t[tU(l)]?e(t[tU(l)],i.join(".")):tM(t)&&l in t?e(t[l],i.join(".")):void 0:t})(this.props.data,e)}var tK=e.i(760719),tY=e.i(671857),tX=e.i(433331),tQ=e.i(974875),tJ=e.i(401851),tZ=e.i(640289),t0=e.i(83107),t1=e.i(945736),t2=e.i(991426),t3=e.i(408551);function t4(e,t){return"function"==typeof e?e(t):e}function t5(e,t){return n=>{t.setState(t=>({...t,[e]:t4(n,t[e])}))}}function t6(e){return e instanceof Function}function t8(e,t,n){let i,l=[];return o=>{let r,s;n.key&&n.debug&&(r=Date.now());let a=e(o);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-r)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c⏱ ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function t7(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(247167);let t9="debugHeaders";function ne(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function nt(e,t,n,i){var l,o;let r=0,s=function(e,t){void 0===t&&(t=1),r=Math.max(r,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let r,s=[...o].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?r=e.column.parent:(r=e.column,d=!0),s&&(null==s?void 0:s.column)===r)s.subHeaders.push(e);else{let l=ne(n,r,{id:[i,t,r.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${o.filter(e=>e.column===r).length}`:void 0,depth:t,index:o.length});l.subHeaders.push(e),o.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(o,t-1)};d(t.map((e,t)=>ne(n,e,{depth:r,index:t})),r-1),a.reverse();let c=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],c(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return c(null!=(l=null==(o=a[0])?void 0:o.headers)?l:[]),a}let nn=(e,t,n,i,l,o,r)=>{let s={id:t,index:i,original:n,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:t8(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:t8(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),t7(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),t7(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:t8(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),t7(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},ni=(e,t,n)=>{var i,l;let o=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(o))};ni.autoRemove=e=>nm(e);let nl=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};nl.autoRemove=e=>nm(e);let no=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};no.autoRemove=e=>nm(e);let nr=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};nr.autoRemove=e=>nm(e);let ns=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});ns.autoRemove=e=>nm(e)||!(null!=e&&e.length);let na=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});na.autoRemove=e=>nm(e)||!(null!=e&&e.length);let nd=(e,t,n)=>e.getValue(t)===n;nd.autoRemove=e=>nm(e);let nc=(e,t,n)=>e.getValue(t)==n;nc.autoRemove=e=>nm(e);let nu=(e,t,n)=>{let[i,l]=n,o=e.getValue(t);return o>=i&&o<=l};nu.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(i)?-1/0:i,r=null===n||Number.isNaN(l)?1/0:l;if(o>r){let e=o;o=r,r=e}return[o,r]},nu.autoRemove=e=>nm(e)||nm(e[0])&&nm(e[1]);let np={includesString:ni,includesStringSensitive:nl,equalsString:no,arrIncludes:nr,arrIncludesAll:ns,arrIncludesSome:na,equals:nd,weakEquals:nc,inNumberRange:nu};function nm(e){return null==e||""===e}function nh(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let nf={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},ng=()=>({left:[],right:[]}),nx={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},nb=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),ny=null;function nv(e){return"touchstart"===e.type}function nj(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let nw=()=>({pageIndex:0,pageSize:10}),nI=()=>({top:[],bottom:[]}),nS=(e,t,n,i,l)=>{var o;let r=l.getRow(t,!0);n?(r.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),r.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(o=r.subRows)&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(t=>nS(e,t.id,n,i,l))};function nC(e,t){let n=e.getState().rowSelection,i=[],l={},o=function(e,t){return e.map(e=>{var t;let r=n_(e,n);if(r&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),r)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:i,rowsById:l}}function n_(e,t){var n;return null!=(n=t[e.id])&&n}function nT(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,o=!1;return e.subRows.forEach(e=>{if((!o||l)&&(e.getCanSelect()&&(n_(e,t)?o=!0:l=!1),e.subRows&&e.subRows.length)){let n=nT(e,t);"all"===n?o=!0:("some"===n&&(o=!0),l=!1)}}),l?"all":!!o&&"some"}let nR=/([0-9]+)/gm;function nP(e,t){return e===t?0:e>t?1:-1}function nE(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function nD(e,t){let n=e.split(nR).filter(Boolean),i=t.split(nR).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),o=parseInt(t,10),r=[l,o].sort();if(isNaN(r[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>o)return 1;if(o>l)return -1}return n.length-i.length}let nk={alphanumeric:(e,t,n)=>nD(nE(e.getValue(n)).toLowerCase(),nE(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>nD(nE(e.getValue(n)),nE(t.getValue(n))),text:(e,t,n)=>nP(nE(e.getValue(n)).toLowerCase(),nE(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>nP(nE(e.getValue(n)),nE(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>nP(e.getValue(n),t.getValue(n))},nF=[{createTable:e=>{e.getHeaderGroups=t8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var o,r;let s=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(r=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[];return nt(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},t7(e.options,t9,"getHeaderGroups")),e.getCenterHeaderGroups=t8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>nt(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),t7(e.options,t9,"getCenterHeaderGroups")),e.getLeftHeaderGroups=t8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return nt(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},t7(e.options,t9,"getLeftHeaderGroups")),e.getRightHeaderGroups=t8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return nt(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},t7(e.options,t9,"getRightHeaderGroups")),e.getFooterGroups=t8(()=>[e.getHeaderGroups()],e=>[...e].reverse(),t7(e.options,t9,"getFooterGroups")),e.getLeftFooterGroups=t8(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),t7(e.options,t9,"getLeftFooterGroups")),e.getCenterFooterGroups=t8(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),t7(e.options,t9,"getCenterFooterGroups")),e.getRightFooterGroups=t8(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),t7(e.options,t9,"getRightFooterGroups")),e.getFlatHeaders=t8(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),t7(e.options,t9,"getFlatHeaders")),e.getLeftFlatHeaders=t8(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),t7(e.options,t9,"getLeftFlatHeaders")),e.getCenterFlatHeaders=t8(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),t7(e.options,t9,"getCenterFlatHeaders")),e.getRightFlatHeaders=t8(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),t7(e.options,t9,"getRightFlatHeaders")),e.getCenterLeafHeaders=t8(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t7(e.options,t9,"getCenterLeafHeaders")),e.getLeftLeafHeaders=t8(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t7(e.options,t9,"getLeftLeafHeaders")),e.getRightLeafHeaders=t8(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t7(e.options,t9,"getRightLeafHeaders")),e.getLeafHeaders=t8(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,o,r,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(o=null==(r=t[0])?void 0:r.headers)?o:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},t7(e.options,t9,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:t5("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=t8(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),t7(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=t8(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],t7(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>t8(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),t7(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:t5("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=t8(e=>[nj(t,e)],t=>t.findIndex(t=>t.id===e.id),t7(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=nj(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=nj(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=t8(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var o=l;if(!(null!=t&&t.length)||!n)return o;let r=o.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(e=>o.find(t=>t.id===e)).filter(Boolean),...r]},t7(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:ng(),...e}),getDefaultOptions:e=>({onColumnPinningChange:t5("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,o,r,s,a;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"left":!!r&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=t8(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},t7(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=t8(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),t7(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=t8(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),t7(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?ng():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:ng())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let o=e.getState().columnPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.left)?void 0:i.length)||(null==(l=o.right)?void 0:l.length))},e.getLeftLeafColumns=t8(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t7(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=t8(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t7(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=t8(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},t7(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:t5("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?np.includesString:"number"==typeof i?np.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?np.equals:Array.isArray(i)?np.arrIncludes:np.weakEquals},e.getFilterFn=()=>{var n,i;return t6(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:np[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let o=e.getFilterFn(),r=null==t?void 0:t.find(t=>t.id===e.id),s=t4(n,r?r.value:void 0);if(nh(o,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return r?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=t4(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&nh(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:t5("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>np.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return t6(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:np[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:t5("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nk.datetime;if("string"==typeof n&&(i=!0,n.split(nR).length>1))return nk.alphanumeric}return i?nk.text:nk.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return t6(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nk[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),o=null!=n;t.setSorting(r=>{let s,a=null==r?void 0:r.find(t=>t.id===e.id),d=null==r?void 0:r.findIndex(t=>t.id===e.id),c=[],u=o?n:"desc"===l;if("toggle"!=(s=null!=r&&r.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=r&&r.length&&d!==r.length-1?"replace":a?"toggle":"replace")||o||l||(s="remove"),"add"===s){var p;(c=[...r,{id:e.id,desc:u}]).splice(0,c.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?r.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===s?r.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let o=e.getFirstSortDir(),r=e.getIsSorted();return r?(r===o||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===r?"asc":"desc"):o},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:t5("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?nf.sum:"[object Date]"===Object.prototype.toString.call(i)?nf.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return t6(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:nf[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:t5("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let o=!0===i||!!(null!=i&&i[e.id]),r={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{r[e]=!0}):r=i,n=null!=(l=n)?l:!o,!o&&n)return{...r,[e.id]:!0};if(o&&!n){let{[e.id]:t,...n}=r;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...nw(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:t5("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>t4(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?nw():null!=(n=e.initialState.pagination)?n:nw())},e.setPageIndex=t=>{e.setPagination(n=>{let i=t4(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,t4(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=t4(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=t8(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},t7(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:nI(),...e}),getDefaultOptions:e=>({onRowPinningChange:t5("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let o=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],r=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,i,l,o,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=r&&r.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=r&&r.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=r&&r.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=r&&r.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"top":!!r&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let o=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==o?void 0:o.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?nI():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:nI())},e.getIsSomeRowsPinned=t=>{var n,i,l;let o=e.getState().rowPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.top)?void 0:i.length)||(null==(l=o.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=t8(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),t7(e.options,"debugRows","getTopRows")),e.getBottomRows=t8(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),t7(e.options,"debugRows","getBottomRows")),e.getCenterRows=t8(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},t7(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:t5("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{nS(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=t8(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?nC(e,n):{rows:[],flatRows:[],rowsById:{}},t7(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=t8(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?nC(e,n):{rows:[],flatRows:[],rowsById:{}},t7(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=t8(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?nC(e,n):{rows:[],flatRows:[],rowsById:{}},t7(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(o=>{var r;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return o;let s={...o};return nS(s,e.id,n,null==(r=null==i?void 0:i.selectChildren)||r,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return n_(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===nT(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===nT(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>nx,getInitialState:e=>({columnSizing:{},columnSizingInfo:nb(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:t5("columnSizing",e),onColumnSizingInfoChange:t5("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:nx.minSize,null!=(i=null!=o?o:e.columnDef.size)?i:nx.size),null!=(l=e.columnDef.maxSize)?l:nx.maxSize)},e.getStart=t8(e=>[e,nj(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),t7(t.options,"debugColumns","getStart")),e.getAfter=t8(e=>[e,nj(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),t7(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return o=>{if(!i||!l||(null==o.persist||o.persist(),nv(o)&&o.touches&&o.touches.length>1))return;let r=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=nv(o)?Math.round(o.touches[0].clientX):o.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let o="rtl"===t.options.columnResizeDirection?-1:1,r=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*o,s=Math.max(r/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:r,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},u=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("u">typeof document?document:null),m={moveHandler:e=>c("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),u(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(null==(t=e.touches[0])?void 0:t.clientX)}},f=!!function(){if("boolean"==typeof ny)return ny;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return ny=e}()&&{passive:!1};nv(o)?(null==p||p.addEventListener("touchmove",h.moveHandler,f),null==p||p.addEventListener("touchend",h.upHandler,f)):(null==p||p.addEventListener("mousemove",m.moveHandler,f),null==p||p.addEventListener("mouseup",m.upHandler,f)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?nb():null!=(n=e.initialState.columnSizingInfo)?n:nb())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function nA(e,t){var n,i,l;let o;return e?"function"==typeof(i=n=e)&&(o=Object.getPrototypeOf(i)).prototype&&o.prototype.isReactComponent||"function"==typeof n||"object"==typeof(l=n)&&"symbol"==typeof l.$$typeof&&["react.memo","react.forward_ref"].includes(l.$$typeof.description)?c.createElement(e,t):e:null}let nL="diffView",nM="previousDocument",nV="nextDocument";function nO(){let e,t,n,i=(0,s.c)(9),{navigate:l,state:o}=(0,b.useRouter)();i[0]!==l||i[1]!==o?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,r={...(0,te.fromPairs)(o._searchParams),...t?{[nL]:t}:{},...n?{[nM]:[n.type,n.id].join(",")}:{},...i?{[nV]:[i.type,i.id].join(",")}:{}};l({...o,_searchParams:(0,tt.toPairs)(r)})},i[0]=l,i[1]=o,i[2]=e):e=i[2];let r=e;i[3]!==l||i[4]!==o?(t=()=>{l({...o,_searchParams:(o._searchParams??[]).filter(nz)})},i[3]=l,i[4]=o,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==r?(n={navigateDiffView:r,exitDiffView:a},i[6]=a,i[7]=r,i[8]=n):n=i[8],n}function nz(e){let[t]=e;return![nL,nM,nV].includes(t)}let nB=["version"];function nN(e){let t,n,i,l,o,r,a,d,u=(0,s.c)(22);u[0]!==e?(t=void 0===e?{}:e,u[0]=e,u[1]=t):t=u[1];let{onParamsError:p}=t,{state:m}=(0,b.useRouter)();if(u[2]!==m._searchParams){let e=new URLSearchParams(m._searchParams);i=e.get(nM),n=e.get(nV),l=e.get(nL),u[2]=m._searchParams,u[3]=n,u[4]=i,u[5]=l}else n=u[3],i=u[4],l=u[5];let h=l,f=[i,n,h].some(nH),g=i??"",x=n??"",y=h??"";u[6]!==g||u[7]!==x||u[8]!==y?(o=function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,o]=e.split(",").filter(Boolean),[r,s]=t.split(",").filter(Boolean);return nB.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof o>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof r>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:o},next:{type:r,id:s}}}}}({previousDocument:g,nextDocument:x,mode:y}),u[6]=g,u[7]=x,u[8]=y,u[9]=o):o=u[9];let v=o;if(u[10]!==f||u[11]!==p||u[12]!==v.errors||u[13]!==v.result?(r=()=>{"error"===v.result&&f&&p?.(v.errors)},u[10]=f,u[11]=p,u[12]=v.errors,u[13]=v.result,u[14]=r):r=u[14],u[15]!==f||u[16]!==p||u[17]!==v?(a=[f,p,v],u[15]=f,u[16]=p,u[17]=v,u[18]=a):a=u[18],(0,c.useEffect)(r,a),"error"===v.result){let e;return u[19]===Symbol.for("react.memo_cache_sentinel")?(e={isActive:!1},u[19]=e):e=u[19],e}return u[20]!==v.params?(d={state:"ready",isActive:!0,...v.params},u[20]=v.params,u[21]=d):d=u[21],d}function nH(e){return null!==e}function n$(e){return null!==e}function nU(e,t){return(0,h.isPublishedId)(e)?"published":(0,h.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,f.getReleaseIdFromReleaseDocumentId)(t)===(0,h.getVersionFromId)(e))??(0,h.getVersionFromId)(e)}let nG=eA.styled.header.withConfig({displayName:"VersionModeHeaderLayout",componentId:"sc-w17umd-0"})`display:grid;grid-area:header;grid-template-columns:1fr min-content 1fr;border-block-end:1px solid var(--card-border-color);`,nq=eA.styled.div.withConfig({displayName:"VersionModeHeaderLayoutSection",componentId:"sc-w17umd-1"})`display:flex;justify-content:space-between;align-items:center;`,nW=e=>{let t,n,i,l,o,d,c,u,p,m,h,g,x,b,y,j,w=(0,s.c)(48),{documentId:I,state:S}=e,{t:C}=(0,f.useTranslation)(D);w[0]!==I?(t={documentId:I},w[0]=I,w[1]=t):t=w[1];let{data:_}=(0,f.useDocumentVersions)(t),{exitDiffView:T,navigateDiffView:R}=nO(),{documents:P}=nN(),E=(0,f.useActiveReleases)();w[2]!==_?(n=_.flatMap(nX),w[2]=_,w[3]=n):n=w[3];let k=n;if(w[4]!==E.data||w[5]!==k){let e;w[7]!==k?(e=e=>{let t=(0,f.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&k.includes(t)},w[7]=k,w[8]=e):e=w[8],i=E.data.filter(e),w[4]=E.data,w[5]=k,w[6]=i}else i=w[6];let F=i;w[9]!==E?(l=function({loading:e,error:t}){return e?"pending":"u">typeof t?"error":"ready"}(E),w[9]=E,w[10]=l):l=w[10];let A=l;w[11]!==P||w[12]!==R?(o=e=>{"u">typeof P?.previous&&R({previousDocument:{...P.previous,id:e}})},w[11]=P,w[12]=R,w[13]=o):o=w[13];let L=o;w[14]!==P||w[15]!==R?(d=e=>{"u">typeof P?.next&&R({nextDocument:{...P.next,id:e}})},w[14]=P,w[15]=R,w[16]=d):d=w[16];let M=d;return w[17]!==C?(c=C("compare-versions.title"),w[17]=C,w[18]=c):c=w[18],w[19]!==c?(u=(0,r.jsx)(a.Box,{padding:4,children:(0,r.jsx)(a.Text,{as:"h1",size:1,muted:!0,children:c})}),w[19]=c,w[20]=u):u=w[20],w[21]!==I||w[22]!==P||w[23]!==L||w[24]!==F||w[25]!==A||w[26]!==S?(p="u">typeof P?.previous&&(0,r.jsx)(nK,{releases:F,releasesState:A,onSelectRelease:L,role:"previous",documentId:I,state:S,document:P.previous}),w[21]=I,w[22]=P,w[23]=L,w[24]=F,w[25]=A,w[26]=S,w[27]=p):p=w[27],w[28]!==u||w[29]!==p?(m=(0,r.jsxs)(nq,{children:[u,p]}),w[28]=u,w[29]=p,w[30]=m):m=w[30],w[31]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)(a.Flex,{align:"center",paddingX:3,children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(v.TransferIcon,{})})}),w[31]=h):h=w[31],w[32]!==I||w[33]!==P||w[34]!==M||w[35]!==F||w[36]!==A||w[37]!==S?(g="u">typeof P?.next&&(0,r.jsx)(nK,{releases:F,releasesState:A,onSelectRelease:M,role:"next",documentId:I,state:S,document:P.next}),w[32]=I,w[33]=P,w[34]=M,w[35]=F,w[36]=A,w[37]=S,w[38]=g):g=w[38],w[39]===Symbol.for("react.memo_cache_sentinel")?(x={justifySelf:"end"},w[39]=x):x=w[39],w[40]!==T?(b=(0,r.jsx)(a.Box,{padding:3,style:x,children:(0,r.jsx)(a.Button,{icon:v.CloseIcon,mode:"bleed",onClick:T,padding:2})}),w[40]=T,w[41]=b):b=w[41],w[42]!==g||w[43]!==b?(y=(0,r.jsxs)(nq,{children:[g,b]}),w[42]=g,w[43]=b,w[44]=y):y=w[44],w[45]!==m||w[46]!==y?(j=(0,r.jsxs)(nG,{children:[m,h,y]}),w[45]=m,w[46]=y,w[47]=j):j=w[47],j},nK=e=>{let t,n,i,l,o,d,c,u,p,m,g=(0,s.c)(46),{releases:b,releasesState:y,onSelectRelease:j,role:w,documentId:I,document:S}=e;g[0]!==b?(t=void 0===b?[]:b,g[0]=b,g[1]=t):t=g[1];let C=t;g[2]!==S.id?(n=(0,h.getPublishedId)(S.id),g[2]=S.id,g[3]=n):n=g[3];let{published:_,draft:T}=(0,f.useEditState)(n,S.type);g[4]!==S.id||g[5]!==C?(i=nU(S.id,C),g[4]=S.id,g[5]=C,g[6]=i):i=g[6];let R=i,{t:P}=(0,f.useTranslation)(D),{t:E}=(0,f.useTranslation)(),{document:k}=(0,f.useWorkspace)(),{drafts:F}=k,{enabled:A}=F;if("error"===y){let e,t;return g[7]!==P?(e=P("compare-version.error.loadReleases.title"),g[7]=P,g[8]=e):e=g[8],g[9]!==e?(t=(0,r.jsx)(a.Badge,{tone:"critical",radius:3,children:e}),g[9]=e,g[10]=t):t=g[10],t}if(g[11]!==y||g[12]!==R||g[13]!==E||g[14]!==P?(l=function({selected:e,tCore:t,tStructure:n,releasesState:i}){if("pending"===i)return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,f.isReleaseDocument)(e)){let n=e?(0,f.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,r.jsx)(f.ReleaseAvatar,{padding:1,tone:n}),iconRight:e&&(0,f.isReleaseScheduledOrScheduling)(e)?(0,r.jsx)(v.LockIcon,{}):void 0,tone:n}}if((0,f.isSystemBundleName)(e)){let t="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,r.jsx)(f.ReleaseAvatar,{padding:1,tone:t}),tone:t}}return{text:e,icon:(0,r.jsx)(f.ReleaseAvatar,{padding:1,tone:"neutral"}),tone:"neutral"}}({selected:R,tCore:E,tStructure:P,releasesState:y}),g[11]=y,g[12]=R,g[13]=E,g[14]=P,g[15]=l):l=g[15],g[16]!==l?(o=(0,r.jsx)(a.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...l}),g[16]=l,g[17]=o):o=g[17],g[18]!==I||g[19]!==j||g[20]!==_||g[21]!==R?(d=_&&(0,r.jsx)(nY,{type:"published",onSelect:j,isSelected:"published"===R,documentId:I}),g[18]=I,g[19]=j,g[20]=_,g[21]=R,g[22]=d):d=g[22],g[23]!==I||g[24]!==T||g[25]!==A||g[26]!==j||g[27]!==R?(c=A&&T&&(0,r.jsx)(nY,{type:"draft",onSelect:j,isSelected:"draft"===R,documentId:I}),g[23]=I,g[24]=T,g[25]=A,g[26]=j,g[27]=R,g[28]=c):c=g[28],g[29]!==I||g[30]!==j||g[31]!==C||g[32]!==R){let e;g[34]!==I||g[35]!==j||g[36]!==R?(e=e=>(0,r.jsx)(nY,{release:e,onSelect:j,isSelected:"string"!=typeof R&&R?._id===e._id,documentId:I},e._id),g[34]=I,g[35]=j,g[36]=R,g[37]=e):e=g[37],u=C.map(e),g[29]=I,g[30]=j,g[31]=C,g[32]=R,g[33]=u}else u=g[33];return g[38]!==c||g[39]!==u||g[40]!==d?(p=(0,r.jsxs)(a.Menu,{children:[d,c,u]}),g[38]=c,g[39]=u,g[40]=d,g[41]=p):p=g[41],g[42]!==w||g[43]!==p||g[44]!==o?(m=(0,r.jsx)(x.MenuButton,{id:w,button:o,menu:p}),g[42]=w,g[43]=p,g[44]=o,g[45]=m):m=g[45],m},nY=e=>{let t,n,i,l,o,d,c,u,p,m,g,x,b,y,j=(0,s.c)(53),{type:w,release:I,onSelect:S,isSelected:C,documentId:_}=e,{t:T}=(0,f.useTranslation)(),{t:R}=(0,f.useTranslation)(D);j[0]!==_||j[1]!==S||j[2]!==I||j[3]!==w?(t=()=>{"draft"===w?S((0,h.getDraftId)(_)):"published"===w?S((0,h.getPublishedId)(_)):"u">typeof I?._id&&S((0,h.getVersionId)(_,(0,f.getReleaseIdFromReleaseDocumentId)(I._id)))},j[0]=_,j[1]=S,j[2]=I,j[3]=w,j[4]=t):t=j[4];let P=t;if(w){let e,t,n,i,l,o,s="published"===w?"positive":"caution";j[5]!==s?(e=(0,r.jsx)(f.ReleaseAvatar,{padding:2,tone:s}),j[5]=s,j[6]=e):e=j[6],j[7]!==w?(t=["compare-versions.status",w],j[7]=w,j[8]=t):t=j[8];let d=t.join(".");return j[9]!==d||j[10]!==R?(n=R(d),j[9]=d,j[10]=R,j[11]=n):n=j[11],j[12]!==n?(i=(0,r.jsx)(a.Box,{paddingY:2,children:(0,r.jsx)(a.Text,{size:1,weight:"medium",children:n})}),j[12]=n,j[13]=i):i=j[13],j[14]!==e||j[15]!==i?(l=(0,r.jsxs)(a.Flex,{gap:1,children:[e,i]}),j[14]=e,j[15]=i,j[16]=l):l=j[16],j[17]!==C||j[18]!==P||j[19]!==l?(o=(0,r.jsx)(a.MenuItem,{padding:1,paddingRight:3,onClick:P,pressed:C,children:l}),j[17]=C,j[18]=P,j[19]=l,j[20]=o):o=j[20],o}j[21]!==I?(n=I?(0,f.getReleaseTone)(I):"neutral",j[21]=I,j[22]=n):n=j[22];let E=n;j[23]!==E?(i=(0,r.jsx)(f.ReleaseAvatar,{padding:2,tone:E}),j[23]=E,j[24]=i):i=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(l={minWidth:0},j[25]=l):l=j[25];let k=I.metadata.title;return j[26]!==T?(o=T("release.placeholder-untitled-release"),j[26]=T,j[27]=o):o=j[27],j[28]===Symbol.for("react.memo_cache_sentinel")?(d={size:1,weight:"medium"},j[28]=d):d=j[28],j[29]!==I.metadata.title||j[30]!==o?(c=(0,r.jsx)(f.ReleaseTitle,{title:k,fallback:o,textProps:d}),j[29]=I.metadata.title,j[30]=o,j[31]=c):c=j[31],j[32]!==I.metadata.releaseType||j[33]!==T?(u=["asap","undecided"].includes(I.metadata.releaseType)&&(0,r.jsx)(a.Text,{muted:!0,size:1,children:T(`release.type.${I.metadata.releaseType}`)}),j[32]=I.metadata.releaseType,j[33]=T,j[34]=u):u=j[34],j[35]!==I?(p="scheduled"===I.metadata.releaseType&&(0,r.jsx)(a.Text,{muted:!0,size:1,children:(0,f.formatRelativeLocalePublishDate)(I)}),j[35]=I,j[36]=p):p=j[36],j[37]!==p||j[38]!==c||j[39]!==u?(m=(0,r.jsxs)(a.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,style:l,children:[c,u,p]}),j[37]=p,j[38]=c,j[39]=u,j[40]=m):m=j[40],j[41]!==I?(g=(0,f.isReleaseScheduledOrScheduling)(I)&&(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(v.LockIcon,{})})}),j[41]=I,j[42]=g):g=j[42],j[43]!==g?(x=(0,r.jsx)(a.Flex,{flex:"none",children:g}),j[43]=g,j[44]=x):x=j[44],j[45]!==m||j[46]!==x||j[47]!==i?(b=(0,r.jsxs)(a.Flex,{gap:1,children:[i,m,x]}),j[45]=m,j[46]=x,j[47]=i,j[48]=b):b=j[48],j[49]!==C||j[50]!==P||j[51]!==b?(y=(0,r.jsx)(a.MenuItem,{padding:1,paddingRight:3,onClick:P,pressed:C,children:b}),j[49]=C,j[50]=P,j[51]=b,j[52]=y):y=j[52],y};function nX(e){return(0,h.getVersionFromId)(e)??[]}let nQ=eA.styled.div.withConfig({displayName:"DialogLayout",componentId:"sc-x0jh85-0"})`--offset-block:40px;display:grid;height:calc(100vh - var(--offset-block));min-height:0;overflow:hidden;grid-template-areas:'header header' 'previous-document next-document';grid-template-columns:1fr 1fr;grid-template-rows:min-content minmax(0,1fr);`;function nJ(e){return e.document?.components?.unstable_layout}function nZ(e){return e.path}function n0(e,t){return(0,tT.default)(e.path,t.path)}let n1=eA.styled.div.withConfig({displayName:"Scroller",componentId:"sc-16z7cpf-0"})`position:relative;height:100%;overflow:auto;scroll-behavior:smooth;scrollbar-width:var(--scrollbar-width);overscroll-behavior:contain;will-change:scroll-position;`,n2=(0,eA.styled)(a.Card).withConfig({displayName:"DiffViewPaneLayout",componentId:"sc-1856b20-0"})`position:relative;grid-area:var(--grid-area);`,n3=(0,eA.styled)(a.Container).withConfig({displayName:"Container",componentId:"sc-1856b20-1"})`width:auto;`,n4=(0,c.forwardRef)(function(e,t){let n,i,l,o,p,m,h,g,x,b,y,v,j=(0,s.c)(36),{role:w,documentType:I,documentId:S,scrollElement:C,syncChannel:_,compareDocument:T}=e,R=(0,c.useRef)(null),[P,E]=(0,c.useState)(null),[D,k]=(0,c.useState)(null);j[0]!==T||j[1]!==S||j[2]!==I||j[3]!==w||j[4]!==C||j[5]!==_?(n=()=>(0,r.jsx)(n5,{compareDocument:T,documentId:S,documentType:I,role:w,scrollElement:C,syncChannel:_}),j[0]=T,j[1]=S,j[2]=I,j[3]=w,j[4]=C,j[5]=_,j[6]=n):n=j[6];let F=n;j[7]!==F?(i={pick:nJ,defaultComponent:F},j[7]=F,j[8]=i):i=j[8];let A=(0,f.useMiddlewareComponents)(i);j[9]===Symbol.for("react.memo_cache_sentinel")?(l={isInteractive:!1,onOpenReviewChanges:tn.noop,onSetFocus:tn.noop,isReviewChangesOpen:!1},j[9]=l):l=j[9];let L=`${w}-document`;j[10]!==L?(o={"--grid-area":L},j[10]=L,j[11]=o):o=j[11];let M=o,V="next"===w,O="next"!==w&&"none";j[12]!==O?(p={"--scrollbar-width":O},j[12]=O,j[13]=p):p=j[13];let z=p;return j[14]!==A||j[15]!==S||j[16]!==I?(m=(0,r.jsx)(d.DialogProvider,{position:"absolute",children:(0,r.jsx)(n3,{ref:R,padding:4,width:1,children:(0,r.jsx)(A,{documentId:S,documentType:I})})}),j[14]=A,j[15]=S,j[16]=I,j[17]=m):m=j[17],j[18]!==P||j[19]!==m?(h=(0,r.jsx)(a.PortalProvider,{element:P,children:m}),j[18]=P,j[19]=m,j[20]=h):h=j[20],j[21]!==t||j[22]!==z||j[23]!==h?(g=(0,r.jsx)(n1,{ref:t,style:z,children:h}),j[21]=t,j[22]=z,j[23]=h,j[24]=g):g=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:E}),j[25]=x):x=j[25],j[26]!==g||j[27]!==M||j[28]!==V?(b=(0,r.jsxs)(n2,{ref:k,style:M,borderLeft:V,children:[g,x]}),j[26]=g,j[27]=M,j[28]=V,j[29]=b):b=j[29],j[30]!==D||j[31]!==b?(y=(0,r.jsx)(a.BoundaryElementProvider,{element:D,children:b}),j[30]=D,j[31]=b,j[32]=y):y=j[32],j[33]!==C||j[34]!==y?(v=(0,r.jsx)(u.ReviewChangesContext.Provider,{value:l,children:(0,r.jsx)(f.ChangeIndicatorsTracker,{children:(0,r.jsx)(f.VirtualizerScrollInstanceProvider,{scrollElement:C,containerElement:R,children:y})})}),j[33]=C,j[34]=y,j[35]=v):v=j[35],v}),n5=e=>{var t,n;let i,l,o,a,d,p,m,g,x,b,y,v=(0,s.c)(52),{role:j,documentType:w,documentId:I,syncChannel:S,compareDocument:C}=e;v[0]!==C?(i={compareDocument:C},v[0]=C,v[1]=i):i=v[1];let _=function(e){let t,n,i,l=(0,s.c)(4),{compareDocument:o}=e;l[0]!==o.id?(t=(0,h.getPublishedId)(o.id),l[0]=o.id,l[1]=t):t=l[1];let r=o.type;l[2]!==o.id?(n=(0,h.getVersionFromId)(o.id),l[2]=o.id,l[3]=n):n=l[3];let a=(0,f.useEditState)(t,r,"low",n);e:{if((0,h.isVersionId)(o.id)){i=a.version??void 0;break e}if((0,h.isDraftId)(o.id)){i=a.draft??void 0;break e}if((0,h.isPublishedId)(o.id)){i=a.published??void 0;break e}i=void 0}return i}(i),{data:T}=(0,f.useActiveReleases)(),[R]=(0,c.useState)(n6);v[2]!==I||v[3]!==T?(l=nU(I,T),v[2]=I,v[3]=T,v[4]=l):l=v[4];let P=l;v[5]!==I?(o=(0,h.getPublishedId)(I),v[5]=I,v[6]=o):o=v[6],v[7]!==I?(t=I,a=(0,h.isVersionId)(t)?(0,h.getVersionFromId)(t):(0,h.isPublishedId)(t)?"published":void 0,v[7]=I,v[8]=a):a=v[8],v[9]!==I?(d=(0,h.getVersionFromId)(I),v[9]=I,v[10]=d):d=v[10],v[11]!==_||v[12]!==w||v[13]!==o||v[14]!==a||v[15]!==d?(p={documentId:o,documentType:w,selectedPerspectiveName:a,releaseId:d,comparisonValue:_,displayInlineChanges:!0},v[11]=_,v[12]=w,v[13]=o,v[14]=a,v[15]=d,v[16]=p):p=v[16];let{formState:E,onChange:D,onFocus:k,onBlur:F,onSetActiveFieldGroup:A,onSetCollapsedFieldSet:L,onSetCollapsedPath:M,collapsedFieldSets:V,ready:O,collapsedPaths:z,schemaType:B,value:N,onProgrammaticFocus:H,openPath:$,onPathOpen:U}=(0,f.useDocumentForm)(p),G=null===E||!O;v[17]!==j||v[18]!==S?(m={id:j,syncChannel:S},v[17]=j,v[18]=S,v[19]=m):m=v[19];let q=function(e){let t,n,i,l=(0,s.c)(11),{syncChannel:o,id:r}=e;l[0]!==r||l[1]!==o?(t=e=>o.next({...e,source:r}),l[0]=r,l[1]=o,l[2]=t):t=l[2];let a=t;if(l[3]!==r||l[4]!==o){let e;l[6]!==r?(e=e=>{let{source:t}=e;return t!==r},l[6]=r,l[7]=e):e=l[7],n=o.pipe((0,eO.distinctUntilChanged)(n0),(0,ez.filter)(e),(0,eB.map)(nZ)),l[3]=r,l[4]=o,l[5]=n}else n=l[5];let d=n;return l[8]!==d||l[9]!==a?(i={path:d,push:a},l[8]=d,l[9]=a,l[10]=i):i=l[10],i}(m);v[20]!==U||v[21]!==q||v[22]!==j?(g=e=>{U(e),q.push({source:j,path:e})},v[20]=U,v[21]=q,v[22]=j,v[23]=g):g=v[23];let W=g;return v[24]!==U||v[25]!==H||v[26]!==q.path?(x=()=>{let e=q.path.subscribe(e=>{U(e),H(e)});return()=>e.unsubscribe()},v[24]=U,v[25]=H,v[26]=q.path,v[27]=x):x=v[27],v[28]!==U||v[29]!==H||v[30]!==q.path||v[31]!==j?(b=[U,H,q.path,j],v[28]=U,v[29]=H,v[30]=q.path,v[31]=j,v[32]=b):b=v[32],(0,c.useEffect)(x,b),v[33]!==V||v[34]!==z||v[35]!==_||v[36]!==E||v[37]!==G||v[38]!==F||v[39]!==D||v[40]!==k||v[41]!==W||v[42]!==A||v[43]!==L||v[44]!==M||v[45]!==$||v[46]!==R||v[47]!==P||v[48]!==j||v[49]!==B||v[50]!==N?(y=G?(0,r.jsx)(f.LoadingBlock,{showText:!0}):(0,r.jsx)(u.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,r.jsx)(f.FormBuilder,{__internal_patchChannel:R,id:`diffView-pane-${j}`,onChange:D,onPathFocus:k,onPathOpen:W,onPathBlur:F,onFieldGroupSelect:A,onSetFieldSetCollapsed:L,onSetPathCollapsed:M,collapsedPaths:z,collapsedFieldSets:V,focusPath:E.focusPath,openPath:$,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(n=P)?"drafts":n,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:B,value:N,compareValue:_})}),v[33]=V,v[34]=z,v[35]=_,v[36]=E,v[37]=G,v[38]=F,v[39]=D,v[40]=k,v[41]=W,v[42]=A,v[43]=L,v[44]=M,v[45]=$,v[46]=R,v[47]=P,v[48]=j,v[49]=B,v[50]=N,v[51]=y):y=v[51],y};function n6(){return(0,f.createPatchChannel)()}let n8=eA.styled.a.withConfig({displayName:"Link",componentId:"sc-ihhvnj-0"})`flex:1;text-decoration:none;color:inherit;`,n7=e=>{let t,n,i=(0,s.c)(6),{children:l,documentId:o,documentType:a}=e;i[0]!==o||i[1]!==a?(t={intent:"edit",params:{id:o,type:a}},i[0]=o,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,b.useIntentLink)(t);return i[3]!==l||i[4]!==d?(n=(0,r.jsx)(n8,{href:d,target:"_blank",rel:"noopener noreferrer",children:l}),i[3]=l,i[4]=d,i[5]=n):n=i[5],n},n9=e=>{var t;let n,i,l,o,a,d,p,m,h,f,g,b,y=(0,s.c)(24),{documentId:v}=e,{documents:j,state:w,mode:I}=nN(),{exitDiffView:S}=nO(),C=((h=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(m=new eV.Subject,h[0]=m):m=h[0],m),[_,T]=(0,c.useState)(null),[R,P]=(0,c.useState)(null),E=(0,c.useContext)(u.ReferenceInputOptionsContext);y[0]!==E?(n={...E,disableNew:!0,EditReferenceLinkComponent:n7},y[0]=E,y[1]=n):n=y[1];let D=n;return y[2]!==R||y[3]!==_?(i=[_,R],y[2]=R,y[3]=_,y[4]=i):i=y[4],t=i,(b=(0,s.c)(3))[0]!==t?(f=()=>{let e=t.filter(n$);if(0===e.length)return;let n=new t_(e);return()=>n.destroy()},g=[t],b[0]=t,b[1]=f,b[2]=g):(f=b[1],g=b[2]),(0,c.useEffect)(f,g),y[5]!==v||y[6]!==I||y[7]!==w?(l="version"===I&&(0,r.jsx)(nW,{documentId:v,state:w}),y[5]=v,y[6]=I,y[7]=w,y[8]=l):l=y[8],y[9]!==j||y[10]!==R||y[11]!==_||y[12]!==w||y[13]!==C?(o="ready"===w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n4,{documentType:j.previous.type,documentId:j.previous.id,role:"previous",ref:T,scrollElement:_,syncChannel:C,compareDocument:j.previous}),(0,r.jsx)(n4,{documentType:j.next.type,documentId:j.next.id,role:"next",ref:P,scrollElement:R,syncChannel:C,compareDocument:j.previous})]}),y[9]=j,y[10]=R,y[11]=_,y[12]=w,y[13]=C,y[14]=o):o=y[14],y[15]!==l||y[16]!==o?(a=(0,r.jsxs)(nQ,{children:[l,o]}),y[15]=l,y[16]=o,y[17]=a):a=y[17],y[18]!==S||y[19]!==a?(d=(0,r.jsx)(x.Dialog,{id:"diffView",width:"auto",onClose:S,padding:!1,__unstable_hideCloseButton:!0,children:a}),y[18]=S,y[19]=a,y[20]=d):d=y[20],y[21]!==D||y[22]!==d?(p=(0,r.jsx)(u.ReferenceInputOptionsContext.Provider,{value:D,children:d}),y[21]=D,y[22]=d,y[23]=p):p=y[23],p},ie=e=>{let t,n,i,l=(0,s.c)(9),{children:o,documentId:a}=e,c=(0,d.useToast)(),{t:u}=(0,f.useTranslation)(D);l[0]!==u||l[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,r.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,r.jsx)("li",{children:u(`compare-version.error.${t}`,{input:n})},t)})})})}},l[0]=u,l[1]=c,l[2]=t):t=l[2];let{isActive:p}=nN(t);return l[3]!==a||l[4]!==p?(n=p&&(0,r.jsx)(n9,{documentId:a}),l[3]=a,l[4]=p,l[5]=n):n=l[5],l[6]!==o||l[7]!==n?(i=(0,r.jsxs)(r.Fragment,{children:[o,n]}),l[6]=o,l[7]=n,l[8]=i):i=l[8],i};function it(){let e=(0,c.useContext)(u.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let ii=(0,eA.styled)(a.Layer).withConfig({displayName:"Root",componentId:"sc-k0eo57-0"})`position:relative;width:1px;min-width:1px;&:before{content:'';display:block;position:absolute;top:0;left:0;bottom:0;width:1px;background-color:var(--card-border-color);}&:not([data-disabled]){cursor:ew-resize;width:9px;min-width:9px;margin:0 -4px;&:before{left:4px;}&:after{content:'';display:block;position:absolute;top:0;left:0;width:9px;bottom:0;background-color:var(--card-border-color);opacity:0;transition:opacity 150ms;}&[data-dragging]:after,&:hover:after{opacity:0.2;}}`;function il(e){let t,n,i=(0,s.c)(7),{disabled:l,element:o}=e,{resize:a}=it(),[d,u]=(0,c.useState)(!1);i[0]!==o||i[1]!==a?(t=e=>{if(!o)return;u(!0),e.preventDefault();let t=e.pageX;a("start",o,0);let n=e=>{e.preventDefault(),a("move",o,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",o,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=o,i[1]=a,i[2]=t):t=i[2];let p=t,m=l?"":void 0,h=d?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,r.jsx)(ii,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let io=(0,eA.styled)(a.Card).withConfig({displayName:"Root",componentId:"sc-o2std4-0"})`outline:none;box-shadow:1px 0 0 var(--card-border-color);`,ir=(0,c.forwardRef)(function(e,t){let n,i,l,o,d,p,m,h,g,x,b,y,v,j,w,I,S,C,_,T,R,P,E,D,k,F,A,L,M,V=(0,s.c)(86);V[0]!==e?({children:n,currentMinWidth:l,currentMaxWidth:i,flex:h,id:o,minWidth:p,maxWidth:d,selected:g,...m}=e,V[0]=e,V[1]=n,V[2]=i,V[3]=l,V[4]=o,V[5]=d,V[6]=p,V[7]=m,V[8]=h,V[9]=g):(n=V[1],i=V[2],l=V[3],o=V[4],d=V[5],p=V[6],m=V[7],h=V[8],g=V[9]);let O=void 0===h?1:h,z=void 0!==g&&g,[B,N]=(0,c.useState)(null),{collapse:H,collapsed:$,expand:U,expandedElement:G,mount:q,panes:W}=it();if(V[10]!==W||V[11]!==B){let e;V[14]!==B?(e=e=>e.element===B,V[14]=B,V[15]=e):e=V[15],b=(x=W.find(e))&&W.indexOf(x),V[10]=W,V[11]=B,V[12]=x,V[13]=b}else x=V[12],b=V[13];let K=b,Y="number"==typeof K?W[K+1]:void 0,X=K===W.length-1,Q=G===B,J=!$&&(x?.collapsed||!1),Z=Y?.collapsed||!1,ee=(0,c.useRef)(null),et=x?.flex??O,en=x?.currentMinWidth??l,ei=x?.currentMaxWidth??i;V[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>ee.current,V[16]=y):y=V[16],(0,c.useImperativeHandle)(t,y),V[17]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{N(e),ee.current=e},V[17]=v):v=V[17];let el=v;V[18]!==i||V[19]!==l||V[20]!==O||V[21]!==o||V[22]!==d||V[23]!==p||V[24]!==q||V[25]!==B?(j=()=>{if(B)return q(B,{currentMinWidth:l,currentMaxWidth:i,flex:O,id:o,minWidth:p,maxWidth:d})},w=[l,i,O,o,p,d,q,B],V[18]=i,V[19]=l,V[20]=O,V[21]=o,V[22]=d,V[23]=p,V[24]=q,V[25]=B,V[26]=j,V[27]=w):(j=V[26],w=V[27]),(0,c.useLayoutEffect)(j,w),V[28]!==H||V[29]!==B?(I=()=>{B&&H(B)},V[28]=H,V[29]=B,V[30]=I):I=V[30];let eo=I;V[31]!==U||V[32]!==B?(S=()=>{B&&U(B)},V[31]=U,V[32]=B,V[33]=S):S=V[33];let er=S,es=!$&&J;V[34]!==eo||V[35]!==er||V[36]!==X||V[37]!==K||V[38]!==B||V[39]!==es?(C={collapse:eo,collapsed:es,expand:er,index:K,isLast:X,rootElement:B},V[34]=eo,V[35]=er,V[36]=X,V[37]=K,V[38]=B,V[39]=es,V[40]=C):C=V[40];let ea=C;e:{if($){_=void 0;break e}if(J){_=51;break e}if(0===en||X){_=p||204;break e}_=en||p||204}let ed=_;t:{if(J){T=51;break t}if($&&X){T=void 0;break t}if(X){if(d){T=ei??d;break t}T=void 0;break t}T=ei??d}let ec=T,eu=$&&!X;V[41]!==J||V[42]!==X||V[43]!==$||V[44]!==Z||V[45]!==B?(R=!X&&!$&&(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,r.jsx)(il,{disabled:J||Z,element:B})}),V[41]=J,V[42]=X,V[43]=$,V[44]=Z,V[45]=B,V[46]=R):R=V[46];let ep=R,em=ec===1/0?void 0:ec;V[47]!==et||V[48]!==ed||V[49]!==em?(P={flex:et,minWidth:ed,maxWidth:em},V[47]=et,V[48]=ed,V[49]=em,V[50]=P):P=V[50];let eh=P,ef=$?void 0:"hidden",eg=J?"":void 0,ex=z?"":void 0;return V[51]!==J||V[52]!==ei||V[53]!==en||V[54]!==Q||V[55]!==et||V[56]!==ec||V[57]!==ed||V[58]!==K?(E=!1,V[51]=J,V[52]=ei,V[53]=en,V[54]=Q,V[55]=et,V[56]=ec,V[57]=ed,V[58]=K,V[59]=E):E=V[59],V[60]!==n||V[61]!==eu?(D=!eu&&(0,r.jsx)(a.Flex,{direction:"column",height:"fill",children:n}),V[60]=n,V[61]=eu,V[62]=D):D=V[62],V[63]!==B||V[64]!==D?(k=(0,r.jsx)(a.BoundaryElementProvider,{element:B,children:D}),V[63]=B,V[64]=D,V[65]=k):k=V[65],V[66]!==eu||V[67]!==o||V[68]!==K||V[69]!==m||V[70]!==eh||V[71]!==ef||V[72]!==eg||V[73]!==ex||V[74]!==E||V[75]!==k?(F=(0,r.jsxs)(io,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:eu,id:o,overflow:ef,...m,"data-pane-collapsed":eg,"data-pane-index":K,"data-pane-selected":ex,ref:el,style:eh,children:[E,k]}),V[66]=eu,V[67]=o,V[68]=K,V[69]=m,V[70]=eh,V[71]=ef,V[72]=eg,V[73]=ex,V[74]=E,V[75]=k,V[76]=F):F=V[76],V[77]!==X||V[78]!==F?(A=(0,r.jsx)(f.IsLastPaneProvider,{isLastPane:X,children:F}),V[77]=X,V[78]=F,V[79]=A):A=V[79],V[80]!==ea||V[81]!==A?(L=(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"pane",children:(0,r.jsx)(u.PaneContext.Provider,{value:ea,children:A})}),V[80]=ea,V[81]=A,V[82]=L):L=V[82],V[83]!==ep||V[84]!==L?(M=(0,r.jsxs)(r.Fragment,{children:[L,ep]}),V[83]=ep,V[84]=L,V[85]=M):M=V[85],M}),is=(0,eA.styled)(a.Card).withConfig({displayName:"Root",componentId:"sc-ok1xda-0"})`position:relative;outline:none;`;function ia(){let e=(0,c.useContext)(u.PaneContext);if(!e)throw Error("Pane: missing context value");return e}is.displayName="PaneContent__root";let id=(0,c.forwardRef)(function(e,t){let n,i,l,o,a,d,c=(0,s.c)(14);c[0]!==e?({as:n,children:i,overflow:l,padding:o,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=o,c[5]=a):(n=c[1],i=c[2],l=c[3],o=c[4],a=c[5]);let{collapsed:u}=ia(),{collapsed:p}=it(),m=p?void 0:l;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==o||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,r.jsx)(is,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:o,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=o,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function ic(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let iu={constrainSize:!0,placement:"left-start",portal:!0};function ip(e){let t,n,i,l,o=(0,s.c)(35),{disabled:d,isAfterGroup:c,node:u}=e,p=(0,f.useGetI18nText)("i18n"in u?u:void 0);if("divider"===u.type){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(a.MenuDivider,{}),o[0]=e):e=o[0],e}o[1]!==p||o[2]!==u?(t=p(u),o[1]=p,o[2]=u,o[3]=t):t=o[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return o[4]!==c?(e=c&&(0,r.jsx)(a.MenuDivider,{}),o[4]=c,o[5]=e):e=o[5],o[6]!==d||o[7]!==u.children||o[8]!==u.disabled?(t=u.children.map((e,t)=>(0,r.jsx)(ip,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),o[6]=d,o[7]=u.children,o[8]=u.disabled,o[9]=t):t=o[9],o[10]!==e||o[11]!==t?(n=(0,r.jsxs)(r.Fragment,{children:[e,t]}),o[10]=e,o[11]=t,o[12]=n):n=o[12],n}o[13]!==c?(e=c&&(0,r.jsx)(a.MenuDivider,{}),o[13]=c,o[14]=e):e=o[14];let l=u.icon;return o[15]!==d||o[16]!==u.children||o[17]!==u.disabled?(t=u.children.map((e,t)=>(0,r.jsx)(ip,{disabled:d||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),o[15]=d,o[16]=u.children,o[17]=u.disabled,o[18]=t):t=o[18],o[19]!==d||o[20]!==u.icon||o[21]!==t||o[22]!==m?(n=(0,r.jsx)(tb.MenuGroup,{disabled:d,icon:l,popover:iu,text:m,children:t}),o[19]=d,o[20]=u.icon,o[21]=t,o[22]=m,o[23]=n):n=o[23],o[24]!==e||o[25]!==n?(i=(0,r.jsxs)(r.Fragment,{children:[e,n]}),o[24]=e,o[25]=n,o[26]=i):i=o[26],i}return o[27]!==c?(n=c&&(0,r.jsx)(a.MenuDivider,{}),o[27]=c,o[28]=n):n=o[28],o[29]!==d||o[30]!==u?(i=(0,r.jsx)(im,{disabled:d,node:u}),o[29]=d,o[30]=u,o[31]=i):i=o[31],o[32]!==n||o[33]!==i?(l=(0,r.jsxs)(r.Fragment,{children:[n,i]}),o[32]=n,o[33]=i,o[34]=l):l=o[34],l}function im(e){let t,n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,r.jsx)(ig,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,r.jsx)(ih,{...e}),n[3]=e,n[4]=t):t=n[4],t}function ih(e){let t,n,i,l,o,d=(0,s.c)(19),{disabled:c,node:u}=e;d[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,r.jsx)(a.Text,{size:1,children:u.disabled.reason}),d[0]=u.disabled,d[1]=t):t=d[1];let p=t,{title:m}=(0,f.useI18nText)(u),h=u.selected&&!u.hideSelectionIndicator,g=c||!!u.disabled;d[2]!==u.hotkey?(n=u.hotkey?.split("+"),d[2]=u.hotkey,d[3]=n):n=d[3];let b=u.icon,y=u.iconRight||h&&v.CheckmarkIcon,j=u.onAction,w=u.tone;d[4]!==u.title?(i=ic(u.title),d[4]=u.title,d[5]=i):i=d[5];let I=`action-${i}`;return d[6]!==u.icon||d[7]!==u.onAction||d[8]!==u.tone||d[9]!==h||d[10]!==g||d[11]!==n||d[12]!==y||d[13]!==I||d[14]!==m?(l=(0,r.jsx)(x.MenuItem,{disabled:g,hotkeys:n,icon:b,iconRight:y,onClick:j,pressed:h,text:m,tone:w,"data-testid":I}),d[6]=u.icon,d[7]=u.onAction,d[8]=u.tone,d[9]=h,d[10]=g,d[11]=n,d[12]=y,d[13]=I,d[14]=m,d[15]=l):l=d[15],d[16]!==l||d[17]!==p?(o=(0,r.jsx)(f.TooltipOfDisabled,{content:p,placement:"left",children:l}),d[16]=l,d[17]=p,d[18]=o):o=d[18],o}function ig(e){let t,n,i,l,o,d,c=(0,s.c)(23),{disabled:u,intent:p,node:m}=e;c[0]!==m.disabled?(t="object"==typeof m.disabled&&(0,r.jsx)(a.Text,{size:1,children:m.disabled.reason}),c[0]=m.disabled,c[1]=t):t=c[1];let h=t;c[2]!==p.params||c[3]!==p.type?(n={intent:p.type,params:p.params},c[2]=p.params,c[3]=p.type,c[4]=n):n=c[4];let g=(0,b.useIntentLink)(n);c[5]!==g||c[6]!==m?(i=e=>{g.onClick(e),m.onAction()},c[5]=g,c[6]=m,c[7]=i):i=c[7];let y=i,{title:j}=(0,f.useI18nText)(m),w=m.selected&&!m.hideSelectionIndicator,I=u||!!m.disabled;c[8]!==m.hotkey?(l=m.hotkey?.split("+"),c[8]=m.hotkey,c[9]=l):l=c[9];let S=w?v.CheckmarkIcon:void 0;return c[10]!==y||c[11]!==g.href||c[12]!==m.icon||c[13]!==m.tone||c[14]!==w||c[15]!==I||c[16]!==l||c[17]!==S||c[18]!==j?(o=(0,r.jsx)(x.MenuItem,{as:"a",disabled:I,hotkeys:l,href:g.href,icon:m.icon,iconRight:S,onClick:y,pressed:w,text:j,tone:m.tone}),c[10]=y,c[11]=g.href,c[12]=m.icon,c[13]=m.tone,c[14]=w,c[15]=I,c[16]=l,c[17]=S,c[18]=j,c[19]=o):o=c[19],c[20]!==o||c[21]!==h?(d=(0,r.jsx)(f.TooltipOfDisabled,{content:h,placement:"left",children:o}),c[20]=o,c[21]=h,c[22]=d):d=c[22],d}let ix={constrainSize:!0,placement:"bottom",portal:!0};function ib(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&ib(e.children,t))}function iy(e){let t,n,i,l,o,d=(0,s.c)(13),{nodes:u,actionsNodes:p}=e,m=(0,c.useId)(),h=ib(u,"critical"),g=ib(u,"caution"),b=h?"critical":g?"caution":void 0;return d[0]!==b?(t=(0,r.jsx)(f.ContextMenuButton,{tone:b,"data-testid":"pane-context-menu-button"}),d[0]=b,d[1]=t):t=d[1],d[2]!==p?(n=p&&(0,r.jsxs)(r.Fragment,{children:[p,(0,r.jsx)(a.MenuDivider,{})]}),d[2]=p,d[3]=n):n=d[3],d[4]!==u?(i=u.map((e,t)=>{let n=u[t-1]?.type==="group";return(0,r.jsx)(ip,{isAfterGroup:n,node:e},e.key)}),d[4]=u,d[5]=i):i=d[5],d[6]!==n||d[7]!==i?(l=(0,r.jsxs)(a.Menu,{children:[n,i]}),d[6]=n,d[7]=i,d[8]=l):l=d[8],d[9]!==m||d[10]!==t||d[11]!==l?(o=(0,r.jsx)(x.MenuButton,{button:t,id:m,menu:l,popover:ix}),d[9]=m,d[10]=t,d[11]=l,d[12]=o):o=d[12],o}let iv=(0,eA.styled)(a.Layer).withConfig({displayName:"Root",componentId:"sc-rwc61s-0"})`position:sticky;bottom:0;`,ij=(0,eA.styled)(a.Card).withConfig({displayName:"RootCard",componentId:"sc-rwc61s-1"})`padding-bottom:env(safe-area-inset-bottom);`,iw=(0,c.forwardRef)(function(e,t){let n,i,l=(0,s.c)(7),{children:o,padding:d}=e,{collapsed:c}=ia();return l[0]!==o||l[1]!==d?(n=(0,r.jsx)(ij,{tone:"inherit",children:(0,r.jsx)(a.Box,{padding:d,children:o})}),l[0]=o,l[1]=d,l[2]=n):n=l[2],l[3]!==c||l[4]!==t||l[5]!==n?(i=(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,r.jsx)(iv,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),l[3]=c,l[4]=t,l[5]=n,l[6]=i):i=l[6],i}),iI=(0,eA.styled)(a.Layer).withConfig({displayName:"Root",componentId:"sc-2mpzxb-0"})(({$border:e})=>eA.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),iS=(0,eA.styled)(a.Flex).withConfig({displayName:"Layout",componentId:"sc-2mpzxb-1"})`transform-origin:calc(51px / 2);[data-collapsed] > div > &{transform:rotate(90deg);}`,iC=(0,eA.styled)(a.Card).withConfig({displayName:"TitleCard",componentId:"sc-2mpzxb-2"})(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return eA.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),i_=(0,eA.styled)(d.TextSkeleton).withConfig({displayName:"TitleTextSkeleton",componentId:"sc-2mpzxb-3"})`width:66%;max-width:175px;`,iT=(0,eA.styled)(a.Text).withConfig({displayName:"TitleText",componentId:"sc-2mpzxb-4"})`cursor:default;outline:none;`,iR=(0,c.forwardRef)(function(e,t){let n,i,l,o,c,u,p,m,h,g,x,b,y,v=(0,s.c)(48),{actions:j,backButton:w,border:I,contentAfter:S,loading:C,subActions:_,tabs:T,tabIndex:R,title:P,appendTitle:E}=e,{collapse:D,collapsed:k,expand:F,rootElement:A}=ia(),L=(0,d.useElementRect)(A||null),M=k?L?.height||window.innerHeight:void 0;v[0]!==M?(n={width:M},v[0]=M,v[1]=n):n=v[1];let V=n;v[2]!==D||v[3]!==k?(i=()=>{k||D()},v[2]=D,v[3]=k,v[4]=i):i=v[4];let O=i;v[5]!==k||v[6]!==F?(l=()=>{k&&F()},v[5]=k,v[6]=F,v[7]=l):l=v[7];let z=l,B=!!(!k&&(T||_)),N=k?"":void 0,H=k?"":void 0;v[8]!==w?(o=w&&(0,r.jsx)(a.Box,{flex:"none",children:w}),v[8]=w,v[9]=o):o=v[9];let $=w?1:2;v[10]!==C?(c=C&&(0,r.jsx)(a.Box,{children:(0,r.jsx)(i_,{animated:!0,radius:1,size:1})}),v[10]=C,v[11]=c):c=v[11],v[12]!==E||v[13]!==C||v[14]!==P?(u=!C&&(0,r.jsxs)(a.Flex,{align:"center",gap:1,children:[(0,r.jsx)(iT,{size:1,textOverflow:"ellipsis",weight:"semibold",children:P}),E]}),v[12]=E,v[13]=C,v[14]=P,v[15]=u):u=v[15],v[16]!==O||v[17]!==$||v[18]!==c||v[19]!==u||v[20]!==R?(p=(0,r.jsxs)(iC,{__unstable_focusRing:!0,flex:1,onClick:O,paddingLeft:$,padding:2,tabIndex:R,children:[c,u]}),v[16]=O,v[17]=$,v[18]=c,v[19]=u,v[20]=R,v[21]=p):p=v[21],v[22]!==j||v[23]!==k?(m=j&&(0,r.jsx)(a.Box,{hidden:k,children:(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"paneHeader",children:j})}),v[22]=j,v[23]=k,v[24]=m):m=v[24],v[25]!==p||v[26]!==m||v[27]!==o?(h=(0,r.jsxs)(a.Flex,{align:"flex-start",gap:3,children:[o,p,m]}),v[25]=p,v[26]=m,v[27]=o,v[28]=h):h=v[28],v[29]!==k||v[30]!==B||v[31]!==_||v[32]!==T?(g=B&&(0,r.jsxs)(a.Flex,{align:"center",hidden:k,overflow:"auto",children:[(0,r.jsx)(a.Box,{flex:1,marginRight:3*!!_,children:T}),_]}),v[29]=k,v[30]=B,v[31]=_,v[32]=T,v[33]=g):g=v[33],v[34]!==z||v[35]!==V||v[36]!==h||v[37]!==g?(x=(0,r.jsxs)(iS,{direction:"column",gap:3,onClick:z,padding:3,sizing:"border",style:V,children:[h,g]}),v[34]=z,v[35]=V,v[36]=h,v[37]=g,v[38]=x):x=v[38];let U=!k&&S;return v[39]!==x||v[40]!==U||v[41]!==H?(b=(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,r.jsxs)(a.Card,{"data-collapsed":H,tone:"inherit",children:[x,U]})}),v[39]=x,v[40]=U,v[41]=H,v[42]=b):b=v[42],v[43]!==I||v[44]!==t||v[45]!==b||v[46]!==N?(y=(0,r.jsx)(a.LayerProvider,{zOffset:100,children:(0,r.jsx)(iI,{$border:I,"data-collapsed":N,"data-testid":"pane-header",ref:t,children:b})}),v[43]=I,v[44]=t,v[45]=b,v[46]=N,v[47]=y):y=v[47],y});function iP(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function iE(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,r.jsx)(iD,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,r.jsx)(iF,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function iD(e){let t,n,i,l,o,a=(0,s.c)(23),{node:d}=e,{title:c}=(0,f.useI18nText)(d),{t:u}=(0,f.useTranslation)();if(d.intent){let t;return a[0]!==d.intent||a[1]!==e?(t=(0,r.jsx)(ik,{...e,intent:d.intent}),a[0]=d.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==d?(t=iP(d),a[3]=d,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:m,isDisabled:h}=t;a[5]!==m||a[6]!==u||a[7]!==c?(n=m||c||u("status-button.aria-label"),a[5]=m,a[6]=u,a[7]=c,a[8]=n):n=a[8],a[9]!==h||a[10]!==d.hotkey?(i=!h&&d.hotkey?d.hotkey.split("+"):void 0,a[9]=h,a[10]=d.hotkey,a[11]=i):i=a[11];let g=h?p:c;return a[12]!==i||a[13]!==g?(l={hotkeys:i,content:g},a[12]=i,a[13]=g,a[14]=l):l=a[14],a[15]!==h||a[16]!==d.icon||a[17]!==d.onAction||a[18]!==d.selected||a[19]!==d.tone||a[20]!==n||a[21]!==l?(o=(0,r.jsx)(f.StatusButton,{disabled:h,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":n,tooltipProps:l}),a[15]=h,a[16]=d.icon,a[17]=d.onAction,a[18]=d.selected,a[19]=d.tone,a[20]=n,a[21]=l,a[22]=o):o=a[22],o}function ik(e){let t,n,i,l,o,a,d,c=(0,s.c)(27),{intent:u,node:p}=e;c[0]!==u.params||c[1]!==u.type?(t={intent:u.type,params:u.params},c[0]=u.params,c[1]=u.type,c[2]=t):t=c[2];let m=(0,b.useIntentLink)(t),{t:h}=(0,f.useTranslation)();c[3]!==m||c[4]!==p?(n=e=>{m.onClick(e),p.onAction()},c[3]=m,c[4]=p,c[5]=n):n=c[5];let g=n;c[6]!==p?(i=iP(p),c[6]=p,c[7]=i):i=c[7];let{disabledReason:x,ariaLabel:y,isDisabled:v}=i;c[8]!==y||c[9]!==p.title||c[10]!==h?(l=y||p.title||h("status-button.aria-label"),c[8]=y,c[9]=p.title,c[10]=h,c[11]=l):l=c[11],c[12]!==v||c[13]!==p.hotkey?(o=!v&&p.hotkey?p.hotkey.split("+"):void 0,c[12]=v,c[13]=p.hotkey,c[14]=o):o=c[14];let j=v?x:p.title;return c[15]!==o||c[16]!==j?(a={hotkeys:o,content:j,placement:"bottom",portal:!0},c[15]=o,c[16]=j,c[17]=a):a=c[17],c[18]!==g||c[19]!==m.href||c[20]!==v||c[21]!==p.icon||c[22]!==p.selected||c[23]!==p.tone||c[24]!==l||c[25]!==a?(d=(0,r.jsx)(f.StatusButton,{forwardedAs:"a",disabled:v,href:m.href,icon:p.icon,onClick:g,selected:p.selected,tone:p.tone,"aria-label":l,tooltipProps:a}),c[18]=g,c[19]=m.href,c[20]=v,c[21]=p.icon,c[22]=p.selected,c[23]=p.tone,c[24]=l,c[25]=a,c[26]=d):d=c[26],d}function iF(e){let t,n,i,l,o,d=(0,s.c)(16),{node:u}=e,{title:p}=(0,f.useI18nText)(u),m=!!u.disabled,h=u.icon??v.UnknownIcon;d[0]!==u.title?(t={content:u.title,portal:!0},d[0]=u.title,d[1]=t):t=d[1],d[2]!==m||d[3]!==h||d[4]!==t||d[5]!==p?(n=(0,r.jsx)(x.Button,{disabled:m,icon:h,label:p,mode:"bleed",tooltipProps:t}),d[2]=m,d[3]=h,d[4]=t,d[5]=p,d[6]=n):n=d[6];let g=(0,c.useId)();return d[7]!==u.children||d[8]!==u.disabled?(i=u.children.map((e,t)=>(0,r.jsx)(ip,{disabled:!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),d[7]=u.children,d[8]=u.disabled,d[9]=i):i=d[9],d[10]!==i?(l=(0,r.jsx)(a.Menu,{children:i}),d[10]=i,d[11]=l):l=d[11],d[12]!==n||d[13]!==g||d[14]!==l?(o=(0,r.jsx)(x.MenuButton,{button:n,id:g,menu:l}),d[12]=n,d[13]=g,d[14]=l,d[15]=o):o=d[15],o}let iA=(0,eA.styled)(a.Card).withConfig({displayName:"Root",componentId:"sc-9fi7st-0"})`transition:opacity 200ms;position:relative;z-index:1;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);opacity:0;&:not([hidden]){display:flex;}&:not([data-collapsed]){overflow:auto;}&[data-mounted]{opacity:1;}&[data-resizing]{pointer-events:none;}`,iL=[];function iM(e){let t,n,i,l,o,a,p,m,h,f,g,x,b,y,v,j,w,I=(0,s.c)(41);I[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:l,...o}=e,I[0]=e,I[1]=t,I[2]=n,I[3]=i,I[4]=l,I[5]=o):(t=I[1],n=I[2],i=I[3],l=I[4],o=I[5]);let[S]=(0,c.useState)(iV),[C,_]=(0,c.useState)(null),T=(0,d.useElementRect)(C)?.width||0,R=void 0!==T&&n?T<n:void 0;I[6]===Symbol.for("react.memo_cache_sentinel")?(a={expandedElement:null,panes:[],resizing:!1},I[6]=a):a=I[6];let[P,E]=(0,c.useState)(a);I[7]!==S||I[8]!==C?(p=()=>S.setRootElement(C),m=[S,C],I[7]=S,I[8]=C,I[9]=p,I[10]=m):(p=I[9],m=I[10]),(0,c.useEffect)(p,m),I[11]!==S||I[12]!==T?(h=()=>S.setRootWidth(T),f=[S,T],I[11]=S,I[12]=T,I[13]=h,I[14]=f):(h=I[13],f=I[14]),(0,c.useEffect)(h,f),I[15]!==S?(g=()=>S.subscribe(E),x=[S],I[15]=S,I[16]=g,I[17]=x):(g=I[16],x=I[17]),(0,c.useEffect)(g,x),I[18]!==R||I[19]!==i||I[20]!==l?(b=()=>{void 0!==R&&(R&&i&&i(),!R&&l&&l())},y=[R,i,l],I[18]=R,I[19]=i,I[20]=l,I[21]=b,I[22]=y):(b=I[21],y=I[22]),(0,c.useEffect)(b,y),I[23]!==R||I[24]!==S.collapse||I[25]!==S.expand||I[26]!==S.mount||I[27]!==S.resize||I[28]!==P.expandedElement||I[29]!==P.panes||I[30]!==P.resizing?(v={collapse:S.collapse,collapsed:R,expand:S.expand,expandedElement:P.expandedElement,mount:S.mount,panes:P.panes,resize:S.resize,resizing:P.resizing},I[23]=R,I[24]=S.collapse,I[25]=S.expand,I[26]=S.mount,I[27]=S.resize,I[28]=P.expandedElement,I[29]=P.panes,I[30]=P.resizing,I[31]=v):v=I[31];let D=v,k=R?"":void 0,F=P.resizing?"":void 0,A=T?"":void 0;return I[32]!==t||I[33]!==o||I[34]!==k||I[35]!==F||I[36]!==A?(j=(0,r.jsx)(iA,{"data-ui":"PaneLayout",...o,"data-collapsed":k,"data-resizing":F,"data-mounted":A,ref:_,children:t}),I[32]=t,I[33]=o,I[34]=k,I[35]=F,I[36]=A,I[37]=j):j=I[37],I[38]!==D||I[39]!==j?(w=(0,r.jsx)(u.PaneLayoutContext.Provider,{value:D,children:j}),I[38]=D,I[39]=j,I[40]=w):w=I[40],w}function iV(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,s=null,a=null,d=new Map,c=!1;function u(e){i.delete(e),s=e,p()}return{collapse:function(e){i.add(e),s===e&&(s=null),p()},expand:u,maximize:function(e){a=e,p()},mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||iL,l=n.get(t)||iL,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),a===e&&(a=null),p()}},resize:function(e,i,o){let r=t.indexOf(i),s=n.get(i);if(!s)return;let a=t[r+1],u=n.get(a);if(u){if("start"===e&&(c=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:a,flex:u.flex||1,width:a.offsetWidth},p()),"move"===e&&l.left&&l.right){let e,t,n,r,c,m,h,f,g,x,b,y;d=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:I}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=u.minWidth??204,r=Math.min(s.maxWidth||1/0,e.width-n),c=Math.min(u.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-c)&&(m=h),f=l.right.width-n,f>(g=r-l.left.width)&&(f=g),x=Math.min(Math.max(o,m),f),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});d.set(i,{flex:w,width:v}),d.set(a,{flex:I,width:j}),p()}if("end"===e){c=!1;let e=d.get(i),t=d.get(a);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(a,{...u,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??u.flex}),d=new Map,delete l.left,delete l.right,p()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,p()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function p(){if(!r)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let o=new WeakMap,u=l.length,p=l[0],m=r-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===p,s=i.has(e),c=l>m,u=!r&&(s||c),h=d.get(e);o.set(e,{element:e,collapsed:u,currentMinWidth:h?.width??t.currentMinWidth,currentMaxWidth:h?.width??t.currentMaxWidth,flex:h?.flex??t.flex??1,maximized:e===a}),u?m-=51:m-=l-51}let h=[];for(let e of t){let t=o.get(e);t&&h.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:h,resizing:c})}}()}function iO(e){let t,n,i,l=(0,s.c)(12),{children:o,currentMinWidth:d,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,g=void 0===h?"critical":h;return l[0]!==f?(t=(0,r.jsx)(iR,{title:f}),l[0]=f,l[1]=t):t=l[1],l[2]!==o?(n=(0,r.jsx)(id,{overflow:"auto",children:(0,r.jsx)(a.Box,{paddingX:4,paddingY:5,children:o})}),l[2]=o,l[3]=n):n=l[3],l[4]!==d||l[5]!==c||l[6]!==u||l[7]!==p||l[8]!==t||l[9]!==n||l[10]!==g?(i=(0,r.jsxs)(ir,{currentMinWidth:d,flex:c,id:p,minWidth:u,tone:g,children:[t,n]}),l[4]=d,l[5]=c,l[6]=u,l[7]=p,l[8]=t,l[9]=n,l[10]=g,l[11]=i):i=l[11],i}function iz(e){let t,n,i,l=(0,s.c)(6),{children:o,ms:a}=e,d=void 0===a?0:a,[u,p]=(0,c.useState)(d<=0);if(l[0]!==d?(t=()=>{if(d<=0)return;let e=setTimeout(()=>p(!0),d);return()=>{clearTimeout(e)}},n=[d],l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,c.useEffect)(t,n),!u||!o){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r.Fragment,{}),l[3]=e):e=l[3],e}return l[4]!==o?(i="function"==typeof o?o():o,l[4]=o,l[5]=i):i=l[5],i}function iB(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(f.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,eN.of)(null);return(0,eH.merge)(...t.map(e=>n.pipe((0,td.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,tc.delay)(e.ms))))}let iN=(0,eA.styled)(a.Flex).withConfig({displayName:"Content",componentId:"sc-1viiodb-0"})`opacity:0;transition:opacity 200ms;&[data-mounted]{opacity:1;}`,iH=(0,c.memo)(e=>{let t,n,i,l,o,a,u,p,m,h,g=(0,s.c)(28),{delay:x,flex:b,message:y,minWidth:v,paneKey:j,path:w,selected:I,title:S,tone:C}=e,_=void 0===x?300:x,T=void 0===y?iB:y,{t:R}=(0,f.useTranslation)(D);e:{if("function"==typeof T){let e;g[0]!==T||g[1]!==w?(e=T(w?w.split(";"):[]),g[0]=T,g[1]=w,g[2]=e):e=g[2],t=e;break e}t=T}let P=t;g[3]!==P||g[4]!==R?(n=()=>"string"==typeof P?P:R("panes.resolving.default-message"),g[3]=P,g[4]=R,g[5]=n):n=g[5];let[E,k]=(0,c.useState)(n);g[6]!==P||g[7]!==R?(i=()=>{if("object"!=typeof P||"function"!=typeof P.subscribe)return;let e=P.subscribe(e=>{k("messageKey"in e?R(e.messageKey):e.message)});return()=>e.unsubscribe()},l=[P,R],g[6]=P,g[7]=R,g[8]=i,g[9]=l):(i=g[8],l=g[9]),(0,c.useEffect)(i,l);let[F,A]=(0,c.useState)(null),[L,M]=(0,c.useState)(!1);g[10]!==F?(o=()=>{if(F)return(0,d._raf2)(()=>M(!0))},a=[F],g[10]=F,g[11]=o,g[12]=a):(o=g[11],a=g[12]),(0,c.useEffect)(o,a);let V=L?"":void 0,O=S||E;g[13]!==O?(u=(0,r.jsx)(f.LoadingBlock,{showText:!0,title:O}),g[13]=O,g[14]=u):u=g[14],g[15]!==u||g[16]!==V?(p=(0,r.jsx)(iN,{align:"center","data-mounted":V,direction:"column",height:"fill",justify:"center",ref:A,children:u}),g[15]=u,g[16]=V,g[17]=p):p=g[17];let z=p;return g[18]!==z||g[19]!==_?(m=(0,r.jsx)(id,{children:z}),g[18]=z,g[19]=_,g[20]=m):m=g[20],g[21]!==b||g[22]!==v||g[23]!==j||g[24]!==I||g[25]!==m||g[26]!==C?(h=(0,r.jsx)(ir,{flex:b,id:j,minWidth:v,selected:I,tone:C,children:m}),g[21]=b,g[22]=v,g[23]=j,g[24]=I,g[25]=m,g[26]=C,g[27]=h):h=g[27],h});function i$(){let e=(0,c.useContext)(u.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function iU(e){let t,n,i=(0,s.c)(8),{children:l,documentId:o,documentType:a}=e;return i[0]!==l||i[1]!==o||i[2]!==a?(t=(0,r.jsx)(iG,{documentId:o,documentType:a,children:l}),i[0]=l,i[1]=o,i[2]=a,i[3]=t):t=i[3],i[4]!==o||i[5]!==a||i[6]!==t?(n=(0,r.jsx)(f.CommentsEnabledProvider,{documentId:o,documentType:a,children:t}),i[4]=o,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function iG(e){let t,n,i,l,o,a,d=(0,s.c)(28),{children:u,documentId:p,documentType:m}=e,{enabled:h}=(0,f.useCommentsEnabled)(),{connectionState:g,onPathOpen:x,inspector:y,openInspector:v}=i$(),{selectedReleaseId:j}=(0,f.usePerspective)(),{params:w,setParams:I}=lA(),{resolveIntentLink:S}=(0,b.useRouter)(),C=w?.comment,_=w?.scheduledDraft,T=(0,c.useRef)(w);d[0]!==w?(t=()=>{T.current=w},n=[w],d[0]=w,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,c.useLayoutEffect)(t,n),d[3]!==p||d[4]!==m||d[5]!==S||d[6]!==_||d[7]!==j?(i=e=>{let t=j&&!_?[["perspective",j]]:[],n=S("edit",{id:p,type:m,inspect:f.COMMENTS_INSPECTOR_NAME,comment:e,..._?{scheduledDraft:_}:{}},t);return`${window.location.origin}${n}`},d[3]=p,d[4]=m,d[5]=S,d[6]=_,d[7]=j,d[8]=i):i=d[8];let R=i;d[9]!==I?(l=()=>{I({...T.current,comment:void 0})},d[9]=I,d[10]=l):l=d[10];let P=l;d[11]!==y?.name||d[12]!==v?(o=()=>{y?.name!==f.COMMENTS_INSPECTOR_NAME&&v(f.COMMENTS_INSPECTOR_NAME)},d[11]=y?.name,d[12]=v,d[13]=o):o=d[13];let E=o;if(!h){let e;return d[14]!==u?(e=(0,r.jsx)(r.Fragment,{children:u}),d[14]=u,d[15]=e):e=d[15],e}let D=y?.name===f.COMMENTS_INSPECTOR_NAME,k="connecting"===g;return d[16]!==u||d[17]!==p||d[18]!==m||d[19]!==R||d[20]!==P||d[21]!==E||d[22]!==x||d[23]!==C||d[24]!==j||d[25]!==D||d[26]!==k?(a=(0,r.jsx)(f.CommentsProvider,{documentId:p,documentType:m,getCommentLink:R,isCommentsOpen:D,isConnecting:k,onClearSelectedComment:P,onCommentsOpen:E,onPathOpen:x,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:j,children:u}),d[16]=u,d[17]=p,d[18]=m,d[19]=R,d[20]=P,d[21]=E,d[22]=x,d[23]=C,d[24]=j,d[25]=D,d[26]=k,d[27]=a):a=d[27],a}function iq(e){let t,n,i,l,o,a,d=(0,s.c)(20),{children:u}=e,{data:p}=(0,f.useActiveReleases)(),{actions:m,editState:h,isInitialValueLoading:g,revisionId:x}=i$(),b=(0,c.useRef)(null);if(d[0]!==p||d[1]!==h?.release){let e;d[3]!==h?.release?(e=e=>e===h?.release,d[3]=h?.release,d[4]=e):e=d[4],t=p.map(iW).find(e),d[0]=p,d[1]=h?.release,d[2]=t}else t=d[2];let y=t;d[5]!==h||d[6]!==g||d[7]!==y||d[8]!==x?(n=h?{...h,release:y,revision:x||void 0,initialValueResolved:!g}:null,d[5]=h,d[6]=g,d[7]=y,d[8]=x,d[9]=n):n=d[9];let v=n;if(!v)return null;d[10]===Symbol.for("react.memo_cache_sentinel")?(i=()=>b.current?.(),d[10]=i):i=d[10],d[11]!==v?(l={...v,onComplete:i},d[11]=v,d[12]=l):l=d[12];let j=m||f.EMPTY_ARRAY;return d[13]!==v||d[14]!==u?(o=e=>{let{states:t}=e;return(0,r.jsx)(iY,{states:t,actionProps:v,children:u})},d[13]=v,d[14]=u,d[15]=o):o=d[15],d[16]!==l||d[17]!==j||d[18]!==o?(a=(0,r.jsx)(f.GetHookCollectionState,{args:l,hooks:j,resetRef:b,children:o}),d[16]=l,d[17]=j,d[18]=o,d[19]=a):a=d[19],a}function iW(e){return(0,f.getReleaseIdFromReleaseDocumentId)(e._id)}iH.displayName="Memo(LoadingPane)";let iK=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function iY(e){let t,n,i,l=(0,s.c)(9),{states:o,children:a,actionProps:d}=e,{t:c}=(0,f.useTranslation)(D);l[0]!==d?(t=(0,f.getDocumentIdForCanvasLink)(d),l[0]=d,l[1]=t):t=l[1];let{isLinked:p}=(0,f.useCanvasCompanionDoc)(t);return l[2]!==p||l[3]!==o||l[4]!==c?(n=p?o.map(e=>e.action&&iK.includes(e.action)?e:{...e,disabled:!0,title:c("action.disabled-by-canvas.tooltip")}):o,l[2]=p,l[3]=o,l[4]=c,l[5]=n):n=l[5],l[6]!==a||l[7]!==n?(i=(0,r.jsx)(u.DocumentActionsStateContext.Provider,{value:n,children:a}),l[6]=a,l[7]=n,l[8]=i):i=l[8],i}function iX(){let e=(0,c.useContext)(u.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}let iQ={},iJ="inspect:",iZ=[{id:"inspectors"},{id:"links"}],i0="sanity/structure/history";function i1(e){let t,n,i,l,o,a,d,u,p,m=(0,s.c)(22),{documentId:h,documentType:g,inspectors:x,onMenuItems:b}=e,y=x.length;m[0]!==y?(t=()=>Array.from(Array(y)),m[0]=y,m[1]=t):t=m[1];let[v,j]=(0,c.useState)(t);m[2]!==y||m[3]!==v?(n=()=>{if(v.length!==y){let e=Array.from(Array(y));for(let t=0;t<y;t++)e[t]=v[t];j(e)}},i=[y,v],m[2]=y,m[3]=v,m[4]=n,m[5]=i):(n=m[4],i=m[5]),(0,c.useEffect)(n,i),m[6]===Symbol.for("react.memo_cache_sentinel")?(l=(e,t)=>{j(n=>{let i=[...n];return i[e]=t,i})},m[6]=l):l=m[6];let w=l;if(m[7]!==v||m[8]!==b?(o=()=>{b(v.filter(Boolean))},a=[v,b],m[7]=v,m[8]=b,m[9]=o,m[10]=a):(o=m[9],a=m[10]),(0,c.useEffect)(o,a),m[11]!==h||m[12]!==g||m[13]!==x){let e;m[15]!==h||m[16]!==g?(e=(e,t)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:l}){return(0,c.memo)(function(){let o,r,a,d=(0,s.c)(4);d[0]===Symbol.for("react.memo_cache_sentinel")?(o={documentId:e,documentType:t},d[0]=o):o=d[0];let u=l(o),p=(0,f.useUnique)(u);return d[1]!==p?(r=()=>{i(n,p)},a=[p],d[1]=p,d[2]=r,d[3]=a):(r=d[2],a=d[3]),(0,c.useEffect)(r,a),null})}({documentId:h,documentType:g,index:t,setMenuItem:w,useMenuItem:e.useMenuItem}),e.name]:[i3,""],m[15]=h,m[16]=g,m[17]=e):e=m[17],d=x.map(e),m[11]=h,m[12]=g,m[13]=x,m[14]=d}else d=m[14];let I=d;return m[18]!==I?(u=I.map(i2),m[18]=I,m[19]=u):u=m[19],m[20]!==u?(p=(0,r.jsx)(r.Fragment,{children:u}),m[20]=u,m[21]=p):p=m[21],p}function i2(e){let[t,n]=e;return n&&(0,r.jsx)(t,{},n)}function i3(){return null}function i4(){let e,t,n,i,l=(0,s.c)(22),{connectionState:o,schemaType:r,editState:a,isDeleted:d,lastRevisionDocument:c}=i$(),{selectedPerspectiveName:u}=(0,f.usePerspective)(),{t:p}=(0,f.useTranslation)(D);e:{if(d){e=c;break e}if(u&&(0,f.isPublishedPerspective)(u)){e=a?.published;break e}e=a?.version||a?.draft||a?.published}let m=e,h=!!m;t:{if(d&&c&&r)try{let e;l[0]!==c||l[1]!==r?(e=(0,f.prepareForPreview)(c,r),l[0]=c,l[1]=r,l[2]=e):e=l[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let g=t,x=h&&!d;l[3]!==m||l[4]!==r||l[5]!==x?(n={enabled:x,schemaType:r,value:m},l[3]=m,l[4]=r,l[5]=x,l[6]=n):n=l[6];let{error:b,value:y}=(0,f.useValuePreview)(n);if("connecting"===o&&!h){let e;return l[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},l[7]=e):e=l[7],e}if(d&&g){let e;return l[8]!==g.title?(e={error:void 0,title:g.title},l[8]=g.title,l[9]=e):e=l[9],e}if(!y&&!d){let e,t,n=r?.title||r?.name;return l[10]!==p||l[11]!==n?(e=p("panes.document-header-title.new.text",{schemaType:n}),l[10]=p,l[11]=n,l[12]=e):e=l[12],l[13]!==e?(t={error:void 0,title:e},l[13]=e,l[14]=t):t=l[14],t}if(b){let e,t;return l[15]!==b.message||l[16]!==p?(e=p("panes.document-list-pane.error.text",{error:b.message}),l[15]=b.message,l[16]=p,l[17]=e):e=l[17],l[18]!==e?(t={error:e,title:void 0},l[18]=e,l[19]=t):t=l[19],t}let v=y?.title;return l[20]!==v?(i={error:void 0,title:v},l[20]=v,l[21]=i):i=l[21],i}i1.displayName="DocumentInspectorMenuItemsResolver";let i5=["patch","commit"],i6=(0,c.memo)(function(){let e,t,n,i,l,o=(0,s.c)(13),{push:a}=(0,d.useToast)(),{documentId:u,documentType:p,value:m}=i$(),h=i4(),g=h.error,x=(0,f.useDocumentOperationEvent)(u,p),b=(0,c.useRef)(x),y=lA(),{t:v}=(0,f.useTranslation)(D),{handleOpenDialog:j}=(0,f.useDocumentLimitsUpsellContext)();e:{if(!h.title&&!g&&!i5.includes(x?.op)&&"string"==typeof m.title&&x?.type==="success"){e=m.title;break e}e=h.title}let w=e;o[0]!==v||o[1]!==w?(t=w||v("panes.document-operation-results.operation-undefined-title"),o[0]=v,o[1]=w,o[2]=t):t=o[2];let I=t;o[3]!==I?(n=I.length>25?`${I.slice(0,25)}...`:I,o[3]=I,o[4]=n):n=o[4];let S=n;return o[5]!==S||o[6]!==x||o[7]!==j||o[8]!==y||o[9]!==a||o[10]!==v?(i=()=>{let e;if(x&&x!==b.current){if("error"===x.type){if((0,f.isDocumentLimitError)(x.error))return void j("document_action");a({closable:!0,duration:3e4,status:"error",title:v("panes.document-operation-results.operation-error",{context:x.op}),description:(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{children:v("panes.document-operation-results.error.summary.title")}),x.error.message]})})}return"success"!==x.type||i5.includes(x.op)||a({closable:!0,status:"success",title:(0,r.jsx)(f.Translate,{context:x.op,i18nKey:"panes.document-operation-results.operation-success",t:v,values:{op:x.op,title:S},components:{Strong:"strong"}})}),"success"===x.type&&"delete"===x.op&&(e=setTimeout(()=>y.closeCurrentAndAfter(),0)),b.current=x,()=>clearTimeout(e)}},l=[x,y,a,v,S,j],o[5]=S,o[6]=x,o[7]=j,o[8]=y,o[9]=a,o[10]=v,o[11]=i,o[12]=l):(i=o[11],l=o[12]),(0,c.useEffect)(i,l),null}),i8=(0,eA.styled)(a.Card).withConfig({displayName:"Root",componentId:"sc-1anmotz-0"})({position:"relative",zIndex:"1",lineHeight:"0"});function i7(e){let t,n,i,l,o,d,c,u,p,m,h,g,b=(0,s.c)(25);b[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:l,title:d,...o}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=i,b[4]=l,b[5]=o,b[6]=d):(t=b[1],n=b[2],i=b[3],l=b[4],o=b[5],d=b[6]);let{t:y}=(0,f.useTranslation)(D);return b[7]!==d?(c=(0,r.jsx)(a.Box,{flex:1,padding:3,children:(0,r.jsx)(a.Text,{as:"h1",size:1,weight:"medium",children:d})}),b[7]=d,b[8]=c):c=b[8],b[9]!==y?(u=y("document-inspector.close-button.tooltip"),b[9]=y,b[10]=u):u=b[10],b[11]!==u?(p={content:u},b[11]=u,b[12]=p):p=b[12],b[13]!==n||b[14]!==l||b[15]!==p?(m=(0,r.jsx)(a.Box,{flex:"none",padding:1,children:(0,r.jsx)(x.Button,{"aria-label":n,icon:v.CloseIcon,mode:"bleed",onClick:l,tooltipProps:p})}),b[13]=n,b[14]=l,b[15]=p,b[16]=m):m=b[16],b[17]!==c||b[18]!==m?(h=(0,r.jsxs)(a.Flex,{padding:2,children:[c,m]}),b[17]=c,b[18]=m,b[19]=h):h=b[19],b[20]!==t||b[21]!==i||b[22]!==o||b[23]!==h?(g=(0,r.jsxs)(i8,{...o,as:i,children:[h,t]}),b[20]=t,b[21]=i,b[22]=o,b[23]=h,b[24]=g):g=b[24],g}function i9(e){let t,n,i,l=(0,s.c)(14),{documentId:o,documentType:d,flex:c}=e,{collapsed:u}=ia(),{closeInspector:p,inspector:m}=i$(),{features:h}=iX();l[0]!==p||l[1]!==m?(t=()=>{m&&p(m.name)},l[0]=p,l[1]=m,l[2]=t):t=l[2];let g=t;if(u||!m)return null;let x=m.component;l[3]!==x||l[4]!==o||l[5]!==d||l[6]!==g?(n=(0,r.jsx)(x,{onClose:g,documentId:o,documentType:d}),l[3]=x,l[4]=o,l[5]=d,l[6]=g,l[7]=n):n=l[7];let b=n;if(h.resizablePanes){let e;return l[8]!==b||l[9]!==c?(e=(0,r.jsx)(f.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:b}),l[8]=b,l[9]=c,l[10]=e):e=l[10],e}return l[11]!==b||l[12]!==c?(i=(0,r.jsx)(a.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:b}),l[11]=b,l[12]=c,l[13]=i):i=l[13],i}function le(e,t,n){let i,l,o,r,a=(0,s.c)(16),d=(0,f.useKeyValueStore)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let c=i.join(".");if(a[3]!==n||a[4]!==d||a[5]!==c){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],l=d.getKey(c).pipe((0,eB.map)(e)),a[3]=n,a[4]=d,a[5]=c,a[6]=l}else l=a[6];let u=(0,eM.useObservable)(l,n);a[9]!==d||a[10]!==c||a[11]!==u?(o=async e=>{e!==u&&await d.setKey(c,e)},a[9]=d,a[10]=c,a[11]=u,a[12]=o):o=a[12];let p=o;return a[13]!==p||a[14]!==u?(r=[u,p],a[13]=p,a[14]=u,a[15]=r):r=a[15],r}let lt={id:"parsed",title:"document-inspector.view-mode.parsed"},ln={id:"raw",title:"document-inspector.view-mode.raw-json"},li=[lt,ln],ll=new tK.default({maxSize:1e3});function lo(e){let{path:t}=e,n=ll.get(t);void 0!==n&&ll.set(t,!n)}function lr(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function ls(e){lr(e.target)}function la(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),lr(e.currentTarget))}let ld=eA.styled.div.withConfig({displayName:"JSONInspectorWrapper",componentId:"sc-1nlr6yd-0"})(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return eA.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,a.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,a.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,a.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,a.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,a.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function lc(e){let t,n,i,l=(0,s.c)(8),{onChange:o,query:d}=e;l[0]!==o?(t=e=>o(e.target.value),l[0]=o,l[1]=t):t=l[1];let c=t,{t:u}=(0,f.useTranslation)(D);l[2]!==u?(n=u("document-inspector.search.placeholder"),l[2]=u,l[3]=n):n=l[3];let p=d||"";return l[4]!==c||l[5]!==n||l[6]!==p?(i=(0,r.jsx)(a.TextInput,{icon:v.SearchIcon,onChange:c,placeholder:n,radius:2,value:p}),l[4]=c,l[5]=n,l[6]=p,l[7]=i):i=l[7],i}function lu(e){let t,n,i,l,o,c,u,p,m,h,g,b,y,v,j,w,I=(0,s.c)(49),{value:S}=e,{onInspectClose:C,paneKey:_}=i$(),T=`${_}_inspect_`,[R,P]=le("inspect-view-mode",null,"parsed");I[0]!==R?(t=li.find(e=>e.id===R),I[0]=R,I[1]=t):t=I[1];let E=t;I[2]!==P?(n=async()=>{await P(lt.id)},I[2]=P,I[3]=n):n=I[3];let k=n;I[4]!==P?(i=async()=>{await P(ln.id)},I[4]=P,I[5]=i):i=I[5];let F=i,{t:A}=(0,f.useTranslation)(D),L=`${T}dialog`;I[6]!==A||I[7]!==S?(l=(0,f.isRecord)(S)&&(0,f.isString)(S._id)&&(0,f.isString)(S._type)?(0,r.jsx)(f.Translate,{t:A,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,r.jsx)("em",{children:(0,r.jsx)(sY,{document:S})})}}):(0,r.jsx)("em",{children:A("document-inspector.dialog.title-no-value")}),I[6]=A,I[7]=S,I[8]=l):l=I[8],I[9]===Symbol.for("react.memo_cache_sentinel")?(o={position:"sticky",bottom:0,zIndex:3},I[9]=o):o=I[9];let M=`${T}tabpanel`,V=`${T}tab-${lt.id}`;I[10]!==A?(c=A(lt.title),I[10]=A,I[11]=c):c=I[11];let O=E===lt;I[12]!==k||I[13]!==M||I[14]!==V||I[15]!==c||I[16]!==O?(u=(0,r.jsx)(x.Tab,{"aria-controls":M,id:V,label:c,onClick:k,selected:O}),I[12]=k,I[13]=M,I[14]=V,I[15]=c,I[16]=O,I[17]=u):u=I[17];let z=`${T}tabpanel`,B=`${T}tab-${ln.id}`;I[18]!==A?(p=A(ln.title),I[18]=A,I[19]=p):p=I[19];let N=E===ln;I[20]!==F||I[21]!==z||I[22]!==B||I[23]!==p||I[24]!==N?(m=(0,r.jsx)(x.Tab,{"aria-controls":z,id:B,label:p,onClick:F,selected:N}),I[20]=F,I[21]=z,I[22]=B,I[23]=p,I[24]=N,I[25]=m):m=I[25],I[26]!==u||I[27]!==m?(h=(0,r.jsx)(a.Card,{padding:3,paddingTop:0,shadow:1,style:o,children:(0,r.jsxs)(a.TabList,{space:1,children:[u,m]})}),I[26]=u,I[27]=m,I[28]=h):h=I[28];let H=`${T}tab-${R}`,$=`${T}tabpanel`;return I[29]===Symbol.for("react.memo_cache_sentinel")?(g={outline:"none"},I[29]=g):g=I[29],I[30]!==S||I[31]!==E?(b=E===lt&&(0,r.jsx)(ld,{children:(0,r.jsx)(tW,{data:S,isExpanded:function e(t,n){let i=ll.get(t);return void 0===i?(ll.set(t,Array.isArray(n)||(0,f.isRecord)(n)),e(t,n)):i},onClick:lo,search:lc,filterOptions:{ignoreCase:!0}})}),I[30]=S,I[31]=E,I[32]=b):b=I[32],I[33]!==S||I[34]!==E?(y=E===ln&&(0,r.jsx)(a.Code,{language:"json",tabIndex:0,onKeyDown:la,onDoubleClick:ls,size:1,children:JSON.stringify(S,null,2)}),I[33]=S,I[34]=E,I[35]=y):y=I[35],I[36]!==H||I[37]!==$||I[38]!==b||I[39]!==y?(v=(0,r.jsxs)(d.TabPanel,{"aria-labelledby":H,flex:1,id:$,overflow:"auto",padding:4,style:g,children:[b,y]}),I[36]=H,I[37]=$,I[38]=b,I[39]=y,I[40]=v):v=I[40],I[41]!==h||I[42]!==v?(j=(0,r.jsxs)(a.Flex,{direction:"column",height:"fill",children:[h,v]}),I[41]=h,I[42]=v,I[43]=j):j=I[43],I[44]!==C||I[45]!==j||I[46]!==L||I[47]!==l?(w=(0,r.jsx)(x.Dialog,{bodyHeight:"fill",id:L,header:l,onClose:C,onClickOutside:C,padding:!1,width:2,children:j}),I[44]=C,I[45]=j,I[46]=L,I[47]=l,I[48]=w):w=I[48],w}function lp(e){let t,n,i,l,o,d,c,u,p,m,h,f=(0,s.c)(22);f[0]!==e?({action:n,content:i,icon:t,tone:o,paddingY:d,...l}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=l,f[5]=o,f[6]=d):(t=f[1],n=f[2],i=f[3],l=f[4],o=f[5],d=f[6]);let g=void 0===o?"transparent":o,b=void 0===d?2:d;return f[7]!==t?(c=t&&(0,r.jsx)(a.Text,{size:0,children:(0,r.jsx)(t,{})}),f[7]=t,f[8]=c):c=f[8],f[9]!==i?(u=(0,r.jsx)(a.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:i}),f[9]=i,f[10]=u):u=f[10],f[11]!==n?(p=n&&(0,r.jsx)(x.Button,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),f[11]=n,f[12]=p):p=f[12],f[13]!==c||f[14]!==u||f[15]!==p?(m=(0,r.jsxs)(a.Flex,{align:"center",gap:3,paddingX:2,children:[c,u,p]}),f[13]=c,f[14]=u,f[15]=p,f[16]=m):m=f[16],f[17]!==b||f[18]!==l||f[19]!==m||f[20]!==g?(h=(0,r.jsx)(a.Box,{padding:1,children:(0,r.jsx)(a.Card,{radius:3,paddingX:2,paddingY:b,tone:g,...l,children:m})}),f[17]=b,f[18]=l,f[19]=m,f[20]=g,f[21]=h):h=f[21],h}function lm(){let e=(0,s.c)(3),{isDeleted:t,isDeleting:n,ready:i}=i$(),{selectedPerspective:l}=(0,f.usePerspective)();if(!i)return null;if(!(0,f.isPublishedPerspective)(l)&&!(0,f.isDraftPerspective)(l)&&(0,f.isReleaseDocument)(l)&&"archived"===l.state){let t;return e[0]!==l?(t=(0,r.jsx)(lf,{release:l}),e[0]=l,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(lh,{}),e[2]=t):t=e[2],t}}function lh(){let e,t,n,i,l,o,d=(0,s.c)(17),{documentId:c,documentType:u}=i$(),{restore:p}=(0,f.useDocumentOperation)(c,u),{navigateIntent:m}=(0,b.useRouter)();d[0]!==c||d[1]!==u||d[2]!==m||d[3]!==p?(e=()=>{p.execute("lastRevision"),m("edit",{id:c,type:u})},d[0]=c,d[1]=u,d[2]=m,d[3]=p,d[4]=e):e=d[4];let h=e,{t:g}=(0,f.useTranslation)(D);return d[5]!==g?(t=g("banners.deleted-document-banner.restore-button.text"),d[5]=g,d[6]=t):t=d[6],d[7]!==h||d[8]!==t?(n={onClick:h,text:t},d[7]=h,d[8]=t,d[9]=n):n=d[9],d[10]!==g?(i=g("banners.deleted-document-banner.text"),d[10]=g,d[11]=i):i=d[11],d[12]!==i?(l=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:i}),d[12]=i,d[13]=l):l=d[13],d[14]!==n||d[15]!==l?(o=(0,r.jsx)(lp,{action:n,content:l,"data-testid":"deleted-document-banner",icon:v.ReadOnlyIcon}),d[14]=n,d[15]=l,d[16]=o):o=d[16],o}let lf=e=>{let t,n,i,l=(0,s.c)(8),{release:o}=e,{t:d}=(0,f.useTranslation)();return l[0]!==o.metadata?.title||l[1]!==d?(t=o.metadata?.title||d("release.placeholder-untitled-release"),l[0]=o.metadata?.title,l[1]=d,l[2]=t):t=l[2],l[3]!==t?(n={title:t},l[3]=t,l[4]=n):n=l[4],l[5]!==d||l[6]!==n?(i=(0,r.jsx)(lp,{tone:"caution",content:(0,r.jsx)(a.Text,{size:1,weight:"medium",children:(0,r.jsx)(f.Translate,{t:d,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:v.DocumentRemoveIcon}),l[5]=d,l[6]=n,l[7]=i):i=l[7],i};function lg(){let e,t,n=(0,s.c)(5),{schemaType:i}=i$(),{t:l}=(0,f.useTranslation)(D);return(0,g.isDeprecatedSchemaType)(i)?(n[0]!==l?(e=(0,r.jsx)(f.Translate,{t:l,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=l,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,r.jsx)(lp,{content:(0,r.jsxs)(a.Text,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:v.ErrorOutlineIcon}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let lx=(0,tv.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),lb=(0,tv.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),ly=(0,eA.styled)(a.Box).withConfig({displayName:"DialogBody",componentId:"sc-68p9pn-0"})`box-sizing:border-box;`;function lv(e){let t,n,i,l,o,u,p,m,h,g,b,y,v,j,w,I=(0,s.c)(56),{onClose:S,onRequestSubmitted:C}=e,{t:_}=(0,f.useTranslation)(D),T=(0,ty.useTelemetry)(),R=`request-permissions-${(0,c.useId)()}`,P=(0,f.useProjectId)();I[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},I[0]=t):t=I[0];let E=(0,f.useClient)(t),k=(0,d.useToast)(),F=(0,f.useZIndex)(),[A,L]=(0,c.useState)(!1),[M,V]=(0,c.useState)(""),[O,z]=(0,c.useState)(),[B,N]=(0,c.useState)(!1),[H,$]=(0,c.useState)(!1);e:{let e,t="administrator";if(!P||!E){let e;I[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eN.of)(t),I[1]=e):e=I[1],n=e;break e}if(I[2]!==E.observable||I[3]!==P){let n,i;I[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(lw).find(lj)?"editor":t,I[5]=n):n=I[5],I[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,eN.of)(t),I[6]=i):i=I[6],e=E.observable.request({url:`/projects/${P}/roles`}).pipe((0,eB.map)(n),(0,e$.startWith)(t),(0,eU.catchError)(i)),I[2]=E.observable,I[3]=P,I[4]=e}else e=I[4];n=e}let U=(0,eM.useObservable)(n);I[7]!==E||I[8]!==M||I[9]!==C||I[10]!==P||I[11]!==U||I[12]!==T||I[13]!==k?(i=()=>{L(!0),E.request({url:`/access/project/${P}/requests`,method:"post",body:{note:M,requestUrl:window?.location.href,requestedRole:U,type:"role"}}).then(e=>{e&&(C&&C(),T.log(lb),k.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(N(!0),z(n)),409===t?($(!0),z(n)):k.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{L(!1)})},I[7]=E,I[8]=M,I[9]=C,I[10]=P,I[11]=U,I[12]=T,I[13]=k,I[14]=i):i=I[14];let G=i,q=F.fullscreen;I[15]!==_?(l=_("request-permission-dialog.header.text"),I[15]=_,I[16]=l):l=I[16],I[17]!==_?(o=_("confirm-dialog.cancel-button.fallback-text"),I[17]=_,I[18]=o):o=I[18],I[19]!==S||I[20]!==o?(u={onClick:S,text:o},I[19]=S,I[20]=o,I[21]=u):u=I[21];let W=B||H;return I[22]!==_?(p=_("request-permission-dialog.confirm-button.text"),I[22]=_,I[23]=p):p=I[23],I[24]!==A||I[25]!==G||I[26]!==W||I[27]!==p?(m={onClick:G,loading:A,disabled:W,text:p,tone:"primary",type:"submit"},I[24]=A,I[25]=G,I[26]=W,I[27]=p,I[28]=m):m=I[28],I[29]!==m||I[30]!==u?(h={cancelButton:u,confirmButton:m},I[29]=m,I[30]=u,I[31]=h):h=I[31],I[32]!==_?(g=_("request-permission-dialog.description.text"),I[32]=_,I[33]=g):g=I[33],I[34]!==g?(b=(0,r.jsx)(a.Text,{children:g}),I[34]=g,I[35]=b):b=I[35],I[36]!==H||I[37]!==B||I[38]!==A||I[39]!==O||I[40]!==M||I[41]!==G||I[42]!==_?(y=B||H?(0,r.jsx)(a.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,r.jsxs)(a.Text,{size:1,children:[B&&(0,r.jsx)(r.Fragment,{children:O??_("request-permission-dialog.warning.limit-reached.text")}),H&&(0,r.jsx)(r.Fragment,{children:O??_("request-permission-dialog.warning.denied.text")})]})}):(0,r.jsxs)(a.Stack,{space:3,paddingBottom:0,children:[(0,r.jsx)(a.TextInput,{placeholder:_("request-permission-dialog.note-input.placeholder.text"),disabled:A,onKeyDown:e=>{"Enter"===e.key&&G()},maxLength:150,value:M,onChange:e=>{V(e.currentTarget.value)}}),(0,r.jsx)(a.Text,{align:"right",muted:!0,size:1,children:`${M.length}/150`})]}),I[36]=H,I[37]=B,I[38]=A,I[39]=O,I[40]=M,I[41]=G,I[42]=_,I[43]=y):y=I[43],I[44]!==b||I[45]!==y?(v=(0,r.jsx)(ly,{children:(0,r.jsxs)(a.Stack,{space:4,children:[b,y]})}),I[44]=b,I[45]=y,I[46]=v):v=I[46],I[47]!==R||I[48]!==S||I[49]!==h||I[50]!==v||I[51]!==l?(j=(0,r.jsx)(x.Dialog,{width:1,id:R,header:l,footer:h,onClose:S,onClickOutside:S,children:v}),I[47]=R,I[48]=S,I[49]=h,I[50]=v,I[51]=l,I[52]=j):j=I[52],I[53]!==j||I[54]!==F.fullscreen?(w=(0,r.jsx)(d.DialogProvider,{position:"fixed",zOffset:q,children:j}),I[53]=j,I[54]=F.fullscreen,I[55]=w):w=I[55],w}function lj(e){return"editor"===e.name}function lw(e){return e?.appliesToUsers}(0,eA.styled)(a.Flex).attrs({align:"center",direction:"column",justify:"center"}).withConfig({displayName:"LoadingContainer",componentId:"sc-68p9pn-1"})`height:110px;`;let lI={loading:!0,error:!1,status:void 0},lS={loading:!1,error:!1,status:"none"},lC={loading:!1,error:!1,status:"declined"},l_={loading:!1,error:!1,status:"pending"},lT={loading:!1,error:!1,status:"expired"};function lR(e){let t,n,i,l,o,d,u,p,m=(0,s.c)(29),{requiredPermission:h}=e,g=(0,f.useCurrentUser)(),{data:x,loading:b,error:y}=(()=>{let e,t,n,i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,f.useClient)(e),o=(0,f.useProjectId)();e:{var r,a;let e;if(!l||!o){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eN.of)(lS),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==o?(r=l,a=o,e=r.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eB.map)(e=>{if(!e||0===e.length)return lS;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tY.isAfter)((0,tX.addWeeks)(new Date(n.createdAt),2),new Date)?lC:t.find(e=>"pending"===e.status&&(0,tY.isAfter)((0,tX.addWeeks)(new Date(e.createdAt),2),new Date))?l_:t.find(e=>"pending"===e.status&&(0,tQ.isBefore)((0,tX.addWeeks)(new Date(e.createdAt),2),new Date))?lT:lS}),(0,eU.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,eN.of)({loading:!1,error:!0,status:void 0}))),(0,e$.startWith)(lI)),i[2]=l,i[3]=o,i[4]=e):e=i[4],t=e}let d=t,{loading:c,error:u,status:p}=(0,eM.useObservable)(d,lI);return i[5]!==u||i[6]!==c||i[7]!==p?(n={data:p,loading:c,error:u},i[5]=u,i[6]=c,i[7]=p,i[8]=n):n=i[8],n})(),[j,w]=(0,c.useState)(!1),I="pending"===x||"declined"===x||j,S=g?.roles||[],C=1===S.length&&"viewer"===S[0].name,[_,T]=(0,c.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},m[0]=t):t=m[0];let R=(0,f.useListFormat)(t),{t:P}=(0,f.useTranslation)(D),E=(0,ty.useTelemetry)(),k=S.map(lE),F=R.formatToParts(k).map(lP);return m[1]!==F?(n={Roles:()=>(0,r.jsx)(r.Fragment,{children:F})},m[1]=F,m[2]=n):n=m[2],m[3]!==k||m[4]!==F.length?(i={count:F.length,roles:k},m[3]=k,m[4]=F.length,m[5]=i):i=m[5],m[6]!==h||m[7]!==P||m[8]!==n||m[9]!==i?(l=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:(0,r.jsx)(f.Translate,{t:P,i18nKey:"banners.permission-check-banner.missing-permission",components:n,values:i,context:h})}),m[6]=h,m[7]=P,m[8]=n,m[9]=i,m[10]=l):l=m[10],m[11]!==C||m[12]!==I||m[13]!==y||m[14]!==b||m[15]!==x||m[16]!==T||m[17]!==P||m[18]!==E?(o=C&&x&&!y&&!b?{onClick:I?void 0:()=>{T(!0),E.log(lx)},text:P(I?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:I?"default":"primary",disabled:I,mode:I?"bleed":void 0}:void 0,m[11]=C,m[12]=I,m[13]=y,m[14]=b,m[15]=x,m[16]=T,m[17]=P,m[18]=E,m[19]=o):o=m[19],m[20]!==l||m[21]!==o?(d=(0,r.jsx)(lp,{content:l,action:o,"data-testid":"permission-check-banner",icon:v.ReadOnlyIcon}),m[20]=l,m[21]=o,m[22]=d):d=m[22],m[23]!==T||m[24]!==_?(u=_&&(0,r.jsx)(lv,{onClose:()=>T(!1),onRequestSubmitted:()=>{w(!0),T(!1)}}),m[23]=T,m[24]=_,m[25]=u):u=m[25],m[26]!==d||m[27]!==u?(p=(0,r.jsxs)(r.Fragment,{children:[d,u]}),m[26]=d,m[27]=u,m[28]=p):p=m[28],p}function lP(e){return"element"===e.type?(0,r.jsx)("code",{children:e.value},e.value):e.value}function lE(e){return e.title}let lD=(0,c.memo)(()=>{let e,t,n,i,l,o,d,c,u=(0,s.c)(32),p=(0,f.useDocumentPreviewStore)(),{selectedPerspectiveName:m}=(0,f.usePerspective)(),{params:g,groupIndex:x,routerPanesState:b,replaceCurrent:y,BackLink:j}=lA(),w=b[x]?.[0].id,I=b[x-1]?.[0],S=I?.id,C=!!I?.params?.rev;u[0]!==g?(e=g?.parentRefPath&&(0,tx.fromString)(g.parentRefPath)||null,u[0]=g,u[1]=e):e=u[1];let _=e,{t:T}=(0,f.useTranslation)(D);e:{let e,n=_?.[0];if(!S||!n||!_){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eN.of)({loading:!1}),u[2]=e):e=u[2],t=e;break e}if(u[3]!==p||u[4]!==S||u[5]!==_||u[6]!==n||u[7]!==m){let t,i,l=(0,h.getPublishedId)(S),o=(0,tx.fromString)(n),r=o.findIndex(lk);u[9]!==m?(t=(0,f.isSystemBundle)(m)?void 0:m,u[9]=m,u[10]=t):t=u[10],u[11]!==_?(i=e=>{let{draft:t,published:n,version:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:n.availability,...i?.availability?{version:i.availability}:{}},refValue:(0,tx.get)(i?.snapshot||t.snapshot||n.snapshot,_)?._ref}}},u[11]=_,u[12]=i):i=u[12],e=(0,eG.concat)((0,eN.of)({loading:!0}),p.unstable_observePathsDocumentPair(l,-1===r?o:o.slice(0,r),{version:t}).pipe((0,tu.debounceTime)(750),(0,eB.map)(i))),u[3]=p,u[4]=S,u[5]=_,u[6]=n,u[7]=m,u[8]=e}else e=u[8];t=e}let R=t;u[13]===Symbol.for("react.memo_cache_sentinel")?(n={loading:!0},u[13]=n):n=u[13];let P=(0,eM.useObservable)(R,n);u[14]!==g||u[15]!==P.loading||u[16]!==P.result||u[17]!==y?(i=()=>{P.loading||P.result?.refValue&&y({id:P.result.refValue,params:g})},u[14]=g,u[15]=P.loading,u[16]=P.result,u[17]=y,u[18]=i):i=u[18];let E=i;return S&&_&&!C&&!P.loading&&(P.result?.availability.draft.available||P.result?.availability.published.available)&&P.result?.refValue!==w?(u[19]!==j||u[20]!==E||u[21]!==P.result?.refValue||u[22]!==T?(l=P.result?.refValue?{onClick:E,icon:v.SyncIcon,text:T("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:j,icon:v.CloseIcon,text:T("banners.reference-changed-banner.reason-removed.close-button.text")},u[19]=j,u[20]=E,u[21]=P.result?.refValue,u[22]=T,u[23]=l):l=u[23],u[24]!==P.result?.refValue||u[25]!==T?(o=T(P.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),u[24]=P.result?.refValue,u[25]=T,u[26]=o):o=u[26],u[27]!==o?(d=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:o}),u[27]=o,u[28]=d):d=u[28],u[29]!==l||u[30]!==d?(c=(0,r.jsx)(lp,{action:l,"data-testid":"reference-changed-banner",content:d,icon:v.WarningOutlineIcon,tone:"caution"}),u[29]=l,u[30]=d,u[31]=c):c=u[31],c):null});function lk(e){return"object"==typeof e&&"_key"in e}function lF(e){let t,n=(0,s.c)(2),{releaseId:i,draftDocument:l}=e,{t:o}=(0,f.useTranslation)(D),{firstDocument:d}=(0,f.useScheduledDraftDocument)(i),c=l?._id?(0,h.getPublishedId)(l._id):null,u=d?._id?(0,h.getPublishedId)(d._id):null,p=l?._rev,m=d?._system?.base?.rev;return c!==u||p&&m&&p===m?null:(n[0]!==o?(t=(0,r.jsx)(lp,{tone:"caution",icon:v.WarningOutlineIcon,content:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{t:o,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),n[0]=o,n[1]=t):t=n[1],t)}function lA(){return(0,c.useContext)(u.PaneRouterContext)}function lL(){let e,t,n,i,l,o,d,c,u=(0,s.c)(24),{t:p}=(0,f.useTranslation)(D),{t:m}=(0,f.useTranslation)(),{data:h}=(0,f.useArchivedReleases)(),{params:g,setParams:x}=lA();u[0]!==g||u[1]!==x?(e=()=>{x({...g,rev:g?.historyEvent||void 0,since:void 0,historyVersion:void 0})},u[0]=g,u[1]=x,u[2]=e):e=u[2];let b=e;if(u[3]!==h||u[4]!==g?.historyVersion){let e;u[6]!==g?.historyVersion?(e=e=>(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===g?.historyVersion,u[6]=g?.historyVersion,u[7]=e):e=u[7],t=h.find(e),u[3]=h,u[4]=g?.historyVersion,u[5]=t}else t=u[5];let y=t;e:{if(y?.state==="published"){n="banners.published-release.description";break e}if(y&&(0,f.isCardinalityOneRelease)(y)){n="banners.archived-scheduled-draft.description";break e}n="banners.archived-release.description"}let v=n,j=y?.metadata.title;return u[8]!==m?(i=m("release.placeholder-untitled-release"),u[8]=m,u[9]=i):i=u[9],u[10]!==v||u[11]!==y||u[12]!==p?(l=e=>{let{displayTitle:t}=e;return(0,r.jsx)(f.Translate,{t:p,i18nKey:v,values:{title:t},components:{VersionBadge:e=>{let{children:t}=e,n=(0,f.getVersionInlineBadge)(y);return(0,r.jsx)(n,{children:t})}}})},u[10]=v,u[11]=y,u[12]=p,u[13]=l):l=u[13],u[14]!==j||u[15]!==i||u[16]!==l?(o=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.ReleaseTitle,{title:j,fallback:i,children:l})}),u[14]=j,u[15]=i,u[16]=l,u[17]=o):o=u[17],u[18]!==b||u[19]!==g?.archivedRelease?(d=g?.archivedRelease?void 0:{text:"Go back to published version",onClick:b},u[18]=b,u[19]=g?.archivedRelease,u[20]=d):d=u[20],u[21]!==o||u[22]!==d?(c=(0,r.jsx)(lp,{tone:"caution",content:o,action:d}),u[21]=o,u[22]=d,u[23]=c):c=u[23],c}lD.displayName="Memo(ReferenceChangedBanner)";let lM=eA.styled.img.withConfig({displayName:"Image",componentId:"sc-9vwcvu-0"})`object-fit:cover;width:100%;height:100%;height:180px;display:flex;`,lV=e=>{let t,n,i,l,o,d,u,p,m,h,g,b,y=(0,s.c)(24),{onClose:j,isLockedByCanvas:w}=e,{t:I}=(0,f.useTranslation)(D),S=(0,c.useRef)(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[S.current],y[0]=t):t=y[0],(0,a.useClickOutsideEvent)(j,t),y[1]!==w||y[2]!==I?(n=I(w?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),y[1]=w,y[2]=I,y[3]=n):n=y[3];let C=n;y[4]!==w||y[5]!==I?(i=I(w?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),y[4]=w,y[5]=I,y[6]=i):i=y[6];let _=i;return y[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(lM,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),y[7]=l):l=y[7],y[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(a.Text,{size:1,weight:"semibold",children:"Canvas"}),y[8]=o):o=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsxs)(a.Flex,{paddingY:1,gap:2,children:[o,(0,r.jsx)(a.Text,{size:1,muted:!0,children:(0,r.jsx)(v.ComposeSparklesIcon,{})})]}),y[9]=d):d=y[9],y[10]!==C?(u=(0,r.jsx)(a.Box,{paddingTop:3,children:(0,r.jsx)(a.Heading,{size:1,children:C})}),y[10]=C,y[11]=u):u=y[11],y[12]!==_?(p=(0,r.jsx)(a.Box,{paddingTop:4,children:(0,r.jsx)(a.Text,{size:1,children:_})}),y[12]=_,y[13]=p):p=y[13],y[14]!==u||y[15]!==p?(m=(0,r.jsxs)(a.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[d,u,p]}),y[14]=u,y[15]=p,y[16]=m):m=y[16],y[17]!==I?(h=I("canvas.banner.popover-button-text"),y[17]=I,y[18]=h):h=y[18],y[19]!==h?(g=(0,r.jsx)(a.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,r.jsx)(x.Button,{mode:"bleed",text:h,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:v.LaunchIcon})}),y[19]=h,y[20]=g):g=y[20],y[21]!==g||y[22]!==m?(b=(0,r.jsx)(a.Card,{radius:3,overflow:"hidden",width:0,ref:S,children:(0,r.jsxs)(a.Container,{width:0,children:[l,m,g]})}),y[21]=g,y[22]=m,y[23]=b):b=y[23],b},lO=e=>{let t,n,i,l,o,d,u,p,m=(0,s.c)(21),{documentId:h}=e,{t:g}=(0,f.useTranslation)(D),[b,y]=(0,c.useState)(!1),j=(0,f.getDocumentVariantType)(h),{isLockedByCanvas:w}=(0,f.useCanvasCompanionDoc)(h);e:{let e;if(!w){let e;m[0]!==g?(e=g("canvas.banner.editable.linked-text"),m[0]=g,m[1]=e):e=m[1],t=e;break e}if("published"===j){let e;m[2]!==g?(e=g("canvas.banner.linked-text.published"),m[2]=g,m[3]=e):e=m[3],t=e;break e}if("draft"===j){let e;m[4]!==g?(e=g("canvas.banner.linked-text.draft"),m[4]=g,m[5]=e):e=m[5],t=e;break e}m[6]!==g?(e=g("canvas.banner.linked-text.version"),m[6]=g,m[7]=e):e=m[7],t=e}let I=t;m[8]===Symbol.for("react.memo_cache_sentinel")?(n=()=>y(lB),m[8]=n):n=m[8];let S=n;m[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>y(!1),m[9]=i):i=m[9];let C=i;return m[10]!==I?(l=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:I}),m[10]=I,m[11]=l):l=m[11],m[12]!==w?(o=(0,r.jsx)(lV,{onClose:C,isLockedByCanvas:w}),m[12]=w,m[13]=o):o=m[13],m[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(x.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:v.InfoOutlineIcon,onClick:S}),m[14]=d):d=m[14],m[15]!==b||m[16]!==o?(u=(0,r.jsx)(x.Popover,{open:b,size:0,tone:"default",portal:!0,placement:"bottom-start",content:o,children:d}),m[15]=b,m[16]=o,m[17]=u):u=m[17],m[18]!==l||m[19]!==u?(p=(0,r.jsxs)(a.Flex,{align:"center",gap:2,children:[l,u]}),m[18]=l,m[19]=u,m[20]=p):p=m[20],p};function lz(){let e,t,n,i,l=(0,s.c)(10),{documentId:o,displayed:a}=i$(),{t:d}=(0,f.useTranslation)(D),c=a?._id||o,{companionDoc:u}=(0,f.useCanvasCompanionDoc)(c),p=(0,f.useNavigateToCanvasDoc)(u?.canvasDocumentId,"banner");return u?(l[0]!==c?(e=(0,r.jsx)(lO,{documentId:c}),l[0]=c,l[1]=e):e=l[1],l[2]!==d?(t=d("canvas.banner.edit-in-canvas-action"),l[2]=d,l[3]=t):t=l[3],l[4]!==p||l[5]!==t?(n={mode:"ghost",text:t,onClick:p},l[4]=p,l[5]=t,l[6]=n):n=l[6],l[7]!==e||l[8]!==n?(i=(0,r.jsx)(lp,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),l[7]=e,l[8]=n,l[9]=i):i=l[9],i):null}function lB(e){return!e}let lN=e=>{let t,n,i,l,o,d,c,u,p,m,h=(0,s.c)(32),{schemaType:g,selectedPerspective:x,reason:b}=e,{t:y}=(0,f.useTranslation)(D),{t:j}=(0,f.useTranslation)(),{document:w}=(0,f.useWorkspace)(),{drafts:I}=w,{enabled:S}=I;h[0]!==S||h[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,f.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:S,schemaType:g}).result}},h[0]=S,h[1]=g,h[2]=t):t=h[2];let C=t,_=(0,f.isReleaseDocument)(x)?x:void 0;h[3]!==_||h[4]!==j?(n=_?_.metadata.title||j("release.placeholder-untitled-release"):void 0,h[3]=_,h[4]=j,h[5]=n):n=h[5];let T=n;return h[6]!==b||h[7]!==y?(i="PUBLISHED_NOT_WRITEABLE"===b&&y("banners.choose-new-document-destination.cannot-create-published-document"),h[6]=b,h[7]=y,h[8]=i):i=h[8],h[9]!==b||h[10]!==y?(l="DRAFTS_NOT_WRITEABLE"===b&&y("banners.choose-new-document-destination.cannot-create-draft-document"),h[9]=b,h[10]=y,h[11]=l):l=h[11],h[12]!==b||h[13]!==_||h[14]!==T||h[15]!==y||h[16]!==j?(o="RELEASE_NOT_ACTIVE"===b&&_&&T&&(0,r.jsx)(f.Translate,{t:y,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:T},components:{VersionBadge:e=>{let{children:t}=e,n=(0,f.getVersionInlineBadge)(_);return(0,r.jsx)(f.ReleaseTitle,{title:_.metadata.title,fallback:j("release.placeholder-untitled-release"),children:()=>(0,r.jsx)(n,{children:t})})}}}),h[12]=b,h[13]=_,h[14]=T,h[15]=y,h[16]=j,h[17]=o):o=h[17],h[18]!==y?(d=y("banners.choose-new-document-destination.choose-destination"),h[18]=y,h[19]=d):d=h[19],h[20]!==d?(c=(0,r.jsxs)(r.Fragment,{children:[" ",d]}),h[20]=d,h[21]=c):c=h[21],h[22]!==i||h[23]!==l||h[24]!==o||h[25]!==c?(u=(0,r.jsxs)(a.Text,{size:1,children:[i,l,o,c]}),h[22]=i,h[23]=l,h[24]=o,h[25]=c,h[26]=u):u=h[26],h[27]!==C?(p=(0,r.jsx)(f.ReleasesNav,{menuItemProps:C}),h[27]=C,h[28]=p):p=h[28],h[29]!==u||h[30]!==p?(m=(0,r.jsx)(lp,{tone:"caution",icon:v.WarningOutlineIcon,content:(0,r.jsxs)(a.Flex,{align:"center",gap:2,children:[u,p]})}),h[29]=u,h[30]=p,h[31]=m):m=h[31],m};function lH(){let e,t,n=(0,s.c)(5),{value:i}=i$(),{documentLinkedBannerContent:l}=(0,f.useSanityCreateConfig)().components??{};n[0]!==i?(e=(0,f.getSanityCreateLinkMetadata)(i),n[0]=i,n[1]=e):e=n[1];let o=e;return l&&o?(n[2]!==l||n[3]!==o?(t=(0,r.jsx)(lp,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,r.jsx)(l,{metadata:o})}),n[2]=l,n[3]=o,n[4]=t):t=n[4],t):null}function l$(e){let t,n,i,l,o,u,p,m,h,g,x,b=(0,s.c)(41),{documentId:y,currentRelease:v,isScheduledRelease:j}=e,w=v??f.LATEST;b[0]!==w?(t=(0,f.getReleaseTone)(w),b[0]=w,b[1]=t):t=b[1];let I=t,{t:S}=(0,f.useTranslation)(D),{t:C}=(0,f.useTranslation)(),{createVersion:_}=(0,f.useVersionOperations)(),T="string"==typeof v;b[2]!==v||b[3]!==T||b[4]!==C?(n=T?v:v?.metadata?.title||C("release.placeholder-untitled-release"),b[2]=v,b[3]=T,b[4]=C,b[5]=n):n=b[5];let R=n,[P,E]=(0,c.useState)(),k=(0,d.useToast)();b[6]!==_||b[7]!==v||b[8]!==y||b[9]!==T||b[10]!==S||b[11]!==k?(i=async()=>{if(T||v._id){E({status:"creating",lastUpdate:new Date});let e=T?v:(0,f.getReleaseIdFromReleaseDocumentId)(v._id);try{await _(e,y),E({status:"created",lastUpdate:new Date})}catch(e){k.push({status:"error",closable:!0,title:S("banners.release.error.title"),description:S("banners.release.error.description",{message:e.message})}),E(void 0)}}},b[6]=_,b[7]=v,b[8]=y,b[9]=T,b[10]=S,b[11]=k,b[12]=i):i=b[12];let F=i,A=function(e){let t,n,i,l=(0,s.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[o,r]=(0,c.useState)(t);return 200!==l[1]?(n=()=>{let e=setInterval(()=>{r(new Date)},200);return()=>clearInterval(e)},i=[200],l[1]=200,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,c.useEffect)(n,i),o}(200),L=P?.status==="created"&&A.getTime()-P.lastUpdate.getTime()>1e3;return b[13]!==S?(l=S("banners.release.waiting.title"),b[13]=S,b[14]=l):l=b[14],b[15]!==S?(o=S("banners.release.waiting.description"),b[15]=S,b[16]=o):o=b[16],b[17]!==L||b[18]!==l||b[19]!==o?(u={status:"info",id:"add-document-to-release",enabled:L,closable:!0,title:l,description:o},b[17]=L,b[18]=l,b[19]=o,b[20]=u):u=b[20],(0,f.useConditionalToast)(u),b[21]!==R?(p={title:R},b[21]=R,b[22]=p):p=b[22],b[23]!==v||b[24]!==T||b[25]!==C?(m={VersionBadge:e=>{let{children:t}=e,n=(0,f.getVersionInlineBadge)(v);return T?(0,r.jsx)(n,{children:t}):(0,r.jsx)(f.ReleaseTitle,{title:v.metadata?.title,fallback:C("release.placeholder-untitled-release"),children:()=>(0,r.jsx)(n,{children:t})})}},b[23]=v,b[24]=T,b[25]=C,b[26]=m):m=b[26],b[27]!==S||b[28]!==m||b[29]!==p?(h=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{i18nKey:"banners.release.not-in-release",t:S,values:p,components:m})}),b[27]=S,b[28]=m,b[29]=p,b[30]=h):h=b[30],b[31]!==F||b[32]!==j||b[33]!==S||b[34]!==I||b[35]!==P?(g=j?void 0:{text:S("banners.release.action.add-to-release"),tone:I,disabled:!!P,onClick:F,mode:"default"},b[31]=F,b[32]=j,b[33]=S,b[34]=I,b[35]=P,b[36]=g):g=b[36],b[37]!==h||b[38]!==g||b[39]!==I?(x=(0,r.jsx)(lp,{tone:I,content:h,action:g}),b[37]=h,b[38]=g,b[39]=I,b[40]=x):x=b[40],x}let lU=(0,tv.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),lG=e=>{let t,n,i,l,o,d,u,p,m,g,b,y,j,w,I,S=(0,s.c)(47),{displayed:C,documentId:_,schemaType:T,i18nKey:R,isEditBlocking:P}=e,{t:E}=(0,f.useTranslation)(D),[k,F]=(0,c.useState)(!1),[A,L]=(0,c.useState)(!1),M=(0,ty.useTelemetry)(),{publish:V,discardChanges:O}=(0,f.useDocumentOperation)(_,C?._type||"");S[0]!==V||S[1]!==M?(t=()=>{V.execute(),F(!0),M.log(lU,{liveEditResolveType:"publish"})},S[0]=V,S[1]=M,S[2]=t):t=S[2];let z=t;S[3]!==O||S[4]!==M?(n=()=>{O.execute(),L(!0),M.log(lU,{liveEditResolveType:"discard"})},S[3]=O,S[4]=M,S[5]=n):n=S[5];let B=n;S[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{F(!1),L(!1)},S[6]=i):i=S[6],(0,c.useEffect)(i);let N=nO();S[7]!==N||S[8]!==C?._id||S[9]!==T.name?(l=()=>{typeof C?._id>"u"||N.navigateDiffView({mode:"version",previousDocument:{type:T.name,id:(0,h.getPublishedId)(C?._id)},nextDocument:{type:T.name,id:(0,h.getDraftId)(C?._id)}})},S[7]=N,S[8]=C?._id,S[9]=T.name,S[10]=l):l=S[10];let H=l;return S[11]!==T.title?(o={schemaType:T.title},S[11]=T.title,S[12]=o):o=S[12],S[13]!==R||S[14]!==E||S[15]!==o?(d=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:(0,r.jsx)(f.Translate,{t:E,i18nKey:R,values:o})}),S[13]=R,S[14]=E,S[15]=o,S[16]=d):d=S[16],S[17]!==E?(u=E("banners.obsolete-draft.actions.compare-draft.text"),S[17]=E,S[18]=u):u=S[18],S[19]!==H||S[20]!==u?(p=(0,r.jsx)(x.Button,{text:u,mode:"ghost",onClick:H}),S[19]=H,S[20]=u,S[21]=p):p=S[21],S[22]!==E?(m=E("banners.obsolete-draft.actions.publish-draft.text"),S[22]=E,S[23]=m):m=S[23],S[24]!==P||S[25]!==E?(g=P?{content:E("banners.live-edit-draft-banner.publish.tooltip")}:{},S[24]=P,S[25]=E,S[26]=g):g=S[26],S[27]!==z||S[28]!==k||S[29]!==g||S[30]!==m?(b=(0,r.jsx)(x.Button,{onClick:z,text:m,tooltipProps:g,loading:k,tone:"positive"}),S[27]=z,S[28]=k,S[29]=g,S[30]=m,S[31]=b):b=S[31],S[32]!==E?(y=E("banners.obsolete-draft.actions.discard-draft.text"),S[32]=E,S[33]=y):y=S[33],S[34]!==P||S[35]!==E?(j=P?{content:E("banners.live-edit-draft-banner.discard.tooltip")}:{},S[34]=P,S[35]=E,S[36]=j):j=S[36],S[37]!==B||S[38]!==A||S[39]!==y||S[40]!==j?(w=(0,r.jsx)(x.Button,{onClick:B,text:y,tooltipProps:j,loading:A,tone:"caution"}),S[37]=B,S[38]=A,S[39]=y,S[40]=j,S[41]=w):w=S[41],S[42]!==b||S[43]!==w||S[44]!==d||S[45]!==p?(I=(0,r.jsx)(lp,{content:(0,r.jsxs)(a.Flex,{align:"center",justify:"space-between",gap:2,children:[d,p,b,w]}),"data-testid":"live-edit-type-banner",icon:v.ErrorOutlineIcon}),S[42]=b,S[43]=w,S[44]=d,S[45]=p,S[46]=I):I=S[46],I};function lq(e){let t,n,i=(0,s.c)(4),{documentId:l,isPinnedDraftOrPublished:o}=e;i[0]!==l?(t={documentId:l},i[0]=l,i[1]=t):t=i[1];let a=(0,f.useOnlyHasVersions)(t);return(0,h.isVersionId)(l)&&a&&o?(i[2]!==l?(n=(0,r.jsx)(lW,{documentId:l}),i[2]=l,i[3]=n):n=i[3],n):null}function lW(e){let t,n,i,l,o,d,c,u,p,m,g,x=(0,s.c)(37),{documentId:b}=e,{data:y}=(0,f.useActiveReleases)(),v=(0,f.useSetPerspective)();x[0]!==b?(t=(0,h.getVersionFromId)(b)??"",x[0]=b,x[1]=t):t=x[1];let j=t;if(x[2]!==y||x[3]!==j){let e;x[5]!==j?(e=e=>e._id.includes(j),x[5]=j,x[6]=e):e=x[6],n=y.find(e),x[2]=y,x[3]=j,x[4]=n}else n=x[4];let w=n,{t:I}=(0,f.useTranslation)();x[7]!==b?(i={documentId:b},x[7]=b,x[8]=i):i=x[8];let{data:S}=(0,f.useDocumentVersions)(i);if(x[9]!==y||x[10]!==S){let e;x[12]!==S?(e=e=>S.find(t=>{let n=(0,h.getVersionFromId)(t)??"";return(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===n})&&!(0,f.isCardinalityOneRelease)(e),x[12]=S,x[13]=e):e=x[13],l=y.filter(e),x[9]=y,x[10]=S,x[11]=l}else l=x[11];let C=l;x[14]!==w?(o=w&&(0,f.getReleaseTone)(w),x[14]=w,x[15]=o):o=x[15];let _=o,{t:T}=(0,f.useTranslation)(D);x[16]!==j||x[17]!==v?(d=async()=>{v(j)},x[16]=j,x[17]=v,x[18]=d):d=x[18];let R=d;if(0===C.length)return null;let P=C[0];x[19]!==I?(c=I("release.placeholder-untitled-release"),x[19]=I,x[20]=c):c=x[20];let E=c;return x[21]!==C.length||x[22]!==T?(u=e=>{let{displayTitle:t}=e;return C.length>1?(0,r.jsx)(f.Translate,{t:T,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,r.jsx)(f.VersionInlineBadge,{children:t})},values:{count:C.length-1}}):(0,r.jsx)(f.Translate,{t:T,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,r.jsx)(f.VersionInlineBadge,{children:t})}})},x[21]=C.length,x[22]=T,x[23]=u):u=x[23],x[24]!==E||x[25]!==P.metadata.title||x[26]!==u?(p=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(a.Flex,{direction:"row",gap:1,wrap:"wrap",children:(0,r.jsx)(f.ReleaseTitle,{title:P.metadata.title,fallback:E,children:u})})}),x[24]=E,x[25]=P.metadata.title,x[26]=u,x[27]=p):p=x[27],x[28]!==C.length||x[29]!==R||x[30]!==T||x[31]!==_?(m=C.length>0?{text:T("banners.release.action.open-to-edit"),tone:_,onClick:R,mode:"default"}:void 0,x[28]=C.length,x[29]=R,x[30]=T,x[31]=_,x[32]=m):m=x[32],x[33]!==m||x[34]!==p||x[35]!==_?(g=(0,r.jsx)(lp,{tone:_,"data-testid":"open-release-to-edit-banner",content:p,action:m}),x[33]=m,x[34]=p,x[35]=_,x[36]=g):g=x[36],g}function lK(){let e,t=(0,s.c)(2),{t:n}=(0,f.useTranslation)(D);return t[0]!==n?(e=(0,r.jsx)(lp,{tone:"caution",icon:v.PauseIcon,content:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{t:n,i18nKey:"banners.paused-scheduled-draft.text"})})}),t[0]=n,t[1]=e):e=t[1],e}function lY(){let e,t,n=(0,s.c)(4),{revisionNotFound:i}=i$(),{t:l}=(0,f.useTranslation)(D);return i?(n[0]!==l?(e=l("banners.revision-not-found.description"),n[0]=l,n[1]=e):e=n[1],n[2]!==e?(t=(0,r.jsx)(lp,{tone:"caution","data-test-id":"revision-not-found-banner",icon:v.WarningOutlineIcon,content:(0,r.jsx)(a.Text,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function lX(e){let t,n,i,l,o,d=(0,s.c)(12),{currentRelease:c}=e,u=c??f.LATEST;d[0]!==u?(t=(0,f.getReleaseTone)(u),d[0]=u,d[1]=t):t=d[1];let p=t,{t:m}=(0,f.useTranslation)();return d[2]!==c?(n=(0,f.formatRelativeLocalePublishDate)(c),d[2]=c,d[3]=n):n=d[3],d[4]!==n?(i={date:n},d[4]=n,d[5]=i):i=d[5],d[6]!==i||d[7]!==m?(l=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{t:m,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),d[6]=i,d[7]=m,d[8]=l):l=d[8],d[9]!==l||d[10]!==p?(o=(0,r.jsx)(lp,{tone:p,icon:v.LockIcon,content:l}),d[9]=l,d[10]=p,d[11]=o):o=d[11],o}function lQ(){let e=(0,s.c)(17),{value:t,editState:n}=i$(),{selectedPerspective:i}=(0,f.usePerspective)(),l=(0,f.isGoingToUnpublish)(t)||n?.version&&(0,f.isGoingToUnpublish)(n?.version),{t:o}=(0,f.useTranslation)(D),{t:d}=(0,f.useTranslation)();if((0,f.isReleaseDocument)(i)&&l){let t,n,l,s,c,u;e[0]!==i.metadata?.title||e[1]!==d?(t=i.metadata?.title||d("release.placeholder-untitled-release"),e[0]=i.metadata?.title,e[1]=d,e[2]=t):t=e[2];let p=t;return e[3]!==p?(n={title:p},e[3]=p,e[4]=n):n=e[4],e[5]!==i||e[6]!==d?(l={VersionBadge:e=>{let{children:t}=e,n=(0,f.getVersionInlineBadge)(i);return(0,r.jsx)(f.ReleaseTitle,{title:i.metadata?.title,fallback:d("release.placeholder-untitled-release"),children:()=>(0,r.jsx)(n,{children:t})})}},e[5]=i,e[6]=d,e[7]=l):l=e[7],e[8]!==o||e[9]!==n||e[10]!==l?(s=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{t:o,i18nKey:"banners.unpublished-release-banner.text",values:n,components:l})}),e[8]=o,e[9]=n,e[10]=l,e[11]=s):s=e[11],e[12]!==o?(c=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{t:o,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[12]=o,e[13]=c):c=e[13],e[14]!==s||e[15]!==c?(u=(0,r.jsx)(lp,{tone:"critical",content:(0,r.jsxs)(a.Stack,{space:2,children:[s,c]}),icon:v.UnpublishIcon}),e[14]=s,e[15]=c,e[16]=u):u=e[16],u}return null}let lJ=(0,eA.styled)(a.Stack).withConfig({displayName:"TitleContainer",componentId:"sc-e3cjxp-0"})`${({theme:e})=>eA.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}`,lZ=e=>{let t,n,i,l,o=(0,s.c)(14),{documentId:d,schemaType:c,title:u}=e,p=d===c.name,m=c.description,{t:h}=(0,f.useTranslation)(D);if(!1===c.__experimental_formPreviewTitle)return null;o[0]!==m||o[1]!==p||o[2]!==c.name||o[3]!==c.title?(t=!p&&(0,r.jsxs)(a.Inline,{space:1,children:[(0,r.jsx)(a.Text,{muted:!0,size:1,children:c.title??c.name}),m&&(0,r.jsx)(x.Tooltip,{content:m,placement:"right",children:(0,r.jsx)(v.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),o[0]=m,o[1]=p,o[2]=c.name,o[3]=c.title,o[4]=t):t=o[4];let g=!u;return o[5]!==h||o[6]!==u?(n=u??h("document-view.form-view.form-title-fallback"),o[5]=h,o[6]=u,o[7]=n):n=o[7],o[8]!==g||o[9]!==n?(i=(0,r.jsx)(a.Heading,{as:"h2","data-heading":!0,muted:g,"data-testid":"document-panel-document-title",children:n}),o[8]=g,o[9]=n,o[10]=i):i=o[10],o[11]!==t||o[12]!==i?(l=(0,r.jsxs)(lJ,{marginBottom:6,space:4,children:[t,i]}),o[11]=t,o[12]=i,o[13]=l):l=o[13],l},l0=e=>e.preventDefault(),l1=(0,c.forwardRef)(function(e,t){let n,i,l,o,u,p,m,h,g,x,b,y,v,j,w,I=(0,s.c)(77),{hidden:S,margins:C}=e,{collapsedFieldSets:_,collapsedPaths:T,displayed:R,editState:P,documentId:E,documentType:k,fieldActions:F,onChange:A,validation:L,ready:M,formState:V,onFocus:O,connectionState:z,onBlur:B,onSetCollapsedPath:N,onPathOpen:H,onSetCollapsedFieldSet:$,onSetActiveFieldGroup:U,openPath:G,compareValue:q,hasUpstreamVersion:W}=i$(),{selectedReleaseId:K,selectedPerspective:Y}=(0,f.usePerspective)(),X=(0,f.useDocumentStore)(),Q=(0,f.useDocumentPresence)(E),{title:J}=i4(),[Z]=(0,c.useState)(l2),ee=P?.transactionSyncLock?.enabled,{t:et}=(0,f.useTranslation)(D);I[0]!==et?(n=et("document-view.form-view.sync-lock-toast.title"),I[0]=et,I[1]=n):n=I[1],I[2]!==et?(i=et("document-view.form-view.sync-lock-toast.description"),I[2]=et,I[3]=i):i=I[3],I[4]!==ee||I[5]!==n||I[6]!==i?(l={id:"sync-lock",status:"warning",enabled:ee,title:n,description:i,closable:!0},I[4]=ee,I[5]=n,I[6]=i,I[7]=l):l=I[7],(0,f.useConditionalToast)(l),I[8]!==E||I[9]!==X.pair||I[10]!==k||I[11]!==Z||I[12]!==K?(o=()=>{let e=X.pair.documentEvents(E,k,K).pipe((0,e8.tap)(e=>{var t,n;let i,l,o;"mutation"===e.type&&Z.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,f.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&Z.publish((l=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),o=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,f.fromMutationPatches)("remote",l).concat((0,f.fromMutationPatches)("local",o))}))})).subscribe();return()=>{e.unsubscribe()}},I[8]=E,I[9]=X.pair,I[10]=k,I[11]=Z,I[12]=K,I[13]=o):o=I[13],I[14]!==E||I[15]!==X||I[16]!==k||I[17]!==Z||I[18]!==K?(u=[E,X,k,Z,K],I[14]=E,I[15]=X,I[16]=k,I[17]=Z,I[18]=K,I[19]=u):u=I[19],(0,c.useEffect)(o,u);let en=!!R?._rev;I[20]!==Z||I[21]!==R?(p=()=>{Z.publish({type:"mutation",patches:[],snapshot:R})},I[20]=Z,I[21]=R,I[22]=p):p=I[22];let ei=(0,c.useEffectEvent)(p);I[23]!==ei||I[24]!==en?(m=()=>{en&&ei()},I[23]=ei,I[24]=en,I[25]=m):m=I[25],I[26]!==en?(h=[en],I[26]=en,I[27]=h):h=I[27],(0,c.useEffect)(m,h);let[el,eo]=(0,c.useState)(null),[er,es]=(0,c.useState)(!1);I[28]!==er||I[29]!==el||I[30]!==V?.focusPath.length||I[31]!==M?(g=()=>{!er&&M&&!V?.focusPath.length&&el&&(es(!0),(0,d.focusFirstDescendant)(el))},I[28]=er,I[29]=el,I[30]=V?.focusPath.length,I[31]=M,I[32]=g):g=I[32];let ea=V?.focusPath.length;I[33]!==er||I[34]!==el||I[35]!==M||I[36]!==ea?(x=[er,el,ea,M],I[33]=er,I[34]=el,I[35]=M,I[36]=ea,I[37]=x):x=I[37],(0,c.useEffect)(g,x),I[38]!==t?(b=e=>{eo(e),"function"==typeof t?t(e):t&&(t.current=e)},I[38]=t,I[39]=b):b=I[39];let ed=b,ec="reconnecting"===z||V?.readOnly||!P?.ready,eu=ec?"true":void 0;return I[40]!==_||I[41]!==T||I[42]!==q||I[43]!==z||I[44]!==E||I[45]!==P?.draft||I[46]!==P?.published||I[47]!==F||I[48]!==V||I[49]!==W||I[50]!==S||I[51]!==ec||I[52]!==B||I[53]!==A||I[54]!==O||I[55]!==H||I[56]!==U||I[57]!==$||I[58]!==N||I[59]!==G||I[60]!==Z||I[61]!==Q||I[62]!==Y||I[63]!==et||I[64]!==J||I[65]!==L?(y="connecting"!==z||P?.draft||P?.published?null===V||S?(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsx)(a.Text,{children:et("document-view.form-view.form-hidden")})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lZ,{documentId:E,schemaType:V.schemaType,title:J}),(0,r.jsx)(f.FormBuilder,{__internal_fieldActions:F,__internal_patchChannel:Z,changed:V.changed,collapsedFieldSets:_,collapsedPaths:T,compareValue:q??void 0,focused:V.focused,focusPath:V.focusPath,groups:V.groups,id:"root",members:V.members,onChange:A,onFieldGroupSelect:U,onPathBlur:B,onPathFocus:O,onPathOpen:H,onSetFieldSetCollapsed:$,onSetPathCollapsed:N,openPath:G,perspective:Y,hasUpstreamVersion:W,presence:Q,readOnly:ec,schemaType:V.schemaType,validation:L,value:V.value})]}):(0,r.jsx)(iz,{ms:300,children:(0,r.jsxs)(a.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,r.jsx)(a.Spinner,{muted:!0}),(0,r.jsx)(a.Box,{marginTop:3,children:(0,r.jsx)(a.Text,{align:"center",muted:!0,size:1,children:et("document-view.form-view.loading")})})]})}),I[40]=_,I[41]=T,I[42]=q,I[43]=z,I[44]=E,I[45]=P?.draft,I[46]=P?.published,I[47]=F,I[48]=V,I[49]=W,I[50]=S,I[51]=ec,I[52]=B,I[53]=A,I[54]=O,I[55]=H,I[56]=U,I[57]=$,I[58]=N,I[59]=G,I[60]=Z,I[61]=Q,I[62]=Y,I[63]=et,I[64]=J,I[65]=L,I[66]=y):y=I[66],I[67]!==ed||I[68]!==eu||I[69]!==y?(v=(0,r.jsx)(a.Box,{as:"form",onSubmit:l0,ref:ed,"data-testid":"form-view","data-read-only":eu,children:y}),I[67]=ed,I[68]=eu,I[69]=y,I[70]=v):v=I[70],I[71]!==C||I[72]!==v?(j=(0,r.jsx)(f.PresenceOverlay,{margins:C,children:v}),I[71]=C,I[72]=v,I[73]=j):j=I[73],I[74]!==S||I[75]!==j?(w=(0,r.jsx)(a.Container,{hidden:S,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:j}),I[74]=S,I[75]=j,I[76]=w):w=I[76],w});function l2(){return(0,f.createPatchChannel)()}function l3(){let e,t,n=(0,s.c)(11),{activeViewId:i,paneKey:l,views:o}=i$(),d=`${l}tabpanel`;if(n[0]!==i||n[1]!==l||n[2]!==d||n[3]!==o){let t;n[5]!==i||n[6]!==l||n[7]!==d?(t=(e,t)=>(0,r.jsx)(l4,{icon:e.icon,id:`${l}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:d,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=l,n[7]=d,n[8]=t):t=n[8],e=o.map(t),n[0]=i,n[1]=l,n[2]=d,n[3]=o,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,r.jsx)(a.TabList,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function l4(e){let t,n,i,l,o,a,d,c,u,p=(0,s.c)(20);p[0]!==e?({icon:t,id:n,isActive:i,label:l,tabPanelId:a,viewId:d,...o}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=i,p[4]=l,p[5]=o,p[6]=a,p[7]=d):(t=p[1],n=p[2],i=p[3],l=p[4],o=p[5],a=p[6],d=p[7]);let{ready:m,editState:h}=i$(),{setView:f}=lA();p[8]!==f||p[9]!==d?(c=()=>f(d),p[8]=f,p[9]=d,p[10]=c):c=p[10];let g=c,b=!m&&!h?.draft&&!h?.published;return p[11]!==g||p[12]!==t||p[13]!==n||p[14]!==i||p[15]!==l||p[16]!==o||p[17]!==b||p[18]!==a?(u=(0,r.jsx)(x.Tab,{...o,"aria-controls":a,disabled:b,icon:t,id:n,label:l,onClick:g,selected:i}),p[11]=g,p[12]=t,p[13]=n,p[14]=i,p[15]=l,p[16]=o,p[17]=b,p[18]=a,p[19]=u):u=p[19],u}let l5={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function l6(){return(0,c.useContext)(u.ResolvedPanesContext)??l5}let l8=Object.freeze({}),l7=Symbol("LOADING_PANE"),l9="documentPanelPortalElement",oe=(0,tv.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),ot=(0,tv.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),on=(0,tv.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function oi(e){let t,n,i,l,o,a,d,c,u=(0,s.c)(27),{paneData:p,index:m}=e,{pane:h}=p,g=(0,b.useRouter)(),{t:y}=(0,f.useTranslation)(D),v=(0,b.useRouterState)(),j=(0,ty.useTelemetry)();u[0]!==v?.panes?(t=v?.panes||[],u[0]=v?.panes,u[1]=t):t=u[1];let w=t,{perspectiveStack:I}=(0,f.usePerspective)(),S=h!==l7&&"title"in h?h.title:null,C=h!==l7&&"document"===h.type?h.options.id:null,_=h!==l7&&"document"===h.type?h.options.type:null,T=C??"",R=_??"";u[2]!==I||u[3]!==T||u[4]!==R?(n={documentId:T,documentType:R,perspectiveStack:I},u[2]=I,u[3]=T,u[4]=R,u[5]=n):n=u[5];let{value:P,isLoading:E}=(0,f.useDocumentPreviewValues)(n);e:{if(C&&!E){let e;u[6]!==P?.title||u[7]!==y?(e=P?.title||y("panes.document-header-title.untitled.text"),u[6]=P?.title,u[7]=y,u[8]=e):e=u[8],i=e;break e}i=S}let k=i;u[9]!==p.groupIndex||u[10]!==g||u[11]!==w||u[12]!==j?(l=()=>{j.log(on),g.navigate({panes:w.slice(0,p.groupIndex)})},u[9]=p.groupIndex,u[10]=g,u[11]=w,u[12]=j,u[13]=l):l=u[13];let F=l;if(!k&&!E)return null;u[14]!==k||u[15]!==y?(o=k||y("panes.document-header-title.untitled.text"),u[14]=k,u[15]=y,u[16]=o):o=u[16],u[17]!==k||u[18]!==y?(a=k||y("panes.document-header-title.untitled.text"),u[17]=k,u[18]=y,u[19]=a):a=u[19],u[20]!==a?(d={content:a},u[20]=a,u[21]=d):d=u[21];let A=+(0!==m);return u[22]!==F||u[23]!==A||u[24]!==o||u[25]!==d?(c=(0,r.jsx)(x.Button,{mode:"bleed",text:o,tooltipProps:d,onClick:F,paddingLeft:A}),u[22]=F,u[23]=A,u[24]=o,u[25]=d,u[26]=c):c=u[26],c}function ol(e){let t,n,i=(0,s.c)(7),{paneDataItems:l,currentPaneIndex:o}=e;if(i[0]!==o||i[1]!==l){let e;i[3]!==o?(e=(e,t)=>{if(t>o)return null;let n=e.pane!==l7&&"document"===e.pane.type;return(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(oi,{paneData:e,index:t}),t<o&&(n?(0,r.jsx)(a.Box,{padding:1,children:(0,r.jsx)(v.ArrowRightIcon,{})}):(0,r.jsx)(a.Text,{children:"/"}))]},`breadcrumb-item-${e.key}-${t}`)},i[3]=o,i[4]=e):e=i[4],t=l.map(e),i[0]=o,i[1]=l,i[2]=t}else t=i[2];return i[5]!==t?(n=(0,r.jsx)(a.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:t}),i[5]=t,i[6]=n):n=i[6],n}function oo(){let e,t,n,i=(0,s.c)(23),{connectionState:l,schemaType:o,title:a,value:d,index:c}=i$(),{paneDataItems:u}=l6(),{title:p,error:m}=i4(),{t:h}=(0,f.useTranslation)(D);i[0]!==u?(e=u.some(or),i[0]=u,i[1]=e):e=i[1];let g=e;if("connecting"===l&&!d){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r.Fragment,{}),i[2]=e):e=i[2],e}if(a){let e;return i[3]!==a?(e=(0,r.jsx)(r.Fragment,{children:a}),i[3]=a,i[4]=e):e=i[4],e}if(!d){let e,t,n=o?.title||o?.name;return i[5]!==h||i[6]!==n?(e=h("panes.document-header-title.new.text",{schemaType:n}),i[5]=h,i[6]=n,i[7]=e):e=i[7],i[8]!==e?(t=(0,r.jsx)(r.Fragment,{children:e}),i[8]=e,i[9]=t):t=i[9],t}if(m){let e,t;return i[10]!==m||i[11]!==h?(e=h("panes.document-header-title.error.text",{error:m}),i[10]=m,i[11]=h,i[12]=e):e=i[12],i[13]!==e?(t=(0,r.jsx)(r.Fragment,{children:e}),i[13]=e,i[14]=t):t=i[14],t}return i[15]!==p||i[16]!==g||i[17]!==c||i[18]!==u||i[19]!==h?(t=g?(0,r.jsx)(ol,{paneDataItems:u,currentPaneIndex:c}):p||(0,r.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:h("panes.document-header-title.untitled.text")}),i[15]=p,i[16]=g,i[17]=c,i[18]=u,i[19]=h,i[20]=t):t=i[20],i[21]!==t?(n=(0,r.jsx)(r.Fragment,{children:t}),i[21]=t,i[22]=n):n=i[22],n}function or(e){return e.maximized}let os=e=>{let t,n,i,l,o,d,c=(0,s.c)(16);c[0]!==e?({documentExists:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let{isFavorited:u,isReady:p,favorite:m,unfavorite:h}=(0,f.useManageFavorite)(n),{t:g}=(0,f.useTranslation)(D),b=u?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";c[3]!==g||c[4]!==b?(i=g(b),c[3]=g,c[4]=b,c[5]=i):i=c[5];let y=i,j=u?h:m,w=!p||!t;return c[6]!==y?(l={content:(0,r.jsx)(a.Text,{size:1,children:y}),placement:"right"},c[6]=y,c[7]=l):l=c[7],c[8]!==u?(o=(0,r.jsx)(a.Text,{size:1,children:u?(0,r.jsx)(v.StarFilledIcon,{}):(0,r.jsx)(v.StarIcon,{})}),c[8]=u,c[9]=o):o=c[9],c[10]!==y||c[11]!==j||c[12]!==w||c[13]!==l||c[14]!==o?(d=(0,r.jsx)(x.Button,{mode:"bleed",onClick:j,disabled:w,"aria-label":y,"aria-live":"assertive",tooltipProps:l,children:o}),c[10]=y,c[11]=j,c[12]=w,c[13]=l,c[14]=o,c[15]=d):d=c[15],d},oa=(0,c.memo)(function(){let e,t,n,i,l,o,a=(0,s.c)(24),{editState:d,connectionState:c,views:u,documentId:p,displayed:m}=i$(),{features:h}=iX(),{index:g,BackLink:b}=lA(),{activeWorkspace:y}=(0,f.useActiveWorkspace)(),j=u.length>1,{collapsed:w,isLast:I}=ia(),S=I&&!w?-1:0,C=h.backButton&&g>0,{t:_}=(0,f.useTranslation)(D);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(oo,{}),a[0]=e):e=a[0];let T=e;a[1]!==j?(t=j&&(0,r.jsx)(l3,{}),a[1]=j,a[2]=t):t=a[2];let R=t;a[3]!==b||a[4]!==C||a[5]!==_?(n=C&&(0,r.jsx)(x.Button,{as:b,"data-as":"a",icon:v.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:_("pane-header.back-button.text")}}),a[3]=b,a[4]=C,a[5]=_,a[6]=n):n=a[6];let P=n,E=m?._id??p,k=m?._type??"";a[7]!==y.dataset||a[8]!==y.projectId?(i=[y.projectId,y.dataset],a[7]=y.dataset,a[8]=y.projectId,a[9]=i):i=a[9];let F=i.join("."),A=(d?.ready&&(d.version??d.draft??d.published)!==null)??!1;a[10]!==y.dataset||a[11]!==y.name||a[12]!==y.projectId||a[13]!==E||a[14]!==k||a[15]!==F||a[16]!==A?(l=(0,r.jsx)(f.CapabilityGate,{capability:"comlink",condition:"available",children:(0,r.jsx)(os,{resourceType:"studio",documentId:E,documentType:k,resourceId:F,schemaName:y.name,projectId:y.projectId,dataset:y.dataset,documentExists:A})}),a[10]=y.dataset,a[11]=y.name,a[12]=y.projectId,a[13]=E,a[14]=k,a[15]=F,a[16]=A,a[17]=l):l=a[17];let L=l,M="connecting"===c&&!d?.draft&&!d?.published;return a[18]!==P||a[19]!==L||a[20]!==M||a[21]!==S||a[22]!==R?(o=(0,r.jsx)(iR,{loading:M,title:T,tabs:R,tabIndex:S,backButton:P,appendTitle:L}),a[18]=P,a[19]=L,a[20]=M,a[21]=S,a[22]=R,a[23]=o):o=a[23],o}),od=(0,eA.styled)(a.Box).withConfig({displayName:"DocumentBox",componentId:"sc-10i0hcs-0"})({position:"relative"}),oc=(0,eA.styled)(f.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-10i0hcs-1"})(({$disabled:e})=>e?{height:"100%"}:eA.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),ou=function(e){let t,n,i,l,o,d,u,p,m,g,x,b,y,v,j,w,I=(0,s.c)(114),{footerHeight:S,headerHeight:C,isInspectOpen:_,rootElement:T,setDocumentPanelPortalElement:R,footer:P}=e,{activeViewId:E,displayed:D,documentId:k,editState:F,inspector:A,value:L,views:M,ready:V,schemaType:O,permissions:z,isPermissionsLoading:B}=i$();if(I[0]!==L){let e=(0,f.getSanityCreateLinkMetadata)(L);t=(0,f.isSanityCreateLinked)(e),I[0]=L,I[1]=t}else t=I[1];let N=t,{params:H}=lA(),{collapsed:$}=it(),{collapsed:U}=ia(),G=(0,a.usePortal)(),{features:q}=iX(),[W,K]=(0,c.useState)(null),[Y,X]=(0,c.useState)(null),Q=(0,c.useRef)(null),J=(0,f.useWorkspace)(),Z=L._createdAt?"update":"create";I[2]!==E||I[3]!==M?(n=M.find(e=>e.id===E)||M[0]||{type:"form"},I[2]=E,I[3]=M,I[4]=n):n=I[4];let ee=n,et=q.splitPanes&&W||G.element;e:{let e;if($){let e,t=C||0,n=S?S+2:2;I[5]!==t||I[6]!==n?(e=[t,0,n,0],I[5]=t,I[6]=n,I[7]=e):e=I[7],i=e;break e}I[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],I[8]=e):e=I[8],i=e}let en=i,ei="form"!==ee.type;I[9]!==ee.component||I[10]!==ee.options||I[11]!==ee.type||I[12]!==D||I[13]!==k||I[14]!==F?.draft||I[15]!==F?.published||I[16]!==O||I[17]!==L?(l=()=>{if("component"===ee.type&&ee.component){let e=ee.component;return(0,r.jsx)(e,{document:{draft:F?.draft||null,displayed:D||L,historical:D,published:F?.published||null},documentId:k,options:ee.options,schemaType:O})}return!1},I[9]=ee.component,I[10]=ee.options,I[11]=ee.type,I[12]=D,I[13]=k,I[14]=F?.draft,I[15]=F?.published,I[16]=O,I[17]=L,I[18]=l):l=I[18],I[19]!==l?(o=l(),I[19]=l,I[20]=o):o=I[20];let el=o,eo=(0,c.useRef)(void 0);I[21]!==k||I[22]!==Y?(d=()=>{if(Y?.scrollTo){if(void 0===eo.current){eo.current=k;return}eo.current!==k&&(Y.scrollTo(0,0),eo.current=k)}},u=[k,Y],I[21]=k,I[22]=Y,I[23]=d,I[24]=u):(d=I[23],u=I[24]),(0,c.useEffect)(d,u),I[25]!==et||I[26]!==R?(p=()=>{et&&R(et)},m=[et,R],I[25]=et,I[26]=R,I[27]=p,I[28]=m):(p=I[27],m=I[28]),(0,c.useEffect)(p,m),I[29]!==D||I[30]!==_||I[31]!==L?(g=_?(0,r.jsx)(lu,{value:D||L}):null,I[29]=D,I[30]=_,I[31]=L,I[32]=g):g=I[32];let er=g,es=!!(!U&&A),{selectedPerspective:ea,selectedReleaseId:ed,selectedPerspectiveName:ec}=(0,f.usePerspective)(),eu=H?.historyVersion;I[33]!==D||I[34]!==k||I[35]!==eu?(x={historyVersion:eu,displayed:D,documentId:k},I[33]=D,I[34]=k,I[35]=eu,I[36]=x):x=I[36];let ep=(0,f.useFilteredReleases)(x),{isPaused:em}=(0,f.usePausedScheduledDraft)();t:{let e,t,n,i,l,o,s,a,d,c,u,p,m,g,x;if(H?.historyVersion){let e;I[37]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(lL,{}),I[37]=e):e=I[37],b=e;break t}I[38]!==ea?(e=(0,f.isReleaseDocument)(ea)&&(0,f.isReleaseScheduledOrScheduling)(ea),I[38]=ea,I[39]=e):e=I[39];let y=e,v=!!(y&&D?._id&&(0,h.getVersionFromId)(D?._id)===ed);if(I[40]!==F||I[41]!==O||I[42]!==ea||I[43]!==J.document.drafts.enabled?(n=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,f.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,f.isPerspectiveWriteable)({selectedPerspective:ea,isDraftModelEnabled:J.document.drafts.enabled,schemaType:O}),editState:F}),I[40]=F,I[41]=O,I[42]=ea,I[43]=J.document.drafts.enabled,I[44]=t,I[45]=n):(t=I[44],n=I[45]),n){let e;I[46]!==t.reason||I[47]!==t.result||I[48]!==O||I[49]!==ea?(e=!t.result&&(0,r.jsx)(lN,{schemaType:O,selectedPerspective:ea,reason:t.reason}),I[46]=t.reason,I[47]=t.result,I[48]=O,I[49]=ea,I[50]=e):e=I[50],b=e;break t}if(em&&D?._id){let e;I[51]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(lK,{}),I[51]=e):e=I[51],b=e;break t}if(v){let e;I[52]!==ea?(e=(0,r.jsx)(lX,{currentRelease:ea}),I[52]=ea,I[53]=e):e=I[53],b=e;break t}I[54]!==ep.currentReleases||I[55]!==ep.notCurrentReleases?(i=[...ep.currentReleases,...ep.notCurrentReleases].find(op),I[54]=ep.currentReleases,I[55]=ep.notCurrentReleases,I[56]=i):i=I[56];let j=i,w=D?._id&&(0,h.isDraftId)(D._id);if("drafts"===ea&&j&&w){let e;I[57]!==D||I[58]!==j._id?(e=(0,r.jsx)(lF,{releaseId:j._id,draftDocument:D}),I[57]=D,I[58]=j._id,I[59]=e):e=I[59],b=e;break t}I[60]!==ea?(l=(0,f.isSystemBundle)(ea),I[60]=ea,I[61]=l):l=I[61];let S=l,C=F?.version&&(0,f.isGoingToUnpublish)(F?.version);if(!(0,f.isSystemBundle)(ea)&&D?._id&&(0,h.getVersionFromId)(D._id)!==ec&&V&&!S&&!1===(0,f.isNewDocument)(F)&&!C){let e;I[62]!==y||I[63]!==ea||I[64]!==L._id?(e=(0,r.jsx)(l$,{documentId:L._id,currentRelease:ea,isScheduledRelease:y}),I[62]=y,I[63]=ea,I[64]=L._id,I[65]=e):e=I[65],b=e;break t}let _=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return i?l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}:{result:!1}}({editState:F,workspace:J,schemaType:O});if("form"===ee.type&&!ed&&_.result){if("DRAFT_MODEL_INACTIVE"===_.reason){let e;I[66]!==D||I[67]!==k||I[68]!==O?(e=(0,r.jsx)(lG,{displayed:D,documentId:k,schemaType:O,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),I[66]=D,I[67]=k,I[68]=O,I[69]=e):e=I[69],b=e;break t}if("LIVE_EDIT_ACTIVE"===_.reason){let e;I[70]!==D||I[71]!==k||I[72]!==O?(e=(0,r.jsx)(lG,{displayed:D,documentId:k,schemaType:O,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),I[70]=D,I[71]=k,I[72]=O,I[73]=e):e=I[73],b=e;break t}}if("form"!==ee.type||B){b=null;break t}I[74]!==N?(o=N&&(0,r.jsx)(lH,{}),I[74]=N,I[75]=o):o=I[75],I[76]!==z?.granted||I[77]!==Z?(s=!z?.granted&&(0,r.jsx)(lR,{requiredPermission:Z}),I[76]=z?.granted,I[77]=Z,I[78]=s):s=I[78],I[79]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(lY,{}),d=(0,r.jsx)(lD,{}),c=(0,r.jsx)(lg,{}),u=(0,r.jsx)(lz,{}),p=(0,r.jsx)(lm,{}),m=(0,r.jsx)(lQ,{}),I[79]=a,I[80]=d,I[81]=c,I[82]=u,I[83]=p,I[84]=m):(a=I[79],d=I[80],c=I[81],u=I[82],p=I[83],m=I[84]);let T=D?._id??k;I[85]!==S||I[86]!==T?(g=(0,r.jsx)(lq,{documentId:T,isPinnedDraftOrPublished:S}),I[85]=S,I[86]=T,I[87]=g):g=I[87],I[88]!==o||I[89]!==s||I[90]!==g?(x=(0,r.jsxs)(r.Fragment,{children:[o,s,a,d,c,u,p,m,g]}),I[88]=o,I[89]=s,I[90]=g,I[91]=x):x=I[91],b=x}let eh=b;I[92]!==Y?(y={documentScrollElement:Y},I[92]=Y,I[93]=y):y=I[93];let ef=y,eg=q.resizablePanes||!es;return I[94]!==el||I[95]!==eh||I[96]!==Y||I[97]!==P||I[98]!==ei||I[99]!==er||I[100]!==$||I[101]!==en||I[102]!==et||I[103]!==ef||I[104]!==eg?(v=eg&&(0,r.jsxs)(a.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,r.jsxs)(f.LegacyLayerProvider,{zOffset:"paneHeader",children:[eh,(0,r.jsx)(oa,{})]}),(0,r.jsx)(od,{flex:2,children:(0,r.jsx)(a.PortalProvider,{element:et,__unstable_elements:ef,children:(0,r.jsx)(a.BoundaryElementProvider,{element:Y,children:(0,r.jsxs)(f.VirtualizerScrollInstanceProvider,{scrollElement:Y,containerElement:Q,children:[(0,r.jsxs)(oc,{$disabled:$||!1,"data-testid":"document-panel-scroller",ref:X,children:[(0,r.jsx)(l1,{hidden:ei,margins:en,ref:Q}),el]}),er,(0,r.jsx)("div",{"data-testid":"document-panel-portal",ref:K})]})})})}),P]}),I[94]=el,I[95]=eh,I[96]=Y,I[97]=P,I[98]=ei,I[99]=er,I[100]=$,I[101]=en,I[102]=et,I[103]=ef,I[104]=eg,I[105]=v):v=I[105],I[106]!==k||I[107]!==T||I[108]!==O||I[109]!==es?(j=es&&(0,r.jsx)(a.BoundaryElementProvider,{element:T,children:(0,r.jsx)(i9,{documentId:k,documentType:O.name,flex:1})}),I[106]=k,I[107]=T,I[108]=O,I[109]=es,I[110]=j):j=I[110],I[111]!==v||I[112]!==j?(w=(0,r.jsx)(id,{children:(0,r.jsxs)(a.Flex,{height:"fill",children:[v,j]})}),I[111]=v,I[112]=j,I[113]=w):w=I[113],w};function op(e){return(0,f.isCardinalityOneRelease)(e)&&((0,f.isReleaseScheduledOrScheduling)(e)||(0,f.isPausedCardinalityOneRelease)(e))}ou.displayName="DocumentPanel";let om=e=>{let t,n,i,l,o,r,a,d=(0,s.c)(26),{id:u,type:p,revision:m,release:h}=e,{restore:g}=(0,f.useDocumentOperation)(u,p,h),{revisionNotFound:x}=i$(),y=(0,f.useDocumentOperationEvent)(u,p),{navigateIntent:j}=(0,b.useRouter)(),w=(0,c.useRef)(y),[I,S]=(0,c.useState)(!1),{t:C}=(0,f.useTranslation)(D);d[0]!==g||d[1]!==m?(t=()=>{g.execute(m),S(!1)},d[0]=g,d[1]=m,d[2]=t):t=d[2];let _=t;d[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{S(!1)},d[3]=n):n=d[3];let T=n;d[4]!==y||d[5]!==u||d[6]!==j||d[7]!==p?(i=()=>{y&&y!==w.current&&("success"===y.type&&"restore"===y.op&&j("edit",{id:u,type:p}),w.current=y)},l=[y,u,j,p],d[4]=y,d[5]=u,d[6]=j,d[7]=p,d[8]=i,d[9]=l):(i=d[8],l=d[9]),(0,c.useEffect)(i,l),d[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{S(!0)},d[10]=o):o=d[10];let R=o;e:{if(I){let e,t;d[11]!==C?(e=C("action.restore.confirm.message"),d[11]=C,d[12]=e):e=d[12],d[13]!==_||d[14]!==e?(t={type:"confirm",tone:"critical",onCancel:T,onConfirm:_,message:e},d[13]=_,d[14]=e,d[15]=t):t=d[15],r=t;break e}r=null}let P=r,E="@initial"===m,k=void 0===m;t:{let e,t,n;if(k||x){a=null;break t}d[16]!==C?(e=C("action.restore.label"),d[16]=C,d[17]=e):e=d[17];let i=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";d[18]!==C||d[19]!==i?(t=C(i),d[18]=C,d[19]=i,d[20]=t):t=d[20],d[21]!==P||d[22]!==E||d[23]!==t||d[24]!==e?(n={label:e,tone:"caution",onHandle:R,title:t,icon:v.RevertIcon,dialog:P,disabled:E},d[21]=P,d[22]=E,d[23]=t,d[24]=e,d[25]=n):n=d[25],a=n}return a};function oh(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}om.action="restore",om.displayName="HistoryRestoreAction";let of=(0,ti.default)(oh);function og(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&r.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:`${o+t}-item`,hideSelectionIndicator:i.params?.hideSelectionIndicator===!0,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${o+t}-item`,hideSelectionIndicator:i.params?.hideSelectionIndicator===!0,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...r,...l]}let ox=["left","bottom"],ob={small:0,medium:1,large:2,full:"auto"};function oy(e){let t,n,i,l=(0,s.c)(16),{dialog:o,referenceElement:a}=e,{t:d}=(0,f.useTranslation)(D),{cancelButtonIcon:c,cancelButtonText:u,confirmButtonIcon:p,confirmButtonText:m,message:h,onCancel:g,onConfirm:x,tone:b}=o;return l[0]!==u||l[1]!==d?(t=u||d("confirm-dialog.cancel-button.fallback-text"),l[0]=u,l[1]=d,l[2]=t):t=l[2],l[3]!==m||l[4]!==d?(n=m||d("confirm-dialog.confirm-button.fallback-text"),l[3]=m,l[4]=d,l[5]=n):n=l[5],l[6]!==c||l[7]!==p||l[8]!==h||l[9]!==g||l[10]!==x||l[11]!==a||l[12]!==t||l[13]!==n||l[14]!==b?(i=(0,r.jsx)(tb.ConfirmPopover,{cancelButtonIcon:c,cancelButtonText:t,confirmButtonIcon:p,confirmButtonText:n,message:h,onCancel:g,onConfirm:x,open:!0,referenceElement:a,tone:b,placement:"top",fallbackPlacements:ox}),l[6]=c,l[7]=p,l[8]=h,l[9]=g,l[10]=x,l[11]=a,l[12]=t,l[13]=n,l[14]=b,l[15]=i):i=l[15],i}function ov(e){let t,n,i,l=(0,s.c)(12),{dialog:o}=e,u=(0,c.useId)();l[0]!==o.footer?(t=o.footer&&(0,r.jsx)(a.Box,{paddingX:4,paddingY:3,children:o.footer}),l[0]=o.footer,l[1]=t):t=l[1];let p=t,m=!1===o.showCloseButton,h=void 0===o.width?1:ob[o.width];return l[2]!==o.content?(n=(0,r.jsx)(a.Box,{padding:4,children:o.content}),l[2]=o.content,l[3]=n):n=l[3],l[4]!==o.header||l[5]!==o.onClose||l[6]!==u||l[7]!==p||l[8]!==m||l[9]!==h||l[10]!==n?(i=(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,r.jsx)(d.Dialog,{animate:!0,__unstable_hideCloseButton:m,footer:p,header:o.header,id:u,onClose:o.onClose,onClickOutside:o.onClose,width:h,children:n})}),l[4]=o.header,l[5]=o.onClose,l[6]=u,l[7]=p,l[8]=m,l[9]=h,l[10]=n,l[11]=i):i=l[11],i}function oj(e){let t,n,i=(0,s.c)(5),{dialog:l,referenceElement:o}=e;return i[0]!==l?(t=(0,r.jsx)(ow,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,r.jsx)(a.Popover,{content:t,fallbackPlacements:ox,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}function ow(e){let t,n,i,l=(0,s.c)(6),{dialog:o}=e,{content:d,onClose:u}=o,{isTopLayer:p}=(0,a.useLayer)(),m=(0,c.useRef)(null);return l[0]!==p||l[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},l[0]=p,l[1]=u,l[2]=t):t=l[2],(0,a.useGlobalKeyDown)(t),l[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],l[3]=n):n=l[3],(0,a.useClickOutsideEvent)(p&&u,n),l[4]!==d?(i=(0,r.jsx)("div",{ref:m,children:d}),l[4]=d,l[5]=i):i=l[5],i}function oI(e){let t,n=(0,s.c)(3),{children:i}=e,{element:l,elements:o}=(0,a.usePortal)(),d=o?.[l9]||l;return n[0]!==i||n[1]!==d?(t=(0,r.jsx)(a.PortalProvider,{element:d,children:i}),n[0]=i,n[1]=d,n[2]=t):t=n[2],t}function oS(e){let t,n,i=(0,s.c)(17),{dialog:l,referenceElement:o}=e,d=void 0===o?null:o,u=(0,c.useId)();if("confirm"===l.type){let e;return i[0]!==l||i[1]!==d?(e=(0,r.jsx)(oy,{dialog:l,referenceElement:d}),i[0]=l,i[1]=d,i[2]=e):e=i[2],e}if("popover"===l.type){let e;return i[3]!==l||i[4]!==d?(e=(0,r.jsx)(oj,{dialog:l,referenceElement:d}),i[3]=l,i[4]=d,i[5]=e):e=i[5],e}if("dialog"===l.type||!l.type){let e;return i[6]!==l?(e=(0,r.jsx)(oI,{children:(0,r.jsx)(ov,{dialog:l})}),i[6]=l,i[7]=e):e=i[7],e}if("custom"===l.type){let e,t=l?.component;return i[8]!==t?(e=(0,r.jsx)(oI,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${l.type}`),i[10]!==l.content||i[11]!==l.type?(t=l.content||(0,r.jsxs)(a.Text,{size:1,children:["Unexpected modal type (",(0,r.jsx)("code",{children:l.type}),")"]}),i[10]=l.content,i[11]=l.type,i[12]=t):t=i[12],i[13]!==u||i[14]!==t||i[15]!==l.onClose?(n=(0,r.jsx)(x.Dialog,{id:u,onClose:l.onClose,onClickOutside:l.onClose,width:1,children:t}),i[13]=u,i[14]=t,i[15]=l.onClose,i[16]=n):n=i[16],n}let oC=(0,c.memo)(function(e){let t,n,i,l,o=(0,s.c)(9),{actionStates:a,children:d,referenceElement:u}=e,[p,m]=(0,c.useState)(-1),h=a[p];o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{m(e)},o[0]=t):t=o[0];let g=t;o[1]!==d?(n=d({handleAction:g}),o[1]=d,o[2]=n):n=o[2];let x=n;return o[3]!==h||o[4]!==u?(i=h&&h.dialog&&(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,r.jsx)(oS,{dialog:h.dialog,referenceElement:u})}),o[3]=h,o[4]=u,o[5]=i):i=o[5],o[6]!==x||o[7]!==i?(l=(0,r.jsxs)(r.Fragment,{children:[i,x]}),o[6]=x,o[7]=i,o[8]=l):l=o[8],l});function o_(e){let t,n,i,l=(0,s.c)(10),{actionStates:o,disabled:d}=e,u=(0,c.useId)(),[p,m]=(0,c.useState)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},l[0]=t):t=l[0];let h=t,{t:g}=(0,f.useTranslation)(D);l[1]!==o||l[2]!==d||l[3]!==u||l[4]!==g?(n=e=>{let{handleAction:t}=e;return(0,r.jsx)(x.MenuButton,{id:`${u}-action-menu`,button:(0,r.jsx)(f.ContextMenuButton,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:d,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,r.jsx)(a.Menu,{padding:1,children:o.map((e,n)=>(0,r.jsx)(oT,{actionState:e,disabled:d,index:n,onAction:t},n))}),popover:h,ref:m})},l[1]=o,l[2]=d,l[3]=u,l[4]=g,l[5]=n):n=l[5];let b=n;return l[6]!==o||l[7]!==p||l[8]!==b?(i=(0,r.jsx)(oC,{actionStates:o,referenceElement:p,children:b}),l[6]=o,l[7]=p,l[8]=b,l[9]=i):i=l[9],i}function oT(e){let t,n,i,l,o,a=(0,s.c)(20),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:m}=d;a[0]!==u||a[1]!==p||a[2]!==m?(t=()=>{p(u),m&&m()},a[0]=u,a[1]=p,a[2]=m,a[3]=t):t=a[3];let h=t;a[4]!==d.shortcut?(n=d.shortcut?String(d.shortcut).split("+").map(oR):void 0,a[4]=d.shortcut,a[5]=n):n=a[5];let f=n;a[6]!==d.label?(i=d.label.replace(" ",""),a[6]=d.label,a[7]=i):i=a[7];let g=`action-${i}`,b=c||!!d.disabled;return a[8]!==d.disabled||a[9]!==d.title?(l=d.disabled&&{tooltipProps:{content:d.title}},a[8]=d.disabled,a[9]=d.title,a[10]=l):l=a[10],a[11]!==d.icon||a[12]!==d.label||a[13]!==d.tone||a[14]!==h||a[15]!==f||a[16]!==g||a[17]!==b||a[18]!==l?(o=(0,r.jsx)(x.MenuItem,{"data-testid":g,disabled:b,hotkeys:f,icon:d.icon,onClick:h,text:d.label,tone:d.tone,...l}),a[11]=d.icon,a[12]=d.label,a[13]=d.tone,a[14]=h,a[15]=f,a[16]=g,a[17]=b,a[18]=l,a[19]=o):o=a[19],o}function oR(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function oP(e){var t,n;let i,l,o,d,u,p,m,g,b,y,j,w,I=(0,s.c)(43),{nonReleaseVersions:S,selectedPerspective:C,onSelectBundle:_,onCopyToDraftsNavigate:T,documentType:R,releasesLoading:P,releases:E}=e,{t:D}=(0,f.useTranslation)(),[k,F]=(0,c.useState)(!1),[A,L]=(0,c.useState)(null);I[0]!==C?(l=e=>(0,h.getVersionFromId)(e)===C,I[0]=C,I[1]=l):l=I[1],I[2]!==S||I[3]!==l?(t=S,n=l,o=[-1===(i=t.findIndex(n))?void 0:t[i],-1===i?t:t.slice(0,i).concat(t.slice(i+1))],I[2]=S,I[3]=l,I[4]=o):o=I[4];let[M,V]=o,O=(0,c.useRef)(null);if(I[5]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{e.target&&"matches"in e.target&&"function"==typeof e.target.matches&&e.target.matches("[data-portal] *")||F(!1)},u=()=>[O.current],I[5]=d,I[6]=u):(d=I[5],u=I[6]),(0,a.useClickOutsideEvent)(d,u),0===S.length)return null;if(I[7]!==R||I[8]!==T||I[9]!==_||I[10]!==E||I[11]!==P||I[12]!==M?(p=M&&(w=(0,h.getVersionFromId)(M),(0,r.jsx)(f.VersionChip,{selected:!0,text:w,tone:"default",onClick:()=>_(w),onCopyToDraftsNavigate:T,contextValues:{documentId:(0,h.getPublishedId)(M),releases:E,releasesLoading:P,documentType:R,bundleId:w,isVersion:!0}},M)),I[7]=R,I[8]=T,I[9]=_,I[10]=E,I[11]=P,I[12]=M,I[13]=p):p=I[13],I[14]!==k||I[15]!==V.length||I[16]!==D?(m=V.length>0?(0,r.jsx)(x.Tooltip,{content:D("release.chip.tooltip.other-versions",{count:V.length}),fallbackPlacements:[],portal:!0,placement:k?"top":"bottom",children:(0,r.jsx)(f.Chip,{mode:"bleed",fontSize:1,muted:!0,selected:k,iconRight:k?v.ChevronUpIcon:v.ChevronDownIcon,ref:L,onClick:()=>F(oE),text:D("release.chip.button.other-versions",{count:V.length})})}):null,I[14]=k,I[15]=V.length,I[16]=D,I[17]=m):m=I[17],I[18]!==R||I[19]!==T||I[20]!==_||I[21]!==V||I[22]!==E||I[23]!==P||I[24]!==C){let e;I[26]!==R||I[27]!==T||I[28]!==_||I[29]!==E||I[30]!==P||I[31]!==C?(e=e=>{let t=(0,h.getVersionFromId)(e);return(0,r.jsx)(f.VersionChip,{selected:C===t,text:t,disabled:!1,contextMenuPortal:!1,tone:"default",onClick:()=>_(t),onCopyToDraftsNavigate:T,contextValues:{documentId:(0,h.getPublishedId)(e),releases:E,releasesLoading:P,documentType:R,bundleId:t,isVersion:!0}},e)},I[26]=R,I[27]=T,I[28]=_,I[29]=E,I[30]=P,I[31]=C,I[32]=e):e=I[32],g=V.map(e),I[18]=R,I[19]=T,I[20]=_,I[21]=V,I[22]=E,I[23]=P,I[24]=C,I[25]=g}else g=I[25];return I[33]!==g?(b=(0,r.jsx)(a.Container,{width:1,children:(0,r.jsx)(a.Flex,{width:1,padding:3,gap:2,wrap:"wrap",children:g})}),I[33]=g,I[34]=b):b=I[34],I[35]!==k||I[36]!==A||I[37]!==b?(y=(0,r.jsx)(x.Popover,{animate:!1,open:k,portal:!0,arrow:!0,ref:O,placement:"bottom",referenceElement:A,zOffset:10,content:b}),I[35]=k,I[36]=A,I[37]=b,I[38]=y):y=I[38],I[39]!==p||I[40]!==m||I[41]!==y?(j=(0,r.jsxs)(r.Fragment,{children:[p,m,y]}),I[39]=p,I[40]=m,I[41]=y,I[42]=j):j=I[42],j}function oE(e){return!e}let oD=e=>{let t=(0,s.c)(16),{release:n}=e,{t:i}=(0,f.useTranslation)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,r.jsx)(a.Text,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,r.jsx)(a.Text,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e,l="active"===n.state;return t[8]!==l||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,r.jsx)(a.Text,{size:1,children:l?(0,r.jsx)(f.Translate,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,f.formatRelativeLocalePublishDate)(n)}}):(0,r.jsx)(f.Translate,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,f.formatRelativeLocalePublishDate)(n)}})}),t[8]=l,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,r.jsx)(a.Text,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},ok={dateStyle:"medium",timeStyle:"short"},oF=(0,c.memo)(function(){let e,t,n,i,l,o,d,c,u,p,m,g,x,b,y,v,j,w,I,S,C,_,T=(0,s.c)(112),{selectedReleaseId:R,selectedPerspectiveName:P}=(0,f.usePerspective)(),{t:E}=(0,f.useTranslation)(),D=(0,f.useSetPerspective)(),{params:k,setParams:F}=lA(),A=(0,f.useDateTimeFormat)(ok),{loading:L}=(0,f.useActiveReleases)(),M=(0,f.useSchema)(),{editState:V,displayed:O,documentType:z,documentId:B}=i$(),N=O&&!O._createdAt,H=(0,f.useGetDefaultPerspective)(),$=k?.historyVersion;T[0]!==O||T[1]!==B||T[2]!==$?(e={historyVersion:$,displayed:O,documentId:B},T[0]=O,T[1]=B,T[2]=$,T[3]=e):e=T[3];let U=(0,f.useFilteredReleases)(e);T[4]!==B?(t={documentId:B},T[4]=B,T[5]=t):t=T[5];let{data:G}=(0,f.useDocumentVersions)(t);T[6]!==G?(n=G&&G.length>0&&!G.some(oA),T[6]=G,T[7]=n):n=T[7];let q=n,W=(0,f.useWorkspace)(),{onSetScheduledDraftPerspective:K}=(0,f.useSingleDocRelease)();T[8]!==K||T[9]!==k?.scheduledDraft||T[10]!==D?(i=()=>{k?.scheduledDraft?K(""):D("drafts")},T[8]=K,T[9]=k?.scheduledDraft,T[10]=D,T[11]=i):i=T[11];let Y=i;T[12]!==H||T[13]!==K||T[14]!==k||T[15]!==F||T[16]!==D?(l=e=>{if((0,f.isReleaseDocument)(e)&&(0,f.isCardinalityOneRelease)(e))return void K((0,f.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&k?.historyVersion&&F({...k,rev:k?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,f.isReleaseDocument)(e)?(0,f.getReleaseIdFromReleaseDocumentId)(e._id):e===H?"":e;k?.scheduledDraft?F({...k,scheduledDraft:void 0},{perspective:t}):D(t)},T[12]=H,T[13]=K,T[14]=k,T[15]=F,T[16]=D,T[17]=l):l=T[17];let X=l;if(T[18]!==z||T[19]!==M){let e=M.get(z);o=!!e&&!0===e.liveEdit,T[18]=z,T[19]=M,T[20]=o}else o=T[20];let Q=o;e:{if(Q&&!R){d=!1;break e}d=!V?.published}let J=d;T[21]!==O?._id||T[22]!==V?.version||T[23]!==k?(c=e=>{if(!k?.historyVersion){let t=V?.version&&(0,f.isGoingToUnpublish)(V?.version)&&(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===(0,h.getVersionFromId)(V?.version?._id);return{selected:!!((0,f.getReleaseIdFromReleaseDocumentId)(e._id)===(0,h.getVersionFromId)(O?._id||"")||t)}}let t=(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===k.historyVersion;return{selected:t,disabled:t}},T[21]=O?._id,T[22]=V?.version,T[23]=k,T[24]=c):c=T[24];let Z=c;T[25]!==O?._id||T[26]!==V?.draft?._id||T[27]!==Q||T[28]!==P||T[29]!==R?(u=()=>!!(Q&&!V?.draft?._id&&!R||(0,h.isPublishedId)(O?._id||"")&&(0,f.isPublishedPerspective)(P||"")),T[25]=O?._id,T[26]=V?.draft?._id,T[27]=Q,T[28]=P,T[29]=R,T[30]=u):u=T[30];let ee=u();t:{let e=O?._id||"";if(ee||k?.historyVersion||P||(0,h.isVersionId)(e)){p=!1;break t}if((0,h.isDraftId)(e)){p=!0;break t}if((0,h.isPublishedId)(e)&&V?.published&&(0,f.isPublishedPerspective)(P||"")){p=!1;break t}p=!0}let et=p;T[31]!==V?.draft||T[32]!==N||T[33]!==Q||T[34]!==q||T[35]!==R?(m=()=>!!q||!!N&&!!R||(!!V?.draft||!!Q)&&!!(N&&R||Q),T[31]=V?.draft,T[32]=N,T[33]=Q,T[34]=q,T[35]=R,T[36]=m):m=T[36];let en=m(),ei=W.document.drafts?.enabled;if(T[37]!==G||T[38]!==U.currentReleases){let e;T[40]!==U.currentReleases?(e=e=>!((0,h.isPublishedId)(e)||(0,h.isDraftId)(e))&&!U.currentReleases.some(t=>(0,f.getReleaseIdFromReleaseDocumentId)(t._id)===(0,h.getVersionFromId)(e)),T[40]=U.currentReleases,T[41]=e):e=T[41],g=G.filter(e),T[37]=G,T[38]=U.currentReleases,T[39]=g}else g=T[39];let el=g;T[42]!==A||T[43]!==V?.published||T[44]!==E?(x=(0,r.jsx)(a.Text,{size:1,children:V?.published&&V?.published?._updatedAt?(0,r.jsx)(f.Translate,{t:E,i18nKey:"release.chip.tooltip.published-date",values:{date:A.format(new Date(V?.published._updatedAt))}}):(0,r.jsx)(r.Fragment,{children:E("release.chip.tooltip.not-published")})}),T[42]=A,T[43]=V?.published,T[44]=E,T[45]=x):x=T[45],T[46]!==X?(b=()=>X("published"),T[46]=X,T[47]=b):b=T[47],T[48]!==E?(y=E("release.chip.published"),T[48]=E,T[49]=y):y=T[49];let eo=V?.published?._id||V?.id||"",er=!V?.published;return T[50]!==z||T[51]!==U.notCurrentReleases||T[52]!==L||T[53]!==eo||T[54]!==er?(v={documentId:eo,releases:U.notCurrentReleases,releasesLoading:L,documentType:z,bundleId:"published",isVersion:!1,disabled:er},T[50]=z,T[51]=U.notCurrentReleases,T[52]=L,T[53]=eo,T[54]=er,T[55]=v):v=T[55],T[56]!==Y||T[57]!==ee||T[58]!==J||T[59]!==x||T[60]!==b||T[61]!==y||T[62]!==v?(j=(0,r.jsx)(f.VersionChip,{tooltipContent:x,disabled:J,onClick:b,selected:ee,text:y,tone:"positive",onCopyToDraftsNavigate:Y,contextValues:v}),T[56]=Y,T[57]=ee,T[58]=J,T[59]=x,T[60]=b,T[61]=y,T[62]=v,T[63]=j):j=T[63],T[64]!==A||T[65]!==z||T[66]!==V?.draft||T[67]!==V?.id||T[68]!==V?.published?._id||T[69]!==U.notCurrentReleases||T[70]!==Y||T[71]!==X||T[72]!==en||T[73]!==ei||T[74]!==et||T[75]!==Q||T[76]!==L||T[77]!==E?(w=ei&&(0,r.jsx)(f.VersionChip,{tooltipContent:(0,r.jsx)(a.Text,{size:1,children:V?.draft?(0,r.jsx)(r.Fragment,{children:V?.draft._updatedAt?(0,r.jsx)(f.Translate,{t:E,i18nKey:"release.chip.tooltip.edited-date",values:{date:A.format(new Date(V?.draft._updatedAt))}}):(0,r.jsx)(f.Translate,{t:E,i18nKey:"release.chip.tooltip.created-date",values:{date:A.format(new Date(V?.draft._createdAt))}})}):(0,r.jsx)(r.Fragment,{children:E(Q?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:et,disabled:en,text:E("release.chip.draft"),tone:V?.draft?"caution":"neutral",onClick:()=>X("drafts"),onCopyToDraftsNavigate:Y,contextValues:{documentId:V?.draft?._id||V?.published?._id||V?.id||"",documentType:z,releases:U.notCurrentReleases,releasesLoading:L,bundleId:"draft",isVersion:!1}}),T[64]=A,T[65]=z,T[66]=V?.draft,T[67]=V?.id,T[68]=V?.published?._id,T[69]=U.notCurrentReleases,T[70]=Y,T[71]=X,T[72]=en,T[73]=ei,T[74]=et,T[75]=Q,T[76]=L,T[77]=E,T[78]=w):w=T[78],T[79]!==O?._id||T[80]!==z||T[81]!==U.inCreation||T[82]!==U.notCurrentReleases||T[83]!==Y||T[84]!==L||T[85]!==E?(I=U.inCreation&&(0,r.jsx)(f.ReleaseTitle,{title:U.inCreation.metadata.title,fallback:E("release.placeholder-untitled-release"),enableTooltip:!1,children:e=>{let{displayTitle:t,fullTitle:n,isTruncated:i}=e;return(0,r.jsx)(f.VersionChip,{tooltipContent:i?(0,r.jsxs)(a.Stack,{space:2,style:{maxWidth:"300px"},children:[(0,r.jsx)(a.Text,{size:1,weight:"medium",children:n}),(0,r.jsx)(oD,{release:U.inCreation})]}):(0,r.jsx)(oD,{release:U.inCreation}),selected:!0,onClick:oL,locked:!1,tone:(0,f.getReleaseTone)(U.inCreation),text:t,onCopyToDraftsNavigate:Y,contextValues:{documentId:O?._id||"",documentType:z,disabled:!0,releases:U.notCurrentReleases,releasesLoading:L,bundleId:(0,f.getReleaseIdFromReleaseDocumentId)(U.inCreation._id),isVersion:!0,release:U.inCreation}})}}),T[79]=O?._id,T[80]=z,T[81]=U.inCreation,T[82]=U.notCurrentReleases,T[83]=Y,T[84]=L,T[85]=E,T[86]=I):I=T[86],T[87]!==O||T[88]!==z||T[89]!==V?.version||T[90]!==U.currentReleases||T[91]!==U.notCurrentReleases||T[92]!==Z||T[93]!==Y||T[94]!==X||T[95]!==L||T[96]!==E?(S=O&&U.currentReleases?.map(e=>(0,r.jsx)(f.ReleaseTitle,{title:e.metadata.title,fallback:E("release.placeholder-untitled-release"),enableTooltip:!1,children:t=>{let{displayTitle:n,fullTitle:i,isTruncated:l}=t;return(0,r.jsx)(f.VersionChip,{tooltipContent:l?(0,r.jsxs)(a.Stack,{space:2,style:{maxWidth:"300px"},children:[(0,r.jsx)(a.Text,{size:1,weight:"medium",children:i}),(0,r.jsx)(oD,{release:e})]}):(0,r.jsx)(oD,{release:e}),...Z(e),onClick:()=>X(e),text:n,tone:(0,f.getReleaseTone)(e),locked:(0,f.isReleaseScheduledOrScheduling)(e),onCopyToDraftsNavigate:Y,contextValues:{documentId:O?._id||"",documentType:z,releases:U.notCurrentReleases,releasesLoading:L,bundleId:(0,f.getReleaseIdFromReleaseDocumentId)(e._id),isVersion:!0,release:e,isGoingToUnpublish:!!V?.version&&(0,f.isGoingToUnpublish)(V?.version)}})}},e._id)),T[87]=O,T[88]=z,T[89]=V?.version,T[90]=U.currentReleases,T[91]=U.notCurrentReleases,T[92]=Z,T[93]=Y,T[94]=X,T[95]=L,T[96]=E,T[97]=S):S=T[97],T[98]!==z||T[99]!==U.notCurrentReleases||T[100]!==Y||T[101]!==X||T[102]!==L||T[103]!==el||T[104]!==P?(C=(0,r.jsx)(oP,{nonReleaseVersions:el,selectedPerspective:P,onSelectBundle:X,onCopyToDraftsNavigate:Y,releases:U.notCurrentReleases,releasesLoading:L,documentType:z}),T[98]=z,T[99]=U.notCurrentReleases,T[100]=Y,T[101]=X,T[102]=L,T[103]=el,T[104]=P,T[105]=C):C=T[105],T[106]!==j||T[107]!==w||T[108]!==I||T[109]!==S||T[110]!==C?(_=(0,r.jsxs)(r.Fragment,{children:[j,w,I,S,C]}),T[106]=j,T[107]=w,T[108]=I,T[109]=S,T[110]=C,T[111]=_):_=T[111],_});function oA(e){return!(0,h.isVersionId)(e)}function oL(){}let oM=(0,eA.styled)(a.Card).withConfig({displayName:"HorizontalScroller",componentId:"sc-4smkq-0"})(e=>{let t=(0,tZ.getTheme_v2)(e.theme);return eA.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&eA.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tZ.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),oV=(0,c.memo)((0,c.forwardRef)(function(e,t){let n,i,l,o,d,u,p,m=(0,s.c)(41),{menuItems:h}=e,{editState:g,onMenuAction:b,onPaneClose:y,onPaneSplit:j,onSetMaximizedPane:w,menuItemGroups:I,schemaType:S,connectionState:C,views:_,unstable_languageFilter:T,documentId:R}=i$(),{features:P}=iX(),{index:E,BackLink:k,hasGroupSiblings:F}=lA(),{maximizedPane:A}=l6(),{actions:L}=(0,f.useFieldActions)(),[M,V]=(0,c.useState)(null),O=(0,c.useRef)(null),z=function(e){let t,n,i=(0,s.c)(3),[l,o]=(0,c.useState)(!1);return i[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void o(!1);let{scrollLeft:l}=t;o(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&o(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let r=new MutationObserver(()=>{l(),t()});return r.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:r}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,c.useEffect)(t,n),l}(O),B=(0,ty.useTelemetry)();m[0]!==L||m[1]!==I||m[2]!==h||m[3]!==b?(n=og({actionHandler:b,fieldActions:L,menuItems:h,menuItemGroups:I}),m[0]=L,m[1]=I,m[2]=h,m[3]=b,m[4]=n):n=m[4];let N=n;m[5]!==N?(i=N.filter(oh),m[5]=N,m[6]=i):i=m[6];let H=i;m[7]!==N?(l=N.filter(of),m[7]=N,m[8]=l):l=m[8];let $=l,{collapsed:U,isLast:G}=ia(),q=G&&!U?-1:0,W=P.splitViews&&j&&_.length>1,K=W&&F,Y=P.backButton&&E>0,X=!K&&!Y&&!!k,{t:Q}=(0,f.useTranslation)(D),J=A?.pane&&"object"==typeof A.pane&&"document"===A.pane.type&&A.pane.options.id===R;m[9]!==J||m[10]!==w||m[11]!==B?(o=()=>{w?.(),J?B.log(ot):B.log(oe)},m[9]=J,m[10]=w,m[11]=B,m[12]=o):o=m[12];let Z=o;m[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(oo,{}),m[13]=d):d=m[13];let ee=d;m[14]!==k||m[15]!==Y||m[16]!==Q?(u=Y&&(0,r.jsx)(x.Button,{as:k,"data-as":"a",icon:v.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:Q("pane-header.back-button.text")}}),m[14]=k,m[15]=Y,m[16]=Q,m[17]=u):u=m[17];let et=u;return m[18]!==k||m[19]!==et||m[20]!==U||m[21]!==C||m[22]!==$||m[23]!==g||m[24]!==Z||m[25]!==J||m[26]!==H||m[27]!==y||m[28]!==j||m[29]!==w||m[30]!==t||m[31]!==M||m[32]!==S||m[33]!==z||m[34]!==X||m[35]!==W||m[36]!==K||m[37]!==Q||m[38]!==q||m[39]!==T?(p=(0,r.jsx)(x.TooltipDelayGroupProvider,{children:U?(0,r.jsx)(iR,{border:!0,ref:t,loading:"connecting"===C&&!g?.draft&&!g?.published,title:ee,tabIndex:q,backButton:et}):(0,r.jsx)(a.Card,{hidden:U,style:{lineHeight:0},borderBottom:!0,children:(0,r.jsxs)(a.Flex,{gap:3,paddingY:3,children:[(0,r.jsx)(oM,{$showGradient:z,children:(0,r.jsx)(a.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:O,children:(0,r.jsx)(oF,{})})}),(0,r.jsx)(a.Box,{flex:"none",paddingRight:3,children:(0,r.jsxs)(a.Flex,{align:"center",gap:1,children:[T.length>0&&(0,r.jsx)(r.Fragment,{children:T.map((e,t)=>(0,r.jsx)(e,{schemaType:S},`language-filter-${t}`))}),H.map(oB),g&&(0,r.jsx)(aD,{group:"paneActions",children:e=>{let{states:t}=e;return(0,r.jsx)(oO,{contextMenuNodes:$,setReferenceElement:V,referenceElement:M,states:t})}}),W&&(0,r.jsx)(x.Button,{"aria-label":Q("buttons.split-pane-button.aria-label"),icon:v.SplitVerticalIcon,mode:"bleed",onClick:j,tooltipProps:{content:Q("buttons.split-pane-button.tooltip")}},"split-pane-button"),w&&(0,r.jsx)(x.Button,{"aria-label":Q(J?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:J?v.CollapseIcon:v.ExpandIcon,mode:"bleed",onClick:Z,tooltipProps:{content:Q(J?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":J?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),K&&(0,r.jsx)(x.Button,{icon:v.CloseIcon,mode:"bleed",onClick:y,tooltipProps:{content:Q("buttons.split-pane-close-button.title")}},"close-view-button"),X&&(0,r.jsx)(x.Button,{icon:v.CloseIcon,mode:"bleed",tooltipProps:{content:Q("buttons.split-pane-close-group-button.title")},as:k},"close-view-button")]})})]})})}),m[18]=k,m[19]=et,m[20]=U,m[21]=C,m[22]=$,m[23]=g,m[24]=Z,m[25]=J,m[26]=H,m[27]=y,m[28]=j,m[29]=w,m[30]=t,m[31]=M,m[32]=S,m[33]=z,m[34]=X,m[35]=W,m[36]=K,m[37]=Q,m[38]=q,m[39]=T,m[40]=p):p=m[40],p})),oO=(0,c.memo)(function(e){let t,n,i=(0,s.c)(7),{setReferenceElement:l,referenceElement:o,contextMenuNodes:a}=e,d=(0,c.useDeferredValue)(e.states);return i[0]!==d?(t=d.filter(oN),i[0]=d,i[1]=t):t=i[1],i[2]!==a||i[3]!==o||i[4]!==l||i[5]!==t?(n=(0,r.jsx)(oz,{setReferenceElement:l,referenceElement:o,contextMenuNodes:a,states:t}),i[2]=a,i[3]=o,i[4]=l,i[5]=t,i[6]=n):n=i[6],n}),oz=(0,c.memo)(function(e){let t,n,i=(0,s.c)(8),{states:l,setReferenceElement:o,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==o||i[2]!==l?(t=e=>{let{handleAction:t}=e;return(0,r.jsx)("div",{ref:o,children:(0,r.jsx)(iy,{nodes:a,actionsNodes:l.length>0?l.map((e,n)=>(0,r.jsx)(oT,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=o,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==l?(n=(0,r.jsx)(oC,{actionStates:l,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=l,i[7]=n):n=i[7],n});function oB(e){return(0,r.jsx)(iE,{node:e},e.key)}function oN(e){return!e.action||e.action!==om.action}function oH(e){let t,n,i=(0,s.c)(3),{size:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==l?(n=(0,r.jsx)(x.Button,{"aria-hidden":!0,disabled:!0,size:l,style:t,text:"-"}),i[1]=l,i[2]=n):n=i[2],n}let o$={primary:"primary",success:"positive",warning:"caution",danger:"critical"},oU=(0,c.memo)(function(e){let t,n,i=(0,s.c)(4),{states:l}=e;return 0===l.length?null:(i[0]!==l?(t=l.map(oK),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)(a.Inline,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),oG=(0,c.memo)(function(e){let t,n=(0,s.c)(2),i=(0,c.useDeferredValue)(e.states);return n[0]!==i?(t=(0,r.jsx)(oU,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function oq(){let e,t=(0,s.c)(3),{badges:n,editState:i}=i$();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,r.jsx)(ak,{badges:n,badgeProps:i,children:oW}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function oW(e){let{states:t}=e;return(0,r.jsx)(oG,{states:t})}function oK(e,t){return(0,r.jsx)(x.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,r.jsx)(a.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?o$[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let oY={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},oX=e=>{let t,n,i,l,o,a,d,u,p=(0,s.c)(41),{id:m,type:g,draft:x,version:b}=e;p[0]!==b?(t=b?._id&&(0,h.getVersionFromId)(b._id),p[0]=b,p[1]=t):t=p[1];let y=t,{delete:j}=(0,f.useDocumentOperation)(m,g,y),[w,I]=(0,c.useState)(!1),[S,C]=(0,c.useState)(!1),{t:_}=(0,f.useTranslation)(D);p[2]!==m?(n={documentId:m},p[2]=m,p[3]=n):n=p[3];let{sortedDocumentList:T}=(0,f.useDocumentVersionTypeSortedList)(n);p[4]!==T?(i=T.some(f.isReleaseScheduledOrScheduling),p[4]=T,p[5]=i):i=p[5];let R=i;p[6]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{C(!1)},p[6]=l):l=p[6];let P=l;p[7]!==j?(o=e=>{C(!1),I(!0),j.execute(e),I(!1)},p[7]=j,p[8]=o):o=p[8];let E=o;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{C(!0)},p[9]=a):a=p[9];let k=a;p[10]!==y||p[11]!==m||p[12]!==g?(d={id:m,type:g,version:y,permission:"delete"},p[10]=y,p[11]=m,p[12]=g,p[13]=d):d=p[13];let[F,A]=(0,f.useDocumentPairPermissions)(d),L=(0,f.useCurrentUser)();e:{let e,t,n,i,l;if(!A&&!F?.granted){let e,t,n;p[14]!==_?(e=_("action.delete.label"),p[14]=_,p[15]=e):e=p[15],p[16]!==L?(t=(0,r.jsx)(f.InsufficientPermissionsMessage,{context:"delete-document",currentUser:L}),p[16]=L,p[17]=t):t=p[17],p[18]!==t||p[19]!==e?(n={tone:"critical",icon:v.TrashIcon,disabled:!0,label:e,title:t},p[18]=t,p[19]=e,p[20]=n):n=p[20],u=n;break e}p[21]!==j.disabled||p[22]!==R||p[23]!==_?(e=()=>R?_("action.delete.disabled.scheduled-release"):j.disabled?_(oY[j.disabled]):"",p[21]=j.disabled,p[22]=R,p[23]=_,p[24]=e):e=p[24];let o=e,s=w||R||!!j.disabled||A;p[25]!==o?(t=o(),p[25]=o,p[26]=t):t=p[26],p[27]!==w||p[28]!==_?(n=_(w?"action.delete.running.label":"action.delete.label"),p[27]=w,p[28]=_,p[29]=n):n=p[29],p[30]!==x?._id||p[31]!==E||p[32]!==m||p[33]!==S||p[34]!==g?(i=S&&{type:"custom",component:(0,r.jsx)(ap,{action:"delete",id:x?._id||m,type:g,onCancel:P,onConfirm:E})},p[30]=x?._id,p[31]=E,p[32]=m,p[33]=S,p[34]=g,p[35]=i):i=p[35],p[36]!==s||p[37]!==t||p[38]!==n||p[39]!==i?(l={tone:"critical",icon:v.TrashIcon,disabled:s,title:t,label:n,shortcut:"Ctrl+Alt+D",onHandle:k,dialog:i},p[36]=s,p[37]=t,p[38]=n,p[39]=i,p[40]=l):l=p[40],u=l}return u};function oQ(e){let t,n,i,l,o,d,u=(0,s.c)(18),{publishedExists:p,onCancel:m,onConfirm:h}=e,{t:g}=(0,f.useTranslation)(D),b=`deletion-confirmation-${(0,c.useId)()}`;return u[0]!==g?(t=g("action.discard-changes.confirm-dialog.header.text"),u[0]=g,u[1]=t):t=u[1],u[2]!==g?(n=g("action.discard-changes.label"),u[2]=g,u[3]=n):n=u[3],u[4]!==h||u[5]!==n?(i={confirmButton:{text:n,onClick:h}},u[4]=h,u[5]=n,u[6]=i):i=u[6],u[7]!==p||u[8]!==g?(l=g(p?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),u[7]=p,u[8]=g,u[9]=l):l=u[9],u[10]!==l?(o=(0,r.jsx)(a.Text,{size:1,children:l}),u[10]=l,u[11]=o):o=u[11],u[12]!==b||u[13]!==m||u[14]!==t||u[15]!==i||u[16]!==o?(d=(0,r.jsx)(x.Dialog,{width:1,id:b,header:t,footer:i,onClose:m,onClickOutside:m,children:o}),u[12]=b,u[13]=m,u[14]=t,u[15]=i,u[16]=o,u[17]=d):d=u[17],d}oX.action="delete",oX.displayName="DeleteAction";let oJ={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},oZ=e=>{let t,n,i,l,o,a,d=(0,s.c)(31),{id:u,type:p,published:m,version:g,draft:x}=e;d[0]!==g?(t=g?._id&&(0,h.getVersionFromId)(g._id),d[0]=g,d[1]=t):t=d[1];let b=t,{discardChanges:y}=(0,f.useDocumentOperation)(u,p,b),[j,w]=(0,c.useState)(!1);d[2]!==b||d[3]!==u||d[4]!==p?(n={id:u,type:p,version:b,permission:"discardDraft"},d[2]=b,d[3]=u,d[4]=p,d[5]=n):n=d[5];let[I,S]=(0,f.useDocumentPairPermissions)(n),C=(0,f.useCurrentUser)(),{displayed:_}=i$(),{t:T}=(0,f.useTranslation)(D),R=_?._id&&(0,h.isPublishedId)(_?._id);d[6]!==y?(i=()=>{y.execute(),w(!1)},d[6]=y,d[7]=i):i=d[7];let P=i;d[8]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{w(!1)},d[8]=l):l=d[8];let E=l;d[9]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{w(!0)},d[9]=o):o=d[9];let k=o;e:{let e,t,n,i;if(!g&&!x||R){a=null;break e}if(!S&&!I?.granted){let e,t,n;d[10]!==T?(e=T("action.discard-changes.label"),d[10]=T,d[11]=e):e=d[11],d[12]!==C?(t=(0,r.jsx)(f.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:C}),d[12]=C,d[13]=t):t=d[13],d[14]!==e||d[15]!==t?(n={tone:"critical",icon:v.ResetIcon,disabled:!0,label:e,title:t},d[14]=e,d[15]=t,d[16]=n):n=d[16],a=n;break e}let l=!!y.disabled||S,o=y.disabled&&oJ[y.disabled]||"";d[17]!==T||d[18]!==o?(e=T(o),d[17]=T,d[18]=o,d[19]=e):e=d[19],d[20]!==T?(t=T("action.discard-changes.label"),d[20]=T,d[21]=t):t=d[21],d[22]!==P||d[23]!==j||d[24]!==m?(n=j&&{type:"custom",component:(0,r.jsx)(oQ,{onCancel:E,onConfirm:P,publishedExists:!!m})},d[22]=P,d[23]=j,d[24]=m,d[25]=n):n=d[25],d[26]!==t||d[27]!==n||d[28]!==l||d[29]!==e?(i={tone:"critical",icon:v.ResetIcon,disabled:l,title:e,label:t,onHandle:k,dialog:n},d[26]=t,d[27]=n,d[28]=l,d[29]=e,d[30]=i):i=d[30],a=i}return a};oZ.action="discardChanges",oZ.displayName="DiscardChangesAction";let o0={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},o1=e=>{let t,n,i,l,o=(0,s.c)(31),{id:a,type:d,release:u,mapDocument:p,version:m}=e,g=(0,f.useDocumentStore)();o[0]!==m?(t=m?._id&&(0,h.getVersionFromId)(m._id),o[0]=m,o[1]=t):t=o[1];let x=t,{duplicate:y}=(0,f.useDocumentOperation)(a,d,x),{navigateIntent:j}=(0,b.useRouter)(),[w,I]=(0,c.useState)(!1);o[2]!==a||o[3]!==u||o[4]!==d?(n={id:a,type:d,version:u,permission:"duplicate"},o[2]=a,o[3]=u,o[4]=d,o[5]=n):n=o[5];let[S,C]=(0,f.useDocumentPairPermissions)(n),{t:_}=(0,f.useTranslation)(D),T=(0,f.useCurrentUser)();o[6]!==g.pair||o[7]!==y||o[8]!==a||o[9]!==p||o[10]!==j||o[11]!==d?(i=async()=>{let e=(0,eF.uuid)();I(!0);let t=(0,eq.firstValueFrom)(g.pair.operationEvents(a,d).pipe((0,ez.filter)(o2)));y.execute(e,{mapDocument:p}),await t,j("edit",{id:e,type:d}),I(!1)},o[6]=g.pair,o[7]=y,o[8]=a,o[9]=p,o[10]=j,o[11]=d,o[12]=i):i=o[12];let R=i;e:{let e,t,n;if(!C&&!S?.granted){let e,t,n;o[13]!==_?(e=_("action.duplicate.label"),o[13]=_,o[14]=e):e=o[14],o[15]!==T?(t=(0,r.jsx)(f.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:T}),o[15]=T,o[16]=t):t=o[16],o[17]!==e||o[18]!==t?(n={icon:v.CopyIcon,disabled:!0,label:e,title:t},o[17]=e,o[18]=t,o[19]=n):n=o[19],l=n;break e}let i=w||!!y.disabled||C;o[20]!==w||o[21]!==_?(e=_(w?"action.duplicate.running.label":"action.duplicate.label"),o[20]=w,o[21]=_,o[22]=e):e=o[22],o[23]!==y.disabled||o[24]!==_?(t=y.disabled?_(o0[y.disabled]):"",o[23]=y.disabled,o[24]=_,o[25]=t):t=o[25],o[26]!==R||o[27]!==i||o[28]!==e||o[29]!==t?(n={icon:v.CopyIcon,disabled:i,label:e,title:t,onHandle:R},o[26]=R,o[27]=i,o[28]=e,o[29]=t,o[30]=n):n=o[30],l=n}return l};function o2(e){return"duplicate"===e.op&&"success"===e.type}o1.action="duplicate",o1.displayName="DuplicateAction";let o3=(0,tv.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),o4={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},o5={status:"published"};function o6(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,r.jsx)(o8,{publishedAt:t}):n(o4[e])}function o8(e){let t,n,i,l=(0,s.c)(6),{publishedAt:o}=e,{t:d}=(0,f.useTranslation)(D);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},l[0]=t):t=l[0];let c=(0,f.useRelativeTime)(o,t);return l[1]!==d||l[2]!==c?(n=d("action.publish.already-published.tooltip",{timeSincePublished:c}),l[1]=d,l[2]=c,l[3]=n):n=l[3],l[4]!==n?(i=(0,r.jsx)(a.Text,{children:n}),l[4]=n,l[5]=i):i=l[5],i}let o7=e=>{let t,n,i,l,o,a,u,p,m,x,b,y,j=(0,s.c)(86),{id:w,type:I,liveEdit:S,draft:C,published:_,release:T,version:R}=e,{selectedPerspective:P}=(0,f.usePerspective)(),[E,k]=(0,c.useState)(null);j[0]!==R?(t=R?._id&&(0,h.getVersionFromId)(R._id),j[0]=R,j[1]=t):t=j[1];let F=t,{publish:A}=(0,f.useDocumentOperation)(w,I,F),{changesOpen:L,documentId:M,documentType:V,value:O}=i$(),z=(0,f.useValidationStatus)(O._id,I,!T),B=(0,f.useSyncState)(w,I),N=(0,f.useEditState)(M,V,"default",F),{t:H}=(0,f.useTranslation)(D);j[2]!==N?.draft||j[3]!==N?.published||j[4]!==N?.version?(n=N?.version||N?.draft||N?.published||{},j[2]=N?.draft,j[3]=N?.published,j[4]=N?.version,j[5]=n):n=j[5];let $=n._rev,U=(0,d.useToast)();j[6]!==z.validation?(i=z.validation.some(g.isValidationErrorMarker),j[6]=z.validation,j[7]=i):i=j[7];let G=i,[q,W]=(0,c.useState)(!1),K=B.isSyncing,Y=z.isValidating;j[8]!==w||j[9]!==I?(l={id:w,type:I,permission:"publish"},j[8]=w,j[9]=I,j[10]=l):l=j[10];let[X,Q]=(0,f.useDocumentPairPermissions)(l),J=(0,f.useCurrentUser)();j[11]!==G||j[12]!==A.disabled||j[13]!==_||j[14]!==H?(o=A.disabled?o6(A.disabled,(_||{})._updatedAt,H)||"":G?H("action.publish.validation-issues.tooltip"):"",j[11]=G,j[12]=A.disabled,j[13]=_,j[14]=H,j[15]=o):o=j[15];let Z=o,ee=_?._rev;j[16]!==ee||j[17]!==A?(a=()=>{A.execute(),k({status:"publishing",publishRevision:ee})},j[16]=ee,j[17]=A,j[18]=a):a=j[18];let et=a;j[19]!==et||j[20]!==G||j[21]!==K||j[22]!==q||j[23]!==$||j[24]!==H||j[25]!==U||j[26]!==z.isValidating||j[27]!==z.revision?(u=()=>{let e=!z.isValidating&&z.revision===$;q&&!K&&e&&(G?U.push({title:H("action.publish.validation-issues-toast.title"),description:H("action.publish.validation-issues-toast.description"),status:"error"}):et(),W(!1))},j[19]=et,j[20]=G,j[21]=K,j[22]=q,j[23]=$,j[24]=H,j[25]=U,j[26]=z.isValidating,j[27]=z.revision,j[28]=u):u=j[28],j[29]!==et||j[30]!==G||j[31]!==K||j[32]!==Y||j[33]!==q||j[34]!==$||j[35]!==H||j[36]!==U||j[37]!==z.isValidating||j[38]!==z.revision?(p=[K,et,G,q,z.revision,$,Y,z.isValidating,U,H],j[29]=et,j[30]=G,j[31]=K,j[32]=Y,j[33]=q,j[34]=$,j[35]=H,j[36]=U,j[37]=z.isValidating,j[38]=z.revision,j[39]=p):p=j[39],(0,c.useEffect)(u,p),j[40]!==ee||j[41]!==E?(m=()=>{let e=E?.status==="publishing"&&ee!==E.publishRevision,t=e?o5:null,n=setTimeout(()=>{k(t)},e?200:4e3);return()=>clearTimeout(n)},j[40]=ee,j[41]=E,j[42]=m):m=j[42],j[43]!==L||j[44]!==ee||j[45]!==E?(x=[L,E,ee],j[43]=L,j[44]=ee,j[45]=E,j[46]=x):x=j[46],(0,c.useEffect)(m,x);let en=(0,ty.useTelemetry)();j[47]!==et||j[48]!==C?._createdAt||j[49]!==_||j[50]!==$||j[51]!==B.isSyncing||j[52]!==en||j[53]!==z.isValidating||j[54]!==z.revision?(b=()=>{en.log(o3,{publishedImmediately:!C?._createdAt,previouslyPublished:!!_}),B.isSyncing||z.isValidating||z.revision!==$?W(!0):et()},j[47]=et,j[48]=C?._createdAt,j[49]=_,j[50]=$,j[51]=B.isSyncing,j[52]=en,j[53]=z.isValidating,j[54]=z.revision,j[55]=b):b=j[55];let ei=b;e:{let e,t,n;if((0,f.isPublishedPerspective)(P)||T&&R||S&&!R){y=null;break e}if(_&&!C&&!R){let e,t,n;j[56]!==H?(e=H("action.publish.label"),j[56]=H,j[57]=e):e=j[57];let i=_?._updatedAt;j[58]!==H||j[59]!==i?(t=o6("ALREADY_PUBLISHED",i,H),j[58]=H,j[59]=i,j[60]=t):t=j[60],j[61]!==e||j[62]!==t?(n={tone:"default",icon:v.PublishIcon,label:e,title:t,disabled:!0},j[61]=e,j[62]=t,j[63]=n):n=j[63],y=n;break e}if(!Q&&!X?.granted){let e,t,n;j[64]!==H?(e=H("action.publish.label"),j[64]=H,j[65]=e):e=j[65],j[66]!==J?(t=(0,r.jsx)(f.InsufficientPermissionsMessage,{context:"publish-document",currentUser:J}),j[66]=J,j[67]=t):t=j[67],j[68]!==e||j[69]!==t?(n={tone:"default",icon:v.PublishIcon,label:e,title:t,disabled:!0},j[68]=e,j[69]=t,j[70]=n):n=j[70],y=n;break e}let i=!!(q||N?.transactionSyncLock?.enabled||E?.status==="publishing"||E?.status==="published"||G||A.disabled),l=i||Q;j[71]!==q||j[72]!==E?.status||j[73]!==H?(e=E?.status==="published"?H("action.publish.published.label"):q?H("action.publish.validation-in-progress.label"):E?.status==="publishing"?H("action.publish.running.label"):H("action.publish.draft.label"),j[71]=q,j[72]=E?.status,j[73]=H,j[74]=e):e=j[74],j[75]!==q||j[76]!==E?.status||j[77]!==H||j[78]!==Z?(t=q?H("action.publish.waiting"):E?.status==="published"||E?.status==="publishing"?null:Z,j[75]=q,j[76]=E?.status,j[77]=H,j[78]=Z,j[79]=t):t=j[79];let o=i||q?null:"Ctrl+Alt+P";j[80]!==ei||j[81]!==l||j[82]!==e||j[83]!==t||j[84]!==o?(n={disabled:l,tone:"default",label:e,icon:v.PublishIcon,title:t,shortcut:o,onHandle:ei},j[80]=ei,j[81]=l,j[82]=e,j[83]=t,j[84]=o,j[85]=n):n=j[85],y=n}return y};o7.action="publish",o7.displayName="PublishAction";let o9={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},re=e=>{let t,n,i,l,o,a,d=(0,s.c)(22),{id:u,type:p,draft:m,liveEdit:h,release:g}=e,{unpublish:x}=(0,f.useDocumentOperation)(u,p),[b,y]=(0,c.useState)(!1);d[0]!==u||d[1]!==p?(t={id:u,type:p,permission:"unpublish"},d[0]=u,d[1]=p,d[2]=t):t=d[2];let[j,w]=(0,f.useDocumentPairPermissions)(t),I=(0,f.useCurrentUser)(),{t:S}=(0,f.useTranslation)(D),{selectedPerspective:C}=(0,f.usePerspective)(),_="drafts"===C;d[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{y(!1)},d[3]=n):n=d[3];let T=n;d[4]!==x?(i=()=>{y(!1),x.execute()},d[4]=x,d[5]=i):i=d[5];let R=i;e:{if(b){let e,t=m?._id||u;d[6]!==R||d[7]!==t||d[8]!==p?(e={type:"dialog",onClose:T,content:(0,r.jsx)(ap,{id:t,type:p,action:"unpublish",onCancel:T,onConfirm:R})},d[6]=R,d[7]=t,d[8]=p,d[9]=e):e=d[9],l=e;break e}l=null}let P=l;return d[10]!==I||d[11]!==P||d[12]!==_||d[13]!==w||d[14]!==h||d[15]!==j?.granted||d[16]!==g||d[17]!==S||d[18]!==x.disabled?(o=()=>g||_||h?null:w||j?.granted?{tone:"critical",icon:v.UnpublishIcon,disabled:!!x.disabled||w,label:S("action.unpublish.label"),title:x.disabled?S(o9[x.disabled]):"",onHandle:()=>y(!0),dialog:P}:{tone:"critical",icon:v.UnpublishIcon,label:"Unpublish",title:(0,r.jsx)(f.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:I}),disabled:!0},d[10]=I,d[11]=P,d[12]=_,d[13]=w,d[14]=h,d[15]=j?.granted,d[16]=g,d[17]=S,d[18]=x.disabled,d[19]=o):o=d[19],d[20]!==o?(a=o(),d[20]=o,d[21]=a):a=d[21],a};re.action="unpublish",re.displayName="UnpublishAction";let rt=(0,c.memo)(function(e){let t,n,i,l,o,d,u,p,m,h=(0,s.c)(39),{disabled:g,states:b}=e,{__internal_tasks:y}=(0,f.useSource)(),{editState:v}=i$(),{params:j}=lA(),w=!!j?.rev,{selectedReleaseId:I}=(0,f.usePerspective)();h[0]!==b?([t,...n]=b,h[0]=b,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let[S,C]=(0,c.useState)(null),{isPaused:_}=(0,f.usePausedScheduledDraft)();e:{let e,n,l,o;if(!t||!t.title&&!t.shortcut){i=null;break e}h[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},h[3]=e):e=h[3],h[4]!==t.title?(n=t.title&&(0,r.jsx)(a.Text,{size:1,children:t.title}),h[4]=t.title,h[5]=n):n=h[5],h[6]!==t.shortcut?(l=t.shortcut&&(0,r.jsx)(x.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ra)}),h[6]=t.shortcut,h[7]=l):l=h[7],h[8]!==n||h[9]!==l?(o=(0,r.jsxs)(a.Flex,{style:e,align:"center",gap:3,children:[n,l]}),h[8]=n,h[9]=l,h[10]=o):o=h[10],i=o}let T=i,R=t?.action==="schedule"&&_;h[11]!==v?.liveEdit||h[12]!==v?.version||h[13]!==t||h[14]!==I||h[15]!==R||h[16]!==w?(l=w?!!t:I?t&&(R||!(0,f.isSanityDefinedAction)(t)):t&&(!v?.liveEdit||v?.version),h[11]=v?.liveEdit,h[12]=v?.version,h[13]=t,h[14]=I,h[15]=R,h[16]=w,h[17]=l):l=h[17];let P=l;h[18]!==t||h[19]!==n||h[20]!==P?(o=P?n:[t,...n].filter(Boolean),h[18]=t,h[19]=n,h[20]=P,h[21]=o):o=h[21];let E=o,D=y&&y.footerAction;return h[22]!==g||h[23]!==t||h[24]!==P||h[25]!==T?(d=P&&(0,r.jsx)(a.LayerProvider,{zOffset:200,children:(0,r.jsx)(x.Tooltip,{disabled:!T,content:T,placement:"top",children:(0,r.jsx)(a.Stack,{children:(0,r.jsx)(x.Button,{"data-testid":`action-${ic(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:C,text:t.label,tone:t.tone||"primary"})})})}),h[22]=g,h[23]=t,h[24]=P,h[25]=T,h[26]=d):d=h[26],h[27]!==g||h[28]!==E?(u=E.length>0&&(0,r.jsx)(o_,{actionStates:E,disabled:g}),h[27]=g,h[28]=E,h[29]=u):u=h[29],h[30]!==S||h[31]!==t||h[32]!==P?(p=P&&t&&t.dialog&&(0,r.jsx)(oS,{dialog:t.dialog,referenceElement:S}),h[30]=S,h[31]=t,h[32]=P,h[33]=p):p=h[33],h[34]!==D||h[35]!==d||h[36]!==u||h[37]!==p?(m=(0,r.jsxs)(a.Flex,{align:"center",gap:1,children:[D,d,u,p]}),h[34]=D,h[35]=d,h[36]=u,h[37]=p,h[38]=m):m=h[38],m}),rn=(0,c.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(aD,{group:"default",children:rd}),t[0]=e):e=t[0],e});function ri(e){let t,n,i=(0,s.c)(6),{connectionState:l,documentId:o}=i$();i[0]!==e.states?(t=e.states.filter(rl),i[0]=e.states,i[1]=t):t=i[1];let a=t;if(0===a.length)return null;let d="connected"!==l;return i[2]!==o||i[3]!==a||i[4]!==d?(n=(0,r.jsx)(rt,{disabled:d,states:a},o),i[2]=o,i[3]=a,i[4]=d,i[5]=n):n=i[5],n}function rl(e){return!e.action||e.action!==om.action}let ro=(0,c.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(aD,{group:"default",children:rc}),t[0]=e):e=t[0],e});function rr(e){let t,n,i,l=(0,s.c)(8),{states:o}=e,{connectionState:a,editState:d,revisionId:c}=i$();l[0]!==d?.draft||l[1]!==d?.published?(t=d?.draft||d?.published||{},l[0]=d?.draft,l[1]=d?.published,l[2]=t):t=l[2];let u=t._rev===c,p="connected"!==a||!!u;return l[3]!==o?(n=o.filter(rs).slice(-1),l[3]=o,l[4]=n):n=l[4],l[5]!==p||l[6]!==n?(i=(0,r.jsx)(rt,{disabled:p,states:n}),l[5]=p,l[6]=n,l[7]=i):i=l[7],i}function rs(e){return!!e.action&&e.action===om.action}function ra(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function rd(e){let{states:t}=e;return(0,r.jsx)(ri,{states:t})}function rc(e){let{states:t}=e;return(0,r.jsx)(rr,{states:t})}let ru={create:v.AddIcon,delete:v.TrashIcon,discardDraft:v.CloseIcon,initial:v.AddIcon,editDraft:v.EditIcon,editLive:v.EditIcon,publish:v.PublishIcon,unpublish:v.UnpublishIcon},rp=(0,eA.styled)(v.ChevronLeftIcon).withConfig({displayName:"FlipIcon",componentId:"sc-13ovfi5-0"})`transition:transform 200ms;&[data-expanded='true']{transform:rotate(-90deg);}`;function rm(e){let t,n,i,l,o,a=(0,s.c)(14),{isExpanded:d,onExpand:c}=e,{t:u}=(0,f.useTranslation)(D);a[0]!==d||a[1]!==c?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(rP);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(d),c()},a[0]=d,a[1]=c,a[2]=t):t=a[2];let p=t;return a[3]!==d?(n=(0,r.jsx)(rp,{"data-expanded":d}),a[3]=d,a[4]=n):n=a[4],a[5]!==d||a[6]!==u?(i=u(d?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=d,a[6]=u,a[7]=i):i=a[7],a[8]!==i?(l={content:i},a[8]=i,a[9]=l):l=a[9],a[10]!==p||a[11]!==n||a[12]!==l?(o=(0,r.jsx)(x.Button,{mode:"bleed",icon:n,tooltipProps:l,onClick:p}),a[10]=p,a[11]=n,a[12]=l,a[13]=o):o=a[13],o}let rh=(0,eA.styled)(a.Stack).withConfig({displayName:"StackWrapper",componentId:"sc-1ai615s-0"})`max-width:200px;`,rf=(0,eA.styled)(a.Flex).withConfig({displayName:"ListWrapper",componentId:"sc-1ai615s-1"})`max-height:${e=>e.$maxHeight};min-width:244px;`,rg=(0,eA.styled)(a.Box).withConfig({displayName:"Root",componentId:"sc-1ai615s-2"})(({$visible:e})=>eA.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&eA.css`
        opacity: 1;
        pointer-events: auto;
      `}
  `),rx={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function rb(e){let t,n,i=(0,s.c)(9),{maxLength:l,userIds:o,size:d,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==o||i[1]!==u){let e;i[3]!==u?(e=e=>(0,r.jsx)(f.UserAvatar,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=o.map(e),i[0]=o,i[1]=u,i[2]=t}else t=i[2];return i[5]!==l||i[6]!==d||i[7]!==t?(n=(0,r.jsx)(a.AvatarStack,{maxLength:l,size:d,children:t}),i[5]=l,i[6]=d,i[7]=t,i[8]=n):n=i[8],n}let ry=(0,eA.styled)(a.Flex).withConfig({displayName:"IconBox",componentId:"sc-19iwr6i-0"})(e=>{let t=(0,tZ.getTheme_v2)(e.theme),n=e.$color;return eA.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),rv={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},rj={minimal:!0,useTemporalPhrase:!0},rw=(0,eA.styled)(d.Skeleton).withConfig({displayName:"NameSkeleton",componentId:"sc-19iwr6i-1"})(e=>{let t=(0,tZ.getTheme_v2)(e.theme);return eA.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),rI=e=>{let t,n,i,l=(0,s.c)(10),{userId:o}=e,[d,c]=(0,f.useUser)(o);return l[0]!==c||l[1]!==d?(t=(0,r.jsx)(a.Box,{children:c||!d?(0,r.jsx)(f.AvatarSkeleton,{animated:!0}):(0,r.jsx)(f.UserAvatar,{user:d})}),l[0]=c,l[1]=d,l[2]=t):t=l[2],l[3]!==c||l[4]!==d?(n=(0,r.jsx)(a.Box,{children:c||!d?.displayName?(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(rw,{animated:!0})}):(0,r.jsx)(a.Text,{muted:!0,size:1,children:d.displayName})}),l[3]=c,l[4]=d,l[5]=n):n=l[5],l[6]!==t||l[7]!==n||l[8]!==o?(i=(0,r.jsxs)(a.Flex,{align:"center",gap:2,padding:1,children:[t,n]},o),l[6]=t,l[7]=n,l[8]=o,l[9]=i):i=l[9],i},rS=e=>{let t,n,i,l,o=(0,s.c)(9),{collaborators:d}=e,{t:c}=(0,f.useTranslation)("studio");return o[0]!==c?(t=c("timeline.changes.title"),o[0]=c,o[1]=t):t=o[1],o[2]!==t?(n=(0,r.jsx)(a.Box,{padding:1,paddingBottom:2,children:(0,r.jsx)(a.Text,{size:1,weight:"medium",children:t})}),o[2]=t,o[3]=n):n=o[3],o[4]!==d?(i=d.map(r_),o[4]=d,o[5]=i):i=o[5],o[6]!==n||o[7]!==i?(l=(0,r.jsxs)(a.Stack,{paddingBottom:1,children:[n,i]}),o[6]=n,o[7]=i,o[8]=l):l=o[8],l};function rC(e){let t,n,i,l,o,d,c,u,p,m,h,g,b,y,v,j,w,I,S,C,_,T=(0,s.c)(55),{chunk:R,isSelected:P,onSelect:E,collaborators:D,optionsMenu:k}=e,{t:F}=(0,f.useTranslation)("studio"),{type:A,endTimestamp:L}=R;T[0]!==A?(t=ru[A],T[0]=A,T[1]=t):t=T[1];let M=t;T[2]!==R.authors?(n=Array.from(R.authors),T[2]=R.authors,T[3]=n):n=T[3];let V=n;T[4]!==D?(i=D?Array.from(D):[],T[4]=D,T[5]=i):i=T[5];let O=i,z="delete"!==A;T[6]===Symbol.for("react.memo_cache_sentinel")?(l={dateStyle:"medium",timeStyle:"short"},T[6]=l):l=T[6];let B=(0,f.useDateTimeFormat)(l);T[7]!==L?(o=new Date(L),T[7]=L,T[8]=o):o=T[8];let N=(0,f.useRelativeTime)(o||"",rj);if(T[9]!==B||T[10]!==L){let e=new Date(L);d=B.format(e),T[9]=B,T[10]=L,T[11]=d}else d=T[11];let H=d;T[12]!==R||T[13]!==z||T[14]!==E?(c=e=>{e.preventDefault(),e.stopPropagation(),z&&E(R)},T[12]=R,T[13]=z,T[14]=E,T[15]=c):c=T[15];let $=c;T[16]===Symbol.for("react.memo_cache_sentinel")?(u={position:"relative"},T[16]=u):u=T[16],T[17]!==V?(p=(0,r.jsx)(rb,{maxLength:3,userIds:V,size:2}),T[17]=V,T[18]=p):p=T[18];let U=rv[A];return T[19]!==M?(m=M&&(0,r.jsx)(M,{}),T[19]=M,T[20]=m):m=T[20],T[21]!==m?(h=(0,r.jsx)(a.Text,{size:0,children:m}),T[21]=m,T[22]=h):h=T[22],T[23]!==U||T[24]!==h?(g=(0,r.jsx)(ry,{align:"center",justify:"center",$color:U,children:h}),T[23]=U,T[24]=h,T[25]=g):g=T[25],T[26]!==g||T[27]!==p?(b=(0,r.jsxs)("div",{style:u,children:[p,g]}),T[26]=g,T[27]=p,T[28]=b):b=T[28],T[29]!==F||T[30]!==A?(y=F(rx[A])||(0,r.jsx)("code",{children:A}),T[29]=F,T[30]=A,T[31]=y):y=T[31],T[32]!==y?(v=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:y}),T[32]=y,T[33]=v):v=T[33],T[34]!==H||T[35]!==L||T[36]!==N?(j=(0,r.jsx)(a.Text,{as:"time",size:1,muted:!0,dateTime:L,title:H,children:N}),T[34]=H,T[35]=L,T[36]=N,T[37]=j):j=T[37],T[38]!==v||T[39]!==j?(w=(0,r.jsxs)(a.Stack,{space:2,children:[v,j]}),T[38]=v,T[39]=j,T[40]=w):w=T[40],T[41]!==O?(I=O.length>0&&(0,r.jsx)(a.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,r.jsx)(x.Tooltip,{placement:"top",content:(0,r.jsx)(rS,{collaborators:O}),portal:!0,children:(0,r.jsx)(a.Box,{paddingLeft:2,paddingY:2,children:(0,r.jsx)(rb,{maxLength:3,userIds:O,size:0,withTooltip:!1})})})}),T[41]=O,T[42]=I):I=T[42],T[43]!==b||T[44]!==w||T[45]!==I?(S=(0,r.jsxs)(a.Flex,{align:"center",gap:3,children:[b,w,I]}),T[43]=b,T[44]=w,T[45]=I,T[46]=S):S=T[46],T[47]!==R.id||T[48]!==$||T[49]!==P||T[50]!==S?(C=(0,r.jsx)(a.Card,{as:"button",onClick:$,padding:2,pressed:P,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":R.id,children:S}),T[47]=R.id,T[48]=$,T[49]=P,T[50]=S,T[51]=C):C=T[51],T[52]!==k||T[53]!==C?(_=(0,r.jsxs)(a.Flex,{align:"center",gap:1,children:[C,k]}),T[52]=k,T[53]=C,T[54]=_):_=T[54],_}function r_(e){return(0,r.jsx)(rI,{userId:e},e)}let rT=e=>"publish"!==e.type,rR=e=>"publish"===e.type,rP="timeline-list-wrapper",rE=e=>{let t,n,i,l,o,d,u,p,m,h,g,x,b,y,v,j,w=(0,s.c)(51),{chunks:I,hasMoreChunks:S,lastChunk:C,onLoadMore:_,onSelect:T,listMaxHeight:R}=e,P=void 0===R?"calc(100vh - 280px)":R,[E,D]=(0,c.useState)(!1),{t:k}=(0,f.useTranslation)("studio"),F=C?.id;w[0]!==I?(t=function(e){let t=[];for(let n of e){if(rR(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(rT(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(rR(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}rT(n)&&t.push(n)}return t}(I),w[0]=I,w[1]=t):t=w[1];let A=t;w[2]!==A||w[3]!==F?(n=()=>{if(F){let e=A.find(e=>e.id===F);if(e&&rT(e)&&e.parentId)return new Set([e.parentId])}return new Set},w[2]=A,w[3]=F,w[4]=n):n=w[4];let[L,M]=(0,c.useState)(n);if(w[5]!==A||w[6]!==F?(i=()=>{if(F){let e=A.find(e=>e.id===F);if(e&&rT(e)&&e.parentId){let t=e.parentId;M(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},l=[A,F],w[5]=A,w[6]=F,w[7]=i,w[8]=l):(i=w[7],l=w[8]),(0,c.useEffect)(i,l),w[9]!==A||w[10]!==L){let e;w[12]!==L?(e=e=>!!rR(e)||!e.parentId||L.has(e.parentId),w[12]=L,w[13]=e):e=w[13],o=A.filter(e),w[9]=A,w[10]=L,w[11]=o}else o=w[11];let V=o;w[14]!==V.length||w[15]!==S||w[16]!==_?(d=()=>{V.length<16&&S&&_()},w[14]=V.length,w[15]=S,w[16]=_,w[17]=d):d=w[17],w[18]!==V||w[19]!==S||w[20]!==_?(u=[V,S,_],w[18]=V,w[19]=S,w[20]=_,w[21]=u):u=w[21],(0,c.useEffect)(d,u),w[22]===Symbol.for("react.memo_cache_sentinel")?(p=e=>()=>M(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),w[22]=p):p=w[22];let O=p;w[23]!==V||w[24]!==F?(m=F?V.findIndex(e=>e.id===F):-1,w[23]=V,w[24]=F,w[25]=m):m=w[25];let z=m;w[26]!==I||w[27]!==T?(h=e=>{let t=I.find(t=>t.id===e.id);t?T(t):(console.error("TimelineItem: chunk not found"),T(e))},w[26]=I,w[27]=T,w[28]=h):h=w[28];let B=h;w[29]!==L||w[30]!==V.length||w[31]!==B||w[32]!==S||w[33]!==F?(g=(e,t)=>{let{activeIndex:n}=t;return(0,r.jsxs)(a.Box,{paddingBottom:1,paddingTop:+(0===n),paddingRight:1,paddingLeft:rT(e)&&e.parentId?4:1,children:[(0,r.jsx)(rC,{chunk:e,isSelected:F===e.id,onSelect:B,collaborators:rR(e)?e.collaborators:void 0,optionsMenu:rR(e)&&e.children.length>0?(0,r.jsx)(rm,{isExpanded:L.has(e.id),onExpand:O(e.id)}):null}),n===V.length-1&&S&&(0,r.jsx)(f.LoadingBlock,{})]})},w[29]=L,w[30]=V.length,w[31]=B,w[32]=S,w[33]=F,w[34]=g):g=w[34];let N=g;w[35]===Symbol.for("react.memo_cache_sentinel")?(x=()=>D(!0),b=[],w[35]=x,w[36]=b):(x=w[35],b=w[36]),(0,c.useEffect)(x,b);let H=!z||E;return w[37]!==V.length||w[38]!==k?(y=0===V.length&&(0,r.jsxs)(rh,{padding:3,space:3,children:[(0,r.jsx)(a.Text,{size:1,weight:"medium",children:k("timeline.error.no-document-history-title")}),(0,r.jsx)(a.Text,{muted:!0,size:1,children:k("timeline.error.no-document-history-description")})]}),w[37]=V.length,w[38]=k,w[39]=y):y=w[39],w[40]!==V||w[41]!==P||w[42]!==_||w[43]!==N||w[44]!==z||w[45]!==k?(v=V.length>0&&(0,r.jsx)(rf,{direction:"column",$maxHeight:P,id:rP,children:(0,r.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:k("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:V,onEndReached:_,onEndReachedIndexOffset:20,overscan:5,renderItem:N,wrapAround:!1})}),w[40]=V,w[41]=P,w[42]=_,w[43]=N,w[44]=z,w[45]=k,w[46]=v):v=w[46],w[47]!==H||w[48]!==y||w[49]!==v?(j=(0,r.jsxs)(rg,{$visible:H,"data-ui":"timeline",children:[y,v]}),w[47]=H,w[48]=y,w[49]=v,w[50]=j):j=w[50],j};function rD(e){let t,n,i,l,o,d,c=(0,s.c)(14),{versionError:u}=e,{t:p}=(0,f.useTranslation)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(f.TextWithTone,{tone:"critical",children:(0,r.jsx)(v.ErrorOutlineIcon,{})}),c[0]=t):t=c[0],c[1]!==p||c[2]!==u?(n=p(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=p,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,r.jsx)(f.TextWithTone,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==p||c[7]!==u?(l=p(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=p,c[7]=u,c[8]=l):l=c[8],c[9]!==l?(o=(0,r.jsx)(f.TextWithTone,{size:1,tone:"critical",children:l}),c[9]=l,c[10]=o):o=c[10],c[11]!==i||c[12]!==o?(d=(0,r.jsxs)(a.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,r.jsxs)(a.Stack,{space:4,children:[i,o]})]}),c[11]=i,c[12]=o,c[13]=d):d=c[13],d}let rk=(0,eA.styled)(x.Popover).withConfig({displayName:"Root",componentId:"sc-5dzvio-0"})`overflow:hidden;overflow:clip;`,rF="timeline-menu";function rA(e){let t,n,i,l,o,u,p,m,h,g,b,y,j,w,I,S,C=(0,s.c)(62),{chunk:_,mode:T,placement:R}=e,{setTimelineRange:P,timelineError:E,ready:D,timelineStore:k}=i$(),[F,A]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[V,O]=(0,c.useState)(null),z=(0,d.useToast)(),B=(0,f.useTimelineSelector)(k,rz),N=(0,f.useTimelineSelector)(k,rO),H=(0,f.useTimelineSelector)(k,rV),$=(0,f.useTimelineSelector)(k,rM),U=(0,f.useTimelineSelector)(k,rL),{t:G}=(0,f.useTranslation)("studio");C[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{A(!0)},C[0]=t):t=C[0];let q=t;C[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{A(!1)},C[1]=n):n=C[1];let W=n;C[2]!==L||C[3]!==F?(i=e=>{F&&("Escape"===e.key||"Tab"===e.key)&&(W(),L?.focus())},C[2]=L,C[3]=F,C[4]=i):i=C[4],(0,a.useGlobalKeyDown)(i),C[5]!==L||C[6]!==V?(l=()=>[L,V],C[5]=L,C[6]=V,C[7]=l):l=C[7],(0,a.useClickOutsideEvent)(F&&W,l),C[8]!==P||C[9]!==G||C[10]!==k||C[11]!==z?(o=e=>{try{(()=>{let[t,n]=k?.findRangeForRev(e)||[null,null];P(t,n)})()}catch(e){z.push({closable:!0,description:e.message,status:"error",title:G("timeline.error.unable-to-load-revision")})}},C[8]=P,C[9]=G,C[10]=k,C[11]=z,C[12]=o):o=C[12];let K=o;C[13]!==P||C[14]!==G||C[15]!==k||C[16]!==z?(u=e=>{try{(()=>{let[t,n]=k?.findRangeForSince(e)||[null,null];P(t,n)})()}catch(e){z.push({closable:!0,description:e.message,status:"error",title:G("timeline.error.unable-to-load-revision")})}},C[13]=P,C[14]=G,C[15]=k,C[16]=z,C[17]=u):u=C[17];let Y=u;C[18]!==N||C[19]!==k?(p=()=>{N||k?.loadMore()},C[18]=N,C[19]=k,C[20]=p):p=C[20];let X=p;e:{let e,t;if(E){let e;C[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rD,{}),C[21]=e):e=C[21],m=e;break e}if("rev"===T){let e;C[22]!==B||C[23]!==X||C[24]!==H||C[25]!==$||C[26]!==K?(e=(0,r.jsx)(rE,{chunks:B,hasMoreChunks:H,lastChunk:$,onLoadMore:X,onSelect:K}),C[22]=B,C[23]=X,C[24]=H,C[25]=$,C[26]=K,C[27]=e):e=C[27],m=e;break e}C[28]!==B||C[29]!==$?(e=$?B.filter(e=>e.index<$.index):B,C[28]=B,C[29]=$,C[30]=e):e=C[30];let n=e;C[31]!==n||C[32]!==X||C[33]!==H||C[34]!==Y||C[35]!==U?(t=(0,r.jsx)(rE,{chunks:n,hasMoreChunks:H,lastChunk:U,onLoadMore:X,onSelect:Y}),C[31]=n,C[32]=X,C[33]=H,C[34]=Y,C[35]=U,C[36]=t):t=C[36],m=t}let Q=m;if(C[37]!==_||C[38]!==G){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};h=_?G(rx[_.type],{context:"timestamp",timestamp:new Date(_?.endTimestamp),formatParams:e}):G("timeline.latest-revision"),g=_?G("timeline.since",{timestamp:new Date(_?.endTimestamp),formatParams:e}):G("timeline.since-version-missing"),C[37]=_,C[38]=G,C[39]=h,C[40]=g}else h=C[39],g=C[40];let J="rev"===T?h:g;C[41]!==V?(b={[rF]:V},C[41]=V,C[42]=b):b=C[42];let Z=b,ee=F&&Q,et=F?"timeline-menu-close-button":"timeline-menu-open-button",en=!D,ei=F?W:q;return C[43]===Symbol.for("react.memo_cache_sentinel")?(y={maxWidth:"100%"},C[43]=y):y=C[43],C[44]!==J||C[45]!==D||C[46]!==G?(j=D?J:G("timeline.loading-history"),C[44]=J,C[45]=D,C[46]=G,C[47]=j):j=C[47],C[48]!==F||C[49]!==et||C[50]!==en||C[51]!==ei||C[52]!==j?(w=(0,r.jsx)(a.Flex,{width:"fill",children:(0,r.jsx)(x.Button,{"data-testid":et,disabled:en,mode:"ghost",onClick:ei,ref:M,selected:F,width:"fill",tooltipProps:null,justify:"space-between",style:y,iconRight:v.ChevronDownIcon,text:j})}),C[48]=F,C[49]=et,C[50]=en,C[51]=ei,C[52]=j,C[53]=w):w=C[53],C[54]!==F||C[55]!==R||C[56]!==ee||C[57]!==w?(I=(0,r.jsx)(rk,{"data-testid":"timeline-menu",constrainSize:!0,content:ee,"data-ui":"versionMenu",open:F,placement:R,matchReferenceWidth:!0,portal:!0,ref:O,children:w}),C[54]=F,C[55]=R,C[56]=ee,C[57]=w,C[58]=I):I=C[58],C[59]!==Z||C[60]!==I?(S=(0,r.jsx)(a.PortalProvider,{__unstable_elements:Z,children:I}),C[59]=Z,C[60]=I,C[61]=S):S=C[61],S}function rL(e){return e.sinceTime}function rM(e){return e.realRevChunk}function rV(e){return e.hasMoreChunks}function rO(e){return e.isLoading}function rz(e){return e.chunks}let rB=(0,eA.styled)(p.motion.path).withConfig({displayName:"StyledMotionPath",componentId:"sc-1l2ln4p-0"})`transform-origin:center;`,rN=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,r.jsx)(p.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},rH=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,r.jsx)(rB,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},r$=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,r.jsx)(p.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},rU=eA.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,rG=eA.styled.g.withConfig({displayName:"RotateGroup",componentId:"sc-1l2ln4p-1"})`transform-origin:center;&[data-rotate]{animation:${rU} 1s ease-in-out infinite;}`,rq={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},rW={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},rK={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rY={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function rX(e){let t,n,i,l,o,a=(0,s.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,r.jsx)(rH,{variants:rK,initial:d,animate:d}),n=(0,r.jsx)(rN,{variants:rW,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,r.jsxs)(rG,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(l=(0,r.jsx)(r$,{variants:rY,initial:d,animate:d}),a[7]=d,a[8]=l):l=a[8],a[9]!==d||a[10]!==i||a[11]!==l?(o=(0,r.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,r.jsxs)(p.motion.g,{variants:rq,initial:d,animate:d,children:[i,l]})}),a[9]=d,a[10]=i,a[11]=l,a[12]=o):o=a[12],o}let rQ={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},rJ=e=>{let t,n,i,l,o,d=(0,s.c)(13),{status:c}=e,{t:u}=(0,f.useTranslation)(D);if("saved"!==c&&"syncing"!==c)return null;let p=rQ[c];return d[0]!==c?(t=(0,r.jsx)(rX,{status:c}),d[0]=c,d[1]=t):t=d[1],d[2]!==p.tone||d[3]!==t?(n=(0,r.jsx)(f.TextWithTone,{size:1,tone:p.tone,children:t}),d[2]=p.tone,d[3]=t,d[4]=n):n=d[4],d[5]!==p.i18nKey||d[6]!==u?(i=u(p.i18nKey),d[5]=p.i18nKey,d[6]=u,d[7]=i):i=d[7],d[8]!==i?(l=(0,r.jsx)(a.Text,{muted:!0,size:1,children:i}),d[8]=i,d[9]=l):l=d[9],d[10]!==n||d[11]!==l?(o=(0,r.jsxs)(a.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,l]}),d[10]=n,d[11]=l,d[12]=o):o=d[12],o},rZ={minimal:!0,useTemporalPhrase:!0},r0=p.motion.create(a.Button),r1=p.motion.create(a.Box);function r2(e){return"timeline.operation.published"===e?"document-status.last-published":e}let r3=()=>{let e,t,n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{style:{margin:-5},children:(0,r.jsx)(f.AvatarSkeleton,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(a.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,r.jsx)(d.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},r4=e=>{let t,n,i,l,o,d,c,u,p=(0,s.c)(17),{author:m,translationKey:h,timestamp:g}=e,{onHistoryOpen:x,inspector:b,onHistoryClose:y}=i$(),{t:v}=(0,f.useTranslation)(),j=(0,f.useRelativeTime)(void 0===g?"":g,rZ);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let w=b?.name===i0?y:x;return p[3]!==m?(l=m&&(0,r.jsx)("div",{style:{margin:-5},children:(0,r.jsx)(f.UserAvatar,{user:m,size:0})}),p[3]=m,p[4]=l):l=p[4],p[5]!==v||p[6]!==h?(o=v(h),p[5]=v,p[6]=h,p[7]=o):o=p[7],p[8]!==j||p[9]!==o?(d=(0,r.jsxs)(a.Text,{muted:!0,size:1,children:[o," ",j]}),p[8]=j,p[9]=o,p[10]=d):d=p[10],p[11]!==l||p[12]!==d?(c=(0,r.jsxs)(a.Flex,{align:"center",flex:"none",gap:3,children:[l,d]}),p[11]=l,p[12]=d,p[13]=c):c=p[13],p[14]!==w||p[15]!==c?(u=(0,r.jsx)(r0,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:w,padding:2,muted:!0,children:c}),p[14]=w,p[15]=c,p[16]=u):u=p[16],u},r5=()=>{let e,t,n=(0,s.c)(6),{editState:i}=i$(),{selectedPerspective:l}=(0,f.usePerspective)();n[0]!==i||n[1]!==l?(e=(0,f.isPublishedPerspective)(l)&&i?.published?._updatedAt?{translationKey:f.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:i.published._updatedAt}:i?.version?._updatedAt?{translationKey:i.version._updatedAt===i.version._createdAt?f.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:f.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:i.version._updatedAt}:i?.draft?._updatedAt?{translationKey:i.draft._updatedAt===i.draft._createdAt?f.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:f.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:i.draft._updatedAt}:null,n[0]=i,n[1]=l,n[2]=e):e=n[2];let o=e;return o?(n[3]!==o.timestamp||n[4]!==o.translationKey?(t=(0,r.jsx)(r4,{author:"",translationKey:o.translationKey,timestamp:o.timestamp}),n[3]=o.timestamp,n[4]=o.translationKey,n[5]=t):t=n[5],t):null},r6=()=>{let e,t,n=(0,s.c)(8),{events:i,loading:l}=(0,f.useEvents)(),o=i?.[0];if(!o&&l){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r3,{}),n[0]=e):e=n[0],e}if(!o){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r5,{}),n[1]=e):e=n[1],e}let a=o.author,d=f.TIMELINE_ITEM_I18N_KEY_MAPPING[o.documentVariantType][o.type];return n[2]!==d?(e=r2(d),n[2]=d,n[3]=e):e=n[3],n[4]!==o.author||n[5]!==o.timestamp||n[6]!==e?(t=(0,r.jsx)(r4,{author:a,translationKey:e,timestamp:o.timestamp}),n[4]=o.author,n[5]=o.timestamp,n[6]=e,n[7]=t):t=n[7],t},r8=()=>{let e,t,n,i=(0,s.c)(10),{timelineStore:l}=i$(),o=(0,f.useTimelineSelector)(l,r9),a=(0,f.useTimelineSelector)(l,se),d=o?.[0];if(!d&&a){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r3,{}),i[0]=e):e=i[0],e}if(!d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r5,{}),i[1]=e):e=i[1],e}i[2]!==d.authors?(e=Array.from(d.authors),i[2]=d.authors,i[3]=e):e=i[3];let c=e[0],u=rx[d.type];return i[4]!==u?(t=r2(u),i[4]=u,i[5]=t):t=i[5],i[6]!==c||i[7]!==d.endTimestamp||i[8]!==t?(n=(0,r.jsx)(r4,{author:c,translationKey:t,timestamp:d.endTimestamp}),i[6]=c,i[7]=d.endTimestamp,i[8]=t,i[9]=n):n=i[9],n};function r7(){let e,t,n,i,l,o,a,d=(0,s.c)(18),{documentId:u,documentType:p,editState:h,value:g}=i$(),[x,b]=(0,c.useState)(null),y=(0,f.useSource)().beta?.eventsAPI?.documents,v=(0,f.useSyncState)(u,p,h?.release),j=g?._updatedAt;return d[0]!==x||d[1]!==v.isSyncing?(e=()=>{if("syncing"===x&&!v.isSyncing){let e=setTimeout(()=>b("saved"),1e3);return()=>clearTimeout(e)}if("saved"===x){let e=setTimeout(()=>b(null),3e3);return()=>clearTimeout(e)}},d[0]=x,d[1]=v.isSyncing,d[2]=e):e=d[2],d[3]!==j||d[4]!==x||d[5]!==v.isSyncing?(t=[x,j,v.isSyncing],d[3]=j,d[4]=x,d[5]=v.isSyncing,d[6]=t):t=d[6],(0,c.useEffect)(e,t),d[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{b(null)},d[7]=n):n=d[7],d[8]!==u?(i=[u],d[8]=u,d[9]=i):i=d[9],(0,c.useLayoutEffect)(n,i),d[10]!==v.isSyncing?(l=()=>{v.isSyncing&&b("syncing")},d[10]=v.isSyncing,d[11]=l):l=d[11],d[12]!==j||d[13]!==v.isSyncing?(o=[v.isSyncing,j],d[12]=j,d[13]=v.isSyncing,d[14]=o):o=d[14],(0,c.useLayoutEffect)(l,o),d[15]!==y||d[16]!==x?(a=(0,r.jsx)(m.AnimatePresence,{children:x?(0,r.jsx)(r1,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,r.jsx)(rJ,{status:x||void 0})}):(0,r.jsx)(r.Fragment,{children:y?(0,r.jsx)(r6,{}):(0,r.jsx)(r8,{})})}),d[15]=y,d[16]=x,d[17]=a):a=d[17],a}function r9(e){return e.chunks}function se(e){return e.isLoading}let st=(0,eA.styled)(a.Text).withConfig({displayName:"StatusText",componentId:"sc-15z6xze-0"})`color:var(--card-muted-fg-color);em{color:var(--card-fg-color);font-weight:500;font-style:normal;}`;function sn(){let e,t,n,i,l=(0,s.c)(9),{displayed:o,revisionNotFound:d}=i$(),p=(0,c.useContext)(u.EventsContext),m=p?.revision,h=p?.events.find(e=>e.id===m?.revisionId),{t:g}=(0,f.useTranslation)(),x=h?.timestamp||o?._updatedAt||o?._createdAt,b=x?(0,r.jsx)(f.Translate,{t:g,i18nKey:"document-status.revision-from",values:{date:(0,tJ.format)(new Date(x),"MMM d, yyyy '@' pp")}}):null;l[0]!==b?(e={name:"revision",text:b,tone:"caution"},l[0]=b,l[1]=e):e=l[1];let y=e;return l[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(a.Box,{flex:"none",children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(v.RestoreIcon,{})})}),l[2]=t):t=l[2],l[3]!==y||l[4]!==d||l[5]!==g?(n=d?(0,r.jsx)(f.Translate,{t:g,i18nKey:"document-status.revision-not-found"}):y.text,l[3]=y,l[4]=d,l[5]=g,l[6]=n):n=l[6],l[7]!==n?(i=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(a.Flex,{flex:1,gap:3,padding:2,children:[t,(0,r.jsx)(a.Box,{flex:1,children:(0,r.jsx)(st,{size:1,textOverflow:"ellipsis",children:n})})]})}),l[7]=n,l[8]=i):i=l[8],i}let si=p.motion.create(a.Card);function sl(e){let t,n,i,l,o,d,u,p,m=(0,s.c)(22),{actionsBoxRef:h,createLinkMetadata:g}=e,{editState:x,onChange:b,revisionNotFound:y}=i$(),{params:v}=lA(),j=void 0===v?iQ:v,{selectedPerspective:w}=(0,f.usePerspective)(),{title:I}=i4(),S=(0,f.useSanityCreateConfig)().components?.documentLinkedActions,C=!!j.rev,[_,T]=(0,c.useState)(null),[R,P]=(0,c.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{T(e.contentRect.width<480)},m[0]=t):t=m[0];let E=t;m[1]!==R?(n={element:R,onResize:E},m[1]=R,m[2]=n):n=m[2],function(e){let t,n,i=(0,s.c)(4),{element:l,onResize:o}=e;i[0]!==l||i[1]!==o?(t=()=>(l&&f.resizeObserver.observe(l,o),()=>{l&&f.resizeObserver.unobserve(l)}),n=[l,o],i[0]=l,i[1]=o,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,c.useLayoutEffect)(t,n)}(n);e:{let e=!!(x?.ready&&"boolean"==typeof _);if(w){if((0,f.isPublishedPerspective)(w)){i=e&&!!x?.published;break e}if((0,f.isReleaseDocument)(w)){i=e&&!!x?.version;break e}}i=e}let D=i;if(g&&(0,f.isSanityCreateLinked)(g)&&S){let e;m[3]!==S||m[4]!==g||m[5]!==b||m[6]!==I?(e=(0,r.jsx)(S,{metadata:g,panelPortalElementId:l9,onDocumentChange:b,documentTitle:I}),m[3]=S,m[4]=g,m[5]=b,m[6]=I,m[7]=e):e=m[7],l=e}else if(C){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ro,{}),m[8]=e):e=m[8],l=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rn,{}),m[9]=e):e=m[9],l=e}if(C&&y)return null;let k=C?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:.2},m[10]=o):o=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1,transition:{duration:.3}},m[11]=d):d=m[11];let F=C?"caution":void 0;return m[12]!==l||m[13]!==h||m[14]!==_||m[15]!==D||m[16]!==C?(u=D&&(0,r.jsxs)(a.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!C,paddingRight:+!C,children:[(0,r.jsxs)(a.Flex,{align:"center",flex:1,gap:_?2:3,wrap:"wrap",paddingRight:3,children:[(0,r.jsxs)(a.Flex,{align:"center",children:[C?(0,r.jsx)(sn,{}):(0,r.jsx)(r7,{}),(0,r.jsx)(oH,{})]}),(0,r.jsx)(oq,{})]}),(0,r.jsxs)(a.Flex,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,r.jsx)(oH,{}),l]})]}),m[12]=l,m[13]=h,m[14]=_,m[15]=D,m[16]=C,m[17]=u):u=m[17],m[18]!==k||m[19]!==F||m[20]!==u?(p=(0,r.jsx)(si,{initial:o,animate:d,tone:F,radius:3,ref:P,sizing:"border",padding:2,children:u},k),m[18]=k,m[19]=F,m[20]=u,m[21]=p):p=m[21],p}let so=(0,c.memo)(function(e){let t,n,i,l,o,a,d,c,u,p,m,h,g,x=(0,s.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:l,onActionStart:o,onKeyDown:a,rootRef:c,states:u,...d}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=o,x[6]=a,x[7]=d,x[8]=c,x[9]=u,x[10]=p):(t=x[1],n=x[2],i=x[3],l=x[4],o=x[5],a=x[6],d=x[7],c=x[8],u=x[9],p=x[10]);let b=void 0===p?"div":p,y=u[n];x[11]!==o||x[12]!==a||x[13]!==u?(m=e=>{let t=u.filter(t=>t.shortcut&&(0,tR.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),o(u.indexOf(n));return}a&&a(e)},x[11]=o,x[12]=a,x[13]=u,x[14]=m):m=x[14];let v=m;return x[15]!==t||x[16]!==y?(h=y&&y.dialog&&(0,r.jsx)(f.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,r.jsx)(oS,{dialog:y.dialog,referenceElement:t})}),x[15]=t,x[16]=y,x[17]=h):h=x[17],x[18]!==b||x[19]!==i||x[20]!==v||x[21]!==l||x[22]!==d||x[23]!==c||x[24]!==h?(g=(0,r.jsxs)(b,{id:l,onKeyDown:v,tabIndex:-1,...d,ref:c,children:[i,h]}),x[18]=b,x[19]=i,x[20]=v,x[21]=l,x[22]=d,x[23]=c,x[24]=h,x[25]=g):g=x[25],g}),sr=(0,c.memo)(e=>{let t,n,i,l,o,a,d=(0,s.c)(12);d[0]!==e?({actionsBoxElement:t,as:l,children:n,...i}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=i,d[4]=l):(t=d[1],n=d[2],i=d[3],l=d[4]);let u=void 0===l?"div":l,[p,m]=(0,c.useState)(-1);d[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{m(e)},d[5]=o):o=d[5];let h=o;return d[6]!==t||d[7]!==p||d[8]!==u||d[9]!==n||d[10]!==i?(a=(0,r.jsx)(aD,{children:e=>{let{states:l}=e;return(0,r.jsx)(so,{...i,activeIndex:p,actionsBoxElement:t,as:u,onActionStart:h,states:l,children:n})}}),d[6]=t,d[7]=p,d[8]=u,d[9]=n,d[10]=i,d[11]=a):a=d[11],a});sr.displayName="Memo(DocumentActionShortcuts)";let ss=()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(v.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function sa(e){let t,n,i,l,o,d,c,u=(0,s.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:g,minWidth:x}=e,{t:b}=(0,f.useTranslation)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==b||u[3]!==t?(n=(0,r.jsx)(f.Translate,{t:b,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=b,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==b?(i=p&&(0,r.jsx)(a.Text,{as:"p",children:(0,r.jsx)(f.Translate,{t:b,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=b,u[7]=i):i=u[7],u[8]!==p||u[9]!==b?(l=!p&&(0,r.jsx)(a.Text,{as:"p",children:b("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=b,u[10]=l):l=u[10],u[11]!==m?(o=f.isDev&&m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,r.jsx)(a.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,r.jsx)(a.Code,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=o):o=u[12],u[13]!==i||u[14]!==l||u[15]!==o?(d=(0,r.jsxs)(a.Stack,{space:4,children:[i,l,o]}),u[13]=i,u[14]=l,u[15]=o,u[16]=d):d=u[16],u[17]!==h||u[18]!==x||u[19]!==g||u[20]!==n||u[21]!==d?(c=(0,r.jsx)(iO,{currentMinWidth:h,flex:2.5,minWidth:x,paneKey:g,title:n,tone:"caution",children:d}),u[17]=h,u[18]=x,u[19]=g,u[20]=n,u[21]=d,u[22]=c):c=u[22],c}let sd=["fixed","fixed","absolute"];function sc(e){let t,n,i,l,o,c,u=(0,s.c)(16),{documentPanelPortalElement:p,setFooterElement:m,setActionsBoxElement:h}=e,g=(0,f.useZIndex)(),{value:b}=i$();u[0]!==p?(t={[l9]:p},u[0]=p,u[1]=t):t=u[1];let y=t;u[2]!==b?(n=(0,f.getSanityCreateLinkMetadata)(b),u[2]=b,u[3]=n):n=u[3];let v=n;return u[4]!==v||u[5]!==h?(i=(0,r.jsx)(x.TooltipDelayGroupProvider,{children:(0,r.jsx)(sl,{actionsBoxRef:h,createLinkMetadata:v})}),u[4]=v,u[5]=h,u[6]=i):i=u[6],u[7]!==m||u[8]!==i?(l=(0,r.jsx)(iw,{ref:m,padding:1,children:i}),u[7]=m,u[8]=i,u[9]=l):l=u[9],u[10]!==l||u[11]!==g.portal?(o=(0,r.jsx)(d.DialogProvider,{position:sd,zOffset:g.portal,children:l}),u[10]=l,u[11]=g.portal,u[12]=o):o=u[12],u[13]!==y||u[14]!==o?(c=(0,r.jsx)(a.PortalProvider,{__unstable_elements:y,children:o}),u[13]=y,u[14]=o,u[15]=c):c=u[15],c}let su=[],sp=["fixed","fixed","absolute"],sm=(0,eA.styled)(f.ChangeConnectorRoot).withConfig({displayName:"StyledChangeConnectorRoot",componentId:"sc-tn8aer-0"})`flex:1;display:flex;flex-direction:column;min-height:0;min-width:0;`;function sh(){var e;let t,n,i,l,o,u,p,m,h,g,x,y,j,w,I,S,C,_,T,R,P,E,k=(0,s.c)(82),{changesOpen:F,displayed:A,documentId:L,documentType:M,editState:V,fieldActions:O,focusPath:z,inspectOpen:B,inspector:N,inspectors:H,onFocus:$,onHistoryOpen:U,onMenuAction:G,onPathOpen:q,paneKey:W,schemaType:K,value:Y,previewUrl:X}=i$(),{stickyParams:Q}=(0,b.useRouter)(),{params:J}=lA(),{features:Z}=iX(),{t:ee}=(0,f.useTranslation)(D),{collapsed:et}=it(),en=(0,f.useZIndex)(),[ei,el]=(0,c.useState)(null),[eo,er]=(0,c.useState)(null),[es,ea]=(0,c.useState)(null),[ed,ec]=(0,c.useState)(null),[eu,ep]=(0,c.useState)(null);k[0]!==z||k[1]!==ei||k[2]!==Y?(t={element:ei,focusPath:z,value:Y},k[0]=z,k[1]=ei,k[2]=Y,k[3]=t):t=k[3],(0,f.useGlobalCopyPasteElementHandler)(t),k[4]===Symbol.for("react.memo_cache_sentinel")?(n=[],k[4]=n):n=k[4];let[em,eh]=(0,c.useState)(n);k[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],k[5]=i):i=k[5];let[ef,eg]=(0,c.useState)(i),ex=(0,d.useElementRect)(eo),eb=(0,d.useElementRect)(es),ey=ex?.height,ev=eb?.height,ej=600+320*!!N,ew=320+320*!!N;k[6]!==N?.name||k[7]!==H?(l=H?.find(e=>e.name===N?.name),k[6]=N?.name,k[7]=H,k[8]=l):l=k[8];let eI=l;k[9]!==A||k[10]!==L||k[11]!==V?(o={displayed:A,documentId:L,editState:V},k[9]=A,k[10]=L,k[11]=V,k[12]=o):o=k[12];let eS=(0,f.useDocumentIdStack)(o),eC=!!Y,e_="true"===Q.displayInlineChanges;k[13]!==eI||k[14]!==eS||k[15]!==Z||k[16]!==eC||k[17]!==em||k[18]!==H||k[19]!==X||k[20]!==ee||k[21]!==e_?(P=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let o=i[l];return!o||o.hidden?null:{action:`${iJ}${n.name}`,group:o.showAsAction?void 0:"inspectors",icon:o.icon,disabled:!t,selected:e?.name===n.name,shortcut:o.hotkeys?.join("+"),showAsAction:o.showAsAction,title:o.title,tone:o.tone}}).filter(Boolean)}(e={currentInspector:eI,features:Z,hasValue:eC,inspectorMenuItems:em,inspectors:H,previewUrl:X,documentIdStack:eS,t:ee,displayInlineChanges:e_}),E=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:v.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:v.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?v.CheckmarkIcon:ss}}(e)].filter(Boolean),u=[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:v.LinkIcon},...P,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:v.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...E],k[13]=eI,k[14]=eS,k[15]=Z,k[16]=eC,k[17]=em,k[18]=H,k[19]=X,k[20]=ee,k[21]=e_,k[22]=u):u=k[22];let eT=u;k[23]!==eT||k[24]!==G?(p=e=>{for(let t of eT)if(t.shortcut&&(0,tR.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),G(t);return}},k[23]=eT,k[24]=G,k[25]=p):p=k[25];let eR=p;k[26]!==$||k[27]!==q?(m=e=>{q(e),$(e)},k[26]=$,k[27]=q,k[28]=m):m=k[28];let eP=m;if(!K){let e;return k[29]!==ej||k[30]!==M||k[31]!==ew||k[32]!==W||k[33]!==Y?(e=(0,r.jsx)(sa,{currentMinWidth:ej,documentType:M,minWidth:ew,paneKey:W,value:Y}),k[29]=ej,k[30]=M,k[31]=ew,k[32]=W,k[33]=Y,k[34]=e):e=k[34],e}k[35]!==L||k[36]!==M||k[37]!==H?(h=H.length>0&&(0,r.jsx)(i1,{documentId:L,documentType:M,inspectors:H,onMenuItems:eh}),k[35]=L,k[36]=M,k[37]=H,k[38]=h):h=k[38],k[39]!==L||k[40]!==M||k[41]!==O||k[42]!==K?(g=O.length>0&&K&&(0,r.jsx)(f.FieldActionsResolver,{actions:O,documentId:L,documentType:M,onActions:eg,path:su,schemaType:K}),k[39]=L,k[40]=M,k[41]=O,k[42]=K,k[43]=g):g=k[43],k[44]!==eT?(x=(0,r.jsx)(oV,{ref:ea,menuItems:eT}),k[44]=eT,k[45]=x):x=k[45];let eE=et?void 0:"fill",eD=F&&J?.changesInspectorTab==="review",ek=ey||null,eF=ev||null;return k[46]!==eu?(y=(0,r.jsx)(sc,{documentPanelPortalElement:eu,setFooterElement:er,setActionsBoxElement:ec}),k[46]=eu,k[47]=y):y=k[47],k[48]!==B||k[49]!==ei||k[50]!==ek||k[51]!==eF||k[52]!==y?(j=(0,r.jsx)(ou,{footerHeight:ek,headerHeight:eF,isInspectOpen:B,rootElement:ei,setDocumentPanelPortalElement:ep,footer:y}),k[48]=B,k[49]=ei,k[50]=ek,k[51]=eF,k[52]=y,k[53]=j):j=k[53],k[54]!==eP||k[55]!==U||k[56]!==eD||k[57]!==j?(w=(0,r.jsx)(sm,{"data-testid":"change-connector-root",isReviewChangesOpen:eD,onOpenReviewChanges:U,onSetFocus:eP,children:j}),k[54]=eP,k[55]=U,k[56]=eD,k[57]=j,k[58]=w):w=k[58],k[59]!==eE||k[60]!==w?(I=(0,r.jsx)(a.Flex,{direction:"column",flex:1,height:eE,children:w}),k[59]=eE,k[60]=w,k[61]=I):I=k[61],k[62]!==I||k[63]!==en.paneDialog?(S=(0,r.jsx)(d.DialogProvider,{position:sp,zOffset:en.paneDialog,children:I}),k[62]=I,k[63]=en.paneDialog,k[64]=S):S=k[64],k[65]===Symbol.for("react.memo_cache_sentinel")?(C=(0,r.jsx)(i6,{}),k[65]=C):C=k[65],k[66]!==ed||k[67]!==ej||k[68]!==eR||k[69]!==ew||k[70]!==W||k[71]!==x||k[72]!==S?(_=(0,r.jsxs)(sr,{actionsBoxElement:ed,as:ir,currentMinWidth:ej,"data-testid":"document-pane",flex:2.5,id:W,minWidth:ew,onKeyUp:eR,rootRef:el,children:[x,S,C]}),k[66]=ed,k[67]=ej,k[68]=eR,k[69]=ew,k[70]=W,k[71]=x,k[72]=S,k[73]=_):_=k[73],k[74]!==ef||k[75]!==_?(T=(0,r.jsx)(iq,{children:(0,r.jsx)(f.FieldActionsProvider,{actions:ef,path:su,children:_})}),k[74]=ef,k[75]=_,k[76]=T):T=k[76],k[77]!==g||k[78]!==T||k[79]!==h||k[80]!==Y?(R=(0,r.jsxs)(f.GetFormValueProvider,{value:Y,children:[h,g,T]}),k[77]=g,k[78]=T,k[79]=h,k[80]=Y,k[81]=R):R=k[81],R}let sf=(e,t)=>{let n,i,l,o,r=(0,s.c)(11),a=(0,f.useHistoryStore)(),[d,u]=(0,c.useState)(null),[p,m]=(0,c.useState)(!1);r[0]!==e||r[1]!==t?(n={documentId:e,documentType:t},r[0]=e,r[1]=t,r[2]=n):n=r[2];let h=(0,f.useTimelineStore)(n),g=(0,f.useTimelineSelector)(h,sg);return r[3]!==e||r[4]!==a||r[5]!==g?(i=()=>{g&&e?(m(!0),a.getDocumentAtRevision(e,g).then(e=>{u(e||null),m(!1)}).catch(()=>{u(null),m(!1)})):(u(null),m(!1))},l=[e,g,a],r[3]=e,r[4]=a,r[5]=g,r[6]=i,r[7]=l):(i=r[6],l=r[7]),(0,c.useEffect)(i,l),r[8]!==d||r[9]!==p?(o={lastRevisionDocument:d,loading:p},r[8]=d,r[9]=p,r[10]=o):o=r[10],o};function sg(e){return e.lastNonDeletedRevId}let sx=(0,tv.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),sb=(0,tv.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),sy=(0,tv.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function sv(e){return e.name===i0}function sj(e){let t=(0,f.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function sw(e){let t,n,i,l,o,a,p,m,g,x,y,v,j,w,I,S,C,_,T,R,P,E,k,F,A,L,M,V,O,z,B,N,H,$,U,G=(0,s.c)(204),{children:q,index:W,pane:K,paneKey:Y,onFocusPath:X,onSetMaximizedPane:Q,maximized:J,forcedVersion:Z,historyStore:ee}=e,et=void 0!==J&&J,{store:en,error:ei,ready:el,revisionDocument:eo,onOlderRevision:er,sinceDocument:es,isPristine:ea,revisionId:ed,lastNonDeletedRevId:ec}=ee,eu=(0,f.useSchema)(),{setDocumentMeta:ep}=(0,f.useCopyPaste)(),{document:em}=(0,f.useSource)(),{actions:eh,badges:ef,unstable_fieldActions:eg,unstable_languageFilter:ex,drafts:eb}=em,{enabled:ey}=eb,ev=(0,ty.useTelemetry)(),ej=(0,b.useRouter)(),ew=lA(),eI=ew.setParams,{push:eS}=(0,d.useToast)(),{options:eC,menuItemGroups:e_,title:eT,views:eR}=K,eP=void 0===e_?iZ:e_,eE=void 0===eT?null:eT;G[0]!==eR?(t=void 0===eR?[]:eR,G[0]=eR,G[1]=t):t=G[1];let eD=t,ek=(0,f.useUnique)(eC),eF=ek.id;G[2]!==eF?(n=(0,h.getPublishedId)(eF),G[2]=eF,G[3]=n):n=G[3];let eA=n,eL=eC.type,eV=(0,f.useUnique)(ew.params)||iQ,{buildStudioUrl:ez}=(0,f.useStudioUrl)(),eB=(0,f.usePerspective)(),{document:eH,beta:e$}=(0,f.useWorkspace)(),{drafts:eG}=eH,{enabled:eq}=eG,eY=e$?.form?.enhancedObjectDialog?.enabled;e:{let e;if(Z){i=Z;break e}G[4]!==eB.selectedPerspectiveName||G[5]!==eB.selectedReleaseId?(e={selectedPerspectiveName:eB.selectedPerspectiveName,selectedReleaseId:eB.selectedReleaseId},G[4]=eB.selectedPerspectiveName,G[5]=eB.selectedReleaseId,G[6]=e):e=G[6],i=e}let{selectedReleaseId:eX,selectedPerspectiveName:eQ}=i,{data:eZ}=(0,f.useActiveReleases)(),e0=void 0===eZ?f.EMPTY_ARRAY:eZ,e1=nO();G[7]!==eA||G[8]!==eL||G[9]!==ek||G[10]!==eV?(l={paneOptions:ek,documentId:eA,documentType:eL,params:eV},G[7]=eA,G[8]=eL,G[9]=ek,G[10]=eV,G[11]=l):l=G[11];let e2=(e=>{var t;let n,i,l,o,r,a,d,c,u=(0,s.c)(13),{paneOptions:p,documentType:m,documentId:h,params:g}=e,x=(0,f.useTemplates)(),b=lA(),y=(0,f.useUnique)(b.payload);u[0]!==m||u[1]!==p.template||u[2]!==p.templateParameters||u[3]!==y||u[4]!==g.template||u[5]!==x?(l=(t={documentType:m,templateName:p.template,templateParams:p.templateParameters,panePayload:y,urlTemplate:g.template}).panePayload||{},o=t.templateName,t.urlTemplate&&o&&o!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${o}". Using "${o}".`),r=o||t.urlTemplate,a=x.filter(e=>e.schemaType===t.documentType),d={...t.templateParams,..."object"==typeof l&&l||{}},c=r,r||1!==a.length||(c=a[0].id),n={templateName:c,templateParams:d},u[0]=m,u[1]=p.template,u[2]=p.templateParameters,u[3]=y,u[4]=g.template,u[5]=x,u[6]=n):n=u[6];let{templateName:v,templateParams:j}=n;u[7]!==h||u[8]!==m||u[9]!==g.version||u[10]!==v||u[11]!==j?(i={documentId:h,documentType:m,templateName:v,templateParams:j,version:g.version},u[7]=h,u[8]=m,u[9]=g.version,u[10]=v,u[11]=j,u[12]=i):i=u[12];let w=(0,f.useInitialValue)(i);return(0,f.useUnique)(w)})(l),e3=e2.loading;G[12]!==eA||G[13]!==eL||G[14]!==eV||G[15]!==eI?(o={documentId:eA,documentType:eL,params:eV,setParams:eI},G[12]=eA,G[13]=eL,G[14]=eV,G[15]=eI,G[16]=o):o=G[16];let{changesOpen:e4,currentInspector:e5,inspectors:e6,closeInspector:e8,openInspector:e7,handleHistoryClose:e9,handleHistoryOpen:te,handleInspectorAction:tt,inspectOpen:tn,handleLegacyInspectClose:ti}=function(e){let t,n,i,l,o,r,a,d,u,p,m,h,g,x,b=(0,s.c)(54),{documentId:y,documentType:v,params:j,setParams:w}=e,{features:I}=iX(),S=(0,f.useSource)().document.inspectors;b[0]!==y||b[1]!==v||b[2]!==S?(t=S({documentId:y,documentType:v}),b[0]=y,b[1]=v,b[2]=S,b[3]=t):t=b[3];let C=t;b[4]!==j.inspect?(n=()=>j.inspect||null,b[4]=j.inspect,b[5]=n):n=b[5];let[_,T]=(0,c.useState)(n),R=(0,c.useRef)(j.inspect);b[6]!==j.inspect?(i=()=>{R.current!==j.inspect&&(R.current=j.inspect,T(j.inspect||null))},l=[j.inspect],b[6]=j.inspect,b[7]=i,b[8]=l):(i=b[7],l=b[8]),(0,c.useEffect)(i,l),b[9]!==_||b[10]!==C?(o=C?.find(e=>e.name===_),b[9]=_,b[10]=C,b[11]=o):o=b[11];let P=o;b[12]!==C?(r=C.find(sv),b[12]=C,b[13]=r):r=b[13];let E=r,D=P?.name===i0;b[14]!==P||b[15]!==C||b[16]!==j||b[17]!==w?(a=e=>{let t=e&&C.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(P){if(t){let e=t.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0});return}if(P){let e=P.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0})}}},b[14]=P,b[15]=C,b[16]=j,b[17]=w,b[18]=a):a=b[18];let k=a;b[19]!==P||b[20]!==C||b[21]!==j||b[22]!==w?(d=(e,t)=>{let n=C.find(t=>t.name===e);if(!n)return void console.warn(`No inspector named "${e}"`);if(P?.name===n.name)return void w({...j,...t,inspect:n.name});let i=j;P&&(i=(n.onClose?.({params:i})??{params:i}).params);let l=n.onOpen?.({params:i})??{params:i};T(n.name),R.current=n.name,w({...l.params,...t,inspect:n.name})},b[19]=P,b[20]=C,b[21]=j,b[22]=w,b[23]=d):d=b[23];let F=d;b[24]!==k||b[25]!==E?(u=()=>{E&&k(E.name)},b[24]=k,b[25]=E,b[26]=u):u=b[26];let A=u;b[27]!==I.reviewChanges||b[28]!==E||b[29]!==F?(p=()=>{I.reviewChanges&&E&&F(E.name,{changesInspectorTab:"review"})},b[27]=I.reviewChanges,b[28]=E,b[29]=F,b[30]=p):p=b[30];let L=p,M="on"===j.inspect;b[31]!==M||b[32]!==j||b[33]!==w?(m=e=>{w((void 0===e?!M:e)?{...j,inspect:"on"}:{...j,inspect:void 0})},b[31]=M,b[32]=j,b[33]=w,b[34]=m):m=b[34];let V=m;b[35]!==V?(h=()=>V(!1),b[35]=V,b[36]=h):h=b[36];let O=h;b[37]!==k||b[38]!==_||b[39]!==C||b[40]!==F||b[41]!==V?(g=e=>{if("inspect"===e.action)return V(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iJ.length),n=C.find(e=>e.name===t);return!!n&&(n.name===_?k(n.name):F(n.name),!0)},b[37]=k,b[38]=_,b[39]=C,b[40]=F,b[41]=V,b[42]=g):g=b[42];let z=g;return b[43]!==D||b[44]!==k||b[45]!==P||b[46]!==A||b[47]!==L||b[48]!==z||b[49]!==O||b[50]!==M||b[51]!==C||b[52]!==F?(x={changesOpen:D,currentInspector:P,inspectors:C,closeInspector:k,openInspector:F,handleHistoryClose:A,handleHistoryOpen:L,handleInspectorAction:z,handleLegacyInspectClose:O,inspectOpen:M},b[43]=D,b[44]=k,b[45]=P,b[46]=A,b[47]=L,b[48]=z,b[49]=O,b[50]=M,b[51]=C,b[52]=F,b[53]=x):x=b[53],x}(o),[tl,to]=(0,c.useState)(!1),{lastRevisionDocument:tr}=sf(eA,eL);G[17]!==ea||G[18]!==el?(a=e=>!!el&&!e?.draft&&!e?.published&&!e?.version&&!ea,G[17]=ea,G[18]=el,G[19]=a):a=G[19];let ts=a;G[20]!==e4||G[21]!==es?(p=e=>{let t=(0,f.selectUpstreamVersion)(e);return e4?es||t:t||null},G[20]=e4,G[21]=es,G[22]=p):p=G[22];let ta=p;G[23]!==eL||G[24]!==eu?(m=eu.get(eL),G[23]=eL,G[24]=eu,G[25]=m):m=G[25];let td=m;G[26]!==ts||G[27]!==tl||G[28]!==eq||G[29]!==eV.rev||G[30]!==eB.selectedPerspective||G[31]!==e0||G[32]!==td||G[33]!==eX?(g=e=>{let t=ts(e),n=!!eV.rev,i=e0.find(e=>(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===eX),l=(0,f.isPausedCardinalityOneRelease)(i);return n||tl||t||!l&&!(0,f.isPerspectiveWriteable)({selectedPerspective:eB.selectedPerspective,isDraftModelEnabled:eq,schemaType:td}).result},G[26]=ts,G[27]=tl,G[28]=eq,G[29]=eV.rev,G[30]=eB.selectedPerspective,G[31]=e0,G[32]=td,G[33]=eX,G[34]=g):g=G[34];let tc=g;G[35]!==ec||G[36]!==tr||G[37]!==er||G[38]!==eo?(x=e=>er?eo||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&ec&&tr?tr:e,G[35]=ec,G[36]=tr,G[37]=er,G[38]=eo,G[39]=x):x=G[39];let tp=x;G[40]!==eV.path?(y=eV.path?(0,tx.fromString)(eV.path):f.EMPTY_ARRAY,G[40]=eV.path,G[41]=y):y=G[41];let tm="true"===ej.stickyParams.displayInlineChanges;G[42]!==e4||G[43]!==eA||G[44]!==eL||G[45]!==ta||G[46]!==tp||G[47]!==tc||G[48]!==e2||G[49]!==X||G[50]!==eQ||G[51]!==y||G[52]!==tm?(v={changesOpen:e4,documentType:eL,documentId:eA,initialValue:e2,comparisonValue:ta,releaseId:eQ,selectedPerspectiveName:eQ,initialFocusPath:y,readOnly:tc,onFocusPath:X,getFormDocumentValue:tp,displayInlineChanges:tm},G[42]=e4,G[43]=eA,G[44]=eL,G[45]=ta,G[46]=tp,G[47]=tc,G[48]=e2,G[49]=X,G[50]=eQ,G[51]=y,G[52]=tm,G[53]=v):v=G[53];let{editState:th,upstreamEditState:tf,hasUpstreamVersion:tg,connectionState:tb,focusPath:tv,onChange:tj,validation:tw,ready:tI,value:tS,formState:tC,permissions:t_,onPathOpen:tT,isPermissionsLoading:tR,formStateRef:tP,onProgrammaticFocus:tE,collapsedFieldSets:tD,collapsedPaths:tk,onBlur:tF,onFocus:tA,onSetActiveFieldGroup:tL,onSetCollapsedPath:tM,onSetCollapsedFieldSet:tV,openPath:tO}=(0,f.useDocumentForm)(v);G[54]!==ey||G[55]!==eV||G[56]!==e0||G[57]!==eQ||G[58]!==eX||G[59]!==tS?(j=function(e,t,n,i,l,o){let r;switch(!0){case!!e?.rev:r="revision";break;case t&&(0,h.isVersionId)(n._id):{let e=o.find(e=>(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===t);r=e&&(0,f.isCardinalityOneRelease)(e)?"scheduled-draft":"version";break}case"published"===i:r="published";break;case l:r="draft";break;default:r="published"}return r}(eV,eX,tS,eQ,ey,e0),G[54]=ey,G[55]=eV,G[56]=e0,G[57]=eQ,G[58]=eX,G[59]=tS,G[60]=j):j=G[60];let tz=j;G[61]!==tz||G[62]!==eA||G[63]!==eL||G[64]!==eX?(w={schemaType:eL,documentId:eA,versionType:tz,releaseId:eX},G[61]=tz,G[62]=eA,G[63]=eL,G[64]=eX,G[65]=w):w=G[65];let tB=w;G[66]!==eh||G[67]!==tB?(I=eh(tB),G[66]=eh,G[67]=tB,G[68]=I):I=G[68];let tN=I;G[69]!==eY||G[70]!==tT||G[71]!==eV||G[72]!==eI?(S=e=>{if(tT(e),eY){let t=(0,f.pathToString)(e);eV.path!==t&&eI({...eV,path:t})}},G[69]=eY,G[70]=tT,G[71]=eV,G[72]=eI,G[73]=S):S=G[73];let tH=S;G[74]!==ef||G[75]!==eA||G[76]!==eL?(C=ef({schemaType:eL,documentId:eA}),G[74]=ef,G[75]=eA,G[76]=eL,G[77]=C):C=G[77];let t$=C;G[78]!==eA||G[79]!==eL||G[80]!==ex?(_=ex({schemaType:eL,documentId:eA}),G[78]=eA,G[79]=eL,G[80]=ex,G[81]=_):_=G[81];let tU=_,tG=(0,f.useUnique)(eD),tq=eV.view||tG[0]&&tG[0].id||null,tW=function(e){let t,n,i,l,o=(0,s.c)(6),{resolveProductionUrl:r}=(0,f.useSource)().document;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=new eW.BehaviorSubject(void 0),o[0]=t):t=o[0];let a=t;return o[1]!==e?(n=()=>{a.next(e)},i=[a,e],o[1]=e,o[2]=n,o[3]=i):(n=o[2],i=o[3]),(0,c.useEffect)(n,i),o[4]!==r?(l=a.asObservable().pipe((0,eO.distinctUntilChanged)(),(0,tu.debounceTime)(500),(0,eJ.switchMap)(e=>(0,f.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,eK.from)(r({document:e})):(0,eN.of)(void 0)),(0,eO.distinctUntilChanged)(),(0,eU.catchError)(sj)),o[4]=r,o[5]=l):l=o[5],(0,eM.useObservable)(l)}(tS),{t:tK}=(0,f.useTranslation)(D);G[82]!==eA||G[83]!==eL||G[84]!==eg||G[85]!==td?(T=td?eg({documentId:eA,documentType:eL,schemaType:td}):[],G[82]=eA,G[83]=eL,G[84]=eg,G[85]=td,G[86]=T):T=G[86];let tY=T,tX=tI&&(!eV.rev||el||!!ei);G[87]!==tp||G[88]!==tS?(R=tp(tS),G[87]=tp,G[88]=tS,G[89]=R):R=G[89];let tQ=R;G[90]!==tQ||G[91]!==eA||G[92]!==th?(P={strict:!0,displayed:tQ,documentId:eA,editState:th},G[90]=tQ,G[91]=eA,G[92]=th,G[93]=P):P=G[93];let{previousId:tJ}=(0,f.useDocumentIdStack)(P);G[94]!==eV||G[95]!==eI?(E=(e,t)=>{eI({...eV,since:e,rev:t||void 0})},G[94]=eV,G[95]=eI,G[96]=E):E=G[96];let tZ=E;G[97]!==ew?(k=()=>ew.closeCurrent(),G[97]=ew,G[98]=k):k=G[98];let t0=k;G[99]!==ew?(F=()=>ew.duplicateCurrent(),G[99]=ew,G[100]=F):F=G[100];let t1=F;G[101]!==ej||G[102]!==ev?(A=()=>{let e="true"!==ej.stickyParams.displayInlineChanges;ev.log(e?sb:sy),ej.navigate({stickyParams:{displayInlineChanges:String(e)}})},G[101]=ej,G[102]=ev,G[103]=A):A=G[103];let t2=A;G[104]!==ez||G[105]!==e1||G[106]!==eA||G[107]!==eL||G[108]!==te||G[109]!==tt||G[110]!==tW||G[111]!==tJ||G[112]!==eS||G[113]!==tK||G[114]!==ev||G[115]!==t2||G[116]!==tS._id?(L=async e=>{if("production-preview"===e.action&&tW)return window.open(tW),!0;if("copy-document-url"===e.action&&navigator){ev.log(sx);let e=ez({coreUi:e=>`${e}/intent/edit/id=${eA};type=${eL}`});return await navigator.clipboard.writeText(e),eS({id:"copy-document-url",status:"info",title:tK("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(te(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iJ))&&tt(e),"compareVersions"===e.action&&"u">typeof tJ?(e1.navigateDiffView({mode:"version",previousDocument:{type:eL,id:tJ},nextDocument:{type:eL,id:tS._id}}),!0):"toggleInlineChanges"===e.action&&(t2(),!0))},G[104]=ez,G[105]=e1,G[106]=eA,G[107]=eL,G[108]=te,G[109]=tt,G[110]=tW,G[111]=tJ,G[112]=eS,G[113]=tK,G[114]=ev,G[115]=t2,G[116]=tS._id,G[117]=L):L=G[117];let t3=L;G[118]!==eA||G[119]!==eL||G[120]!==tj||G[121]!==td||G[122]!==ep?(M=()=>{ep({documentId:eA,documentType:eL,schemaType:td,onChange:tj})},V=[eA,eL,td,tj,ep],G[118]=eA,G[119]=eL,G[120]=tj,G[121]=td,G[122]=ep,G[123]=M,G[124]=V):(M=G[123],V=G[124]),(0,c.useEffect)(M,V),G[125]!==ta||G[126]!==tf?(O=ta(tf),G[125]=ta,G[126]=tf,G[127]=O):O=G[127];let t4=O,t5=ts(th),t6=er&&!eo&&tX;t:{if(th.version&&(0,f.isGoingToUnpublish)(th.version)){z=th.published;break t}z=tQ}let t8=z,t7=e5||null;G[128]!==eP?(B=eP||[],G[128]=eP,G[129]=B):B=G[129],G[130]!==tN||G[131]!==tq||G[132]!==t$||G[133]!==e4||G[134]!==e8||G[135]!==tD||G[136]!==tk||G[137]!==t4||G[138]!==tb||G[139]!==t8||G[140]!==eA||G[141]!==eF||G[142]!==eL||G[143]!==th||G[144]!==tY||G[145]!==tv||G[146]!==tC||G[147]!==e9||G[148]!==te||G[149]!==ti||G[150]!==t3||G[151]!==t0||G[152]!==t1||G[153]!==tH||G[154]!==tg||G[155]!==W||G[156]!==tn||G[157]!==e6||G[158]!==t5||G[159]!==tl||G[160]!==e3||G[161]!==tR||G[162]!==tU||G[163]!==ec||G[164]!==tr||G[165]!==et||G[166]!==tF||G[167]!==tj||G[168]!==tA||G[169]!==tL||G[170]!==tV||G[171]!==tM||G[172]!==Q||G[173]!==e7||G[174]!==tO||G[175]!==Y||G[176]!==t_||G[177]!==tW||G[178]!==tX||G[179]!==ed||G[180]!==t6||G[181]!==td||G[182]!==eX||G[183]!==tZ||G[184]!==t7||G[185]!==B||G[186]!==ei||G[187]!==en||G[188]!==eE||G[189]!==tw||G[190]!==tS||G[191]!==tG?(N={actions:tN,activeViewId:tq,badges:t$,changesOpen:e4,closeInspector:e8,collapsedFieldSets:tD,collapsedPaths:tk,compareValue:t4,connectionState:tb,displayed:t8,documentId:eA,documentIdRaw:eF,documentType:eL,editState:th,fieldActions:tY,focusPath:tv,inspector:t7,inspectors:e6,onBlur:tF,onChange:tj,onFocus:tA,onPathOpen:tH,onHistoryClose:e9,onHistoryOpen:te,onInspectClose:ti,onMenuAction:t3,onPaneClose:t0,onPaneSplit:t1,onSetActiveFieldGroup:tL,onSetCollapsedPath:tM,onSetCollapsedFieldSet:tV,onSetMaximizedPane:Q,maximized:et,openInspector:e7,openPath:tO,index:W,inspectOpen:tn,validation:tw,menuItemGroups:B,paneKey:Y,previewUrl:tW,ready:tX,schemaType:td,hasUpstreamVersion:tg,isPermissionsLoading:tR,isInitialValueLoading:e3,permissions:t_,setTimelineRange:tZ,setIsDeleting:to,isDeleting:tl,isDeleted:t5,timelineError:ei,timelineStore:en,title:eE,value:tS,selectedReleaseId:eX,views:tG,formState:tC,unstable_languageFilter:tU,revisionId:ed,revisionNotFound:t6,lastNonDeletedRevId:ec,lastRevisionDocument:tr},G[130]=tN,G[131]=tq,G[132]=t$,G[133]=e4,G[134]=e8,G[135]=tD,G[136]=tk,G[137]=t4,G[138]=tb,G[139]=t8,G[140]=eA,G[141]=eF,G[142]=eL,G[143]=th,G[144]=tY,G[145]=tv,G[146]=tC,G[147]=e9,G[148]=te,G[149]=ti,G[150]=t3,G[151]=t0,G[152]=t1,G[153]=tH,G[154]=tg,G[155]=W,G[156]=tn,G[157]=e6,G[158]=t5,G[159]=tl,G[160]=e3,G[161]=tR,G[162]=tU,G[163]=ec,G[164]=tr,G[165]=et,G[166]=tF,G[167]=tj,G[168]=tA,G[169]=tL,G[170]=tV,G[171]=tM,G[172]=Q,G[173]=e7,G[174]=tO,G[175]=Y,G[176]=t_,G[177]=tW,G[178]=tX,G[179]=ed,G[180]=t6,G[181]=td,G[182]=eX,G[183]=tZ,G[184]=t7,G[185]=B,G[186]=ei,G[187]=en,G[188]=eE,G[189]=tw,G[190]=tS,G[191]=tG,G[192]=N):N=G[192];let t9=N,ne=(0,c.useRef)(void 0);return G[193]!==eY||G[194]!==tP||G[195]!==tE||G[196]!==ew||G[197]!==eV||G[198]!==tX?(H=()=>{if(tX&&eV.path){let{path:e,...t}=eV;e!==ne.current&&tE((0,tx.resolveKeyedPath)(tP.current?.value,(0,tx.fromString)(e))),eY||ew.setParams(t)}ne.current=eV.path},$=[tP,tE,ew,eV,tX,eY],G[193]=eY,G[194]=tP,G[195]=tE,G[196]=ew,G[197]=eV,G[198]=tX,G[199]=H,G[200]=$):(H=G[199],$=G[200]),(0,c.useEffect)(H,$),G[201]!==q||G[202]!==t9?(U=(0,r.jsx)(u.DocumentPaneContext.Provider,{value:t9,children:q}),G[201]=q,G[202]=t9,G[203]=U):U=G[203],U}let sI=e=>{let t,n,i,l,o,a,d,c=(0,s.c)(37),{params:u}=lA(),p=void 0===u?iQ:u,m=sO(e.pane.options,p),g=(0,f.useSchema)(),x=m.type,b=!!g.get(m.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,f.usePerspective)(),{data:w}=(0,f.useArchivedReleases)();c[0]!==m.id?(t=(0,h.getPublishedId)(m.id),c[0]=m.id,c[1]=t):t=c[1];let I=(0,f.useEditState)(t,x,"default",v),S=b&&"drafts"===j&&!I?.draft,{rev:C,since:_}=p,T=p.historyVersion;e:{if(S){let e;c[2]!==m.id?(e=(0,h.getPublishedId)(m.id),c[2]=m.id,c[3]=e):e=c[3],n=e;break e}if(T&&w.some(e=>(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===T)){let e;c[4]!==T||c[5]!==m.id?(e=(0,h.getVersionId)(m.id,T),c[4]=T,c[5]=m.id,c[6]=e):e=c[6],n=e;break e}if(typeof y>"u"){let e;c[7]!==m.id?(e=(0,h.getDraftId)(m.id),c[7]=m.id,c[8]=e):e=c[8],n=e;break e}if("published"===y){let e;c[9]!==m.id?(e=(0,h.getPublishedId)(m.id),c[9]=m.id,c[10]=e):e=c[10],n=e;break e}if(0!==y.length){let e;c[11]!==m.id||c[12]!==y?(e=(0,h.getVersionId)(m.id,y),c[11]=m.id,c[12]=y,c[13]=e):e=c[13],n=e;break e}n=m.id}let R=n;c[14]!==R||c[15]!==m.type||c[16]!==C||c[17]!==_?(i={documentId:R,documentType:m.type,rev:C,since:_},c[14]=R,c[15]=m.type,c[16]=C,c[17]=_,c[18]=i):i=c[18];let P=(0,f.useEventsStore)(i),E=P.error,D=P.revision?.revisionId||null,k=!!(C&&!P.revision?.loading),F=P.revision?.document||null,A=P.sinceRevision?.document||null,L=!P.loading,M=0===P.events.length;c[19]!==P.events?(l=P.events.find(sS)?.id||null,c[19]=P.events,c[20]=l):l=c[20],c[21]!==P.error||c[22]!==M||c[23]!==l||c[24]!==D||c[25]!==k||c[26]!==F||c[27]!==A||c[28]!==L?(o={error:E,revisionId:D,onOlderRevision:k,revisionDocument:F,sinceDocument:A,ready:L,isPristine:M,lastNonDeletedRevId:l},c[21]=P.error,c[22]=M,c[23]=l,c[24]=D,c[25]=k,c[26]=F,c[27]=A,c[28]=L,c[29]=o):o=c[29];let V=o;return c[30]!==V||c[31]!==T||c[32]!==e?(a=T?(0,r.jsx)(f.PerspectiveProvider,{selectedPerspectiveName:T,excludedPerspectives:f.EMPTY_ARRAY,children:(0,r.jsx)(sw,{...e,historyStore:V})}):(0,r.jsx)(sw,{...e,historyStore:V}),c[30]=V,c[31]=T,c[32]=e,c[33]=a):a=c[33],c[34]!==a||c[35]!==P?(d=(0,r.jsx)(f.EventsProvider,{value:P,children:a}),c[34]=a,c[35]=P,c[36]=d):d=c[36],d};function sS(e){return!(0,f.isDeleteDocumentGroupEvent)(e)&&!(0,f.isDeleteDocumentVersionEvent)(e)}let sC=e=>{let t,n,i,l,o=(0,s.c)(20),{pane:a}=e,d=lA(),u=sO(a.options,d.params),p=d.params||iQ,[m,g]=(0,c.useState)(null);o[0]!==u.id?(t=(0,h.getPublishedId)(u.id),o[0]=u.id,o[1]=t):t=o[1],o[2]!==u.type||o[3]!==p.rev||o[4]!==p.since||o[5]!==t?(n={documentId:t,documentType:u.type,onError:g,rev:p.rev,since:p.since},o[2]=u.type,o[3]=p.rev,o[4]=p.since,o[5]=t,o[6]=n):n=o[6];let x=(0,f.useTimelineStore)(n),b=(0,f.useTimelineSelector)(x,s_),y=(0,f.useTimelineSelector)(x,sT),v=(0,f.useTimelineSelector)(x,sR),j=(0,f.useTimelineSelector)(x,sP),w=(0,f.useTimelineSelector)(x,sE),I=(0,f.useTimelineSelector)(x,sD),S=(0,f.useTimelineSelector)(x,sk),C=y?.id||null,_=!!I;o[7]!==S||o[8]!==b||o[9]!==x||o[10]!==C||o[11]!==j||o[12]!==v||o[13]!==_||o[14]!==m||o[15]!==w?(i={store:x,error:m,revisionId:C,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:w,isPristine:_,lastNonDeletedRevId:S},o[7]=S,o[8]=b,o[9]=x,o[10]=C,o[11]=j,o[12]=v,o[13]=_,o[14]=m,o[15]=w,o[16]=i):i=o[16];let T=i;return o[17]!==T||o[18]!==e?(l=(0,r.jsx)(sw,{...e,historyStore:T}),o[17]=T,o[18]=e,o[19]=l):l=o[19],l};function s_(e){return e.onOlderRevision}function sT(e){return e.revTime}function sR(e){return e.sinceAttributes}function sP(e){return e.timelineDisplayed}function sE(e){return e.timelineReady}function sD(e){return e.isPristine}function sk(e){return e.lastNonDeletedRevId}function sF(e){let t=(0,s.c)(4),{children:n}=e,i=lA(),{excludedPerspectives:l}=(0,f.usePerspective)(),{scheduledDraft:o}=i.params;if(o){let e;return t[0]!==n||t[1]!==l||t[2]!==o?(e=(0,r.jsx)(f.PerspectiveProvider,{selectedPerspectiveName:o,excludedPerspectives:l,children:n}),t[0]=n,t[1]=l,t[2]=o,t[3]=e):e=t[3],e}return n}let sA=(0,c.memo)(e=>{let t,n,i,l=(0,s.c)(9),o=(0,f.useSource)(),{setParams:a,params:d}=lA();l[0]!==d||l[1]!==a?(t=e=>{a({...d,scheduledDraft:e},{perspective:""})},l[0]=d,l[1]=a,l[2]=t):t=l[2];let c=t;return l[3]!==e||l[4]!==o.beta?.eventsAPI?.documents?(n=o.beta?.eventsAPI?.documents?(0,r.jsx)(sI,{...e}):(0,r.jsx)(sC,{...e}),l[3]=e,l[4]=o.beta?.eventsAPI?.documents,l[5]=n):n=l[5],l[6]!==c||l[7]!==n?(i=(0,r.jsx)(sF,{children:(0,r.jsx)(f.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:c,children:n})}),l[6]=c,l[7]=n,l[8]=i):i=l[8],i});sA.displayName="Memo(DocumentPaneProviderWrapper)";let sL=(0,c.memo)(function(e){let t,n,i=(0,s.c)(5),{name:l}=(0,f.useSource)(),o=e.pane.source||l;return i[0]!==e?(t=(0,r.jsx)(f.CopyPasteProvider,{children:(0,r.jsx)(sM,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,r.jsx)(f.SourceProvider,{name:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n});function sM(e){var t,n,i;let l,o,d,u,p,m,h,g,x,b,y,v,j=(0,s.c)(57),{pane:w,paneKey:I}=e,{resolveNewDocumentOptions:S}=(0,f.useSource)().document,{selectedPerspectiveName:C}=(0,f.usePerspective)(),_=lA(),T=sO(w.options,_.params),{documentType:R,isLoaded:P}=(0,f.useDocumentType)(T.id,T.type);!function(){let e,t,n,i,l,o=(0,s.c)(10),{params:r,setParams:a}=lA(),d=void 0===r?iQ:r,{selectedPerspectiveName:u}=(0,f.usePerspective)(),p=(0,c.useRef)(!1);o[0]!==d||o[1]!==a?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>d[e])&&a({...d,rev:"true"===d.preserveRev?d.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},o[0]=d,o[1]=a,o[2]=e):e=o[2];let m=(0,c.useEffectEvent)(e);o[3]!==u||o[4]!==m?(t=()=>{p.current&&m(u)},o[3]=u,o[4]=m,o[5]=t):t=o[5],o[6]!==u?(n=[u],o[6]=u,o[7]=n):n=o[7],(0,c.useEffect)(t,n),o[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),l=[],o[8]=i,o[9]=l):(i=o[8],l=o[9]),(0,c.useEffect)(i,l)}();let E=((v=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(y={pick:nJ,defaultComponent:sh},v[0]=y):y=v[0],(0,f.useMiddlewareComponents)(y));j[0]!==T.id||j[1]!==T.type||j[2]!==S?(l=S({type:"document",documentId:T.id,schemaType:T.type}),j[0]=T.id,j[1]=T.type,j[2]=S,j[3]=l):l=j[3];let k=l;j[4]!==k?(o={templateItems:k},j[4]=k,j[5]=o):o=j[5];let[F,A]=(0,f.useTemplatePermissions)(o),L=P&&!A;j[6]!==R||j[7]!==L||j[8]!==T||j[9]!==e?(d=L&&R&&T.type!==R?(t=e,n=T,i=R,{...t,pane:{...t.pane,options:{...n,type:i}}}):e,j[6]=R,j[7]=L,j[8]=T,j[9]=e,j[10]=d):d=j[10];let M=d,{ReferenceChildLink:V,handleEditReference:O,groupIndex:z,routerPanesState:B}=_;j[11]!==z||j[12]!==B?(u=B[z+1]?.[0].params||{},j[11]=z,j[12]=B,j[13]=u):u=j[13];let N=u,H=B.length,{parentRefPath:$}=N;j[14]!==z||j[15]!==$||j[16]!==H?(p=$?{path:(0,tx.fromString)($),state:z>=H-1?"none":z>=H-2?"selected":"pressed"}:{path:[],state:"none"},j[14]=z,j[15]=$,j[16]=H,j[17]=p):p=j[17];let U=p,{t:G}=(0,f.useTranslation)(D);if("*"===T.type&&!L){let e,t;return j[18]!==G?(e=G("panes.document-pane.document-not-found.loading"),j[18]=G,j[19]=e):e=j[19],j[20]!==I||j[21]!==e?(t=(0,r.jsx)(iH,{flex:2.5,minWidth:320,paneKey:I,title:e}),j[20]=I,j[21]=e,j[22]=t):t=j[22],t}if(!R){let e,t,n,i,l;return j[23]!==G?(e=G("panes.document-pane.document-not-found.title"),j[23]=G,j[24]=e):e=j[24],j[25]!==T.id?(t={id:T.id},j[25]=T.id,j[26]=t):t=j[26],j[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sV},j[27]=n):n=j[27],j[28]!==G||j[29]!==t?(i=(0,r.jsx)(a.Stack,{space:4,children:(0,r.jsx)(a.Text,{as:"p",children:(0,r.jsx)(f.Translate,{t:G,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),j[28]=G,j[29]=t,j[30]=i):i=j[30],j[31]!==I||j[32]!==e||j[33]!==i?(l=(0,r.jsx)(iO,{flex:2.5,minWidth:320,paneKey:I,title:e,children:i}),j[31]=I,j[32]=e,j[33]=i,j[34]=l):l=j[34],l}let q=`${R}-${T.id}-${C||""}`;return j[35]!==E||j[36]!==T.id||j[37]!==T.type?(m=(0,r.jsx)(E,{documentId:T.id,documentType:T.type}),j[35]=E,j[36]=T.id,j[37]=T.type,j[38]=m):m=j[38],j[39]!==T.id||j[40]!==T.type||j[41]!==m?(h=(0,r.jsx)(iU,{documentId:T.id,documentType:T.type,children:m}),j[39]=T.id,j[40]=T.type,j[41]=m,j[42]=h):h=j[42],j[43]!==T.id||j[44]!==T.type||j[45]!==h?(g=(0,r.jsx)(ie,{documentId:T.id,documentType:T.type,children:h}),j[43]=T.id,j[44]=T.type,j[45]=h,j[46]=g):g=j[46],j[47]!==V||j[48]!==U||j[49]!==O||j[50]!==g||j[51]!==F?(x=(0,r.jsx)(f.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:V,onEditReference:O,initialValueTemplateItems:F,activePath:U,children:g}),j[47]=V,j[48]=U,j[49]=O,j[50]=g,j[51]=F,j[52]=x):x=j[52],j[53]!==M||j[54]!==q||j[55]!==x?(b=(0,r.jsx)(sA,{...M,children:x},q),j[53]=M,j[54]=q,j[55]=x,j[56]=b):b=j[56],b}function sV(e){let{children:t}=e;return(0,r.jsx)("code",{children:t})}function sO(e,t){let n,i,l=(0,s.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let o=n,r=(0,f.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let s=e.template||o.template;l[2]!==s||l[3]!==r?(t=s?r.find(e=>e.id===s):void 0,l[2]=s,l[3]=r,l[4]=t):t=l[4];let a=t?.schemaType;if(!a){i=e;break e}l[5]!==a||l[6]!==e?(n={...e,type:a},l[5]=a,l[6]=e,l[7]=n):n=l[7],i=n}return i}let sz=(0,c.forwardRef)(function(e,t){let n,i,l,o=(0,s.c)(9),{routerPanesState:a,groupIndex:d}=(0,c.useContext)(u.PaneRouterContext);o[0]!==d||o[1]!==a?(n=a.slice(0,d),o[0]=d,o[1]=a,o[2]=n):n=o[2];let p=n;o[3]!==p?(i={panes:p},o[3]=p,o[4]=i):i=o[4];let m=i;return o[5]!==e||o[6]!==t||o[7]!==m?(l=(0,r.jsx)(b.StateLink,{...e,ref:t,state:m}),o[5]=e,o[6]=t,o[7]=m,o[8]=l):l=o[8],l}),sB=(0,c.forwardRef)(function(e,t){let n,i,l,o,a,d,p=(0,s.c)(19);p[0]!==e?({childId:n,childPayload:l,childParameters:i,...o}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=l,p[4]=o):(n=p[1],i=p[2],l=p[3],o=p[4]);let{routerPanesState:m,groupIndex:h}=(0,c.useContext)(u.PaneRouterContext);if(p[5]!==n||p[6]!==i||p[7]!==l||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==l?(e=[{id:n,params:i,payload:l}],p[11]=n,p[12]=i,p[13]=l,p[14]=e):e=p[14],a={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=l,p[8]=h,p[9]=m,p[10]=a}else a=p[10];return p[15]!==t||p[16]!==o||p[17]!==a?(d=(0,r.jsx)(b.StateLink,{...o,ref:t,state:a}),p[15]=t,p[16]=o,p[17]=a,p[18]=d):d=p[18],d}),sN=(0,c.forwardRef)(function(e,t){let n,i,l,o,a,d,p,m=(0,s.c)(20),{routerPanesState:h,groupIndex:g,siblingIndex:x}=(0,c.useContext)(u.PaneRouterContext);m[0]!==e?({params:n,payload:i,...l}=e,m[0]=e,m[1]=n,m[2]=i,m[3]=l):(n=m[1],i=m[2],l=m[3]);let y=(0,f.useUnique)(n),v=(0,f.useUnique)(i),j=h[g],w=j[x],I=y??w.params,S=v??w.payload;m[4]!==w||m[5]!==I||m[6]!==S?(o={...w,params:I,payload:S},m[4]=w,m[5]=I,m[6]=S,m[7]=o):o=m[7];let C=o;m[8]!==j||m[9]!==C||m[10]!==x?(a=[...j.slice(0,x),C,...j.slice(x+1)],m[8]=j,m[9]=C,m[10]=x,m[11]=a):a=m[11];let _=a;m[12]!==h||m[13]!==g||m[14]!==_?(d={panes:[...h.slice(0,g),_,...h.slice(g+1)]},m[12]=h,m[13]=g,m[14]=_,m[15]=d):d=m[15];let T=d;return m[16]!==T||m[17]!==t||m[18]!==l?(p=(0,r.jsx)(b.StateLink,{ref:t,...l,state:T}),m[16]=T,m[17]=t,m[18]=l,m[19]=p):p=m[19],p}),sH=(0,c.forwardRef)(function(e,t){let n,i,l,o,a,d,c,u,p,m,f,g=(0,s.c)(24);g[0]!==e?({documentId:i,documentType:l,parentRefPath:o,children:n,template:d,...a}=e,g[0]=e,g[1]=n,g[2]=i,g[3]=l,g[4]=o,g[5]=a,g[6]=d):(n=g[1],i=g[2],l=g[3],o=g[4],a=g[5],d=g[6]),g[7]!==i?(c=(0,h.getPublishedId)(i),g[7]=i,g[8]=c):c=g[8];let x=d?.params;return g[9]!==o?(u=(0,tx.toString)(o),g[9]=o,g[10]=u):u=g[10],g[11]!==d?(p=d&&{template:d?.id},g[11]=d,g[12]=p):p=g[12],g[13]!==l||g[14]!==u||g[15]!==p?(m={type:l,parentRefPath:u,...p},g[13]=l,g[14]=u,g[15]=p,g[16]=m):m=g[16],g[17]!==n||g[18]!==t||g[19]!==a||g[20]!==c||g[21]!==x||g[22]!==m?(f=(0,r.jsx)(sB,{...a,ref:t,childId:c,childPayload:x,childParameters:m,children:n}),g[17]=n,g[18]=t,g[19]=a,g[20]=c,g[21]=x,g[22]=m,g[23]=f):f=g[23],f}),s$=[];function sU(e){let t,n,i,l,o,a,d,c,p,m,h,f,g,x=(0,s.c)(60),{children:y,flatIndex:v,index:j,params:w,payload:I,siblingIndex:S}=e,{navigate:C,navigateIntent:_,resolvePathFromState:T}=(0,b.useRouter)(),R=(0,b.useRouterState)(),{panes:P,expand:E}=it(),D=R?.panes||s$,k=P?.[P.length-2],F=j-1;x[0]!==F||x[1]!==D||x[2]!==R||x[3]!==S?(t=e=>{let t=D[F]||[],n=t[S],i=e(t,n),l=[...D.slice(0,F),i,...D.slice(F+1)];return{...R,panes:l}},x[0]=F,x[1]=D,x[2]=R,x[3]=S,x[4]=t):t=x[4];let A=t;x[5]!==A||x[6]!==C?(n=(e,t)=>{let n=A(e);return setTimeout(()=>C(n,t?{stickyParams:t}:void 0),0),n},x[5]=A,x[6]=C,x[7]=n):n=x[7];let L=n;x[8]!==A||x[9]!==T||x[10]!==S?(i=e=>T(A((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)])),x[8]=A,x[9]=T,x[10]=S,x[11]=i):i=x[11];let M=i;x[12]!==L||x[13]!==S?(l=e=>{L((t,n)=>[...t.slice(0,S),{...n,payload:e},...t.slice(S+1)])},x[12]=L,x[13]=S,x[14]=l):l=x[14];let V=l;x[15]!==L||x[16]!==S?(o=(e,t)=>{L((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)],t)},x[15]=L,x[16]=S,x[17]=o):o=x[17];let O=o;x[18]!==F||x[19]!==C||x[20]!==D?(a=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:o}=e;C({panes:[...D.slice(0,F+1),[{id:t,params:{template:l.id,parentRefPath:(0,tx.toString)(n),type:i,version:o},payload:l.params}]]})},x[18]=F,x[19]=C,x[20]=D,x[21]=a):a=x[21];let z=a,B=!!D[F]&&D[F].length>1,N=D[F]?D[F].length:0,H=v?sz:void 0;x[22]!==L?(c=e=>{let t=void 0===e?{}:e;L(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},d=()=>{L(sG)},x[22]=L,x[23]=d,x[24]=c):(d=x[23],c=x[24]),x[25]!==E||x[26]!==F||x[27]!==k||x[28]!==C||x[29]!==D?(p=e=>{(void 0===e||e)&&k&&E(k.element),C({panes:D.slice(0,F)})},x[25]=E,x[26]=F,x[27]=k,x[28]=C,x[29]=D,x[30]=p):p=x[30],x[31]!==L||x[32]!==S?(m=e=>{L((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,S),i,...t.slice(S)]})},x[31]=L,x[32]=S,x[33]=m):m=x[33],x[34]!==w||x[35]!==O?(h=e=>{let t=(0,tl.omit)(w,"view");return O(e?{...t,view:e}:t)},x[34]=w,x[35]=O,x[36]=h):h=x[36],x[37]!==M||x[38]!==v||x[39]!==F||x[40]!==z||x[41]!==_||x[42]!==w||x[43]!==I||x[44]!==D||x[45]!==O||x[46]!==V||x[47]!==S||x[48]!==d||x[49]!==p||x[50]!==m||x[51]!==h||x[52]!==B||x[53]!==N||x[54]!==H||x[55]!==c?(f={index:v,groupIndex:F,siblingIndex:S,payload:I,params:w,hasGroupSiblings:B,groupLength:N,routerPanesState:D,ChildLink:sB,BackLink:H,ReferenceChildLink:sH,handleEditReference:z,ParameterizedLink:sN,replaceCurrent:c,closeCurrent:d,closeCurrentAndAfter:p,duplicateCurrent:m,setView:h,setParams:O,setPayload:V,createPathWithParams:M,navigateIntent:_},x[37]=M,x[38]=v,x[39]=F,x[40]=z,x[41]=_,x[42]=w,x[43]=I,x[44]=D,x[45]=O,x[46]=V,x[47]=S,x[48]=d,x[49]=p,x[50]=m,x[51]=h,x[52]=B,x[53]=N,x[54]=H,x[55]=c,x[56]=f):f=x[56];let $=f;return x[57]!==y||x[58]!==$?(g=(0,r.jsx)(u.PaneRouterContext.Provider,{value:$,children:y}),x[57]=y,x[58]=$,x[59]=g):g=x[59],g}function sG(e,t){return e.length>1?e.filter(e=>e!==t):e}function sq(e){let t,n,i,l,o,d=(0,s.c)(14),{isSelected:c,pane:u,paneKey:p}=e;d[0]!==u?(t=(0,f.isRecord)(u)&&u.type||null,d[0]=u,d[1]=t):t=d[1];let m=t,{t:h}=(0,f.useTranslation)(D);return d[2]!==h?(n=h("panes.unknown-pane-type.title"),d[2]=h,d[3]=n):n=d[3],d[4]!==n?(i=(0,r.jsx)(iR,{title:n}),d[4]=n,d[5]=i):i=d[5],d[6]!==h||d[7]!==m?(l=(0,r.jsx)(id,{children:(0,r.jsx)(a.Box,{padding:4,children:"string"==typeof m?(0,r.jsx)(a.Text,{as:"p",muted:!0,children:(0,r.jsx)(f.Translate,{t:h,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:m}})}):(0,r.jsx)(a.Text,{as:"p",muted:!0,children:(0,r.jsx)(f.Translate,{t:h,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),d[6]=h,d[7]=m,d[8]=l):l=d[8],d[9]!==c||d[10]!==p||d[11]!==i||d[12]!==l?(o=(0,r.jsxs)(ir,{id:p,selected:c,children:[i,l]}),d[9]=c,d[10]=p,d[11]=i,d[12]=l,d[13]=o):o=d[13],o}let sW={component:(0,c.lazy)(()=>e.A(328515)),document:(0,c.lazy)(()=>Promise.resolve().then(function(){return cG})),documentList:(0,c.lazy)(()=>Promise.resolve().then(function(){return cq})),list:(0,c.lazy)(()=>e.A(962237))},sK=(0,c.memo)(function(e){let t,n,i,l,o=(0,s.c)(25),{active:a,childItemId:d,groupIndex:u,index:p,itemId:m,pane:h,paneKey:f,params:g,payload:x,path:b,selected:y,siblingIndex:v,maximized:j,onSetMaximizedPane:w}=e,I=sW[h.type]||sq;o[0]!==f||o[1]!==b||o[2]!==y?(t=(0,r.jsx)(iH,{paneKey:f,path:b,selected:y}),o[0]=f,o[1]=b,o[2]=y,o[3]=t):t=o[3];let S=d||"";return o[4]!==I||o[5]!==a||o[6]!==p||o[7]!==m||o[8]!==j||o[9]!==w||o[10]!==h||o[11]!==f||o[12]!==y||o[13]!==S?(n=(0,r.jsx)(I,{childItemId:S,index:p,itemId:m,isActive:a,isSelected:y,paneKey:f,pane:h,maximized:j,onSetMaximizedPane:w}),o[4]=I,o[5]=a,o[6]=p,o[7]=m,o[8]=j,o[9]=w,o[10]=h,o[11]=f,o[12]=y,o[13]=S,o[14]=n):n=o[14],o[15]!==t||o[16]!==n?(i=(0,r.jsx)(c.Suspense,{fallback:t,children:n}),o[15]=t,o[16]=n,o[17]=i):i=o[17],o[18]!==u||o[19]!==p||o[20]!==g||o[21]!==x||o[22]!==v||o[23]!==i?(l=(0,r.jsx)(sU,{flatIndex:p,index:u,params:g,payload:x,siblingIndex:v,children:i}),o[18]=u,o[19]=p,o[20]=g,o[21]=x,o[22]=v,o[23]=i,o[24]=l):l=o[24],l},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...o})=>{if(!(0,to.isEqual)(e,i)||!(0,to.isEqual)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(o)]))if(n[e]!==o[e])return!1;return!0});function sY(e){let t,n,i=(0,s.c)(10),{document:l}=e,o=(0,f.useSchema)().get(l._type),{t:a}=(0,f.useTranslation)(D),{title:d}=i4();if(!o){let e,t;return i[0]!==l._type||i[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:l._type}),i[0]=l._type,i[1]=a,i[2]=e):e=i[2],i[3]!==e?(t=(0,r.jsx)("code",{children:e}),i[3]=e,i[4]=t):t=i[4],t}return i[5]!==a||i[6]!==d?(t=d||(0,r.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),i[5]=a,i[6]=d,i[7]=t):t=i[7],i[8]!==t?(n=(0,r.jsx)(r.Fragment,{children:t}),i[8]=t,i[9]=n):n=i[9],n}let sX=(0,eA.styled)(a.Box).withConfig({displayName:"ChevronWrapper",componentId:"sc-1ldyu0k-0"})`margin-left:auto;`,sQ=eA.styled.details.withConfig({displayName:"CrossDatasetReferencesDetails",componentId:"sc-1ldyu0k-1"})`flex:none;&[open] ${sX}{transform:rotate(180deg);}`,sJ=eA.styled.summary.withConfig({displayName:"CrossDatasetReferencesSummary",componentId:"sc-1ldyu0k-2"})`list-style:none;&::-webkit-details-marker{display:none;}`,sZ=eA.styled.table.withConfig({displayName:"Table",componentId:"sc-1ldyu0k-3"})`width:100%;text-align:left;padding:0 ${({theme:e})=>(0,a.rem)(e.sanity.space[2])};border-collapse:collapse;th{padding:${({theme:e})=>(0,a.rem)(e.sanity.space[1])};}td{padding:0 ${({theme:e})=>(0,a.rem)(e.sanity.space[1])};}tr > *:last-child{text-align:right;}`,s0=(0,eA.styled)(a.Flex).withConfig({displayName:"DocumentIdFlex",componentId:"sc-1ldyu0k-4"})`min-height:33px;`,s1=e=>{let t,n,i,l,o,d,c=(0,s.c)(13),{t:u}=(0,f.useTranslation)(D),p=e.totalCount-e.references.length;return p?(c[0]!==p||c[1]!==u?(t=u("confirm-delete-dialog.other-reference-count.title",{count:p}),c[0]=p,c[1]=u,c[2]=t):t=c[2],c[3]!==t?(n=(0,r.jsx)(a.Text,{size:1,muted:!0,children:t}),c[3]=t,c[4]=n):n=c[4],c[5]!==u?(i=u("confirm-delete-dialog.other-reference-count.tooltip"),c[5]=u,c[6]=i):i=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(a.Text,{size:1,muted:!0,children:(0,r.jsx)(v.InfoOutlineIcon,{})}),c[7]=l):l=c[7],c[8]!==i?(o=(0,r.jsx)(x.Tooltip,{portal:!0,placement:"top",content:i,children:l}),c[8]=i,c[9]=o):o=c[9],c[10]!==n||c[11]!==o?(d=(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsxs)(a.Inline,{space:2,children:[n,o]})}),c[10]=n,c[11]=o,c[12]=d):d=c[12],d):null};function s2(e){let t,n,i,l,o,d,c,u=(0,s.c)(30),{icon:p,layout:m,presence:h,schemaType:g,sortOrder:b,value:y}=e,v=(0,f.useDocumentVersionInfo)(y._id),{perspectiveStack:j}=(0,f.usePerspective)();e:{let e;if(!b){t=void 0;break e}u[0]!==b.by?(e={ordering:{title:"",name:"",by:b.by}},u[0]=b.by,u[1]=e):e=u[1],t=e}let w=t;u[2]!==j||u[3]!==e.documentPreviewStore||u[4]!==g||u[5]!==y._id||u[6]!==w?(n=(0,f.getPreviewStateObservable)(e.documentPreviewStore,g,y._id,j,w),u[2]=j,u[3]=e.documentPreviewStore,u[4]=g,u[5]=y._id,u[6]=w,u[7]=n):n=u[7];let I=n;u[8]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},u[8]=i):i=u[8];let{snapshot:S,original:C,isLoading:_}=(0,eM.useObservable)(I,i);u[9]!==_||u[10]!==h||u[11]!==v.draft||u[12]!==v.published||u[13]!==v.versions?(l=_?null:(0,r.jsx)(x.TooltipDelayGroupProvider,{children:(0,r.jsxs)(a.Flex,{align:"center",gap:3,children:[h&&h.length>0&&(0,r.jsx)(f.DocumentPreviewPresence,{presence:h}),(0,r.jsx)(f.DocumentStatusIndicator,{draft:v.draft,published:v.published,versions:v.versions})]})}),u[9]=_,u[10]=h,u[11]=v.draft,u[12]=v.published,u[13]=v.versions,u[14]=l):l=u[14];let T=l;u[15]!==v.draft||u[16]!==v.published||u[17]!==v.versions?(o=(0,r.jsx)(f.DocumentStatus,{draft:v.draft,published:v.published,versions:v.versions}),u[15]=v.draft,u[16]=v.published,u[17]=v.versions,u[18]=o):o=u[18];let R=o;return u[19]!==C||u[20]!==S||u[21]!==y?(d=(0,f.getPreviewValueWithFallback)({snapshot:S,original:C,fallback:y}),u[19]=C,u[20]=S,u[21]=y,u[22]=d):d=u[22],u[23]!==p||u[24]!==_||u[25]!==m||u[26]!==T||u[27]!==d||u[28]!==R?(c=(0,r.jsx)(f.SanityDefaultPreview,{...d,isPlaceholder:_,icon:p,layout:m,status:T,tooltip:R}),u[23]=p,u[24]=_,u[25]=m,u[26]=T,u[27]=d,u[28]=R,u[29]=c):c=u[29],c}let s3=[];function s4(e){let t,n,i,l,o=(0,s.c)(16),{onClick:a,type:d,value:c}=e,u=c?._id;o[0]!==u?(t=(0,h.getPublishedId)(u),o[0]=u,o[1]=t):t=o[1];let p=(0,f.useDocumentPresence)(t),m=(0,f.useDocumentPreviewStore)(),{ReferenceChildLink:g}=lA();o[2]!==g||o[3]!==d?.name||o[4]!==c?._id?(n=function(e){return(0,r.jsx)(g,{documentId:c?._id,documentType:d?.name,parentRefPath:s3,...e})},o[2]=g,o[3]=d?.name,o[4]=c?._id,o[5]=n):n=o[5];let x=n,b=d?.icon,y=p?.length>0?p:s3;return o[6]!==m||o[7]!==b||o[8]!==y||o[9]!==d||o[10]!==c?(i=(0,r.jsx)(s2,{documentPreviewStore:m,icon:b,layout:"compact",presence:y,schemaType:d,value:c}),o[6]=m,o[7]=b,o[8]=y,o[9]=d,o[10]=c,o[11]=i):i=o[11],o[12]!==a||o[13]!==x||o[14]!==i?(l=(0,r.jsx)(f.PreviewCard,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:i}),o[12]=a,o[13]=x,o[14]=i,o[15]=l):l=o[15],l}let s5=(0,eA.styled)(a.Text).withConfig({displayName:"EllipsisText",componentId:"sc-1meclkc-0"})`max-width:120px;`,s6=e=>{let t,n,i,l,o,d,c,u,p,m,g,x,b,y=(0,s.c)(43),{versionId:v,schemaType:j}=e,{t:w}=(0,f.useTranslation)(),I=(0,f.useDocumentPreviewStore)();y[0]!==v?(t=(0,f.getDocumentVariantType)(v),y[0]=v,y[1]=t):t=y[1];let S=t,{data:C}=(0,f.useActiveReleases)();if(y[2]!==I||y[3]!==S||y[4]!==j||y[5]!==v){let e=["version"===S?(0,h.getVersionFromId)(v):"published"===S?"published":"drafts"];n=(0,f.getPreviewStateObservable)(I,j,(0,h.getPublishedId)(v),e),y[2]=I,y[3]=S,y[4]=j,y[5]=v,y[6]=n}else n=y[6];let _=n;y[7]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},y[7]=i):i=y[7];let{snapshot:T,original:R,isLoading:P}=(0,eM.useObservable)(_,i);e:{let e;if("version"!==S){l=void 0;break e}if(y[8]!==C||y[9]!==v){let t;y[11]!==v?(t=e=>(0,f.getReleaseIdFromReleaseDocumentId)(e._id)===(0,h.getVersionFromId)(v),y[11]=v,y[12]=t):t=y[12],e=C.find(t),y[8]=C,y[9]=v,y[10]=e}else e=y[10];l=e}let E=l;t:{let e;if("version"===S){o=void 0;break t}y[13]!==S||y[14]!==w?(e=w("published"===S?"release.chip.published":"release.chip.draft"),y[13]=S,y[14]=w,y[15]=e):e=y[15],o=e}let D=o;y[16]!==S||y[17]!==E?(d=E?(0,f.getReleaseTone)(E):"published"===S?"positive":"caution",y[16]=S,y[17]=E,y[18]=d):d=y[18];let k=d;return y[19]!==R||y[20]!==j.name||y[21]!==T||y[22]!==v?(c=(0,f.getPreviewValueWithFallback)({snapshot:T,original:R,fallback:{_id:v,_type:j.name}}),y[19]=R,y[20]=j.name,y[21]=T,y[22]=v,y[23]=c):c=y[23],y[24]===Symbol.for("react.memo_cache_sentinel")?(u={backgroundColor:"transparent"},y[24]=u):u=y[24],y[25]!==k?(p=(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.ReleaseAvatarIcon,{tone:k})}),y[25]=k,y[26]=p):p=y[26],y[27]!==S||y[28]!==E?.metadata?.title||y[29]!==D||y[30]!==v?(m="version"===S?(0,r.jsx)(f.ReleaseTitle,{title:E?.metadata?.title,fallback:(0,h.getVersionFromId)(v),children:s7}):(0,r.jsx)(s5,{size:1,weight:"medium",textOverflow:"ellipsis",children:D}),y[27]=S,y[28]=E?.metadata?.title,y[29]=D,y[30]=v,y[31]=m):m=y[31],y[32]!==m||y[33]!==p?(g=(0,r.jsxs)(a.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[p,m]}),y[32]=m,y[33]=p,y[34]=g):g=y[34],y[35]!==g||y[36]!==k?(x=(0,r.jsx)(a.Card,{border:!0,radius:"full",children:(0,r.jsx)(a.Card,{radius:"full",tone:k,style:u,children:g})}),y[35]=g,y[36]=k,y[37]=x):x=y[37],y[38]!==P||y[39]!==j.icon||y[40]!==x||y[41]!==c?(b=(0,r.jsx)(f.SanityDefaultPreview,{...c,isPlaceholder:P,icon:j.icon,layout:"default",status:x}),y[38]=P,y[39]=j.icon,y[40]=x,y[41]=c,y[42]=b):b=y[42],b},s8=e=>{let t,n,i,l=(0,s.c)(8),{documentType:o,documentVersions:d}=e,c=(0,f.useSchema)();l[0]!==o||l[1]!==c?(t=c.get(o),l[0]=o,l[1]=c,l[2]=t):t=l[2];let u=t;if(!u)throw Error(`Schema type ${o} not found`);return l[3]!==d||l[4]!==u?(n=d?.map(e=>(0,r.jsx)(s6,{versionId:e,schemaType:u},e)),l[3]=d,l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,r.jsx)(a.Card,{border:!0,padding:1,radius:2,children:(0,r.jsx)(a.Stack,{children:n})}),l[6]=n,l[7]=i):i=l[7],i};function s7(e){let{displayTitle:t}=e;return(0,r.jsx)(s5,{size:1,weight:"medium",textOverflow:"ellipsis",children:t})}function s9(e){let t,n,i,l,o,c,u,p,m,h,g,b,y,j,w,I,S,C,_,T=(0,s.c)(66),{crossDatasetReferences:R,internalReferences:P,documentTitle:E,totalCount:k,action:F,datasetNames:A,hasUnknownDatasetNames:L,documentId:M,documentType:V,onReferenceLinkClick:O,documentVersions:z}=e,B=(0,f.useSchema)(),N=(0,d.useToast)(),{t:H}=(0,f.useTranslation)(D);T[0]!==O||T[1]!==B||T[2]!==H?(t=e=>{let t=B.get(e._type);return t?(0,r.jsx)(s4,{type:t,value:e,onClick:O}):(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsx)(f.SanityDefaultPreview,{icon:v.UnknownIcon,title:H("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:H("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},T[0]=O,T[1]=B,T[2]=H,T[3]=t):t=T[3];let $=t;T[4]!==F||T[5]!==E||T[6]!==V||T[7]!==z||T[8]!==H?(n=()=>(0,r.jsxs)(a.Stack,{space:4,children:[(0,r.jsx)(a.Text,{as:"p",size:1,children:(0,r.jsx)(f.Translate,{t:H,i18nKey:"confirm-delete-dialog.confirmation.text",context:F,components:{DocumentTitle:()=>(0,r.jsx)("strong",{children:E})}})}),"delete"===F&&(0,r.jsx)(s8,{documentType:V,documentVersions:z})]}),T[4]=F,T[5]=E,T[6]=V,T[7]=z,T[8]=H,T[9]=n):n=T[9];let U=n;if(P?.totalCount===0&&R?.totalCount===0){let e;return T[10]!==U?(e=U(),T[10]=U,T[11]=e):e=T[11],e}T[12]!==L?(i=L?["unavailable"]:[],T[12]=L,T[13]=i):i=T[13],T[14]!==A||T[15]!==i?(l=[...A,...i],T[14]=A,T[15]=i,T[16]=l):l=T[16];let G=l,q=G.length,W=G.join(", "),K=L&&G.length?"unavailable":"";T[17]!==G.length||T[18]!==H||T[19]!==W||T[20]!==K?(o=H("confirm-delete-dialog.cdr-summary.subtitle",{count:q,datasets:W,context:K}),T[17]=G.length,T[18]=H,T[19]=W,T[20]=K,T[21]=o):o=T[21];let Y=o;return T[22]!==U?(c=U(),T[22]=U,T[23]=c):c=T[23],T[24]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(a.Card,{borderTop:!0,padding:1}),T[24]=u):u=T[24],T[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(a.Text,{"aria-hidden":"true",size:1,children:(0,r.jsx)(v.WarningOutlineIcon,{})}),T[25]=p):p=T[25],T[26]!==E?(m={DocumentTitle:()=>E},T[26]=E,T[27]=m):m=T[27],T[28]!==k?(h={count:k},T[28]=k,T[29]=h):h=T[29],T[30]!==H||T[31]!==m||T[32]!==h?(g=(0,r.jsxs)("div",{children:[u,(0,r.jsx)(a.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,r.jsxs)(a.Flex,{children:[p,(0,r.jsx)(a.Box,{flex:1,marginLeft:3,children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:m,t:H,values:h})})})]})})]}),T[30]=H,T[31]=m,T[32]=h,T[33]=g):g=T[33],T[34]!==E?(b={DocumentTitle:()=>E},T[34]=E,T[35]=b):b=T[35],T[36]!==F||T[37]!==H||T[38]!==b?(y=(0,r.jsx)(a.Box,{flex:"none",children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:H,context:F,components:b})})}),T[36]=F,T[37]=H,T[38]=b,T[39]=y):y=T[39],T[40]!==P||T[41]!==$?(j=P.totalCount>0&&(0,r.jsxs)(a.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[P?.references.map(e=>(0,r.jsx)(a.Box,{as:"li",children:$(e)},e._id)),P.totalCount>P.references.length&&(0,r.jsx)(a.Box,{as:"li",padding:3,children:(0,r.jsx)(s1,{...P})})]}),T[40]=P,T[41]=$,T[42]=j):j=T[42],T[43]!==R||T[44]!==Y||T[45]!==M||T[46]!==P.totalCount||T[47]!==G.length||T[48]!==H||T[49]!==N?(w=R.totalCount>0&&(0,r.jsxs)(sQ,{"data-testid":"cross-dataset-references",style:{borderTop:P.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,r.jsx)(sJ,{children:(0,r.jsx)(a.Card,{as:"a",marginTop:2*(P.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,r.jsxs)(a.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(v.DocumentsIcon,{})}),(0,r.jsxs)(a.Stack,{space:2,children:[(0,r.jsx)(a.Text,{textOverflow:"ellipsis",size:1,children:H("confirm-delete-dialog.cdr-summary.title",{count:G.length,documentCount:H("confirm-delete-dialog.cdr-summary.document-count",{count:R.totalCount})})}),(0,r.jsx)(a.Text,{title:Y,textOverflow:"ellipsis",size:1,muted:!0,children:Y})]}),(0,r.jsx)(sX,{children:(0,r.jsx)(a.Text,{muted:!0,size:1,children:(0,r.jsx)(v.ChevronDownIcon,{})})})]})})}),(0,r.jsxs)(a.Box,{overflow:"auto",paddingTop:2,children:[(0,r.jsxs)(sZ,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:(0,r.jsx)(a.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:H("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,r.jsx)("th",{children:(0,r.jsx)(a.Text,{muted:!0,size:1,weight:"medium",children:H("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,r.jsx)("th",{children:(0,r.jsx)(a.Text,{muted:!0,size:1,weight:"medium",children:H("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,r.jsx)("tbody",{children:R.references.filter(ae).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(a.Text,{size:1,children:n})}),(0,r.jsx)("td",{children:(0,r.jsx)(a.Text,{size:1,children:i||"unavailable"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(s0,{align:"center",gap:2,justify:"flex-end",children:[(0,r.jsx)(a.Text,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,r.jsx)(x.Button,{mode:"bleed",icon:v.CopyIcon,tooltipProps:{content:H("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{N.push({status:"error",title:H("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${M}-${t}`)})})]}),(0,r.jsx)(s1,{...R})]})]}),T[43]=R,T[44]=Y,T[45]=M,T[46]=P.totalCount,T[47]=G.length,T[48]=H,T[49]=N,T[50]=w):w=T[50],T[51]!==j||T[52]!==w?(I=(0,r.jsx)(a.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,r.jsxs)(a.Flex,{direction:"column",children:[j,w]})}),T[51]=j,T[52]=w,T[53]=I):I=T[53],T[54]!==E?(S={DocumentTitle:()=>E},T[54]=E,T[55]=S):S=T[55],T[56]!==F||T[57]!==H||T[58]!==S?(C=(0,r.jsx)(a.Box,{flex:"none",children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:H,context:F,components:S})})}),T[56]=F,T[57]=H,T[58]=S,T[59]=C):C=T[59],T[60]!==g||T[61]!==y||T[62]!==I||T[63]!==C||T[64]!==c?(_=(0,r.jsxs)(a.Flex,{direction:"column",gap:4,children:[c,g,y,I,C]}),T[60]=g,T[61]=y,T[62]=I,T[63]=C,T[64]=c,T[65]=_):_=T[65],_}function ae(e){return"projectId"in e}let at=()=>(t||(t=(0,eY.fromEvent)(document,"visibilitychange").pipe((0,e$.startWith)(null),(0,eB.map)(()=>"visible"===document.visibilityState),(0,eO.distinctUntilChanged)(),(0,eJ.switchMap)(e=>e?(0,eQ.timer)(0,5e3):eX.EMPTY),(0,tp.shareReplay)({refCount:!0,bufferSize:1}))),t);function an(e,t){let{versionedClient:n}=t;return at().pipe((0,eJ.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,h.getDraftId)(e),i=(0,h.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,eB.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,eJ.switchMap)(e=>{if(!e)return(0,eN.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,eU.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,eN.of)({totalCount:0,references:[]});throw e}))}))}let ai=(0,f.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),al=(0,f.createHookFromObservableFactory)(([e,t])=>at().pipe((0,eJ.switchMap)(()=>an(e,{versionedClient:t}))));function ao(e){return"string"!=typeof e.datasetName}function ar(e){return!!e&&""!==e}function as(e){return e?.datasetName||""}function aa(e){return e.projectId}let ad=(0,eA.styled)(a.Box).withConfig({displayName:"DialogBody",componentId:"sc-jawiy-0"})`box-sizing:border-box;`,ac=(0,eA.styled)(a.Flex).attrs({align:"center",direction:"column",justify:"center"}).withConfig({displayName:"LoadingContainer",componentId:"sc-jawiy-1"})`height:110px;`;function au(e){let t,n,i,l,o,a,d,u,p,m,g,b,y=(0,s.c)(51),{id:v,type:j,action:w,onCancel:I,onConfirm:S}=e,C=void 0===w?"delete":w,{t:_}=(0,f.useTranslation)(D),T=`deletion-confirmation-${(0,c.useId)()}`,{internalReferences:R,crossDatasetReferences:P,isLoading:E,totalCount:k,projectIds:F,datasetNames:A,hasUnknownDatasetNames:L}=function(e){let t,n,i,l,o,r,a,d,c=(0,s.c)(24),u=(0,f.useClient)(f.DEFAULT_STUDIO_CLIENT_OPTIONS),p=(0,f.useDocumentStore)();c[0]!==e?(t=(0,h.getPublishedId)(e),c[0]=e,c[1]=t):t=c[1];let m=t;c[2]!==p||c[3]!==m?(n=[m,p],c[2]=p,c[3]=m,c[4]=n):n=c[4];let[g,x]=ai(n);c[5]!==m||c[6]!==u?(i=[m,u],c[5]=m,c[6]=u,c[7]=i):i=c[7];let[b,y]=al(i);c[8]!==b?.references?(l=()=>Array.from(new Set(b?.references.map(aa).filter(Boolean))).sort(),c[8]=b?.references,c[9]=l):l=c[9],c[10]!==l?(o=l(),c[10]=l,c[11]=o):o=c[11];let v=o;c[12]!==b?.references?(r=Array.from(new Set(b?.references.map(as).filter(ar))).sort(),c[12]=b?.references,c[13]=r):r=c[13];let j=r;c[14]!==b?.references?(a=()=>!!b?.references.some(ao),c[14]=b?.references,c[15]=a):a=c[15];let w=a(),I=(g?.totalCount||0)+(b?.totalCount||0),S=x||y;return c[16]!==b||c[17]!==j||c[18]!==w||c[19]!==g||c[20]!==v||c[21]!==I||c[22]!==S?(d={totalCount:I,projectIds:v,datasetNames:j,hasUnknownDatasetNames:w,internalReferences:g,crossDatasetReferences:b,isLoading:S},c[16]=b,c[17]=j,c[18]=w,c[19]=g,c[20]=v,c[21]=I,c[22]=S,c[23]=d):d=c[23],d}(v);y[0]!==v||y[1]!==j?(t={_id:v,_type:j},y[0]=v,y[1]=j,y[2]=t):t=y[2];let M=t;y[3]!==M?(n=(0,r.jsx)(sY,{document:M}),y[3]=M,y[4]=n):n=y[4];let V=n,O=!E;y[5]!==v?(i=(0,h.getPublishedId)(v),y[5]=v,y[6]=i):i=y[6],y[7]!==i?(l={documentId:i},y[7]=i,y[8]=l):l=y[8];let{data:z,loading:B}=(0,f.useDocumentVersions)(l);y[9]!==z||y[10]!==S?(o=()=>{S(z)},y[9]=z,y[10]=S,y[11]=o):o=y[11];let N=o;return y[12]!==C||y[13]!==_?(a=_("confirm-delete-dialog.header.text",{context:C}),y[12]=C,y[13]=_,y[14]=a):a=y[14],y[15]!==_?(d=_("confirm-delete-dialog.cancel-button.text"),y[15]=_,y[16]=d):d=y[16],y[17]!==I||y[18]!==d?(u={onClick:I,text:d},y[17]=I,y[18]=d,y[19]=u):u=y[19],y[20]!==C||y[21]!==N||y[22]!==O||y[23]!==_||y[24]!==k?(p=O?{text:_(k>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:C}),onClick:N}:void 0,y[20]=C,y[21]=N,y[22]=O,y[23]=_,y[24]=k,y[25]=p):p=y[25],y[26]!==u||y[27]!==p?(m={cancelButton:u,confirmButton:p},y[26]=u,y[27]=p,y[28]=m):m=y[28],y[29]!==C||y[30]!==P||y[31]!==A||y[32]!==V||y[33]!==z||y[34]!==L||y[35]!==v||y[36]!==R||y[37]!==E||y[38]!==I||y[39]!==F||y[40]!==_||y[41]!==k||y[42]!==j||y[43]!==B?(g=(0,r.jsx)(ad,{children:P&&R&&!E&&!B?(0,r.jsx)(s9,{crossDatasetReferences:P,internalReferences:R,documentTitle:V,isLoading:E,totalCount:k,action:C,projectIds:F,datasetNames:A,hasUnknownDatasetNames:L,onReferenceLinkClick:I,documentId:v,documentType:j,documentVersions:z}):(0,r.jsx)(ac,{"data-testid":"loading-container",children:(0,r.jsx)(f.LoadingBlock,{showText:!0,title:_("confirm-delete-dialog.loading.text")})})}),y[29]=C,y[30]=P,y[31]=A,y[32]=V,y[33]=z,y[34]=L,y[35]=v,y[36]=R,y[37]=E,y[38]=I,y[39]=F,y[40]=_,y[41]=k,y[42]=j,y[43]=B,y[44]=g):g=y[44],y[45]!==T||y[46]!==I||y[47]!==m||y[48]!==g||y[49]!==a?(b=(0,r.jsx)(x.Dialog,{width:1,id:T,header:a,footer:m,onClose:I,onClickOutside:I,children:g}),y[45]=T,y[46]=I,y[47]=m,y[48]=g,y[49]=a,y[50]=b):b=y[50],b}function ap(e){let t,n,i=(0,s.c)(6),{t:l}=(0,f.useTranslation)(D),o=(0,c.useId)(),[d,u]=(0,c.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(null),i[0]=t):t=i[0];let p=t;return i[1]!==d||i[2]!==o||i[3]!==e||i[4]!==l?(n=d?(0,r.jsx)(x.Dialog,{id:`dialog-error-${o}`,"data-testid":"confirm-delete-error-dialog",header:l("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:l("confirm-delete-dialog.error.retry-button.text"),onClick:p,tone:"default"}},onClose:e.onCancel,children:(0,r.jsx)(a.Box,{padding:4,children:(0,r.jsx)(a.Text,{size:1,children:l("confirm-delete-dialog.error.message.text")})})}):(0,r.jsx)(x.ErrorBoundary,{onCatch:u,children:(0,r.jsx)(au,{...e})}),i[1]=d,i[2]=o,i[3]=e,i[4]=l,i[5]=n):n=i[5],n}let am=(0,c.forwardRef)(function(e,t){let n,i,l,o,a=(0,s.c)(10);a[0]!==e?({intent:n,...i}=e,a[0]=e,a[1]=n,a[2]=i):(n=a[1],i=a[2]),a[3]!==n?(l=(0,c.forwardRef)(function(e,t){return(0,r.jsx)(b.IntentLink,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),a[3]=n,a[4]=l):l=a[4];let d=l;return a[5]!==d||a[6]!==e.disabled||a[7]!==t||a[8]!==i?(o=e.disabled?(0,r.jsx)(x.Button,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,r.jsx)(x.Button,{...i,as:d,"data-as":"a",ref:t}),a[5]=d,a[6]=e.disabled,a[7]=t,a[8]=i,a[9]=o):o=a[9],o});function ah(e){let t,n,i,l=(0,s.c)(12),{reveal:o,context:a,loading:d,children:c}=e,u=(0,f.useCurrentUser)(),{t:p}=(0,f.useTranslation)(D);if(!o){let e;return l[0]!==c?(e=(0,r.jsx)(r.Fragment,{children:c}),l[0]=c,l[1]=e):e=l[1],e}return l[2]!==a||l[3]!==u||l[4]!==d||l[5]!==p?(t=d?p("insufficient-permissions-message-tooltip.loading-text"):(0,r.jsx)(f.InsufficientPermissionsMessage,{context:a,currentUser:u}),l[2]=a,l[3]=u,l[4]=d,l[5]=p,l[6]=t):t=l[6],l[7]!==c?(n=(0,r.jsx)("div",{children:c}),l[7]=c,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(i=(0,r.jsx)(x.Tooltip,{content:t,portal:!0,children:n}),l[9]=t,l[10]=n,l[11]=i):i=l[11],i}let af={constrainSize:!0,placement:"bottom",portal:!0},ag=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function ax(e){let t,n,i,l,o,d,u,p,m=(0,s.c)(60),{templateItems:h}=e,g=(0,f.useTemplates)(),{selectedReleaseId:y}=(0,f.usePerspective)(),{t:j}=(0,f.useTranslation)(D);m[0]!==h||m[1]!==g?(t=[...h,...g],m[0]=h,m[1]=g,m[2]=t):t=m[2];let w=(0,f.useGetI18nText)(t);m[3]!==h?(n={templateItems:h},m[3]=h,m[4]=n):n=m[4];let[I,S]=(0,f.useTemplatePermissions)(n),C=!S&&I?.length!==0&&I?.every(ay);e:{let e;if(!I){let e;m[5]===Symbol.for("react.memo_cache_sentinel")?(e={},m[5]=e):e=m[5],i=e;break e}m[6]!==I?(e=I.reduce(ab,{}),m[6]=I,m[7]=e):e=m[7],i=e}let _=i;if(0===h.length)return null;if(C){let e,t,n;return m[8]!==j?(e=j("pane-header.disabled-created-button.aria-label"),m[8]=j,m[9]=e):e=m[9],m[10]!==e?(t=(0,r.jsx)(x.Button,{"aria-label":e,icon:v.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),m[10]=e,m[11]=t):t=m[11],m[12]!==S||m[13]!==t?(n=(0,r.jsx)(ah,{context:"create-document-type",reveal:!0,loading:S,children:t}),m[12]=S,m[13]=t,m[14]=n):n=m[14],n}if(1===h.length){let e,t,n,i,l,o,s=h[0],a=!_[s.id]?.granted;m[15]!==s||m[16]!==y||m[17]!==g?(e=ag(g,s,y),m[15]=s,m[16]=y,m[17]=g,m[18]=e):e=m[18];let d=e;if(!d)return null;m[19]!==s||m[20]!==w?(t=w(s),m[19]=s,m[20]=w,m[21]=t):t=m[21];let c=t.title,u=s.icon||v.AddIcon;return m[22]!==j?(n=j("pane-header.create-new-button.tooltip"),m[22]=j,m[23]=n):n=m[23],m[24]!==n?(i={content:n},m[24]=n,m[25]=i):i=m[25],m[26]!==a||m[27]!==d||m[28]!==t.title||m[29]!==u||m[30]!==i?(l=(0,r.jsx)(am,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),m[26]=a,m[27]=d,m[28]=t.title,m[29]=u,m[30]=i,m[31]=l):l=m[31],m[32]!==a||m[33]!==S||m[34]!==l?(o=(0,r.jsx)(ah,{reveal:a,loading:S,context:"create-document-type",children:l}),m[32]=a,m[33]=S,m[34]=l,m[35]=o):o=m[35],o}if(m[36]!==j?(l=j("pane-header.create-new-button.tooltip"),m[36]=j,m[37]=l):l=m[37],m[38]!==l?(o=(0,r.jsx)(x.Button,{icon:v.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:l}}),m[38]=l,m[39]=o):o=m[39],m[40]!==w||m[41]!==S||m[42]!==_||m[43]!==y||m[44]!==j||m[45]!==h||m[46]!==g){let e;m[48]!==w||m[49]!==S||m[50]!==_||m[51]!==y||m[52]!==j||m[53]!==g?(e=(e,t)=>{let n=!_[e.id]?.granted,i=ag(g,e,y),l=g.find(t=>t.id===e.templateId);if(!l||!i)return null;let o=(0,c.forwardRef)((e,t)=>n?(0,r.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,r.jsx)(b.IntentLink,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));o.displayName="Link";let{title:s}=w({...e,title:e.title||w(l).title});return(0,r.jsx)(ah,{context:"create-document-type",reveal:n,loading:S,children:(0,r.jsx)(x.MenuItem,{as:o,"data-as":n?"button":"a",text:s,"aria-label":n?j("pane-header.disabled-created-button.aria-label"):s,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},m[48]=w,m[49]=S,m[50]=_,m[51]=y,m[52]=j,m[53]=g,m[54]=e):e=m[54],d=h.map(e),m[40]=w,m[41]=S,m[42]=_,m[43]=y,m[44]=j,m[45]=h,m[46]=g,m[47]=d}else d=m[47];return m[55]!==d?(u=(0,r.jsx)(a.Menu,{children:d}),m[55]=d,m[56]=u):u=m[56],m[57]!==o||m[58]!==u?(p=(0,r.jsx)(x.MenuButton,{button:o,id:"create-menu",menu:u,popover:af}),m[57]=o,m[58]=u,m[59]=p):p=m[59],p}function ab(e,t){return e[t.id]=t,e}function ay(e){return!e.granted}function av(e){return null!=e}let aj=(0,c.memo)(function(e){let t,n,i,l,o,d,c,u,p,m,h=(0,s.c)(28),{initialValueTemplateItems:g,menuItems:x,menuItemGroups:b,actionHandlers:y}=e,v=void 0===g?f.EMPTY_ARRAY:g,j=void 0===x?f.EMPTY_ARRAY:x,w=void 0===b?f.EMPTY_ARRAY:b,I=void 0===y?f.EMPTY_OBJECT:y,S=(0,f.useTemplates)();h[0]!==I?(t=e=>{if(e.id){let t=I.setMenuItemState;if(t&&t({_menuItemId:e.id,...e.params}),!e.action||"setMenuItemState"===e.action)return!!t}if("string"==typeof e.action&&!(e.action in I))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?I[e.action]:null;return!!t&&(t(e.id?{...e.params,_menuItemId:e.id,isSelected:!e.selected}:{...e.params,isSelected:!e.selected}),!0)},h[0]=I,h[1]=t):t=h[1];let C=t;h[2]!==C||h[3]!==w||h[4]!==j?(n=og({actionHandler:C,menuItemGroups:w,menuItems:j.filter(aw)}),h[2]=C,h[3]=w,h[4]=j,h[5]=n):n=h[5];let _=n;h[6]!==_?(i=_.filter(oh),h[6]=_,h[7]=i):i=h[7];let T=i;h[8]!==_?(l=_.filter(of),h[8]=_,h[9]=l):l=h[9];let R=l;if(h[10]!==j||h[11]!==S){let e;h[13]!==S?(e=(e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,o=i.template||i.type;if(!o)return null;let r=S.find(e=>e.id===o);return r?{item:e,template:r,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null},h[13]=S,h[14]=e):e=h[14],o=j.map(e).filter(av).map(aI),h[10]=j,h[11]=S,h[12]=o}else o=h[12];let P=o;h[15]!==P||h[16]!==v?(d=(0,tr.uniqBy)([...P,...v],aS),h[15]=P,h[16]=v,h[17]=d):d=h[17];let E=d;return h[18]!==E?(c=(0,r.jsx)(ax,{templateItems:E}),h[18]=E,h[19]=c):c=h[19],h[20]!==T?(u=T.map(aC),h[20]=T,h[21]=u):u=h[21],h[22]!==R?(p=R.length>0&&(0,r.jsx)(iy,{nodes:R}),h[22]=R,h[23]=p):p=h[23],h[24]!==c||h[25]!==u||h[26]!==p?(m=(0,r.jsxs)(a.Flex,{gap:1,children:[c,u,p]}),h[24]=c,h[25]=u,h[26]=p,h[27]=m):m=h[27],m});function aw(e){return e.intent?.type!=="create"}function aI(e){let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:o}=e;return{id:`menuItem${l}`,initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:o,schemaType:i.schemaType}}function aS(e){var t=[e.initialDocumentId,e.templateId,e.parameters];let n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(n(JSON.parse(JSON.stringify(t))))}function aC(e){return(0,r.jsx)(iE,{node:e},e.key)}function a_(e){let t,n,i,l,o,a,d,c=(0,s.c)(16),{t:u}=(0,f.useTranslation)(D),{layout:p,value:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},c[0]=t):t=c[0],c[1]!==m._type?(n={documentType:m._type},c[1]=m._type,c[2]=n):n=c[2],c[3]!==u||c[4]!==n?(i=(0,r.jsx)("em",{children:(0,r.jsx)(f.Translate,{t:u,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),c[3]=u,c[4]=n,c[5]=i):i=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(l={Code:"code"},c[6]=l):l=c[6],c[7]!==m._id?(o={documentId:m._id},c[7]=m._id,c[8]=o):o=c[8],c[9]!==u||c[10]!==o?(a=(0,r.jsx)(f.Translate,{t:u,i18nKey:"pane-item.missing-schema-type.subtitle",components:l,values:o}),c[9]=u,c[10]=o,c[11]=a):a=c[11],c[12]!==p||c[13]!==i||c[14]!==a?(d=(0,r.jsx)(f.SanityDefaultPreview,{title:i,subtitle:a,media:aT,layout:p}),c[12]=p,c[13]=i,c[14]=a,c[15]=d):d=c[15],d}function aT(){return(0,r.jsx)(v.WarningOutlineIcon,{})}function aR(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function aP(e){let t,n,i,l,o,d,u,p,m=(0,s.c)(43),{icon:h,id:x,layout:b,pressed:y,schemaType:j,selected:w,sortOrder:I,title:S,value:C,margin:_,marginBottom:T,marginTop:R}=e,P=void 0===b?"default":b,E=(0,f.useSchema)(),D=(0,f.useDocumentPreviewStore)(),{ChildLink:k}=lA(),F=(0,f.useDocumentPresence)(x),A=!!(j&&j.name&&E.get(j.name)),[L,M]=(0,c.useState)(!1);e:{let e,n,i,l;if(C&&(0,g.isSanityDocument)(C)){let e,n;if(!j||!A){let e;m[0]!==C?(e=(0,r.jsx)(a_,{value:C}),m[0]=C,m[1]=e):e=m[1],t=e;break e}m[2]!==h||m[3]!==j?(e=aR(h,j,v.DocumentIcon),m[2]=h,m[3]=j,m[4]=e):e=m[4],m[5]!==F||m[6]!==D||m[7]!==P||m[8]!==j||m[9]!==I||m[10]!==e||m[11]!==C?(n=(0,r.jsx)(s2,{documentPreviewStore:D,icon:e,layout:P,schemaType:j,sortOrder:I,value:C,presence:F}),m[5]=F,m[6]=D,m[7]=P,m[8]=j,m[9]=I,m[10]=e,m[11]=C,m[12]=n):n=m[12],t=n;break e}m[13]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},m[13]=e):e=m[13],m[14]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(a.Box,{style:e,children:(0,r.jsx)(a.Text,{muted:!0,size:1,children:(0,r.jsx)(v.ChevronRightIcon,{})})}),m[14]=n):n=m[14],m[15]!==h||m[16]!==j?(i=aR(h,j,v.FolderIcon),m[15]=h,m[16]=j,m[17]=i):i=m[17],m[18]!==i||m[19]!==S?(l=(0,r.jsx)(f.SanityDefaultPreview,{status:n,icon:i,layout:"compact",title:S}),m[18]=i,m[19]=S,m[20]=l):l=m[20],t=l}let V=t;m[21]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.metaKey?M(!1):M(!0)},m[21]=n):n=m[21];let O=n;m[22]===Symbol.for("react.memo_cache_sentinel")?(i=()=>M(!1),m[22]=i):i=m[22],m[23]!==w?(l=[w],m[23]=w,m[24]=l):l=m[24],(0,c.useEffect)(i,l);let[z,B]=(0,c.useState)(!1),N=(0,c.useRef)(null);m[25]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{N.current=setTimeout(()=>(0,c.startTransition)(()=>B(!0)),400)},m[25]=o):o=m[25];let H=o;m[26]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{N.current&&clearTimeout(N.current),(0,c.startTransition)(()=>B(!1))},m[26]=d):d=m[26];let $=d,U=`pane-item-${S}`,G=w||L;return m[27]!==x||m[28]!==z||m[29]!==j||m[30]!==C?(u=z&&j?.name&&C&&(0,g.isSanityDocument)(C)&&(0,r.jsx)(aE,{documentId:x,documentType:j.name}),m[27]=x,m[28]=z,m[29]=j,m[30]=C,m[31]=u):u=m[31],m[32]!==x||m[33]!==_||m[34]!==T||m[35]!==R||m[36]!==y||m[37]!==V||m[38]!==u||m[39]!==U||m[40]!==k||m[41]!==G?(p=(0,r.jsxs)(f.PreviewCard,{"data-testid":U,__unstable_focusRing:!0,as:k,childId:x,"data-as":"a",margin:_,marginBottom:T,marginTop:R,onClick:O,onMouseEnter:H,onMouseLeave:$,pressed:y,radius:2,selected:G,sizing:"border",tabIndex:-1,tone:"inherit",children:[V,u]}),m[32]=x,m[33]=_,m[34]=T,m[35]=R,m[36]=y,m[37]=V,m[38]=u,m[39]=U,m[40]=k,m[41]=G,m[42]=p):p=m[42],p}function aE(e){let t,n=(0,s.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,h.getPublishedId)(i),n[0]=i,n[1]=t):t=n[1],(0,f.useEditState)(t,l),null}aE.displayName="PreloadDocumentPane";let aD=(0,c.memo)(e=>{let t,n=(0,s.c)(4),{children:i,group:l}=e,o=(0,c.useContext)(u.DocumentActionsStateContext);if(null===o)throw Error("DocumentActionsStateContext is not set. This should not happen.");return n[0]!==i||n[1]!==l||n[2]!==o?(t=i({states:l?o.filter(e=>(e.group||["default"]).includes(l)):o}),n[0]=i,n[1]=l,n[2]=o,n[3]=t):t=n[3],t});aD.displayName="Memo(RenderActionCollectionState)";let ak=(0,c.memo)(e=>{let t,n=(0,s.c)(4),{badges:i,children:l,badgeProps:o}=e;return n[0]!==o||n[1]!==i||n[2]!==l?(t=(0,r.jsx)(f.GetHookCollectionState,{hooks:i,args:o,children:l}),n[0]=o,n[1]=i,n[2]=l,n[3]=t):t=n[3],t});ak.displayName="Memo(RenderBadgeCollectionState)";let aF={documents:[],loading:!0};async function aA(e,{document:t,getClient:n}){let i=await e({document:t,getClient:n});return"string"==typeof i?{filter:i,filterParams:void 0}:i}let aL=(0,eA.styled)(a.Box).withConfig({displayName:"IncomingReferencesListContainer",componentId:"sc-17ysjqh-0"})`height:${({$itemCount:e})=>51*Math.min(e,10)}px;`;function aM(e){let t,n,i,l,o,d,c=(0,s.c)(26),{type:u,document:p}=e;c[0]!==p.id||c[1]!==p.type||c[2]!==u?(t=u?.studioUrl?.({id:p.id,type:p.type}),c[0]=p.id,c[1]=p.type,c[2]=u,c[3]=t):t=c[3];let m=t,h=p.id,g=m?"a":"div",x=3*!!m;c[4]!==m?(n=m?{href:m,target:"_blank",rel:"noopener noreferrer",as:"a"}:{},c[4]=m,c[5]=n):n=c[5];let b=p.availability,y=!!m,v=!!m;return c[6]!==p.preview||c[7]!==u?(i=u?{type:u.type,title:p.preview.published?.title,icon:aV,preview:u.preview}:void 0,c[6]=p.preview,c[7]=u,c[8]=i):i=c[8],c[9]!==p.availability||c[10]!==p.dataset||c[11]!==p.id||c[12]!==p.preview||c[13]!==p.projectId||c[14]!==y||c[15]!==v||c[16]!==i?(l=(0,r.jsx)(f.CrossDatasetReferencePreview,{availability:b,hasStudioUrl:y,showStudioUrlIcon:v,preview:p.preview,refType:i,projectId:p.projectId,dataset:p.dataset,id:p.id,showTypeLabel:!1}),c[9]=p.availability,c[10]=p.dataset,c[11]=p.id,c[12]=p.preview,c[13]=p.projectId,c[14]=y,c[15]=v,c[16]=i,c[17]=l):l=c[17],c[18]!==l||c[19]!==g||c[20]!==x||c[21]!==n?(o=(0,r.jsx)(a.Box,{flex:1,children:(0,r.jsx)(f.PreviewCard,{"data-as":g,flex:1,radius:2,paddingRight:x,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,...n,children:l})}),c[18]=l,c[19]=g,c[20]=x,c[21]=n,c[22]=o):o=c[22],c[23]!==p.id||c[24]!==o?(d=(0,r.jsx)(a.Flex,{gap:1,align:"center",children:o},h),c[23]=p.id,c[24]=o,c[25]=d):d=c[25],d}function aV(){return null}let aO={documents:[],loading:!0};function az(e){let t,n,i,l,o=(0,s.c)(17),{onClick:a,type:d,value:c,path:u}=e,p=c?._id;o[0]!==p?(t=(0,h.getPublishedId)(p),o[0]=p,o[1]=t):t=o[1];let m=(0,f.useDocumentPresence)(t),g=(0,f.useDocumentPreviewStore)(),{ChildLink:x}=lA();o[2]!==x||o[3]!==u||o[4]!==d.name||o[5]!==c?._id?(n=function(e){return(0,r.jsx)(x,{childId:(0,h.getPublishedId)(c?._id),childParameters:{type:d.name,path:(0,f.pathToString)(u)},...e})},o[2]=x,o[3]=u,o[4]=d.name,o[5]=c?._id,o[6]=n):n=o[6];let b=n,y=d.icon||!1;return o[7]!==m||o[8]!==g||o[9]!==y||o[10]!==d||o[11]!==c?(i=(0,r.jsx)(s2,{documentPreviewStore:g,icon:y,layout:"default",presence:m,schemaType:d,value:c}),o[7]=m,o[8]=g,o[9]=y,o[10]=d,o[11]=c,o[12]=i):i=o[12],o[13]!==a||o[14]!==b||o[15]!==i?(l=(0,r.jsx)(f.PreviewCard,{__unstable_focusRing:!0,as:b,"data-as":"a",onClick:a,radius:2,children:i}),o[13]=a,o[14]=b,o[15]=i,o[16]=l):l=o[16],l}p.motion.create(a.Flex);let aB=new WeakMap;function aN(e){let t=aB.get(e);if(t)return t;let n=(0,ta.nanoid)();return aB.set(e,n),n}let aH={by:[{field:"_updatedAt",direction:"desc"}]},a$={},aU=(0,eA.styled)(a.Box).withConfig({displayName:"RootBox",componentId:"sc-1xocekz-0"})`position:relative;opacity:${e=>e.$opacity||1};transition:opacity 0.4s;`,aG=(0,eA.styled)(a.Box).withConfig({displayName:"CommandListBox",componentId:"sc-1xocekz-1"})`position:absolute;left:0;right:0;top:0;bottom:0;`,aq=[...Array(30).keys()];function aW(e){let t,n,i=(0,s.c)(4),{layout:l}=e;return i[0]!==l?(t=aq.map(e=>(0,r.jsx)(f.SanityDefaultPreview,{isPlaceholder:!0,layout:l},e)),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,r.jsx)(a.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function aK(e){let t,n,i,l,o,d,u,p=(0,s.c)(67),{childItemId:m,error:g,isRetrying:x,autoRetry:b,filterIsSimpleTypeConstraint:y,hasMaxItems:v,hasSearchQuery:j,isActive:w,isLazyLoading:I,muted:S,isLoading:C,isConnected:_,retryCount:T,canRetry:R,items:P,layout:E,loadingVariant:k,onEndReached:F,onRetry:A,paneTitle:L,searchInputElement:M,showIcons:V,sortOrder:O}=e,z=(0,f.useSchema)(),{collapsed:B}=it(),{collapsed:N,index:H}=ia(),[$,U]=(0,c.useState)(!N),{t:G}=(0,f.useTranslation)(D);p[0]!==F||p[1]!==$?(t=()=>{$&&F()},p[0]=F,p[1]=$,p[2]=t):t=p[2];let q=t;p[3]!==N?(n=()=>{if(N)return;let e=setTimeout(()=>{U(!0)},0);return()=>{clearTimeout(e)}},p[3]=N,p[4]=n):n=p[4],p[5]!==N||p[6]!==P?(i=[N,P],p[5]=N,p[6]=P,p[7]=i):i=p[7],(0,c.useEffect)(n,i),p[8]!==m||p[9]!==v||p[10]!==w||p[11]!==I||p[12]!==P.length||p[13]!==E||p[14]!==z||p[15]!==V||p[16]!==O||p[17]!==G?(l=(e,t)=>{let{activeIndex:n}=t,i=(0,h.getPublishedId)(e._id),l=m===i,o=!w&&l,s=w&&l,d=n===P.length-1,c=d&&I,u=d&&v;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(aP,{icon:!!V&&void 0,id:i,layout:E,marginBottom:1,pressed:o,schemaType:z.get(e._type),selected:s,sortOrder:O,value:e}),c&&(0,r.jsx)(f.LoadingBlock,{}),u&&(0,r.jsx)(a.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,r.jsx)(a.Text,{align:"center",muted:!0,size:1,children:G("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},p[8]=m,p[9]=v,p[10]=w,p[11]=I,p[12]=P.length,p[13]=E,p[14]=z,p[15]=V,p[16]=O,p[17]=G,p[18]=l):l=p[18];let W=l;e:{let e,t;if(j){let e,t;p[19]!==G?(e=G("panes.document-list-pane.no-documents.text"),p[19]=G,p[20]=e):e=p[20],p[21]!==e?(t=(0,r.jsx)(a.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,r.jsx)(a.Container,{width:1,children:(0,r.jsx)(a.Box,{paddingX:4,paddingY:5,children:(0,r.jsx)(a.Text,{align:"center",muted:!0,children:e})})})}),p[21]=e,p[22]=t):t=p[22],o=t;break e}p[23]!==y||p[24]!==G?(e=G(y?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),p[23]=y,p[24]=G,p[25]=e):e=p[25],p[26]!==e?(t=(0,r.jsx)(a.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,r.jsx)(a.Container,{width:1,children:(0,r.jsx)(a.Box,{paddingX:4,paddingY:5,children:(0,r.jsx)(a.Text,{align:"center",muted:!0,children:e})})})}),p[26]=e,p[27]=t):t=p[27],o=t}let K=o;t:{let e,t;if(!$){d=null;break t}let n=window.navigator.onLine;if(g){let e,t,i,l,o,s,c;p[28]!==G?(e=G("panes.document-list-pane.error.title"),p[28]=G,p[29]=e):e=p[29],p[30]!==e?(t=(0,r.jsx)(a.Heading,{as:"h3",children:e}),p[30]=e,p[31]=t):t=p[31],p[32]!==g||p[33]!==G?(i=f.isDev?(0,r.jsx)(f.Translate,{t:G,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:g.message},components:{Code:aY}}):G(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),p[32]=g,p[33]=G,p[34]=i):i=p[34],p[35]!==i?(l=(0,r.jsx)(a.Text,{as:"p",children:i}),p[35]=i,p[36]=l):l=p[36];let u=n&&R?A:void 0;p[37]!==g||p[38]!==x||p[39]!==u?(o=(0,r.jsx)(f.ErrorActions,{error:g,eventId:null,onRetry:u,isRetrying:x}),p[37]=g,p[38]=x,p[39]=u,p[40]=o):o=p[40],p[41]!==b||p[42]!==R||p[43]!==x||p[44]!==T||p[45]!==G?(s=R?(0,r.jsx)(a.Text,{as:"p",muted:!0,size:1,children:x?G("panes.document-list-pane.error.retrying",{count:T}):b?G("panes.document-list-pane.error.will-retry-automatically",{count:T}):G("panes.document-list-pane.error.max-retries-attempted",{count:T})}):null,p[41]=b,p[42]=R,p[43]=x,p[44]=T,p[45]=G,p[46]=s):s=p[46],p[47]!==o||p[48]!==s||p[49]!==t||p[50]!==l?(c=(0,r.jsx)(a.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,r.jsx)(a.Container,{width:1,children:(0,r.jsxs)(a.Stack,{paddingX:4,paddingY:5,space:4,children:[t,l,o,s]})})}),p[47]=o,p[48]=s,p[49]=t,p[50]=l,p[51]=c):c=p[51],d=c;break t}if(_&&!C&&0===P.length){d=K;break t}if("initial"===k&&C){let e;p[52]!==E?(e=(0,r.jsx)(iz,{ms:300,children:(0,r.jsx)(aW,{layout:E})}),p[52]=E,p[53]=e):e=p[53],d=e;break t}if("spinner"===k&&C){d=null;break t}let i=`${H}-${N}`,l=S?.8:1;p[54]!==q||p[55]!==P||p[56]!==i||p[57]!==L||p[58]!==W||p[59]!==M?(e=(0,r.jsx)(aG,{children:(0,r.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:L,canReceiveFocus:!0,inputElement:M,itemHeight:51,items:P,onEndReached:q,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:W,wrapAround:!1},i)}),p[54]=q,p[55]=P,p[56]=i,p[57]=L,p[58]=W,p[59]=M,p[60]=e):e=p[60],p[61]!==l||p[62]!==e?(t=(0,r.jsx)(aU,{overflow:"hidden",height:"fill",$opacity:l,children:e}),p[61]=l,p[62]=e,p[63]=t):t=p[63],d=t}let Y=d,X=B||"initial"===k?"hidden":"auto";return p[64]!==Y||p[65]!==X?(u=(0,r.jsx)(id,{"data-testid":"document-list-pane",overflow:X,children:Y}),p[64]=Y,p[65]=X,p[66]=u):u=p[66],u}function aY(e){let{children:t}=e;return(0,r.jsx)("code",{children:t})}function aX(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,t0.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let aQ=(0,f.createSWR)({maxSize:100});function aJ(e){let{client:t,schema:n,sort:i,perspective:l,limit:o,params:r,filter:s,searchQuery:a,staticTypeNames:d,maxFieldDepth:c,searchStrategy:u}=e,p=i.by,m=i?.extendedProjection,h=(0,eZ.defer)(()=>t.listen(`*[${s}]`,r,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,e0.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,e1.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,e1.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,eN.of)(e)}),(0,e2.share)()),[g,x]=(0,e3.partition)(h,e=>"welcome"===e.type),b=JSON.stringify({fiilter:s,limit:o,params:r,searchQuery:a,perspective:l,sort:i,staticTypeNames:d});return(0,eH.merge)(g,x.pipe((0,e4.throttleTime)(1e3,e5.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,t3.exhaustMapWithTrailing)(e=>(d?(0,eN.of)(d):t.observable.fetch(`array::unique(*[${s}][]._type)`,r)).pipe((0,e0.mergeMap)(h=>{let g=(0,f.getSearchableTypes)(n,d||[]).filter(e=>!!h.includes(e.name)&&(A(e,i.by,!0),!0)),x=(0,f.createSearch)(g,t,{filter:s,params:r,strategy:u,maxDepth:c}),b=()=>x({query:a||"",types:g},{__unstable_extendedProjection:m,comments:[`findability-source: ${a?"list-query":"list"}`],limit:o,skipSortByScore:!0,sort:p,perspective:l}).pipe((0,eB.map)(e=>e.hits.map(({hit:e})=>e)),(0,eB.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,eQ.timer)(1200).pipe((0,e0.mergeMap)(b)):"reconnect"===e.type?(0,eN.of)(e):b()}))),(0,tm.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,ez.filter)(e=>null!==e),aQ(b),(0,eB.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let aZ={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function a0(e,t){if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,f.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)}function a1(e){return{type:"result",result:e}}function a2(e){return{type:"result",result:e}}function a3(e){let[,t]=e;return t?.documents.length===100}function a4(){return(0,t2.observableCallback)()}function a5(){return(0,t2.observableCallback)()}let a6="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",a8=eA.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,a7=eA.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,a9=(0,eA.styled)(v.SpinnerIcon).withConfig({displayName:"AnimatedSpinnerIcon",componentId:"sc-1nmsicq-0"})`animation:${a8} 500ms linear infinite;`,de=(0,eA.styled)(v.SpinnerIcon).withConfig({displayName:"SubtleSpinnerIcon",componentId:"sc-1nmsicq-1"})`animation:${a8} 1500ms linear infinite;opacity:0.4;`,dt=(0,eA.styled)(v.SpinnerIcon).withConfig({displayName:"DelayedSubtleSpinnerIcon",componentId:"sc-1nmsicq-2"})`animation:${a8} 1500ms linear infinite,${a7} 1000ms linear;opacity:0.4;`,dn=(0,c.memo)(function(e){var t;let n,i,l,o,d,u,p,m,h,x,b,y,j,w,I,S,C,_,T,R,P,E=(0,s.c)(70),{childItemId:k,isActive:F,pane:A,paneKey:L,sortOrder:M,layout:V}=e,O=(0,f.useSchema)(),z=(0,f.useActiveReleases)(),{perspectiveStack:B}=(0,f.usePerspective)(),{displayOptions:N,options:H}=A,{apiVersion:$,filter:U}=H,G=dA(H.params||a$);e:{let e;E[0]!==U||E[1]!==G?(e=aX(U,G),E[0]=U,E[1]=G,E[2]=e):e=E[2];let t=e;if(t?.length===1){n=t[0];break e}n=null}let q=n,W=N?.showIcons!==!1,{t:K}=(0,f.useTranslation)(D),{title:Y}=(0,f.useI18nText)(A),[X,Q]=(0,c.useState)(""),[J,Z]=(0,c.useState)(""),[ee,et]=(0,c.useState)(null);E[3]!==O||E[4]!==M||E[5]!==q?(i=q&&M?(t=O.get(q),(P=M.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=tx.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,g.isKeySegment)(e)||(0,g.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,g.isReferenceSchemaType)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===M.by[t])?M:{...M,by:P}):M,E[3]=O,E[4]=M,E[5]=q,E[6]=i):i=E[6];let en=(0,f.useUnique)(i),ei=$||f.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;E[7]!==ei?(l={...f.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:ei},E[7]=ei,E[8]=l):l=E[8];let el=(0,f.useClient)(l);E[9]!==X?(o=X?.trim(),E[9]=X,E[10]=o):o=E[10],E[11]!==el||E[12]!==U||E[13]!==G||E[14]!==B||E[15]!==en||E[16]!==o?(d={client:el,filter:U,perspective:B,params:G,searchQuery:o,sortOrder:en},E[11]=el,E[12]=U,E[13]=G,E[14]=B,E[15]=en,E[16]=o,E[17]=d):d=E[17];let{error:eo,isLoadingFullList:er,isLoading:es,items:ea,fromCache:ed,isRetrying:ec,autoRetry:eu,canRetry:ep,retryCount:em,connected:eh,onLoadFullList:ef,onRetry:eg}=function(e){let t,n,i,l=(0,s.c)(31),{client:o,filter:r,params:a,sortOrder:d,searchQuery:u,perspective:p}=e,{strategy:m}=(0,f.useWorkspace)().search,h=(0,f.useSchema)(),g=(0,f.useSearchMaxFieldDepth)();l[0]!==a||l[1]!==r?(t=aX(r,a),l[0]=a,l[1]=r,l[2]=t):t=l[2];let x=t,[b]=(0,c.useState)(a5),[y,v]=b,[j]=(0,c.useState)(a4),[w,I]=j,S=u||"",C=d||aH;if(l[3]!==o||l[4]!==g||l[5]!==w||l[6]!==y||l[7]!==a||l[8]!==p||l[9]!==h||l[10]!==r||l[11]!==m||l[12]!==S||l[13]!==C||l[14]!==x){let e,t={client:o,filter:r,limit:100,params:a,schema:h,perspective:p,searchQuery:S,sort:C,staticTypeNames:x,maxFieldDepth:g,searchStrategy:m},i=aJ(t).pipe((0,tp.shareReplay)({refCount:!0,bufferSize:1})),s=w.pipe((0,th.withLatestFrom)(i),(0,ez.filter)(a3),(0,tf.take)(1),(0,e0.mergeMap)(()=>(0,eG.concat)((0,eN.of)({type:"loadFullList"}),aJ({...t,limit:2e3}).pipe((0,eB.map)(a2)))),(0,e2.share)());l[16]!==y?(e=(e,t,n)=>{var i,l;let o=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${a6}`):Error(`${String(l)} ${a6}`),r=window.navigator.onLine,s=r&&!((i=e)instanceof t1.ChannelError)&&(i instanceof t1.ServerError||!(i instanceof t1.ClientError)||403===i.statusCode),a=t<10,d=(0,eH.merge)(r?y:(0,eY.fromEvent)(window,"online"),r&&a?(0,eQ.timer)(1e3*t):e6.NEVER).pipe((0,tf.take)(1),(0,eJ.switchMap)(()=>(0,eH.merge)((0,eN.of)({type:"error",error:o,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,eG.concat)((0,eN.of)({type:"error",error:o,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)},l[16]=y,l[17]=e):e=l[17],n=(0,eH.merge)(i.pipe((0,eB.map)(a1),(0,tg.takeUntil)(s)),s).pipe((0,f.catchWithCount)(e),(0,tm.scan)(a0,aZ)),l[3]=o,l[4]=g,l[5]=w,l[6]=y,l[7]=a,l[8]=p,l[9]=h,l[10]=r,l[11]=m,l[12]=S,l[13]=C,l[14]=x,l[15]=n}else n=l[15];let _=n,{error:T,items:R,isLoading:P,fromCache:E,connected:D,canRetry:k,isLoadingFullList:F,isRetrying:A,autoRetry:L,retryCount:M}=(0,eM.useObservable)(_,aZ);return l[18]!==L||l[19]!==k||l[20]!==D||l[21]!==T||l[22]!==E||l[23]!==P||l[24]!==F||l[25]!==A||l[26]!==R||l[27]!==I||l[28]!==v||l[29]!==M?(i={error:T,onRetry:v,isLoading:P,items:R,isRetrying:A,canRetry:k,retryCount:M,autoRetry:L,connected:D,fromCache:E,onLoadFullList:I,isLoadingFullList:F},l[18]=L,l[19]=k,l[20]=D,l[21]=T,l[22]=E,l[23]=P,l[24]=F,l[25]=A,l[26]=R,l[27]=I,l[28]=v,l[29]=M,l[30]=i):i=l[30],i}(d),ex=es||z.loading;E[18]===Symbol.for("react.memo_cache_sentinel")?(u=e=>e.pipe((0,eB.map)(di),(0,e8.tap)(Z),(0,e7.debounce)(dl),(0,e8.tap)(Q)),E[18]=u):u=E[18];let eb=(0,eM.useObservableEvent)(u);E[19]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{Q(""),Z("")},E[19]=p):p=E[19];let ey=p;E[20]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{"Escape"===e.key&&ey()},E[20]=m):m=E[20];let ev=m,[ej,ew]=(0,c.useState)();E[21]!==ej||E[22]!==ex||E[23]!==L?(x=()=>{ej||ex||ew(L)},h=[ej,ex,L],E[21]=ej,E[22]=ex,E[23]=L,E[24]=h,E[25]=x):(h=E[24],x=E[25]),(0,c.useEffect)(x,h),E[26]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{ey(),ew()},E[26]=b):b=E[26],E[27]!==L?(y=[L,ey],E[27]=L,E[28]=y):y=E[28],(0,c.useEffect)(b,y);t:{if(eh&&ex&&ej===L){j="spinner";break t}if(eh&&ed){j="subtle";break t}j="initial"}let eI=j;n:{if("spinner"===eI){w=a9;break n}if(J&&"subtle"===eI){w=de;break n}w=v.SearchIcon}let eS=w;(0,f.useReconnectingToast)(!eh),E[29]!==K?(I=K("panes.document-list-pane.search-input.aria-label"),E[29]=K,E[30]=I):I=E[30];let eC=!!X;E[31]===Symbol.for("react.memo_cache_sentinel")?(S=[2,2,1],E[31]=S):S=E[31];let e_=eh&&("subtle"!==eI||J)?null:dt;E[32]!==K?(C=K("panes.document-list-pane.search-input.placeholder"),E[32]=K,E[33]=C):C=E[33],E[34]!==eb||E[35]!==J||E[36]!==I||E[37]!==eC||E[38]!==e_||E[39]!==C||E[40]!==eS?(_=(0,r.jsx)(a.Box,{paddingX:3,paddingBottom:3,children:(0,r.jsx)(a.TextInput,{"aria-label":I,autoComplete:"off",border:!1,clearButton:eC,fontSize:S,icon:eS,iconRight:e_,onChange:eb,onClear:ey,onKeyDown:ev,padding:2,placeholder:C,radius:2,ref:et,spellCheck:!1,value:J})}),E[34]=eb,E[35]=J,E[36]=I,E[37]=eC,E[38]=e_,E[39]=C,E[40]=eS,E[41]=_):_=E[41];let eT=!!q,eR=2e3===ea.length,eP=!!X,eE="subtle"===eI;return E[42]!==eu||E[43]!==ep||E[44]!==k||E[45]!==eh||E[46]!==eo||E[47]!==F||E[48]!==ex||E[49]!==er||E[50]!==ec||E[51]!==ea||E[52]!==V||E[53]!==eI||E[54]!==ef||E[55]!==eg||E[56]!==L||E[57]!==em||E[58]!==ee||E[59]!==W||E[60]!==en||E[61]!==eT||E[62]!==eR||E[63]!==eP||E[64]!==eE||E[65]!==Y?(T=(0,r.jsx)(aK,{childItemId:k,error:eo,filterIsSimpleTypeConstraint:eT,hasMaxItems:eR,hasSearchQuery:eP,isActive:F,isLazyLoading:er,isLoading:ex,autoRetry:eu,canRetry:ep,retryCount:em,isRetrying:ec,isConnected:eh,items:ea,layout:V,muted:eE,loadingVariant:eI,onEndReached:ef,onRetry:eg,paneTitle:Y,searchInputElement:ee,showIcons:W,sortOrder:en},L),E[42]=eu,E[43]=ep,E[44]=k,E[45]=eh,E[46]=eo,E[47]=F,E[48]=ex,E[49]=er,E[50]=ec,E[51]=ea,E[52]=V,E[53]=eI,E[54]=ef,E[55]=eg,E[56]=L,E[57]=em,E[58]=ee,E[59]=W,E[60]=en,E[61]=eT,E[62]=eR,E[63]=eP,E[64]=eE,E[65]=Y,E[66]=T):T=E[66],E[67]!==_||E[68]!==T?(R=(0,r.jsxs)(r.Fragment,{children:[_,T]}),E[67]=_,E[68]=T,E[69]=R):R=E[69],R});function di(e){return e.target.value}function dl(e){return""===e?(0,eN.of)(""):(0,eQ.timer)(300)}let dr=(0,c.memo)(e=>{let t,n,i,l,o,a,d,c,u,p,m,h=(0,s.c)(33),{contentAfter:f,customMenuItemState:g,index:b,initialValueTemplates:y,menuItemGroups:j,menuItems:w,setLayout:I,setSortOrder:S,setCustomMenuItemState:C,title:_}=e;h[0]!==g?(t=void 0===g?{}:g,h[0]=g,h[1]=t):t=h[1];let T=t;h[2]!==y?(n=void 0===y?[]:y,h[2]=y,h[3]=n):n=h[3];let R=n;h[4]!==j?(i=void 0===j?[]:j,h[4]=j,h[5]=i):i=h[5];let P=i;h[6]!==w?(l=void 0===w?[]:w,h[6]=w,h[7]=l):l=h[7];let E=l,{features:D}=iX(),{collapsed:k,isLast:F}=ia(),A=F&&!k?-1:0;h[8]!==I?(o=e=>{let{layout:t}=e;I(t)},h[8]=I,h[9]=o):o=h[9],h[10]!==S?(a=e=>{S(e)},h[10]=S,h[11]=a):a=h[11],h[12]!==T||h[13]!==C?(d=e=>{let t=e._menuItemId,n=e.value??!0;T[t]===n?C(Object.fromEntries(Object.entries(T).filter(e=>{let[n]=e;return n!==t}))):C({...T,[t]:n})},h[12]=T,h[13]=C,h[14]=d):d=h[14],h[15]!==a||h[16]!==d||h[17]!==o?(c={setLayout:o,setSortOrder:a,setMenuItemState:d},h[15]=a,h[16]=d,h[17]=o,h[18]=c):c=h[18];let L=c;return h[19]!==L||h[20]!==R||h[21]!==P||h[22]!==E?(u=(0,r.jsx)(aj,{initialValueTemplateItems:R,actionHandlers:L,menuItemGroups:P,menuItems:E}),h[19]=L,h[20]=R,h[21]=P,h[22]=E,h[23]=u):u=h[23],h[24]!==D.backButton||h[25]!==b?(p=D.backButton&&b>0&&(0,r.jsx)(x.Button,{as:sz,"data-as":"a",icon:v.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),h[24]=D.backButton,h[25]=b,h[26]=p):p=h[26],h[27]!==f||h[28]!==u||h[29]!==p||h[30]!==A||h[31]!==_?(m=(0,r.jsx)(x.TooltipDelayGroupProvider,{children:(0,r.jsx)(iR,{actions:u,backButton:p,contentAfter:f,tabIndex:A,title:_})}),h[27]=f,h[28]=u,h[29]=p,h[30]=A,h[31]=_,h[32]=m):m=h[32],m});function ds(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:l}=n.options.meta||{},o=(0,c.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,o=e<i?i:e,r=n.getRowModel().flatRows.slice(l,o+1).map(({id:e})=>e),s=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...r,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else l&&(l(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,l,n]);return(0,r.jsx)(a.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:o})}function da(e){let t,n,i,l,o,a,d,p,m,h,f,g,x,b,y,v,j,w=(0,s.c)(49),{children:I,table:S}=e,[C,_]=(0,c.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],w[0]=t):t=w[0];let[T,R]=(0,c.useState)(t);w[1]!==C?.state?(n=e=>{C?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),_(void 0===e?null:e),R([])},w[1]=C?.state,w[2]=n):n=w[2];let P=n;w[3]!==P?(i=()=>P(),w[3]=P,w[4]=i):i=w[4];let E=i;w[5]!==P||w[6]!==C||w[7]!==S?(l=e=>{if(!C)return;let t=S.getVisibleLeafColumns(),n=t.findIndex(e=>e.id===C.colId)+("left"===e?-1:1);n<0||n>=t.length||P({colId:t[n].id,rowIndex:C.rowIndex,state:"selected"})},w[5]=P,w[6]=C,w[7]=S,w[8]=l):l=w[8];let D=l;w[9]!==C?(o=e=>{C&&R(t=>{let{rowIndex:n}=C,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let l=i(t[t.length-1]);return l<0?t:l===n?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},w[9]=C,w[10]=o):o=w[10];let k=o;w[11]!==P?(a=(e,t)=>{P({colId:e,rowIndex:t,state:"selected"})},w[11]=P,w[12]=a):a=w[12];let F=a;w[13]!==P||w[14]!==C||w[15]!==T.length?(d=()=>{C&&(T.length?R([]):P("selected"===C.state?null:{...C,state:"selected"}))},w[13]=P,w[14]=C,w[15]=T.length,w[16]=d):d=w[16];let A=d;w[17]!==k||w[18]!==C||w[19]!==F?(p=(e,t)=>{if(!C)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)k(n);else{let e=C.rowIndex+i;if(e<0)return;F(C.colId,e)}},w[17]=k,w[18]=C,w[19]=F,w[20]=p):p=w[20];let L=p;w[21]!==D||w[22]!==A||w[23]!==L||w[24]!==C?(m=e=>{if(!C)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":A();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),L(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===C.state&&(e.preventDefault(),D("ArrowLeft"===t?"left":"right"))}},w[21]=D,w[22]=A,w[23]=L,w[24]=C,w[25]=m):m=w[25];let M=m;w[26]!==E||w[27]!==C?(h=e=>{C&&(document.getElementById(`cell-${C.colId}-${C.rowIndex}`)?.contains(e.target)||E())},w[26]=E,w[27]=C,w[28]=h):h=w[28];let V=h;w[29]!==V||w[30]!==M||w[31]!==C?(f=()=>(C&&(document.addEventListener("keydown",M),document.addEventListener("click",V)),()=>{C&&(document.removeEventListener("keydown",M),document.removeEventListener("click",V))}),g=[V,M,C],w[29]=V,w[30]=M,w[31]=C,w[32]=f,w[33]=g):(f=w[32],g=w[33]),(0,c.useEffect)(f,g),w[34]===Symbol.for("react.memo_cache_sentinel")?(x=()=>_(dd),w[34]=x):x=w[34];let O=x;w[35]!==C||w[36]!==T?(b=(e,t)=>C?.colId!==e?null:C.rowIndex===t?"focused"===C.state?"focused":"selectedAnchor":T.includes(t)?"selectedRange":null,w[35]=C,w[36]=T,w[37]=b):b=w[37];let z=b;w[38]!==P||w[39]!==C?(y=()=>{C&&P({colId:C.colId,rowIndex:C.rowIndex+1,state:"selected"})},w[38]=P,w[39]=C,w[40]=y):y=w[40];let B=y;w[41]!==z||w[42]!==E||w[43]!==F||w[44]!==B?(v={focusAnchorCell:O,resetFocusSelection:E,setSelectedAnchorCell:F,getStateByCellId:z,submitFocusedCell:B},w[41]=z,w[42]=E,w[43]=F,w[44]=B,w[45]=v):v=w[45];let N=v;return w[46]!==I||w[47]!==N?(j=(0,r.jsx)(u.DocumentSheetListContext.Provider,{value:N,children:I}),w[46]=I,w[47]=N,w[48]=j):j=w[48],j}function dd(e){return e?{...e,state:"focused"}:null}dr.displayName="Memo(PaneHeader)";let dc=eA.styled.td.withConfig({displayName:"DataCell",componentId:"sc-1b0ndkq-0"})`display:flex;overflow:hidden;box-sizing:border-box;width:${({width:e})=>e}px;border-top:1px solid var(--card-border-color);background-color:var(--card-bg-color);`,du=(0,eA.styled)(dc).withConfig({displayName:"PinnedDataCell",componentId:"sc-1b0ndkq-1"})`position:sticky;z-index:2;`;function dp(e){let{getValue:t,column:n,row:i,fieldType:l}=e,o=`cell-${n.id}-${i.index}`,[s,d]=(0,c.useState)(()=>t()),[p,m]=(0,c.useState)(!1),h=(0,c.useRef)(null),{focusAnchorCell:f,resetFocusSelection:g,setSelectedAnchorCell:x,getStateByCellId:b,submitFocusedCell:y}=(()=>{let e=(0,c.useContext)(u.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),v=b(n.id,i.index),j=(0,c.useCallback)(()=>{x(n.id,i.index),f()},[n.id,f,i.index,x]),{patchDocument:w}=e.table.options.meta||{},I=()=>{h.current?.focus(),h.current instanceof HTMLInputElement&&h.current.select()},S=(0,c.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===v&&I(),"focused"===v&&y())},[v,y]),C=(0,c.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),w?.(i.id,n.id,t))},[n.id,w,i.id]),_=(0,c.useCallback)(()=>navigator.clipboard.writeText(s.toString()),[s]);(0,c.useEffect)(()=>(("selectedAnchor"===v||"focused"===v)&&document.addEventListener("keydown",S),("selectedAnchor"===v||"selectedRange"===v)&&document.addEventListener("paste",C),"selectedAnchor"===v&&document.addEventListener("copy",_),()=>{("selectedAnchor"===v||"focused"===v)&&document.removeEventListener("keydown",S),("selectedAnchor"===v||"selectedRange"===v)&&document.removeEventListener("paste",C),"selectedAnchor"===v&&document.removeEventListener("copy",_)}),[o,v,n.id,b,_,S,C,i.index]);let T=()=>"focused"===v?"2px solid blue":"selectedRange"===v?"1px solid green":"selectedAnchor"===v?"1px solid blue":"1px solid transparent",R={onFocus:j,onBlur:()=>{p&&(w?.(i.id,n.id,s),m(!1)),g()},onMouseDown:e=>{2===e.detail?I():(e.preventDefault(),x(n.id,i.index))},"aria-selected":!!v,"data-testid":o,id:o,ref:e=>{h.current=e}};return"boolean"===l.name?(0,r.jsxs)(a.Select,{...R,onChange:()=>null,radius:0,style:{boxShadow:"none",border:T(),padding:0},value:JSON.stringify(s),children:[(0,r.jsx)("option",{value:"True",children:"True"}),(0,r.jsx)("option",{value:"False",children:"False"})]}):(0,r.jsx)(a.TextInput,{...R,size:0,radius:0,border:!1,style:{border:T(),padding:"22px 16px"},value:"string"==typeof s||"number"==typeof s?s:JSON.stringify(s),onChange:e=>{m(!0),d(e.target.value)}})}function dm(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,r.jsx)(t?du:dc,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:nA(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let dh=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,l=(0,c.useMemo)(()=>(0,f.getPreviewStateObservable)(t,i,n.original._id),[t,n.original._id,i]),o=(0,f.useDocumentVersionInfo)(n.original._id),{snapshot:s,isLoading:d}=(0,eM.useObservable)(l,{snapshot:null,isLoading:!0});if(d)return(0,r.jsx)(a.Text,{size:1,muted:!0,children:"Loading..."});let u=s?.title??"Untitled";return(0,r.jsxs)(a.Flex,{align:"center",gap:3,children:[(0,r.jsx)(f.DocumentStatusIndicator,{draft:o.draft,published:o.published,versions:void 0}),(0,r.jsx)(a.Text,{size:1,children:u})]})},df=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},dg=["string","number","boolean"],dx=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:l}=n;return dg.includes(i.name)?[...e,df(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,r.jsx)(dp,{...e,fieldType:i})})]:"object"===i.name&&(0,g.isObjectSchemaType)(i)&&!t?[...e,{header:l,columns:dx(i,n.name)}]:e},[]),db=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?db(e.columns):[]);function dy({table:e}){let{t}=(0,f.useTranslation)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,c.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,r.jsx)(x.MenuButton,{button:(0,r.jsx)(x.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,r.jsx)(a.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,r.jsxs)(a.Flex,{direction:"column",height:"fill",gap:3,children:[(0,r.jsx)(a.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,r.jsx)(a.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,r.jsx)(a.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let i,l,o=t.id.replace(/ /g,"-");return(0,r.jsxs)(a.Flex,{marginY:2,align:"center",children:[(0,r.jsx)(a.Checkbox,{readOnly:(i=t.getIsVisible(),l=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,n&&!i||l&&i),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${o}`,style:{display:"block"}}),(0,r.jsx)(a.Box,{flex:1,paddingLeft:3,children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)("label",{htmlFor:`col-visibility-${o}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,r.jsx)(x.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let dv=(0,eA.styled)(a.Flex).withConfig({displayName:"SearchContainer",componentId:"sc-rt1blp-0"})`flex-shrink:0;`;function dj(){let e,t,n,i=(0,s.c)(5),{state:l}=(0,f.useSearchState)(),{filtersVisible:o}=l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(f.SearchHeader,{}),i[0]=e):e=i[0],i[1]!==o?(t=o&&(0,r.jsx)(f.Filters,{showTypeFilter:!1}),i[1]=o,i[2]=t):t=i[2],i[3]!==t?(n=(0,r.jsxs)(dv,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let dw=eA.styled.th.withConfig({displayName:"Header",componentId:"sc-1l8g8jw-0"})`margin:16px;z-index:1;padding:22px 0px;border-top:1px solid var(--card-border-color);background-color:var(--card-badge-default-bg-color);box-sizing:border-box;text-align:left;width:${({width:e})=>e}px;max-width:${({width:e})=>e}px;`,dI=(0,eA.styled)(dw).withConfig({displayName:"PinnedHeader",componentId:"sc-1l8g8jw-1"})`position:sticky;z-index:2;`,dS=eA.styled.div.withConfig({displayName:"HoverMenu",componentId:"sc-1l8g8jw-2"})`visibility:hidden;${dw}:hover &{visibility:visible;}`;function dC(e){let{header:t,headerGroup:n}=e,{t:i}=(0,f.useTranslation)(),l=t.column.getIsPinned(),o=n.depth>0&&!t.column.parent?null:(0,r.jsx)(a.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:nA(t.column.columnDef.header,t.getContext())}),s=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),d=l&&t.column.getIsLastColumn("left")?2:1;return(0,r.jsx)(l?dI:dw,{style:{left:t.column.getStart("left")??void 0,borderRight:`${d}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,r.jsxs)(a.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,r.jsx)(x.Tooltip,{delay:500,content:o,children:(0,r.jsx)(a.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:o})}),s&&(0,r.jsx)(dS,{children:(0,r.jsx)(x.MenuButton,{button:(0,r.jsx)(x.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:v.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,r.jsx)(a.Menu,{children:(0,r.jsx)(x.MenuItem,{text:i("sheet-list.hide-field"),icon:v.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function d_({table:e}){return(0,r.jsx)(x.TooltipDelayGroupProvider,{children:(0,r.jsxs)(a.Flex,{gap:3,align:"center",children:[(0,r.jsx)(x.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:v.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,r.jsx)(x.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:v.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,r.jsxs)(a.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,r.jsx)(x.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:v.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,r.jsx)(x.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:v.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,r.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})})}function dT(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let dR={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},dP=(0,eA.styled)(a.Flex).withConfig({displayName:"PaneContainer",componentId:"sc-t7phoh-0"})`height:100%;`,dE=eA.styled.div.withConfig({displayName:"TableContainer",componentId:"sc-t7phoh-1"})`overflow:auto;position:relative;`,dD=eA.styled.table.withConfig({displayName:"Table",componentId:"sc-t7phoh-2"})`border-collapse:separate;border-spacing:0;font-family:arial,sans-serif;white-space:nowrap;width:100%;border:1px solid lightgray;thead{display:grid;position:sticky;top:0;z-index:10;}tr{padding:0;}tr:last-child{border-bottom:none;}`;function dk({documentSchemaType:e}){let{dispatch:t,state:n}=(0,f.useSearchState)(),{columns:i,initialColumnsVisibility:l}=function(e){let t=(0,f.useDocumentPreviewStore)(),n=(0,c.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,r.jsxs)(a.Box,{children:[(0,r.jsx)(a.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:ds},df("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,r.jsx)(dh,{...n,documentPreviewStore:t,schemaType:e})}),...dx(e)]:[],[t,e]),[i]=(0,c.useMemo)(()=>db(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:o}=function(e){let t,n,i,l,o=(0,s.c)(12),{typeName:r}=e,{state:a}=(0,f.useSearchState)();o[0]!==a.result.hits?(t=new Map,a.result.hits.forEach(e=>t.set((0,h.getPublishedId)(e.hit._id),e.hit)),o[0]=a.result.hits,o[1]=t):t=o[1];let d=t,u=`_type == "${r}"`;o[2]!==u?(n={filter:u},o[2]=u,o[3]=n):n=o[3];let{data:p,isLoading:m}=function(e){let t,n,i,l,o,r,a,d,u,p,m=(0,s.c)(27),{filter:g,params:x,apiVersion:b}=e,y=`*[${g}][0...2000]`,v=b||f.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;m[0]!==v?(t={...f.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:v},m[0]=v,m[1]=t):t=m[1];let j=(0,f.useClient)(t);m[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},m[2]=n):n=m[2];let[w,I]=(0,c.useReducer)(dT,n),[S,C]=(0,c.useState)(null!==j),[_,T]=(0,c.useState)(null);m[3]!==y||m[4]!==j||m[5]!==x?(i=async()=>{if(!j)return void C(!1);try{let e=await j.fetch(y,x);I({type:"DOCUMENTS_SET",documents:e}),C(!1)}catch(e){T(e)}},m[3]=y,m[4]=j,m[5]=x,m[6]=i):i=m[6];let R=i;m[7]!==R?(l=async e=>{if("welcome"===e.type&&(C(!0),await R(),C(!1)),"reconnect"===e.type&&C(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&I({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&I({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&I({type:"DOCUMENT_UPDATED",payload:t})}}},m[7]=R,m[8]=l):l=m[8];let P=l;e:{let e;if(!j){let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eN.of)(),m[9]=e):e=m[9],o=e;break e}if(m[10]!==y||m[11]!==j.observable||m[12]!==x){let t;m[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(T(e),(0,eN.of)(e)),m[14]=t):t=m[14],e=j.observable.listen(y,x,dR).pipe((0,eU.catchError)(t)),m[10]=y,m[11]=j.observable,m[12]=x,m[13]=e}else e=m[13];o=e}let E=o;m[15]!==P||m[16]!==E?(r=()=>{let e=E.subscribe(P);return()=>{e?.unsubscribe()}},a=[P,E],m[15]=P,m[16]=E,m[17]=r,m[18]=a):(r=m[17],a=m[18]),(0,c.useEffect)(r,a),m[19]!==w.documents?(d=Object.keys(w.documents).reduce((e,t)=>{let n=w.documents[t],i=n._id===(0,h.getDraftId)(n._id),l=i?n._id:(0,h.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),m[19]=w.documents,m[20]=d):d=m[20];let D=d;m[21]!==D?(u=Object.values(D),m[21]=D,m[22]=u):u=m[22];let k=u;return m[23]!==k||m[24]!==_||m[25]!==S?(p={data:k,isLoading:S,error:_},m[23]=k,m[24]=_,m[25]=S,m[26]=p):p=m[26],p}(n);if(o[4]!==p||o[5]!==d){let e;o[7]!==d?(e=e=>d.has((0,h.getPublishedId)(e._id)),o[7]=d,o[8]=e):e=o[8],i=p.filter(e),o[4]=p,o[5]=d,o[6]=i}else i=o[6];let g=i;return o[9]!==g||o[10]!==m?(l={data:g,isLoading:m},o[9]=g,o[10]=m,o[11]=l):l=o[11],l}({typeName:e.name}),[d,u]=(0,c.useState)(null),p=n.result.hits.length,m=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=c.useState(()=>({current:function(e){var t,n;let i=[...nF,...null!=(t=e._features)?t:[]],l={_features:i},o=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),r={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;r=null!=(t=null==e.getInitialState?void 0:e.getInitialState(r))?t:r});let s=[],a=!1,d={_features:i,options:{...o,...e},initialState:r,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=t4(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(o,t):{...o,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:t8(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},t7(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:t8(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let o=function(e,t,n,i){var l,o;let r,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?r=s.accessorFn:a&&(r=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let c={id:`${String(d)}`,accessorFn:r,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:t8(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},t7(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:t8(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},t7(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(c,e);return c}(l,e,i,n);return o.columns=e.columns?t(e.columns,o,i+1):[],o})};return t(e)},t7(e,"debugColumns","getAllColumns")),getAllFlatColumns:t8(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),t7(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:t8(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),t7(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:t8(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),t7(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,l]=c.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:o,columns:i,getCoreRowModel:e=>t8(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,o){void 0===l&&(l=0);let r=[];for(let a=0;a<t.length;a++){let d=nn(e,e._getRowId(t[a],a,o),t[a],a,l,void 0,null==o?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,r.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return r};return n.rows=i(t),n},t7(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>t8(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,o,r,s,a,d,c,u,p,m;let h,f,g,x,b,y,v,j,w,I;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let S=[],C=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&S.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let _=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(_.push("__global__"),R.forEach(e=>{var t;C.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},S.length)for(let e=0;e<S.length;e++){let t=(h=S[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(C.length){for(let e=0;e<C.length;e++){let t=(f=C[e]).id;if(f.filterFn(n,t,f.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,o=e=>{for(let t=0;t<_.length;t++)if(!1===e.columnFilters[_[t]])return!1;return!0},e.options.filterFromLeafRows?(r=l,s=o,g=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let o=e[l],r=nn(a,o.id,o.original,o.index,o.depth,void 0,o.parentId);if(r.columnFilters=o.columnFilters,null!=(i=o.subRows)&&i.length&&t<b){if(r.subRows=y(o.subRows,t+1),s(o=r)&&!r.subRows.length||s(o)||r.subRows.length){n.push(o),x[o.id]=o,g.push(o);continue}}else s(o=r)&&(n.push(o),x[o.id]=o,g.push(o))}return n})(r),flatRows:g,rowsById:x}):(c=l,u=o,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(I=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let o=e[l];if(u(o)){var i;if(null!=(i=o.subRows)&&i.length&&t<w){let e=nn(p,o.id,o.original,o.index,o.depth,void 0,o.parentId);e.subRows=I(o.subRows,t+1),o=e}n.push(o),v.push(o),j[o.id]=o}}return n})(c),flatRows:v,rowsById:j})},t7(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>t8(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:o}=t,{rows:r,flatRows:s,rowsById:a}=n,d=l*o;if(r=r.slice(d,d+l),e.options.paginateExpandedRows)i={rows:r,flatRows:s,rowsById:a};else{var c;let e,t;c={rows:r,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},c.rows.forEach(t),i={rows:e,flatRows:c.flatRows,rowsById:c.rowsById}}i.flatRows=[];let u=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return i.rows.forEach(u),i},t7(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:l},getRowId:e=>e._id,meta:{selectedAnchor:d,setSelectedAnchor:u,patchDocument:(e,t,n)=>null}}),{rows:g}=m.getRowModel();(0,c.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let x=(0,c.useCallback)(e=>(0,r.jsx)(a.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,r.jsx)(dm,{...t},e.original._id+t.id))},e.original._id+e.id),[]),b=`Total: ${p} rows, showing ${g.length} rows`;return(0,r.jsxs)(dP,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,r.jsxs)(a.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,r.jsxs)(a.Flex,{direction:"row",align:"center",children:[(0,r.jsx)(dj,{}),(0,r.jsx)(a.Text,{size:0,muted:!0,children:b})]}),(0,r.jsx)(dy,{table:m})]}),(0,r.jsx)(dE,{children:(0,r.jsx)(da,{table:m,children:(0,r.jsxs)(dD,{children:[(0,r.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,r.jsx)(a.Box,{as:"tr",children:e.headers.map(t=>(0,r.jsx)(dC,{header:t,headerGroup:e},t.id))},e.id))}),(0,r.jsx)("tbody",{children:m.getRowModel().rows.map(x)})]})})}),(0,r.jsx)(a.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,r.jsx)(d_,{table:m})})]})}function dF(e){let t,n,i,l=(0,s.c)(7),o=(0,f.useSchema)(),a=e.pane.schemaTypeName;if(l[0]!==o||l[1]!==a?(n=!(t=o.get(a))||!(0,g.isDocumentSchemaType)(t),l[0]=o,l[1]=a,l[2]=t,l[3]=n):(t=l[2],n=l[3]),n)throw Error(`Schema type "${a}" not found or not a document schema`);return l[4]!==e||l[5]!==t?(i=(0,r.jsx)(f.SearchProvider,{children:(0,r.jsx)(dk,{...e,documentSchemaType:t})}),l[4]=e,l[5]=t,l[6]=i):i=l[6],i}function dA(e){let[t,n]=(0,c.useState)(e);return(0,ts.default)(t,e)?t:(n(e),e)}let dL=(0,c.memo)(function(e){let t,n,i,l,o,a,d,u,p,m,h,g=(0,s.c)(41),{index:x,isSelected:b,pane:y,paneKey:v}=e,{name:j}=(0,f.useSource)(),{defaultLayout:w,initialValueTemplates:I,menuItemGroups:S,menuItems:C,options:_}=y,T=void 0===I?f.EMPTY_ARRAY:I,{defaultOrdering:R,filter:P}=_,E=void 0===R?f.EMPTY_ARRAY:R,D=dA(_.params||a$),k=y.source;e:{let e;g[0]!==P||g[1]!==D?(e=aX(P,D),g[0]=P,g[1]=D,g[2]=e):e=g[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let F=t,[A,L]=le("layout",F??y.id,void 0===w?"default":w),{title:M}=(0,f.useI18nText)(y);g[3]!==E?(n=E?.length>0?{by:E}:aH,g[3]=E,g[4]=n):n=g[4];let V=n,[O,z]=le("sort-order",F??y.id,V);g[5]===Symbol.for("react.memo_cache_sentinel")?(i={},g[5]=i):i=g[5];let[B,N]=(0,c.useState)(i);g[6]!==C?(l=C?.map(e=>e.id?e:{...e,id:aN(e)}),g[6]=C,g[7]=l):l=g[7];let H=l;g[8]!==B||g[9]!==A||g[10]!==H||g[11]!==O?(o=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i,customMenuItemState:l={}}=e;return t?.map(e=>{if(e.params?.layout)return{...e,selected:i===e.params?.layout};if(e?.params?.by)return{...e,selected:(0,to.isEqual)(n?.by,e?.params?.by||f.EMPTY_ARRAY)};if(e.id&&e.id in l){let t=l[e.id],n=e.params?.value??!0;return{...e,selected:(0,to.isEqual)(t,n)}}return{...e,selected:e.selected??!1}})})({menuItems:H,sortOrderRaw:O,layout:A,customMenuItemState:B}),g[8]=B,g[9]=A,g[10]=H,g[11]=O,g[12]=o):o=g[12];let $=o,U="sheetList"===A;g[13]!==U||g[14]!==A||g[15]!==e||g[16]!==O?(a=U?(0,r.jsx)(dF,{...e},e.pane.id):(0,r.jsx)(dn,{...e,sortOrder:O,layout:A}),g[13]=U,g[14]=A,g[15]=e,g[16]=O,g[17]=a):a=g[17];let G=a,q=k||j;return g[18]!==U?(d=U?{}:{currentMaxWidth:350,maxWidth:640},g[18]=U,g[19]=d):d=g[19],g[20]!==y.source?(u=!1,g[20]=y.source,g[21]=u):u=g[21],g[22]!==B||g[23]!==x||g[24]!==T||g[25]!==S||g[26]!==$||g[27]!==L||g[28]!==z||g[29]!==M?(p=(0,r.jsx)(dr,{customMenuItemState:B,index:x,initialValueTemplates:T,menuItemGroups:S,menuItems:$,setLayout:L,setSortOrder:z,setCustomMenuItemState:N,title:M}),g[22]=B,g[23]=x,g[24]=T,g[25]=S,g[26]=$,g[27]=L,g[28]=z,g[29]=M,g[30]=p):p=g[30],g[31]!==b||g[32]!==v||g[33]!==G||g[34]!==d||g[35]!==u||g[36]!==p?(m=(0,r.jsxs)(ir,{"data-ui":"DocumentListPane",id:v,minWidth:320,...d,selected:b,children:[u,p,G]}),g[31]=b,g[32]=v,g[33]=G,g[34]=d,g[35]=u,g[36]=p,g[37]=m):m=g[37],g[38]!==m||g[39]!==q?(h=(0,r.jsx)(f.SourceProvider,{name:q,children:m}),g[38]=m,g[39]=q,g[40]=h):h=g[40],h});dL.displayName="Memo(PaneContainer)";let dM=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};dM.displayName="LiveEditBadge";let dV={activePanes:[]};function dO(e){dV.activePanes=e}function dz(e,t,n,i){let l=n?.panes||[],o=dV.activePanes||[],r=t.id||(0,eF.uuid)();for(let n=o.length-1;n>=0;n--){let s=o[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let o=function(e,{template:t,version:n,inspect:i,comment:l,task:o,scheduledDraft:r}){switch(e){case"create":return{template:t,version:n};case"edit":return{inspect:i,comment:l,task:o,scheduledDraft:r};default:return l8}}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let dB=(0,eA.styled)(f.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-jiqgdv-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`,dN=(0,eA.styled)(a.Box).withConfig({displayName:"Grid",componentId:"sc-jiqgdv-1"})`&:not([hidden]){display:grid;}grid-template-columns:48px 1fr;align-items:center;gap:0.25em;`;function dH(e){let t,n,i,l,o,d,u,p,m,h,g,x,b=(0,s.c)(39),{showChanges:y}=e,{documentId:v,schemaType:j,timelineError:w,timelineStore:I,value:S}=i$(),{selectedReleaseId:C}=(0,f.usePerspective)(),[_,T]=(0,c.useState)(null),R=(0,f.useTimelineSelector)(I,dK),P=(0,f.useTimelineSelector)(I,dW),E=(0,f.useTimelineSelector)(I,dq),k=(0,f.useTimelineSelector)(I,dG),F=(0,f.useTimelineSelector)(I,dU),A="loading"===k,L=!E,{t:M}=(0,f.useTranslation)(D);b[0]!==P||b[1]!==v||b[2]!==L||b[3]!==j||b[4]!==S?(t={documentId:v,schemaType:j,FieldWrapper:d$,rootDiff:P,isComparingCurrent:L,value:S,showFromValue:!0},b[0]=P,b[1]=v,b[2]=L,b[3]=j,b[4]=S,b[5]=t):t=b[5];let V=t;if(C){let e;return b[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(a.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,r.jsx)(a.Card,{flex:1,padding:2,paddingTop:0,children:(0,r.jsx)(rD,{versionError:!0})})}),b[6]=e):e=b[6],e}return b[7]!==M?(n=M("changes.from.label"),b[7]=M,b[8]=n):n=b[8],b[9]!==n?(i=(0,r.jsx)(a.Text,{size:1,muted:!0,children:n}),b[9]=n,b[10]=i):i=b[10],b[11]!==F?(l=(0,r.jsx)(rA,{mode:"since",chunk:F,placement:"bottom-start"}),b[11]=F,b[12]=l):l=b[12],b[13]!==M?(o=M("changes.to.label"),b[13]=M,b[14]=o):o=b[14],b[15]!==o?(d=(0,r.jsx)(a.Text,{size:1,muted:!0,children:o}),b[15]=o,b[16]=d):d=b[16],b[17]!==R?(u=(0,r.jsx)(rA,{chunk:R,mode:"rev",placement:"bottom-end"}),b[17]=R,b[18]=u):u=b[18],b[19]!==i||b[20]!==l||b[21]!==d||b[22]!==u?(p=(0,r.jsx)(a.Box,{padding:3,children:(0,r.jsxs)(dN,{paddingX:2,paddingBottom:2,children:[i,l,d,u]})}),b[19]=i,b[20]=l,b[21]=d,b[22]=u,b[23]=p):p=b[23],b[24]!==P||b[25]!==V||b[26]!==A||b[27]!==j||b[28]!==y||b[29]!==w?(m=y&&(0,r.jsx)(dY,{diff:P,documentContext:V,error:w,loading:A,schemaType:j}),b[24]=P,b[25]=V,b[26]=A,b[27]=j,b[28]=y,b[29]=w,b[30]=m):m=b[30],b[31]!==m?(h=(0,r.jsx)(dB,{"data-ui":"Scroller",ref:T,children:(0,r.jsx)(a.Box,{flex:1,paddingX:3,height:"fill",children:m})}),b[31]=m,b[32]=h):h=b[32],b[33]!==_||b[34]!==h?(g=(0,r.jsx)(a.Card,{flex:1,paddingX:2,paddingY:2,children:(0,r.jsx)(a.BoundaryElementProvider,{element:_,children:h})}),b[33]=_,b[34]=h,b[35]=g):g=b[35],b[36]!==g||b[37]!==p?(x=(0,r.jsxs)(a.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[p,g]}),b[36]=g,b[37]=p,b[38]=x):x=b[38],x}function d$(e){return(0,r.jsx)(f.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function dU(e){return e.sinceTime}function dG(e){return e.selectionState}function dq(e){return e.onOlderRevision}function dW(e){return e.diff}function dK(e){return e.revTime}function dY(e){let t,n,i=(0,s.c)(9),{error:l,diff:o,documentContext:a,loading:d,schemaType:c}=e;if(l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(f.NoChanges,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(f.LoadingBlock,{showText:!0}),i[1]=e):e=i[1],e}if(!o){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(f.NoChanges,{}),i[2]=e):e=i[2],e}return i[3]!==o||i[4]!==c?(t=(0,r.jsx)(f.ChangeList,{diff:o,schemaType:c}),i[3]=o,i[4]=c,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,r.jsx)(u.DocumentChangeContext.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}function dX(e){let t,n,i,l,o,d,c,u,p=(0,s.c)(27),{event:m,isSelected:h,onSelect:g,optionsMenu:b}=e,{t:y}=(0,f.useTranslation)("studio");p[0]!==m?(t=!(0,f.isDeleteDocumentVersionEvent)(m)&&!(0,f.isDeleteDocumentGroupEvent)(m)&&!(0,f.isUnpublishDocumentEvent)(m)&&!(0,f.isScheduleDocumentVersionEvent)(m)&&!(0,f.isUnscheduleDocumentVersionEvent)(m),p[0]=m,p[1]=t):t=p[1];let v=t;p[2]!==m||p[3]!==v||p[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),v&&g(m)},p[2]=m,p[3]=v,p[4]=g,p[5]=n):n=p[5];let j=n;p[6]!==v||p[7]!==y?(i=v?"":y("changes.not-selectable"),p[6]=v,p[7]=y,p[8]=i):i=p[8];let w=v?"button":"div",I=v?"pointer":"default";return p[9]!==I?(l={cursor:I,width:"100%"},p[9]=I,p[10]=l):l=p[10],p[11]!==m?(o=(0,r.jsx)(f.Event,{event:m,showChangesBy:"tooltip"}),p[11]=m,p[12]=o):o=p[12],p[13]!==m.timestamp||p[14]!==j||p[15]!==h||p[16]!==w||p[17]!==l||p[18]!==o?(d=(0,r.jsx)(a.Card,{as:w,onClick:j,padding:2,pressed:h,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":m.timestamp,style:l,children:o}),p[13]=m.timestamp,p[14]=j,p[15]=h,p[16]=w,p[17]=l,p[18]=o,p[19]=d):d=p[19],p[20]!==v||p[21]!==i||p[22]!==d?(c=(0,r.jsx)(x.Tooltip,{content:i,disabled:v,children:d}),p[20]=v,p[21]=i,p[22]=d,p[23]=c):c=p[23],p[24]!==b||p[25]!==c?(u=(0,r.jsxs)(a.Flex,{gap:1,children:[c,b]}),p[24]=b,p[25]=c,p[26]=u):u=p[26],u}function dQ(e){let t,n,i,l,o,d,c,u,p,m,g,y,v,j=(0,s.c)(47),{event:w}=e,{t:I}=(0,f.useTranslation)(D),{t:S}=(0,f.useTranslation)(),C=(0,a.usePortal)(),{params:_,setParams:T}=lA(),R=(0,f.useSetPerspective)(),{document:P}=(0,f.useWorkspace)(),{drafts:E}=P,{enabled:k}=E;j[0]!==w.id||j[1]!==w.versionId||j[2]!==w.versionRevisionId||j[3]!==_||j[4]!==T?(t=()=>{T({..._,rev:w.versionRevisionId||"@lastPublished",since:void 0,historyEvent:w.id,historyVersion:(0,h.getVersionFromId)(w.versionId)})},j[0]=w.id,j[1]=w.versionId,j[2]=w.versionRevisionId,j[3]=_,j[4]=T,j[5]=t):t=j[5];let F=t;j[6]!==w.versionRevisionId||j[7]!==k||j[8]!==_||j[9]!==T||j[10]!==R?(n=()=>{T({..._,rev:w.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{R(k?"drafts":"published")},100)},j[6]=w.versionRevisionId,j[7]=k,j[8]=_,j[9]=T,j[10]=R,j[11]=n):n=j[11];let A=n,L=w.release?.metadata?.title;j[12]!==S?(i=S("release.placeholder-untitled-release"),j[12]=S,j[13]=i):i=j[13];let M=i;j[14]!==w.release?(l=e=>{let{children:t}=e;return(0,r.jsx)(f.VersionInlineBadge,{$tone:w.release?(0,f.isReleaseDocument)(w.release)?(0,f.getReleaseTone)(w.release):"default":void 0,children:t})},j[14]=w.release,j[15]=l):l=j[15];let V=l;j[16]!==w.release?(o=w.release&&!(0,f.isReleaseDocument)(w.release),j[16]=w.release,j[17]=o):o=j[17];let O=o,z=`timeline-item-menu-button-${w.versionId}`;j[18]!==I?(d=I("timeline-item.menu-button.aria-label"),j[18]=I,j[19]=d):d=j[19],j[20]!==w.release||j[21]!==O||j[22]!==I?(c=O?I("timeline-item.not-found-release.tooltip",{releaseId:w.release?._id?(0,f.getReleaseIdFromReleaseDocumentId)(w.release._id):void 0}):I("timeline-item.menu-button.tooltip"),j[20]=w.release,j[21]=O,j[22]=I,j[23]=c):c=j[23],j[24]!==c?(u={content:c},j[24]=c,j[25]=u):u=j[25],j[26]!==O||j[27]!==u||j[28]!==d?(p=(0,r.jsx)(f.ContextMenuButton,{"aria-label":d,tooltipProps:u,disabled:O}),j[26]=O,j[27]=u,j[28]=d,j[29]=p):p=j[29],j[30]!==V||j[31]!==w.release||j[32]!==w.versionRevisionId||j[33]!==A||j[34]!==F||j[35]!==M||j[36]!==L||j[37]!==I?(m=(0,r.jsx)(a.Menu,{padding:1,children:w.release?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.IntentLink,{intent:f.RELEASES_INTENT,params:{id:(0,f.getReleaseIdFromReleaseDocumentId)(w.release._id)},style:{textDecoration:"none"},children:(0,r.jsx)(a.MenuItem,{padding:3,children:(0,r.jsx)(a.Flex,{align:"center",justify:"flex-start",children:(0,r.jsx)(a.Text,{size:1,style:{textDecoration:"none"},children:(0,r.jsx)(f.ReleaseTitle,{title:L,fallback:M,children:e=>{let{displayTitle:t}=e;return(0,r.jsx)(f.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,r.jsx)(V,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:t},t:I})}})})})})}),(0,r.jsx)(a.MenuItem,{onClick:F,children:(0,r.jsx)(a.Flex,{align:"center",justify:"flex-start",children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.ReleaseTitle,{title:L,fallback:M,children:e=>{let{displayTitle:t}=e;return(0,r.jsx)(f.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,r.jsx)(V,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:t},t:I})}})})})})]}):(0,r.jsx)(a.MenuItem,{onClick:A,disabled:!w.versionRevisionId,children:(0,r.jsx)(a.Flex,{align:"center",children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{components:{VersionBadge:dJ},i18nKey:"events.open.draft",t:I})})})})}),j[30]=V,j[31]=w.release,j[32]=w.versionRevisionId,j[33]=A,j[34]=F,j[35]=M,j[36]=L,j[37]=I,j[38]=m):m=j[38];let B=!C.elements?.[rF]||rF;return j[39]===Symbol.for("react.memo_cache_sentinel")?(g=["bottom-end","bottom-start"],j[39]=g):g=j[39],j[40]!==B?(y={portal:B,placement:"bottom",fallbackPlacements:g},j[40]=B,j[41]=y):y=j[41],j[42]!==p||j[43]!==m||j[44]!==y||j[45]!==z?(v=(0,r.jsx)(x.MenuButton,{id:z,button:p,menu:m,popover:y}),j[42]=p,j[43]=m,j[44]=y,j[45]=z,j[46]=v):v=j[46],v}function dJ(e){let{children:t}=e;return(0,r.jsx)(f.VersionInlineBadge,{$tone:"caution",children:t})}let dZ=p.motion.create(a.Box),d0={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},d1=e=>{let t,n,i,l,o,d,u,p,m,h,g,x,b=(0,s.c)(38),{events:y,hasMoreEvents:v,selectedEventId:j,onLoadMore:w,onSelect:I,listMaxHeight:S,fetchEventChildren:C}=e,_=void 0===S?"calc(100vh - 280px)":S,[T,R]=(0,c.useState)(!1),{t:P}=(0,f.useTranslation)("studio");b[0]!==y||b[1]!==j?(t=()=>{if(j){let e=y.find(e=>e.id===j);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set},b[0]=y,b[1]=j,b[2]=t):t=b[2];let[E,D]=(0,c.useState)(t);b[3]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,b[3]=n):n=b[3];let[k,F]=(0,c.useState)(n);b[4]!==y||b[5]!==E?(i=y.filter(e=>(0,f.isCreateDocumentVersionEvent)(e)&&e.parentId?y[y.length-1].id===e.id||E.has(e.parentId):!(0,f.isEditDocumentVersionEvent)(e)||!e.parentId||E.has(e.parentId)),b[4]=y,b[5]=E,b[6]=i):i=b[6];let A=i;b[7]!==C?(l=e=>async()=>{let t=e.id,n=!1;D(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(F(e=>{let n=new Set(e);return n.add(t),n}),await C(e),F(e=>{let n=new Set(e);return n.delete(t),n}))},b[7]=C,b[8]=l):l=b[8];let L=l;b[9]!==I?(o=e=>{I(e)},b[9]=I,b[10]=o):o=b[10];let M=o;b[11]!==E||b[12]!==L?(d=e=>{let t=(0,f.getDocumentVariantType)(e.documentId);return(0,f.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,r.jsx)(dQ,{event:e}):(0,f.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,f.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,r.jsx)(rm,{isExpanded:E.has(e.id),onExpand:L(e)}):null},b[11]=E,b[12]=L,b[13]=d):d=b[13];let V=d;b[14]!==A.length||b[15]!==k||b[16]!==M||b[17]!==v||b[18]!==V||b[19]!==j?(u=(e,t)=>{let{activeIndex:n}=t,i=(0,f.isCreateDocumentVersionEvent)(e)&&e.parentId&&k.has(e.parentId),l=n===A.length-1;return i?(0,r.jsx)(dZ,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,r.jsx)(a.Flex,{align:"center",justify:"center",style:{height:57},children:(0,r.jsx)(a.Spinner,{})})}):(0,r.jsxs)(dZ,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?d0:void 0,paddingLeft:((0,f.isEditDocumentVersionEvent)(e)||(0,f.isCreateDocumentVersionEvent)(e))&&e.parentId&&!l?4:1,children:[(0,r.jsx)(dX,{event:e,isSelected:e.id===j,onSelect:M,optionsMenu:V(e)}),l&&v&&(0,r.jsx)(f.LoadingBlock,{})]},e.timestamp)},b[14]=A.length,b[15]=k,b[16]=M,b[17]=v,b[18]=V,b[19]=j,b[20]=u):u=b[20];let O=u;if(b[21]===Symbol.for("react.memo_cache_sentinel")?(m=()=>R(!0),p=[],b[21]=p,b[22]=m):(p=b[21],m=b[22]),(0,c.useEffect)(m,p),b[23]!==A||b[24]!==j){let e;b[26]!==j?(e=e=>e.id===j,b[26]=j,b[27]=e):e=b[27],h=A.findIndex(e),b[23]=A,b[24]=j,b[25]=h}else h=b[25];let z=h,B=!z||T;return b[28]!==A||b[29]!==_||b[30]!==w||b[31]!==O||b[32]!==z||b[33]!==P?(g=A.length>0?(0,r.jsx)(rf,{direction:"column",$maxHeight:_,id:"timeline-list-wrapper",children:(0,r.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:P("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:A,onEndReached:w,onEndReachedIndexOffset:20,overscan:5,renderItem:O,wrapAround:!1})}):(0,r.jsxs)(a.Stack,{padding:3,space:3,children:[(0,r.jsx)(a.Text,{size:1,weight:"medium",children:P("timeline.error.no-document-history-title")}),(0,r.jsx)(a.Text,{muted:!0,size:1,children:P("timeline.error.no-document-history-description")})]}),b[28]=A,b[29]=_,b[30]=w,b[31]=O,b[32]=z,b[33]=P,b[34]=g):g=b[34],b[35]!==B||b[36]!==g?(x=(0,r.jsx)(rg,{$visible:B,"data-ui":"timeline",children:g}),b[35]=B,b[36]=g,b[37]=x):x=b[37],x};d1.displayName="EventsTimeline";let d2=(0,eA.styled)(x.Popover).withConfig({displayName:"Root",componentId:"sc-mrgvta-0"})`overflow:hidden;overflow:clip;`,d3={timestamp:{dateStyle:"medium",timeStyle:"short"}};function d4(e){let t,n,i,l,o,u,p,m,h,g,b,y,j,w,I,S,C=(0,s.c)(58),{event:_,events:T,mode:R,placement:P}=e,{setTimelineRange:E}=i$(),[D,k]=(0,c.useState)(!1),[F,A]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),V=(0,d.useToast)(),{nextCursor:O,loading:z,error:B,findRangeForRevision:N,findRangeForSince:H,loadMoreEvents:$,expandEvent:U}=(0,f.useEvents)(),{t:G}=(0,f.useTranslation)("studio");C[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{k(!0)},C[0]=t):t=C[0];let q=t;C[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{k(!1)},C[1]=n):n=C[1];let W=n;C[2]!==F||C[3]!==D?(i=e=>{D&&("Escape"===e.key||"Tab"===e.key)&&(W(),F?.focus())},C[2]=F,C[3]=D,C[4]=i):i=C[4],(0,a.useGlobalKeyDown)(i),C[5]!==F||C[6]!==L?(l=()=>[F,L],C[5]=F,C[6]=L,C[7]=l):l=C[7],(0,a.useClickOutsideEvent)(D&&W,l),C[8]!==N||C[9]!==E||C[10]!==G||C[11]!==V?(o=e=>{try{(()=>{if((0,f.isDeleteDocumentVersionEvent)(e)||(0,f.isDeleteDocumentGroupEvent)(e)||(0,f.isUnpublishDocumentEvent)(e)||(0,f.isScheduleDocumentVersionEvent)(e)||(0,f.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=N(e?.id);E(t,n),W()})()}catch(e){V.push({closable:!0,description:e.message,status:"error",title:G("timeline.error.unable-to-load-revision")})}},C[8]=N,C[9]=E,C[10]=G,C[11]=V,C[12]=o):o=C[12];let K=o;C[13]!==H||C[14]!==E||C[15]!==G||C[16]!==V?(u=e=>{try{let[t,n]=H(e.id);E(t,n),W()}catch(e){V.push({closable:!0,description:e.message,status:"error",title:G("timeline.error.unable-to-load-revision")})}},C[13]=H,C[14]=E,C[15]=G,C[16]=V,C[17]=u):u=C[17];let Y=u;C[18]!==$||C[19]!==z||C[20]!==O?(p=()=>{!z&&O&&$()},C[18]=$,C[19]=z,C[20]=O,C[21]=p):p=C[21];let X=p;e:{let e;if(B){let e;C[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(rD,{}),C[22]=e):e=C[22],m=e;break e}let t=!!O,n=_?.id,i="rev"===R?K:Y;C[23]!==T||C[24]!==U||C[25]!==X||C[26]!==n||C[27]!==i||C[28]!==t?(e=(0,r.jsx)(d1,{events:T,fetchEventChildren:U,hasMoreEvents:t,selectedEventId:n,onLoadMore:X,onSelect:i}),C[23]=T,C[24]=U,C[25]=X,C[26]=n,C[27]=i,C[28]=t,C[29]=e):e=C[29],m=e}let Q=m;C[30]!==_||C[31]!==G?(h=_?G(f.TIMELINE_ITEM_I18N_KEY_MAPPING[_.documentVariantType][_.type],{context:"timestamp",timestamp:new Date(_.timestamp),formatParams:d3}):G("timeline.latest-revision"),C[30]=_,C[31]=G,C[32]=h):h=C[32];let J=h;C[33]!==_||C[34]!==T||C[35]!==G?(g=_?G(f.TIMELINE_ITEM_I18N_KEY_MAPPING[_.documentVariantType][_.type],{context:"timestamp",timestamp:new Date(_.timestamp),formatParams:d3}):T.length>0?G("timeline.since-version-missing"):G("timeline.no-previous-events"),C[33]=_,C[34]=T,C[35]=G,C[36]=g):g=C[36];let Z="rev"===R?J:g;C[37]!==L?(b={"timeline-menu":L},C[37]=L,C[38]=b):b=C[38];let ee=b,et=D&&Q,en=D?"timeline-menu-close-button":"timeline-menu-open-button",ei=z||!T.length,el=D?W:q;return C[39]===Symbol.for("react.memo_cache_sentinel")?(y={maxWidth:"100%"},C[39]=y):y=C[39],C[40]!==Z||C[41]!==z||C[42]!==G?(j=z?G("timeline.loading-history"):Z,C[40]=Z,C[41]=z,C[42]=G,C[43]=j):j=C[43],C[44]!==D||C[45]!==en||C[46]!==ei||C[47]!==el||C[48]!==j?(w=(0,r.jsx)(a.Flex,{width:"fill",children:(0,r.jsx)(x.Button,{"data-testid":en,disabled:ei,mode:"ghost",onClick:el,ref:A,selected:D,width:"fill",tooltipProps:null,justify:"space-between",style:y,iconRight:v.ChevronDownIcon,text:j})}),C[44]=D,C[45]=en,C[46]=ei,C[47]=el,C[48]=j,C[49]=w):w=C[49],C[50]!==D||C[51]!==P||C[52]!==et||C[53]!==w?(I=(0,r.jsx)(d2,{"data-testid":"timeline-menu",constrainSize:!0,content:et,"data-ui":"versionMenu",open:D,placement:P,matchReferenceWidth:!0,portal:!0,ref:M,children:w}),C[50]=D,C[51]=P,C[52]=et,C[53]=w,C[54]=I):I=C[54],C[55]!==ee||C[56]!==I?(S=(0,r.jsx)(a.PortalProvider,{__unstable_elements:ee,children:I}),C[55]=ee,C[56]=I,C[57]=S):S=C[57],S}let d5=(0,eA.styled)(f.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-qjtu5v-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`,d6=(0,eA.styled)(a.Box).withConfig({displayName:"Grid",componentId:"sc-qjtu5v-1"})`&:not([hidden]){display:grid;}grid-template-columns:48px 1fr;align-items:center;gap:0.25em;`,d8=(0,eA.styled)(a.Flex).withConfig({displayName:"SpinnerContainer",componentId:"sc-qjtu5v-2"})`width:100%;position:absolute;bottom:-4px;`,d7={diff:null,loading:!0,error:null},d9=()=>{let e,t,n,i,l,o,d,c,p,m,h,g=(0,s.c)(31),{documentId:x,schemaType:b,editState:y,displayed:v}=i$(),{selectedPerspective:j,selectedPerspectiveName:w,selectedReleaseId:I}=(0,f.usePerspective)(),{t:S}=(0,f.useTranslation)(D);g[0]!==v||g[1]!==y?.published?(e=(0,eL.diffInput)((0,eL.wrap)(y?.published??{},{author:""}),(0,eL.wrap)(v??{},{author:""})),g[0]=v,g[1]=y?.published,g[2]=e):e=g[2];let C=e;return(!I||y?.version)&&("drafts"!==j||y?.draft)&&"published"!==w&&v?._rev?(g[3]!==S?(t=S("events.compare-with-published.title"),g[3]=S,g[4]=t):t=g[4],g[5]!==t?(n=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:t}),g[5]=t,g[6]=n):n=g[6],g[7]!==j?(i=(0,f.isReleaseDocument)(j)?j.metadata?.title:"draft",g[7]=j,g[8]=i):i=g[8],g[9]!==i?(l={version:i},g[9]=i,g[10]=l):l=g[10],g[11]!==S||g[12]!==l?(o=(0,r.jsx)(a.Text,{size:1,muted:!0,children:(0,r.jsx)(f.Translate,{i18nKey:"events.compare-with-published.description",t:S,values:l})}),g[11]=S,g[12]=l,g[13]=o):o=g[13],g[14]!==n||g[15]!==o?(d=(0,r.jsx)(a.Card,{borderBottom:!0,paddingBottom:3,children:(0,r.jsxs)(a.Stack,{space:3,paddingTop:1,children:[n,o]})}),g[14]=n,g[15]=o,g[16]=d):d=g[16],g[17]!==v||g[18]!==x||g[19]!==C||g[20]!==b?(c={documentId:x,schemaType:b,rootDiff:C,isComparingCurrent:!0,FieldWrapper:cl,value:v,showFromValue:!0},g[17]=v,g[18]=x,g[19]=C,g[20]=b,g[21]=c):c=g[21],g[22]!==C||g[23]!==b?(p=(0,r.jsx)(a.Box,{paddingY:1,children:(0,r.jsx)(f.ChangeList,{diff:C,schemaType:b})}),g[22]=C,g[23]=b,g[24]=p):p=g[24],g[25]!==c||g[26]!==p?(m=(0,r.jsx)(u.DocumentChangeContext.Provider,{value:c,children:p}),g[25]=c,g[26]=p,g[27]=m):m=g[27],g[28]!==d||g[29]!==m?(h=(0,r.jsxs)(a.Stack,{space:2,marginBottom:3,children:[d,m]}),g[28]=d,g[29]=m,g[30]=h):h=g[30],h):null};function ce(e){let t,n,i,l,o,d,u,m,h,g,x,b,y,v,j,w,I,S,C,_=(0,s.c)(83),{showChanges:T}=e,{documentId:R,schemaType:P,timelineError:E,value:D,formState:k}=i$(),[F,A]=(0,c.useState)(null),{events:L,revision:M,sinceRevision:V,getChangesList:O}=(0,f.useEvents)(),z=!M?.revisionId;_[0]!==O?(t=O(),_[0]=O,_[1]=t):t=_[1];let B=t,{diff:N,loading:H,error:$}=(0,eM.useObservable)(B,d7),{t:U}=(0,f.useTranslation)("studio");_[2]!==N||_[3]!==R||_[4]!==k?.readOnly||_[5]!==z||_[6]!==P||_[7]!==D?(n=()=>({documentId:R,schemaType:P,FieldWrapper:ct,rootDiff:N,isComparingCurrent:z&&!k?.readOnly,value:D,showFromValue:!0}),_[2]=N,_[3]=R,_[4]=k?.readOnly,_[5]=z,_[6]=P,_[7]=D,_[8]=n):n=_[8],_[9]!==n?(i=n(),_[9]=n,_[10]=i):i=_[10];let G=i;e:{let e,t,n;if(!L){let e;_[11]===Symbol.for("react.memo_cache_sentinel")?(e=[null,null],_[11]=e):e=_[11],l=e;break e}_[12]!==L||_[13]!==V?.revisionId?(e=L.find(e=>e.id===V?.revisionId)||null,_[12]=L,_[13]=V?.revisionId,_[14]=e):e=_[14],_[15]!==L||_[16]!==M?.revisionId?(t=L.find(e=>e.id===M?.revisionId)||L[0],_[15]=L,_[16]=M?.revisionId,_[17]=t):t=_[17],_[18]!==e||_[19]!==t?(n=[e,t],_[18]=e,_[19]=t,_[20]=n):n=_[20],l=n}let[q,W]=l;t:{let e;if(!W){let e;_[21]!==L?(e=L.slice(1),_[21]=L,_[22]=e):e=_[22],o=e;break t}if(_[23]!==L||_[24]!==W){let t;_[26]!==W?(t=e=>"parentId"in W&&"parentId"in e&&e.parentId===W.parentId||"parentId"in e&&W.id===e.parentId?{...e,parentId:void 0}:e,_[26]=W,_[27]=t):t=_[27],e=L.slice(L.indexOf(W)+1).map(t),_[23]=L,_[24]=W,_[25]=e}else e=_[25];o=e}let K=o;if(!L.length){let e,t,n,i,l;return _[28]!==U?(e=U("timeline.error.no-document-history-title"),_[28]=U,_[29]=e):e=_[29],_[30]!==e?(t=(0,r.jsx)(a.Text,{size:1,weight:"medium",children:e}),_[30]=e,_[31]=t):t=_[31],_[32]!==U?(n=U("timeline.error.no-document-history-description"),_[32]=U,_[33]=n):n=_[33],_[34]!==n?(i=(0,r.jsx)(a.Text,{muted:!0,size:1,children:n}),_[34]=n,_[35]=i):i=_[35],_[36]!==t||_[37]!==i?(l=(0,r.jsx)(a.Box,{paddingX:2,children:(0,r.jsxs)(a.Stack,{padding:3,space:3,children:[t,i]})}),_[36]=t,_[37]=i,_[38]=l):l=_[38],l}_[39]===Symbol.for("react.memo_cache_sentinel")?(d={position:"relative"},_[39]=d):d=_[39],_[40]!==U?(u=U("changes.inspector.from-label"),_[40]=U,_[41]=u):u=_[41],_[42]!==u?(m=(0,r.jsx)(a.Text,{size:1,muted:!0,children:u}),_[42]=u,_[43]=m):m=_[43];let Y=q||null;_[44]!==K||_[45]!==Y?(h=(0,r.jsx)(d4,{event:Y,events:K,mode:"since",placement:"bottom-start"}),_[44]=K,_[45]=Y,_[46]=h):h=_[46],_[47]!==U?(g=U("changes.inspector.to-label"),_[47]=U,_[48]=g):g=_[48],_[49]!==g?(x=(0,r.jsx)(a.Text,{size:1,muted:!0,children:g}),_[49]=g,_[50]=x):x=_[50];let X=W||null;return _[51]!==L||_[52]!==X?(b=(0,r.jsx)(d4,{event:X,events:L,mode:"rev",placement:"bottom-end"}),_[51]=L,_[52]=X,_[53]=b):b=_[53],_[54]!==h||_[55]!==x||_[56]!==b||_[57]!==m?(y=(0,r.jsxs)(d6,{paddingX:2,paddingBottom:2,children:[m,h,x,b]}),_[54]=h,_[55]=x,_[56]=b,_[57]=m,_[58]=y):y=_[58],_[59]!==H||_[60]!==U?(v=H&&(0,r.jsx)(p.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,r.jsxs)(d8,{justify:"center",align:"center",gap:2,children:[(0,r.jsx)(a.Text,{muted:!0,size:0,children:U("changes.loading-changes")}),(0,r.jsx)(a.Spinner,{size:0})]})}),_[59]=H,_[60]=U,_[61]=v):v=_[61],_[62]!==y||_[63]!==v?(j=(0,r.jsxs)(a.Box,{padding:3,style:d,children:[y,v]}),_[62]=y,_[63]=v,_[64]=j):j=_[64],_[65]!==$||_[66]!==G||_[67]!==M?.loading||_[68]!==P||_[69]!==T||_[70]!==q||_[71]!==V?.loading||_[72]!==E||_[73]!==W?.id?(w=T&&(0,r.jsx)(cn,{documentContext:G,error:E||$,loading:M?.loading||V?.loading||!1,schemaType:P,sameRevisionSelected:q?.id===W?.id,sinceEvent:q}),_[65]=$,_[66]=G,_[67]=M?.loading,_[68]=P,_[69]=T,_[70]=q,_[71]=V?.loading,_[72]=E,_[73]=W?.id,_[74]=w):w=_[74],_[75]!==w?(I=(0,r.jsx)(d5,{"data-ui":"Scroller",ref:A,children:(0,r.jsx)(a.Box,{flex:1,paddingX:3,height:"fill",children:w})}),_[75]=w,_[76]=I):I=_[76],_[77]!==F||_[78]!==I?(S=(0,r.jsx)(a.Card,{flex:1,paddingX:2,paddingY:2,children:(0,r.jsx)(a.BoundaryElementProvider,{element:F,children:I})}),_[77]=F,_[78]=I,_[79]=S):S=_[79],_[80]!==j||_[81]!==S?(C=(0,r.jsxs)(a.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[j,S]}),_[80]=j,_[81]=S,_[82]=C):C=_[82],C}function ct(e){return e.path.length>0?(0,r.jsx)(f.ChangeFieldWrapper,{...e}):e.children}function cn(e){let t,n,i=(0,s.c)(15),{error:l,documentContext:o,loading:d,schemaType:c,sameRevisionSelected:m,sinceEvent:h}=e;if(l){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d9,{}),i[0]=e):e=i[0],i[1]!==l||i[2]!==h?.type?(t=h?.type!=="historyCleared"&&(0,r.jsx)(f.ChangesError,{error:l}),i[1]=l,i[2]=h?.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,r.jsxs)(r.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(d){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(f.LoadingBlock,{showText:!0}),i[6]=e):e=i[6],e}if(m){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ci,{}),i[7]=e):e=i[7],e}if(!o.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(p.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,r.jsx)(f.NoChanges,{})}),i[8]=e):e=i[8],e}return i[9]!==o.rootDiff||i[10]!==c?(t=(0,r.jsx)(a.Box,{paddingY:1,children:(0,r.jsx)(f.ChangeList,{diff:o.rootDiff,schemaType:c})}),i[9]=o.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==o||i[13]!==t?(n=(0,r.jsx)(u.DocumentChangeContext.Provider,{value:o,children:t}),i[12]=o,i[13]=t,i[14]=n):n=i[14],n}function ci(){let e,t,n,i,l,o,d,c=(0,s.c)(12),{t:u}=(0,f.useTranslation)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(l=(0,r.jsx)(a.Text,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=l):l=c[6],c[7]!==u?(o=(0,r.jsx)(a.Text,{as:"p",size:1,muted:!0,children:(0,r.jsx)(f.Translate,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=o):o=c[8],c[9]!==l||c[10]!==o?(d=(0,r.jsx)(p.motion.div,{animate:e,initial:t,transition:n,children:(0,r.jsxs)(a.Stack,{space:3,paddingTop:2,children:[l,o]})}),c[9]=l,c[10]=o,c[11]=d):d=c[11],d}function cl(e){return e.children}let co=(0,eA.styled)(f.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-1f5fnfo-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`;function cr(e){let t,n,i,l=(0,s.c)(21),{showList:o}=e,[u,p]=(0,c.useState)(null),[m,h]=(0,c.useState)(0),{setTimelineRange:g}=i$();l[0]!==m?(t=e=>{!m&&e&&(h(e.clientHeight?e.clientHeight-1:0),p(e))},l[0]=m,l[1]=t):t=l[1];let x=t,{events:b,nextCursor:y,loading:v,error:j,revision:w,loadMoreEvents:I,findRangeForRevision:S,expandEvent:C}=(0,f.useEvents)(),{t:_}=(0,f.useTranslation)("studio"),T=(0,d.useToast)();l[2]!==S||l[3]!==g||l[4]!==_||l[5]!==T?(n=e=>{try{(()=>{if((0,f.isDeleteDocumentVersionEvent)(e)||(0,f.isDeleteDocumentGroupEvent)(e)||(0,f.isUnpublishDocumentEvent)(e)||(0,f.isScheduleDocumentVersionEvent)(e)||(0,f.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=S(e.id);g(t,n)})()}catch(e){T.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},l[2]=S,l[3]=g,l[4]=_,l[5]=T,l[6]=n):n=l[6];let R=n,P=v&&!b.length;return l[7]!==j||l[8]!==b||l[9]!==C||l[10]!==x||l[11]!==P||l[12]!==m||l[13]!==I||l[14]!==v||l[15]!==y||l[16]!==w?.revisionId||l[17]!==u||l[18]!==R||l[19]!==o?(i=(0,r.jsx)(a.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,r.jsx)(a.Card,{flex:1,padding:2,paddingTop:0,children:j?(0,r.jsx)(rD,{}):(0,r.jsx)(a.BoundaryElementProvider,{element:u,children:(0,r.jsxs)(co,{"data-ui":"Scroller",ref:x,children:[m&&o&&!P?(0,r.jsx)(d1,{events:b,fetchEventChildren:C,hasMoreEvents:!!y,selectedEventId:w?.revisionId||b[0]?.id,onLoadMore:I,onSelect:R,listMaxHeight:`${m}px`}):null,v&&(0,r.jsx)(f.LoadingBlock,{})]})})})}),l[7]=j,l[8]=b,l[9]=C,l[10]=x,l[11]=P,l[12]=m,l[13]=I,l[14]=v,l[15]=y,l[16]=w?.revisionId,l[17]=u,l[18]=R,l[19]=o,l[20]=i):i=l[20],i}let cs=(0,eA.styled)(f.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-1ey5vbx-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`;function ca(e){let t,n,i,l,o=(0,s.c)(20),{showList:u}=e,{timelineError:p,setTimelineRange:m,timelineStore:h}=i$(),{selectedReleaseId:g}=(0,f.usePerspective)(),[x,b]=(0,c.useState)(null),[y,v]=(0,c.useState)(0);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e?.clientHeight&&(v(e.clientHeight-1),b(e))},o[0]=t):t=o[0];let j=t,w=(0,f.useTimelineSelector)(h,cp),I=(0,f.useTimelineSelector)(h,cu),S=(0,f.useTimelineSelector)(h,cc),C=(0,f.useTimelineSelector)(h,cd),{t:_}=(0,f.useTranslation)("studio"),T=(0,d.useToast)();o[1]!==m||o[2]!==_||o[3]!==h||o[4]!==T?(n=e=>{try{(()=>{let[t,n]=h?.findRangeForRev(e)||[null,null];m(t,n)})()}catch(e){T.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},o[1]=m,o[2]=_,o[3]=h,o[4]=T,o[5]=n):n=o[5];let R=n;o[6]!==C||o[7]!==h?(i=()=>{C||h?.loadMore()},o[6]=C,o[7]=h,o[8]=i):i=o[8];let P=i;return o[9]!==w||o[10]!==P||o[11]!==S||o[12]!==y||o[13]!==I||o[14]!==x||o[15]!==R||o[16]!==g||o[17]!==u||o[18]!==p?(l=(0,r.jsx)(a.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,r.jsx)(a.Card,{flex:1,padding:2,paddingTop:0,children:p||g?(0,r.jsx)(rD,{versionError:!!g}):(0,r.jsx)(a.BoundaryElementProvider,{element:x,children:(0,r.jsx)(cs,{"data-ui":"Scroller",ref:j,children:y&&u?(0,r.jsx)(rE,{chunks:w,hasMoreChunks:S,lastChunk:I,onLoadMore:P,onSelect:R,listMaxHeight:`${y}px`}):null})})})}),o[9]=w,o[10]=P,o[11]=S,o[12]=y,o[13]=I,o[14]=x,o[15]=R,o[16]=g,o[17]=u,o[18]=p,o[19]=l):l=o[19],l}function cd(e){return e.isLoading}function cc(e){return e.hasMoreChunks}function cu(e){return e.realRevChunk}function cp(e){return e.chunks}let cm=(0,eA.styled)(a.Flex).withConfig({displayName:"FadeInFlex",componentId:"sc-a5131c-0"})`opacity:0;transition:opacity 200ms;&[data-ready]{opacity:1;}`,ch=["history","review"],cf=p.motion.create(a.Flex),cg=e=>{let t,n,i,l,o,d,c=(0,s.c)(25),{t:u}=(0,f.useTranslation)(D),{document:p,referenceToId:m}=e;c[0]!==p||c[1]!==m?(t=(0,f.getReferencePaths)(p,m),c[0]=p,c[1]=m,c[2]=t):t=c[2];let g=t,x=p._id,y=(0,f.useSchema)(),{navigate:v}=(0,b.useRouter)(),{routerPanesState:j,groupIndex:w}=lA(),I=p?._type;c[3]!==w||c[4]!==x||c[5]!==v||c[6]!==g||c[7]!==j||c[8]!==I?(n=()=>{I&&v({panes:[...j.slice(0,w+1),[{id:(0,h.getPublishedId)(x),params:{type:I,path:(0,f.pathToString)(g[0])}}]]})},c[3]=w,c[4]=x,c[5]=v,c[6]=g,c[7]=j,c[8]=I,c[9]=n):n=c[9];let S=n;c[10]!==p._type||c[11]!==y?(i=y.get(p._type),c[10]=p._type,c[11]=y,c[12]=i):i=c[12];let C=i;if(!C){let e,t;return c[13]!==p._type||c[14]!==u?(e=u("incoming-references-pane.schema-type-not-found",{type:p._type}),c[13]=p._type,c[14]=u,c[15]=e):e=c[15],c[16]!==e?(t=(0,r.jsx)(a.Card,{radius:2,tone:"critical",children:(0,r.jsx)(a.Box,{paddingY:4,paddingX:3,children:(0,r.jsx)(a.Text,{size:1,children:e})})}),c[16]=e,c[17]=t):t=c[17],t}return c[18]===Symbol.for("react.memo_cache_sentinel")?(l={opacity:0},o={opacity:1},c[18]=l,c[19]=o):(l=c[18],o=c[19]),c[20]!==p||c[21]!==S||c[22]!==g[0]||c[23]!==C?(d=(0,r.jsx)(a.Card,{radius:2,tone:"default",children:(0,r.jsx)(cf,{initial:l,animate:o,gap:1,align:"center",children:(0,r.jsx)(a.Box,{flex:1,children:(0,r.jsx)(az,{type:C,value:p,onClick:S,path:g[0]})})})}),c[20]=p,c[21]=S,c[22]=g[0],c[23]=C,c[24]=d):d=c[24],d};function cx(e){let t,n,i,l,o=(0,s.c)(16),{type:d,documents:c,renderItem:u,getItemKey:p,emptyMessage:m}=e,h=(0,f.useSchema)(),{t:g}=(0,f.useTranslation)(D);o[0]!==h||o[1]!==d?(t=h.get(d),o[0]=h,o[1]=d,o[2]=t):t=o[2];let x=t?.title||d;return o[3]!==x?(n=(0,r.jsx)(a.Flex,{align:"center",justify:"space-between",paddingBottom:2,gap:2,children:(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsx)(a.Text,{size:1,weight:"medium",children:x})})}),o[3]=x,o[4]=n):n=o[4],o[5]!==c||o[6]!==m||o[7]!==p||o[8]!==u||o[9]!==g||o[10]!==x?(i=c.length>0?(0,r.jsx)(a.Card,{radius:2,padding:1,border:!0,tone:"default",children:(0,r.jsx)(aL,{$itemCount:c.length,children:(0,r.jsx)(f.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:g("incoming-references-input.list-label",{type:x}),canReceiveFocus:!0,fixedHeight:!0,getItemKey:p,itemHeight:51,items:c,onlyShowSelectionWhenActive:!0,overscan:5,renderItem:u,wrapAround:!1})})}):(0,r.jsx)(a.Box,{padding:0,children:(0,r.jsx)(a.Card,{border:!0,radius:3,padding:1,tone:"default",children:(0,r.jsx)(a.Box,{paddingY:3,paddingX:2,children:(0,r.jsx)(a.Text,{size:1,muted:!0,children:m})})})}),o[5]=c,o[6]=m,o[7]=p,o[8]=u,o[9]=g,o[10]=x,o[11]=i):i=o[11],o[12]!==n||o[13]!==i||o[14]!==d?(l=(0,r.jsxs)(a.Stack,{padding:2,space:1,marginBottom:2,children:[n,i]},d),o[12]=n,o[13]=i,o[14]=d,o[15]=l):l=o[15],l}function cb(){let e,t,n,i,l,o,a,d=(0,s.c)(26),{documentId:c}=i$(),{t:u}=(0,f.useTranslation)(D),{getClient:p}=(0,f.useSource)(),m=(0,f.useDocumentPreviewStore)(),g=(0,f.useClient)(f.DEFAULT_STUDIO_CLIENT_OPTIONS);d[0]!==c||d[1]!==m||d[2]!==p?(e=(function({documentId:e,documentPreviewStore:t,type:n,filter:i,filterParams:l,getClient:o}){let r=(0,h.getPublishedId)(e);return("function"==typeof i?t.unstable_observeDocument(e).pipe((0,eO.distinctUntilChanged)((e,t)=>e?._rev===t?._rev),(0,eJ.switchMap)(e=>aA(i,{document:e,getClient:o})),(0,eB.map)(e=>({filter:e.filter,filterParams:e.filterParams||l}))):(0,eN.of)({filter:i,filterParams:l})).pipe((0,eO.distinctUntilChanged)((e,t)=>e.filter===t.filter&&JSON.stringify(e.filterParams)===JSON.stringify(t.filterParams)),(0,eJ.switchMap)(({filter:e,filterParams:i})=>t.unstable_observeDocumentIdSet(`references("${r}") ${n?`&& _type == "${n}"`:""} ${e?`&& ${e}`:""}`,i,{insert:"append"}).pipe((0,eB.map)(e=>e.documentIds),(0,e9.mergeMapArray)(e=>t.unstable_observeDocument(e).pipe((0,ez.filter)(Boolean),(0,eB.map)(e=>e))),(0,eB.map)(e=>{let t=[];return e.filter(e=>{let n=(0,h.getPublishedId)(e._id);return!t.includes(n)&&(t.push(n),!0)})}),(0,eB.map)(e=>({documents:e,loading:!1})),(0,e$.startWith)(aF))))})({documentId:c,documentPreviewStore:m,getClient:p}).pipe((0,eB.map)(cC),(0,eB.map)(cS)),d[0]=c,d[1]=m,d[2]=p,d[3]=e):e=d[3];let x=(0,eM.useObservable)(e,null);d[4]!==g||d[5]!==c||d[6]!==m?(t=(function({documentId:e,type:t,client:n,documentPreviewStore:i}){return an(e,{versionedClient:n}).pipe((0,eB.map)(e=>e?t?.dataset?e.references.filter(e=>e.datasetName===t.dataset&&e.documentId):e.references.filter(e=>e.documentId&&e.datasetName):[]),(0,e9.mergeMapArray)(e=>i.observeDocumentTypeFromId((0,h.getPublishedId)(e.documentId),{dataset:e.datasetName,projectId:e.projectId}).pipe((0,eB.map)(t=>({...e,documentType:t})))),(0,e9.mergeMapArray)(e=>{if(!e.documentType)return(0,eN.of)(null);if(!t)return(0,eN.of)({type:e.documentType,id:e.documentId,preview:{published:{_id:e.documentId,title:`Document Id: ${e.documentId}`,subtitle:`Dataset: ${e.datasetName} - Project Id: ${e.projectId}`,media:(0,r.jsx)(v.DocumentIcon,{})}},availability:{available:!0,reason:"READABLE"},projectId:e.projectId,dataset:e.datasetName});if(e.documentType!==t.type)return(0,eN.of)(null);let n=(0,f.getPreviewPaths)(t.preview)||[];return i.observePaths({_id:(0,h.getPublishedId)(e.documentId)},n,{dataset:e.datasetName,projectId:e.projectId}).pipe((0,eB.map)(n=>{let i=(0,f.prepareForPreview)(n,{type:t.type,title:t.title||"",icon:()=>(0,r.jsx)(v.DocumentIcon,{}),preview:t.preview});return{type:e.documentType,id:e.documentId,preview:{published:{...i,media:i.media??(0,r.jsx)(v.DocumentIcon,{})}},availability:{available:!0,reason:"READABLE"},projectId:e.projectId,dataset:e.datasetName}}))}),(0,eB.map)(e=>({documents:e.filter(f.isNonNullable),loading:!1})),(0,e$.startWith)(aO))})({documentId:c,client:g,documentPreviewStore:m}).pipe((0,eB.map)(cj),(0,eB.map)(cv)),d[4]=g,d[5]=c,d[6]=m,d[7]=t):t=d[7];let b=(0,eM.useObservable)(t,null);d[8]!==c?(n=e=>(0,r.jsx)(cg,{document:e,referenceToId:c}),d[8]=c,d[9]=n):n=d[9];let y=n;d[10]!==u?(i=u("incoming-references-pane.no-references-found"),d[10]=u,d[11]=i):i=d[11];let j=i;return d[12]!==j||d[13]!==x?.list||d[14]!==x?.loading||d[15]!==y||d[16]!==u?(l=x?.loading?(0,r.jsx)(f.LoadingBlock,{showText:!0,title:u("incoming-references-input.types-loading")}):x?.list.map(e=>{let{type:t,documents:n}=e;return(0,r.jsx)(cx,{type:t,documents:n,renderItem:y,getItemKey:e=>n[e]._id,emptyMessage:j},t)}),d[12]=j,d[13]=x?.list,d[14]=x?.loading,d[15]=y,d[16]=u,d[17]=l):l=d[17],d[18]!==b?.list||d[19]!==b?.loading||d[20]!==j||d[21]!==u?(o=b?.loading?(0,r.jsx)(f.LoadingBlock,{showText:!0,title:u("incoming-references-input.types-loading-cross-dataset")}):b?.list.map(e=>{let{type:t,documents:n}=e;return(0,r.jsx)(cx,{type:t,documents:n,renderItem:cy,getItemKey:e=>n[e].id,emptyMessage:j},t)}),d[18]=b?.list,d[19]=b?.loading,d[20]=j,d[21]=u,d[22]=o):o=d[22],d[23]!==l||d[24]!==o?(a=(0,r.jsxs)(r.Fragment,{children:[l,o]}),d[23]=l,d[24]=o,d[25]=a):a=d[25],a}function cy(e){return(0,r.jsx)(aM,{document:e})}function cv(e){return{list:e,loading:!1}}function cj(e){let{documents:t}=e;return Object.entries(t.reduce(cI,{})).map(cw)}function cw(e){let[t,n]=e;return{type:t,documents:n}}function cI(e,t){let n=t.type;return e[n]?e[n].push(t):e[n]=[t],e}function cS(e){return{list:e,loading:!1}}function cC(e){let{documents:t}=e;return Object.entries(t.reduce(cT,{})).map(c_)}function c_(e){let[t,n]=e;return{type:t,documents:n}}function cT(e,t){let n=t._type;return e[n]?e[n].push(t):e[n]=[t],e}let cR={error:v.ErrorOutlineIcon,warning:v.WarningOutlineIcon,info:v.InfoOutlineIcon},cP={error:"critical",warning:"caution",info:"primary"};function cE(e){let t,n,i,l,o=(0,s.c)(17),{marker:d,onOpen:u,schemaType:p,value:m}=e;o[0]!==d.path||o[1]!==u?(t=()=>u(d.path),o[0]=d.path,o[1]=u,o[2]=t):t=o[2];let h=t,[f,g]=(0,c.useState)(null),b=cR[d.level];return o[3]!==f?(n=f&&(0,r.jsx)(a.Card,{padding:3,radius:2,tone:"critical",children:(0,r.jsx)(a.Text,{size:1,children:f.error.message})}),o[3]=f,o[4]=n):n=o[4],o[5]!==b||o[6]!==f||o[7]!==h||o[8]!==d.level||o[9]!==d.message||o[10]!==d.path||o[11]!==p||o[12]!==m?(i=!f&&(0,r.jsx)(a.Card,{__unstable_focusRing:!0,as:"button",onClick:h,padding:3,radius:2,tone:cP[d.level],children:(0,r.jsxs)(a.Flex,{align:"flex-start",gap:3,children:[(0,r.jsx)(a.Box,{flex:"none",children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(b,{})})}),(0,r.jsxs)(a.Stack,{flex:1,space:2,children:[(0,r.jsx)(cD,{path:d.path,schemaType:p,value:m}),(0,r.jsx)(a.Text,{muted:!0,size:1,children:d.message})]})]})}),o[5]=b,o[6]=f,o[7]=h,o[8]=d.level,o[9]=d.message,o[10]=d.path,o[11]=p,o[12]=m,o[13]=i):i=o[13],o[14]!==n||o[15]!==i?(l=(0,r.jsxs)(x.ErrorBoundary,{onCatch:g,children:[n,i]}),o[14]=n,o[15]=i,o[16]=l):l=o[16],l}function cD(e){let t,n,i,l=(0,s.c)(8),{path:o,schemaType:d,value:c}=e;e:{try{let e;l[0]!==o||l[1]!==d||l[2]!==c?(e=function(e){let{path:t,schemaType:n,value:i}=e,l=[],o=n,r=i;for(let e of t){if("string"==typeof e){if(!(0,f.isRecord)(r)&&void 0!==r)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==o.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);r=r?.[e];let t=o.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;o=t.type,l.push(o);continue}if("number"==typeof e){if(!(0,f.isArray)(r)&&void 0!==r)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);r=r?.[e];let t=o.of.find(e=>"string"==typeof r?"string"===e.jsonType:"number"==typeof r?"number"===e.jsonType:"boolean"==typeof r?"boolean"===e.jsonType:!!(0,f.isRecord)(r)&&e.name===r?._type);if(!t)throw Error(`Item type not found: [${e}]`);o=t,l.push(o);continue}if((0,f.isRecord)(e)&&e._key){if(typeof r>"u")return l;if(!(0,f.isArray)(r))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(r=(r??[]).find(t=>(0,f.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,f.isRecord)(r))throw Error(`Array item not found: [_key == ${e._key}]`);let t=o.of.find(e=>(0,f.isRecord)(r)&&e.name===r?._type);if(!t&&!r?._type){let e=o.of.filter(e=>"object"===e.jsonType);1===e.length&&(t=e[0])}if(!t)throw Error(`Array item type not found: .${r?._type}`);o=t,l.push(o);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:o,schemaType:d,value:c}),l[0]=o,l[1]=d,l[2]=c,l[3]=e):e=l[3],t=e;break e}catch(e){console.error(e)}t=null}let u=t;return u?.length?(l[4]!==u?(n=u.map(ck),l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,r.jsx)(a.Text,{size:1,children:n}),l[6]=n,l[7]=i):i=l[7],i):null}function ck(e,t){return(0,r.jsxs)(c.Fragment,{children:[t>0&&(0,r.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,r.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t)}function cF(e){return{level:e.level,message:e.message,path:e.path}}let cA={},cL=b.route.create("/",[b.route.intents("/intent"),b.route.create("/edit/:type/:editDocumentId",[b.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),b.route.create({path:"/:panes",children:[b.route.create("/:action",b.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(cM)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:cA,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,b.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,tl.omit)(t.params,cV),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(cz).join("|")).map(encodeURIComponent).join(";")}}}})]),cM=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,cV=["view","since","rev","inspect","comment"],cO=Boolean;function cz(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,s=e===r,a=0!==t&&o===r.id,d=typeof i>"u"?void 0:(0,b.encodeJsonParams)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===r.params?.[t]&&!cV.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":o].concat([c.length>0&&c,d].filter(cO).flat()).join(",")||","}let cB=[o7,re,oZ,o1,oX,om],cN=["delete","discardChanges"],cH=[dM],c$=[{name:"sanity/structure/validation",component:function(e){let t,n,i,l,o,d,c,u=(0,s.c)(23),{onClose:p}=e,{onFocus:m,onPathOpen:h,schemaType:g,validation:x,value:b,editState:y}=i$(),{t:v}=(0,f.useTranslation)("validation");u[0]!==m||u[1]!==h?(t=e=>{h(e),m(e)},u[0]=m,u[1]=h,u[2]=t):t=u[2];let j=t;u[3]!==y?(n=y&&y.version&&(0,f.isGoingToUnpublish)(y.version),u[3]=y,u[4]=n):n=u[4];let w=n;return u[5]!==v?(i=v("panel.close-button-aria-label"),u[5]=v,u[6]=i):i=u[6],u[7]!==v?(l=v("panel.title"),u[7]=v,u[8]=l):l=u[8],u[9]!==p||u[10]!==i||u[11]!==l?(o=(0,r.jsx)(i7,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:l}),u[9]=p,u[10]=i,u[11]=l,u[12]=o):o=u[12],u[13]!==j||u[14]!==w||u[15]!==g||u[16]!==v||u[17]!==x||u[18]!==b?(d=(0,r.jsx)(a.Card,{flex:1,overflow:"auto",padding:3,children:w?(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsx)(a.Text,{muted:!0,size:1,children:v("panel.unpublish-message")})}):(0,r.jsxs)(r.Fragment,{children:[0===x.length&&(0,r.jsx)(a.Box,{padding:2,children:(0,r.jsx)(a.Text,{muted:!0,size:1,children:v("panel.no-errors-message")})}),x.length>0&&(0,r.jsx)(a.Stack,{space:2,children:x.map((e,t)=>(0,r.jsx)(cE,{marker:e,onOpen:j,schemaType:g,value:b},t))})]})}),u[13]=j,u[14]=w,u[15]=g,u[16]=v,u[17]=x,u[18]=b,u[19]=d):d=u[19],u[20]!==o||u[21]!==d?(c=(0,r.jsxs)(a.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[o,d]}),u[20]=o,u[21]=d,u[22]=c):c=u[22],c},useMenuItem:function(e){let t,n,i,l,o,r,a=(0,s.c)(11),{documentType:d}=e,{t:c}=(0,f.useTranslation)("validation"),{selectedReleaseId:u}=(0,f.usePerspective)(),{value:p}=i$(),{validation:m}=(0,f.useValidationStatus)(p._id,d,!u);a[0]!==m?(t=m.map(cF),a[0]=m,a[1]=t):t=a[1];let h=t,x=h.some(g.isValidationError),b=h.some(g.isValidationWarning);a[2]!==p?(n=(0,f.isGoingToUnpublish)(p),a[2]=p,a[3]=n):n=a[3];let y=n;e:{if(x){i=v.ErrorOutlineIcon;break e}if(b){i=v.WarningOutlineIcon;break e}i=v.CheckmarkCircleIcon}let j=i;t:{if(x){l="critical";break t}if(b){l="caution";break t}l="positive"}let w=l,I=0===h.length||y;return a[4]!==c?(o=c("panel.title"),a[4]=c,a[5]=o):o=a[5],a[6]!==j||a[7]!==I||a[8]!==o||a[9]!==w?(r={hidden:I,icon:j,title:o,tone:w,showAsAction:!0},a[6]=j,a[7]=I,a[8]=o,a[9]=w,a[10]=r):r=a[10],r}},{name:i0,useMenuItem:()=>{let{features:e}=iX(),{t}=(0,f.useTranslation)();return{hidden:!e.reviewChanges,icon:v.RestoreIcon,title:t("changes.title")}},component:function(e){let t,n,i,l,o,u,p,m,h,g,b,y,j,w,I,S,C,_,T,R,P,E,k,F,A,L,M,V=(0,s.c)(73),{params:O,setParams:z}=lA(),B=(0,f.useSource)(),[N,H]=(0,c.useState)(null),{t:$}=(0,f.useTranslation)(D),{t:U}=(0,f.useTranslation)(),G=O?.inspect===i0,{selectedPerspective:q}=(0,f.usePerspective)();V[0]!==O?(t=(M=O?.changesInspectorTab)&&ch.includes(M)?O.changesInspectorTab:ch[0],V[0]=O,V[1]=t):t=V[1];let W=t;V[2]!==O||V[3]!==z?(n=e=>z({...O,changesInspectorTab:e,since:"history"===e?void 0:O?.since}),V[2]=O,V[3]=z,V[4]=n):n=V[4];let K=n,Y=G?"":void 0;V[5]!==$?(i=$("changes.tab.history"),V[5]=$,V[6]=i):i=V[6],V[7]!==K?(l=()=>K("history"),V[7]=K,V[8]=l):l=V[8];let X="history"===W;V[9]!==i||V[10]!==l||V[11]!==X?(o=(0,r.jsx)(x.Tab,{"aria-controls":"history-panel",id:"history-tab",label:i,onClick:l,selected:X}),V[9]=i,V[10]=l,V[11]=X,V[12]=o):o=V[12],V[13]!==$?(u=$("changes.tab.review-changes"),V[13]=$,V[14]=u):u=V[14],V[15]!==K?(p=()=>K("review"),V[15]=K,V[16]=p):p=V[16];let Q="review"===W;V[17]!==u||V[18]!==p||V[19]!==Q?(m=(0,r.jsx)(x.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:u,onClick:p,selected:Q}),V[17]=u,V[18]=p,V[19]=Q,V[20]=m):m=V[20],V[21]!==m||V[22]!==o?(h=(0,r.jsxs)(a.TabList,{space:1,flex:1,children:[o,m]}),V[21]=m,V[22]=o,V[23]=h):h=V[23],V[24]!==$?(g=$("changes.action.close-label"),V[24]=$,V[25]=g):g=V[25];let J=e.onClose;V[26]!==$?(b=$("document-inspector.close-button.tooltip"),V[26]=$,V[27]=b):b=V[27],V[28]!==b?(y={content:b},V[28]=b,V[29]=y):y=V[29],V[30]!==e.onClose||V[31]!==g||V[32]!==y?(j=(0,r.jsx)(x.Button,{"aria-label":g,icon:v.CloseIcon,mode:"bleed",onClick:J,tooltipProps:y}),V[30]=e.onClose,V[31]=g,V[32]=y,V[33]=j):j=V[33],V[34]!==h||V[35]!==j?(w=(0,r.jsx)(a.Card,{paddingBottom:1,children:(0,r.jsxs)(a.Flex,{align:"center",padding:3,gap:2,children:[h,j]})}),V[34]=h,V[35]=j,V[36]=w):w=V[36],V[37]!==$?(I=(0,r.jsx)(a.Box,{flex:1,padding:1,children:(0,r.jsx)(a.Text,{size:1,children:(0,r.jsx)(f.Translate,{t:$,i18nKey:"changes.banner.tooltip"})})}),V[37]=$,V[38]=I):I=V[38],V[39]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.jsx)(a.Text,{size:0,muted:!0,children:(0,r.jsx)(v.InfoOutlineIcon,{fontSize:1})}),V[39]=S):S=V[39],V[40]!==N||V[41]!==I?(C=(0,r.jsx)(x.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:N,content:I,children:S}),V[40]=N,V[41]=I,V[42]=C):C=V[42],V[43]!==q||V[44]!==$||V[45]!==U?(_=function(e,{t,tCore:n}){return(0,f.isReleaseDocument)(e)?e.metadata.title||n("release.placeholder-untitled-release"):"drafts"===e?t("compare-versions.status.draft"):"published"===e?t("compare-versions.status.published"):e}(q,{t:$,tCore:U}),V[43]=q,V[44]=$,V[45]=U,V[46]=_):_=V[46],V[47]!==_?(T={perspective:_},V[47]=_,V[48]=T):T=V[48],V[49]!==$||V[50]!==T?(R=(0,r.jsx)(a.Text,{size:0,muted:!0,children:(0,r.jsx)(f.Translate,{t:$,values:T,i18nKey:"changes.banner.description"})}),V[49]=$,V[50]=T,V[51]=R):R=V[51],V[52]!==C||V[53]!==R?(P=(0,r.jsx)(a.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,r.jsxs)(a.Flex,{gap:2,align:"flex-start",children:[C,R]})}),V[52]=C,V[53]=R,V[54]=P):P=V[54];let Z="history"!==W;V[55]!==W||V[56]!==B.beta?.eventsAPI?.documents?(E=B.beta?.eventsAPI?.documents?(0,r.jsx)(cr,{showList:"history"===W}):(0,r.jsx)(ca,{showList:"history"===W}),V[55]=W,V[56]=B.beta?.eventsAPI?.documents,V[57]=E):E=V[57],V[58]!==Z||V[59]!==E?(k=(0,r.jsx)(d.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:Z,id:"history-panel",children:E}),V[58]=Z,V[59]=E,V[60]=k):k=V[60];let ee="review"!==W;return V[61]!==W||V[62]!==B.beta?.eventsAPI?.documents?(F=B.beta?.eventsAPI?.documents?(0,r.jsx)(r.Fragment,{children:"review"===W?(0,r.jsx)(ce,{showChanges:"review"===W}):null}):(0,r.jsx)(dH,{showChanges:"review"===W}),V[61]=W,V[62]=B.beta?.eventsAPI?.documents,V[63]=F):F=V[63],V[64]!==ee||V[65]!==F?(A=(0,r.jsx)(d.TabPanel,{"aria-labelledby":"review-tab",hidden:ee,id:"review-panel",height:"fill",children:F}),V[64]=ee,V[65]=F,V[66]=A):A=V[66],V[67]!==w||V[68]!==Y||V[69]!==P||V[70]!==k||V[71]!==A?(L=(0,r.jsxs)(cm,{direction:"column",padding:0,height:"fill","data-ready":Y,ref:H,children:[w,P,k,A]}),V[67]=w,V[68]=Y,V[69]=P,V[70]=k,V[71]=A,V[72]=L):L=V[72],L},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})},{name:"sanity/structure/incoming-references",useMenuItem:()=>{let{t:e}=(0,f.useTranslation)();return{icon:v.SyncIcon,title:e("incoming-references.title")}},component:e=>{let t,n,i,l,o,d=(0,s.c)(11),{t:c}=(0,f.useTranslation)();d[0]!==c?(t=c("panel.close-button-aria-label"),d[0]=c,d[1]=t):t=d[1];let u=e.onClose;return d[2]!==c?(n=c("incoming-references.title"),d[2]=c,d[3]=n):n=d[3],d[4]!==e.onClose||d[5]!==t||d[6]!==n?(i=(0,r.jsx)(i7,{as:"header",closeButtonLabel:t,flex:"none",onClose:u,title:n}),d[4]=e.onClose,d[5]=t,d[6]=n,d[7]=i):i=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(a.Card,{flex:1,overflow:"auto",padding:3,children:(0,r.jsx)(cb,{})}),d[8]=l):l=d[8],d[9]!==i?(o=(0,r.jsxs)(a.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[i,l]}),d[9]=i,d[10]=o):o=d[10],o}}],cU=(0,f.definePlugin)(t=>{let n=t?.icon||v.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(e,t)=>{let n=Array.from(new Set([...e,...cB])),i=n.filter(e=>cN.includes(e.action)),l=n.filter(e=>!cN.includes(e.action));return"published"===t.versionType?[...[...l].sort((e,t)=>"unpublish"===e.action?-1:+("unpublish"===t.action)),...i]:[...l,...i]},badges:e=>Array.from(new Set([...e,...cH])),inspectors:e=>Array.from(new Set([...e,...c$]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,c.lazy)(()=>e.A(453267)),canHandleIntent:(e,t)=>{var n;return"create"===e?function(e){if(!("type"in e))return!1;let t={};return"mode"in e&&(t.mode="structure"===e.mode),"template"in e&&(t.template=!0),!Object.keys(t).length||t}(t):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:dz,controlsDocumentTitle:!0,options:t,router:cL,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[k]}}});var cG=Object.freeze({__proto__:null,default:sL}),cq=Object.freeze({__proto__:null,default:dL});e.s(["BackLink",()=>sz,"ConfirmDeleteDialogContainer",()=>ap,"DocumentInspectorHeader",()=>i7,"DocumentPane",()=>sL,"DocumentPaneProviderWrapper",()=>sA,"LOADING_PANE",()=>l7,"LoadingPane",()=>iH,"Pane",()=>ir,"PaneContainer",()=>dL,"PaneContent",()=>id,"PaneHeader",()=>iR,"PaneHeaderActions",()=>aj,"PaneItem",()=>aP,"PaneLayout",()=>iM,"StructureToolPane",()=>sK,"_DEBUG",()=>!1,"assignId",()=>aN,"setActivePanes",()=>dO,"structureTool",()=>cU,"useDocumentLastRev",()=>sf,"useDocumentPane",()=>i$,"useDocumentTitle",()=>i4,"usePane",()=>ia,"usePaneLayout",()=>it,"usePaneRouter",()=>lA,"useStructureTool",()=>iX],126047)}]);
module.exports=[940337,(a,b,c)=>{function d(a,b,c){function d(){var j=Date.now()-h;j<b&&j>=0?e=setTimeout(d,b-j):(e=null,c||(i=a.apply(g,f),g=f=null))}null==b&&(b=100);var e,f,g,h,i,j=function(){g=this,f=arguments,h=Date.now();var j=c&&!e;return e||(e=setTimeout(d,b)),j&&(i=a.apply(g,f),g=f=null),i};return j.clear=function(){e&&(clearTimeout(e),e=null)},j.flush=function(){e&&(i=a.apply(g,f),g=f=null,clearTimeout(e),e=null)},j}d.debounce=d,b.exports=d},175920,(a,b,c)=>{"use strict";b.exports=function(a){for(var b=function(a){var b,c=(a.length+8>>6)+1,d=Array(16*c);for(b=0;b<16*c;b++)d[b]=0;for(b=0;b<a.length;b++)d[b>>2]|=a.charCodeAt(b)<<(8*a.length+b)%4*8;d[b>>2]|=128<<(8*a.length+b)%4*8;var e=8*a.length;return d[16*c-2]=255&e,d[16*c-2]|=(e>>>8&255)<<8,d[16*c-2]|=(e>>>16&255)<<16,d[16*c-2]|=(e>>>24&255)<<24,d}(a),c=0x67452301,d=-0x10325477,e=-0x67452302,f=0x10325476,g=0;g<b.length;g+=16){var j=c,o=d,p=e,q=f;c=k(c,d,e,f,b[g+0],7,-0x28955b88),f=k(f,c,d,e,b[g+1],12,-0x173848aa),e=k(e,f,c,d,b[g+2],17,0x242070db),d=k(d,e,f,c,b[g+3],22,-0x3e423112),c=k(c,d,e,f,b[g+4],7,-0xa83f051),f=k(f,c,d,e,b[g+5],12,0x4787c62a),e=k(e,f,c,d,b[g+6],17,-0x57cfb9ed),d=k(d,e,f,c,b[g+7],22,-0x2b96aff),c=k(c,d,e,f,b[g+8],7,0x698098d8),f=k(f,c,d,e,b[g+9],12,-0x74bb0851),e=k(e,f,c,d,b[g+10],17,-42063),d=k(d,e,f,c,b[g+11],22,-0x76a32842),c=k(c,d,e,f,b[g+12],7,0x6b901122),f=k(f,c,d,e,b[g+13],12,-0x2678e6d),e=k(e,f,c,d,b[g+14],17,-0x5986bc72),d=k(d,e,f,c,b[g+15],22,0x49b40821),c=l(c,d,e,f,b[g+1],5,-0x9e1da9e),f=l(f,c,d,e,b[g+6],9,-0x3fbf4cc0),e=l(e,f,c,d,b[g+11],14,0x265e5a51),d=l(d,e,f,c,b[g+0],20,-0x16493856),c=l(c,d,e,f,b[g+5],5,-0x29d0efa3),f=l(f,c,d,e,b[g+10],9,0x2441453),e=l(e,f,c,d,b[g+15],14,-0x275e197f),d=l(d,e,f,c,b[g+4],20,-0x182c0438),c=l(c,d,e,f,b[g+9],5,0x21e1cde6),f=l(f,c,d,e,b[g+14],9,-0x3cc8f82a),e=l(e,f,c,d,b[g+3],14,-0xb2af279),d=l(d,e,f,c,b[g+8],20,0x455a14ed),c=l(c,d,e,f,b[g+13],5,-0x561c16fb),f=l(f,c,d,e,b[g+2],9,-0x3105c08),e=l(e,f,c,d,b[g+7],14,0x676f02d9),d=l(d,e,f,c,b[g+12],20,-0x72d5b376),c=m(c,d,e,f,b[g+5],4,-378558),f=m(f,c,d,e,b[g+8],11,-0x788e097f),e=m(e,f,c,d,b[g+11],16,0x6d9d6122),d=m(d,e,f,c,b[g+14],23,-0x21ac7f4),c=m(c,d,e,f,b[g+1],4,-0x5b4115bc),f=m(f,c,d,e,b[g+4],11,0x4bdecfa9),e=m(e,f,c,d,b[g+7],16,-0x944b4a0),d=m(d,e,f,c,b[g+10],23,-0x41404390),c=m(c,d,e,f,b[g+13],4,0x289b7ec6),f=m(f,c,d,e,b[g+0],11,-0x155ed806),e=m(e,f,c,d,b[g+3],16,-0x2b10cf7b),d=m(d,e,f,c,b[g+6],23,0x4881d05),c=m(c,d,e,f,b[g+9],4,-0x262b2fc7),f=m(f,c,d,e,b[g+12],11,-0x1924661b),e=m(e,f,c,d,b[g+15],16,0x1fa27cf8),d=m(d,e,f,c,b[g+2],23,-0x3b53a99b),c=n(c,d,e,f,b[g+0],6,-0xbd6ddbc),f=n(f,c,d,e,b[g+7],10,0x432aff97),e=n(e,f,c,d,b[g+14],15,-0x546bdc59),d=n(d,e,f,c,b[g+5],21,-0x36c5fc7),c=n(c,d,e,f,b[g+12],6,0x655b59c3),f=n(f,c,d,e,b[g+3],10,-0x70f3336e),e=n(e,f,c,d,b[g+10],15,-1051523),d=n(d,e,f,c,b[g+1],21,-0x7a7ba22f),c=n(c,d,e,f,b[g+8],6,0x6fa87e4f),f=n(f,c,d,e,b[g+15],10,-0x1d31920),e=n(e,f,c,d,b[g+6],15,-0x5cfebcec),d=n(d,e,f,c,b[g+13],21,0x4e0811a1),c=n(c,d,e,f,b[g+4],6,-0x8ac817e),f=n(f,c,d,e,b[g+11],10,-0x42c50dcb),e=n(e,f,c,d,b[g+2],15,0x2ad7d2bb),d=n(d,e,f,c,b[g+9],21,-0x14792c6f),c=h(c,j),d=h(d,o),e=h(e,p),f=h(f,q)}return i(c)+i(d)+i(e)+i(f)};var d="0123456789abcdef";function e(a,b){return 1&a|1&b|(a>>>1|b>>>1)<<1}function f(a,b){return(a>>>1^b>>>1)<<1|1&a^1&b}function g(a,b){return(a>>>1&b>>>1)<<1|1&a&(1&b)}function h(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function i(a){var b,c="";for(b=0;b<=3;b++)c+=d.charAt(a>>8*b+4&15)+d.charAt(a>>8*b&15);return c}function j(a,b,c,d,e,f){var g;return h((g=h(h(b,a),h(d,f)))<<e|g>>>32-e,c)}function k(a,b,c,d,f,h,i){return j(e(g(b,c),g(~b,d)),a,b,f,h,i)}function l(a,b,c,d,f,h,i){return j(e(g(b,d),g(c,~d)),a,b,f,h,i)}function m(a,b,c,d,e,g,h){return j(f(f(b,c),d),a,b,e,g,h)}function n(a,b,c,d,g,h,i){return j(f(c,e(b,~d)),a,b,g,h,i)}},416905,306978,a=>{"use strict";let b,c,d,e;var f,g=a.i(187924),h=a.i(826088),i=a.i(64179),j=a.i(566482),k=a.i(572131),l=a.i(433697),m=a.i(346271),n=a.i(262036),o=a.i(32274),p=a.i(904986),q=a.i(535576),r=a.i(15256),s=a.i(977647),t=a.i(966539),u=a.i(547663),v=a.i(471085),w=a.i(893108),x=(0,w.default)(function(a,b,c){return b=b.toLowerCase(),a+(c?(0,v.default)(b):b)}),y=a.i(445312),z=(0,w.default)(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),A=a.i(954803),B=a.i(896200),C=a.i(417),D=a.i(641881),E=a.i(465814);let F="structure",G=(0,p.defineLocaleResourceBundle)({locale:"en-US",namespace:F,resources:()=>a.A(335668)}),H=["_id","_type","_createdAt","_updatedAt","_rev"];function I(a,b,c=!1){return b.map(b=>(function a(b,c,d=!1){let[e,...f]=c;if(!("fields"in b))return"";let g=b.fields.find(a=>a.name===e);if(!g){if(!H.includes(e)){let a=`The current ordering config targeted the nonexistent field "${e}" on schema type "${b.name}". It should be one of ${b.fields.map(a=>a.name).join(", ")}`;if(d)throw Error(a);console.warn(a)}return""}if("to"in g.type&&"reference"===g.type.name){let b=g.type.to;return`${e}->{${b.map(b=>a(b,f)).join(",")}}`}let h=f.length>0&&a(g.type,f),i=h?`{${h}}`:"";return f.length>0?`${e}${i}`:e})(a,b.field.split("."),c)).join(", ")}class J extends Error{constructor(a,b,c,d){super(a),this.name="SerializeError";const e=typeof c>"u"?"<unknown>":`${c}`;this.path=(b||[]).concat(d?`${e} (${d})`:e)}withHelpUrl(a){return this.helpId=a,this}}let K={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",DOCUMENT_TYPE_REQUIRED:"structure-document-type-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},L={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:F}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},M=[L,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:F}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function N(a,b,c){return a instanceof O?a.serialize({path:c,index:b}):a}class O{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}action(a){return this.clone({action:a})}getAction(){return this.spec.action}intent(a){return this.clone({intent:a})}getIntent(){return this.spec.intent}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}group(a){return this.clone({group:a})}getGroup(){return this.spec.group}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}params(a){return this.clone({params:a})}getParams(){return this.spec.params}showAsAction(a=!0){return this.clone({showAsAction:!!a})}getShowAsAction(){return this.spec.showAsAction}serialize(a={path:[]}){let{title:b,action:c,intent:d}=this.spec;if(!b){let b="string"==typeof c?`action: "${c}"`:void 0;throw new J("`title` is required for menu item",a.path,a.index,b).withHelpUrl(K.TITLE_REQUIRED)}if(!c&&!d)throw new J(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,a.path,a.index,`"${b}"`).withHelpUrl(K.ACTION_OR_INTENT_REQUIRED);if(d&&c)throw new J("cannot set both `action` AND `intent`",a.path,a.index,`"${b}"`).withHelpUrl(K.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:b}}clone(a){let b=new O(this._context);return b.spec={...this.spec,...a},b}}function P(a,{by:b,title:c,i18n:d},e){let f=new O(a).group("sorting").title(a.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:c}})).icon(u.SortIcon).action("setSortOrder").params({by:b,extendedProjection:e});return d&&(f=f.i18n(d)),f}function Q(a,b){let{schema:c}=a,d="string"==typeof b?c.get(b):b;return d&&"orderings"in d?(d.orderings?d.orderings.concat(M):M).map(b=>P(a,b,I(d,b.by))):[]}function R(a,b,c){return a instanceof S?a.serialize({path:c,index:b}):a}class S{constructor(a,b){this._context=a,this._id=b?b.id:"",this._title=b?b.title:"",this._i18n=b?b.i18n:void 0}id(a){return new S(this._context,{id:a,title:this._title,i18n:this._i18n})}getId(){return this._id}title(a){return new S(this._context,{title:a,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(a){return new S(this._context,{i18n:a,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(a={path:[]}){if(!this._id)throw new J("`id` is required for a menu item group",a.path,a.index,this._title).withHelpUrl(K.ID_REQUIRED);if(!this._title)throw new J("`title` is required for a menu item group",a.path,this._id).withHelpUrl(K.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}}let T=/([^A-Za-z0-9-_.])/;function U(a,b,c){if("string"!=typeof a)throw new J(`Structure node id must be of type string, got ${typeof a}`,b,c);let[d]=a.match(T)||[];if(d)throw new J(`Structure node id cannot contain character "${d}"`,b,c);if(a.startsWith("__edit__"))throw new J("Structure node id cannot start with __edit__",b,c);return a}function V(a,b){if(b)return b;let c=x(a);return T.test(c)?x((0,D.default)(a)):c}class W{constructor(a){this.spec={options:{},...a||{}}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:V(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(a){return this.clone({canHandleIntent:a})}serialize(a={path:[]}){let{id:b,title:c,child:d,options:e,component:f}=this.spec;if(!b)throw new J("`id` is required for `component` structure item",a.path,a.index).withHelpUrl(K.ID_REQUIRED);if(!f)throw new J("`component` is required for `component` structure item",a.path,a.index).withHelpUrl(K.ID_REQUIRED);return{id:U(b,a.path,a.index),title:c,type:"component",child:d,component:f,canHandleIntent:this.spec.canHandleIntent,options:e||{},menuItems:(this.spec.menuItems||[]).map((b,c)=>N(b,c,a.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((b,c)=>R(b,c,a.path))}}clone(a){let b=new W;return b.spec={...this.spec,...a},b}}class X{constructor(a){this.spec={id:(0,y.uniqueId)("__divider__"),type:"divider",...a}}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(a){let b=new X;return b.spec={...this.spec,...a},b}}async function Y(a,b){return await a(p.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,o.getPublishedId)(b)},{tag:"structure.resolve-type"})}class Z{spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:this.spec.id||z(a)})}getTitle(){return this.spec.title}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}serialize(a={path:[]}){let{id:b,title:c,icon:d}=this.spec;if(!b)throw new J("`id` is required for view item",a.path,a.index).withHelpUrl(K.ID_REQUIRED);if(!c)throw new J("`title` is required for view item",a.path,a.index).withHelpUrl(K.TITLE_REQUIRED);return{id:U(b,a.path,a.index),title:c,icon:d}}}function $(a,b,c){return"function"==typeof a.serialize?a.serialize({path:c,index:b}):a}class _ extends Z{constructor(a){const b=(a=>(0,p.isRecord)(a)&&"component"===a.type)(a)?{...a}:{options:{}};super(),this.spec=b;const c="function"==typeof a?a:this.spec.component;c&&(this.spec=this.component(c).spec)}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}serialize(a={path:[]}){let b=super.serialize(a),c=this.spec.component;if("function"!=typeof c)throw new J("`component` is required and must be a function for `component()` view item",a.path,a.index).withHelpUrl(K.COMPONENT_REQUIRED);return{...b,component:c,options:this.spec.options||{},type:"component"}}clone(a){let b=new _;return b.spec={...this.spec,...a},b}}class aa extends Z{constructor(a){super(),this.spec={id:"editor",title:"Editor",...a||{}}}serialize(a={path:[]}){return{...super.serialize(a),type:"form"}}clone(a){let b=new aa;return b.spec={...this.spec,...a},b}}let ab=a=>new aa(a),ac=a=>new _(a);var ad=Object.freeze({__proto__:null,ComponentViewBuilder:_,FormViewBuilder:aa,GenericViewBuilder:Z,component:ac,form:ab,maybeSerializeView:$});class ae{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:V(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}documentId(a){let b=this.spec.id||a;return this.clone({id:b,options:{...this.spec.options,id:a}})}getDocumentId(){return this.spec.options?.id}schemaType(a){return this.clone({options:{...this.spec.options,type:"string"==typeof a?a:a.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(a,b){return this.clone({options:{...this.spec.options,template:a,templateParameters:b}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(a){return this.clone({views:a})}getViews(){return this.spec.views||[]}defaultPanes(a){return this.clone({defaultPanes:a})}serialize({path:a=[],index:b,hint:c}={path:[]}){var d;let e,f,g=a[b||a.length-1],h=this.spec.id||g&&`${g}`||"",i={id:h,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof h||!h)throw new J("`id` is required for document nodes",a,b,c).withHelpUrl(K.ID_REQUIRED);if(!i||!i.id)throw new J("document id (`id`) is required for document nodes",a,h,c).withHelpUrl(K.DOCUMENT_ID_REQUIRED);if(!i||!i.type)throw new J("document type (`schemaType`) is required for document nodes",a,h,c);let j=(this.spec.views&&this.spec.views.length>0?this.spec.views:[ab()]).map((b,c)=>$(b,c,a)),k=j.map(a=>a.id),l=(0,A.uniq)(k.filter((a,b)=>k.includes(a,b+1)));if(l.length>0)throw new J(`document node has views with duplicate IDs: ${l.join(",  ")}`,a,h,c);if(this.spec.defaultPanes&&this.spec.defaultPanes.length>0){let a=this.spec.defaultPanes.filter(a=>k.includes(a)),b=this.spec.defaultPanes.filter(a=>!k.includes(a));b.length>0&&console.warn(`DefaultPanes contains invalid view IDs that don't match any defined views: ${b.join(", ")}. Valid view IDs are: ${k.join(", ")}`),a.length>=2&&(f=a)}return{...this.spec,child:this.spec.child||(({resolveDocumentNode:a,getClient:b})=>async(c,{params:d,path:e})=>{let f=d.type,g=e.slice(0,e.length-1),h=e[e.length-1];if(f||(f=await Y(b,c)),!f)throw new J("Failed to resolve document, and no type provided in parameters.",g,h);return a({documentId:c,schemaType:f})})(this._context),id:U(h,a,b),type:"document",options:(e={id:(d=i).id||"",type:d.type||"*"},d.template&&(e.template=d.template),d.templateParameters&&(e.templateParameters=d.templateParameters),e),views:j,defaultPanes:f}}clone(a={}){let b=new ae(this._context),c={...this.spec.options,...a.options};return b.spec={...this.spec,...a,options:c},b}}function af(a,b){let c=b?.type?a.resolveDocumentNode({schemaType:b.type}):new ae(a);if(!b)return c;let{id:d,type:e,template:f,templateParameters:g}=b.options;return c=c.id(b.id).documentId(d),e&&(c=c.schemaType(e)),f&&(c=c.initialValueTemplate(f,g)),b.child&&(c=c.child(b.child)),c}function ag({resolveDocumentNode:a,templates:b},c,d){let e=b.find(a=>a.id===c);if(!e)throw Error(`Template with ID "${c}" not defined`);return a({schemaType:e.schemaType}).initialValueTemplate(c,d)}class ah{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}description(a){return this.clone({description:a})}getDescription(){return this.spec.description}templateId(a){let b=this.spec.id||a;return this.clone({id:b,templateId:a})}getTemplateId(){return this.spec.templateId}parameters(a){return this.clone({parameters:a})}getParameters(){return this.spec.parameters}serialize({path:a=[],index:b,hint:c}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new J("`id` is required for initial value template item nodes",a,b,c).withHelpUrl(K.ID_REQUIRED);if(!this.spec.templateId)throw new J("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(K.ID_REQUIRED);let d=this._context.templates.find(a=>a.id===this.spec.templateId);if(!d)throw new J("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(K.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:d.schemaType,type:"initialValueTemplateItem",description:this.spec.description||d.description,title:this.spec.title||d.title,subtitle:this.spec.subtitle,icon:this.spec.icon||d.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(a={}){let b=new ah(this._context);return b.spec={...this.spec,...a},b}}function ai(a){let{schema:b,getStructureBuilder:c,templates:d}=a,e=b.getTypeNames();return d.filter(a=>!a.parameters?.length).sort((a,b)=>e.indexOf(a.schemaType)-e.indexOf(b.schemaType)).map(a=>c().initialValueTemplateItem(a.id))}function aj(a,b,c){return a instanceof ah?a.serialize({path:c,index:b}):a}function ak(a,b){let{schema:c,templates:d}=a;return b.map(b=>{let e=d.find(a=>a.id===b.templateId),f=b.title||e?.title||"Create",g={};e&&e.schemaType&&(g.type=e.schemaType),b.templateId&&(g.template=b.templateId);let h=b.parameters?[g,b.parameters]:g,i=e&&c.get(e.schemaType),j=b.i18n||e?.i18n,k=new O(a).title(f).icon(e&&e.icon||i?.icon||u.AddIcon).intent({type:"create",params:h});return j&&(k=k.i18n(j)),k.serialize()})}let al=Symbol("Document type list canHandleIntent"),am=(a,b,{pane:c})=>{let d="create"===a,e=c.options?.filter||"",f=c.options?.params||{},g=c.schemaTypeName?[c.schemaTypeName]:as(e,f),h=c.initialValueTemplates||[];return d&&b.template?h.some(a=>a.templateId===b.template):"edit"===a&&b.id&&g.includes(b.type)||d&&g.includes(b.type)};am.identity=al;let an=["default","card","media","detail","block"];function ao(){}let ap=(a,b,{pane:c,index:d})=>d<=1&&am(a,b,{pane:c});class aq{initialValueTemplatesSpecified=!1;spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:V(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}defaultLayout(a){return this.clone({defaultLayout:a})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}child(a){return this.clone({child:a})}getChild(){return this.spec.child}canHandleIntent(a){return this.clone({canHandleIntent:a})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:a}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(a){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(a)?a:[a]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(a={path:[]}){let b=this.spec.id||"",c=a.path,d=this.spec.defaultLayout;if(d&&!an.includes(d))throw new J(`\`layout\` must be one of ${an.map(a=>`"${a}"`).join(", ")}`,c,b||a.index,this.spec.title);let e=(this.spec.initialValueTemplates||[]).map((a,b)=>aj(a,b,c));return{id:U(b,a.path,b||a.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:d,child:this.spec.child||ao,canHandleIntent:this.spec.canHandleIntent||ap,displayOptions:this.spec.displayOptions,initialValueTemplates:e,menuItems:(this.spec.menuItems||[]).map((a,b)=>N(a,b,c)),menuItemGroups:(this.spec.menuItemGroups||[]).map((a,b)=>R(a,b,c))}}}class ar extends aq{constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!b?.initialValueTemplates}apiVersion(a){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:a}})}getApiVersion(){return this.spec.options?.apiVersion}filter(a){return this.clone({options:{...this.spec.options,filter:a}})}getFilter(){return this.spec.options?.filter}schemaType(a){let b="string"==typeof a?a:a.name;return this.clone({schemaTypeName:b})}getSchemaType(){return this.spec.schemaTypeName}params(a){return this.clone({options:{...this.spec.options||{filter:""},params:a}})}getParams(){return this.spec.options?.params}defaultOrdering(a){if(!Array.isArray(a))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:a}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(a={path:[]}){let b;if("string"!=typeof this.spec.id||!this.spec.id)throw new J("`id` is required for document lists",a.path,a.index,this.spec.title).withHelpUrl(K.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new J("`filter` is required for document lists",a.path,this.spec.id,this.spec.title).withHelpUrl(K.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,E.generateHelpUrl)(K.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(a),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(b=this._context,(a,c)=>{let d=c.parent,e=c.params?.template?b.templates.find(a=>a.id===c.params.template):void 0;return Promise.resolve(e?e.schemaType:d.schemaTypeName||Y(b.getClient,a)).then(c=>c?b.resolveDocumentNode({schemaType:c,documentId:a}):new ae(b).id("editor").documentId(a).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||p.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((a,b)=>{let c=a.options?.filter.trim()||"";if(["*","{"].includes(c[0]))throw new J(`\`filter\` cannot start with \`${c[0]}\` - looks like you are providing a query, not a filter`,b.path,a.id,a.title).withHelpUrl(K.QUERY_PROVIDED_FOR_FILTER);return c})(this.spec,a)}}}clone(a){let b=new ar(this._context);return b.spec={...this.spec,...a},this.initialValueTemplatesSpecified||(b.spec.initialValueTemplates=function(a,b){let{document:c}=a,{schemaTypeName:d,options:e}=b,{filter:f,params:g}=e||{filter:"",params:{}},h=d?[d]:Array.from(new Set(as(f,g)));if(0!==h.length)return h.flatMap(a=>c.resolveNewDocumentOptions({type:"structure",schemaType:a})).map(a=>({...a,icon:u.AddIcon}))}(this._context,b.spec)),b.spec.schemaTypeName||(b.spec.schemaTypeName=function(a){let{options:b}=a,{filter:c,params:d}=b||{filter:"",params:{}},e=as(c,d);return 1===e.length?e[0]:void 0}(b.spec)),b}getSpec(){return this.spec}}function as(a,b={}){let c=function(a,b={}){let c,d=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,e=[];for(;null!==(c=d.exec(a));)e.push(c[1]||c[2]);return e.map(a=>(("$"===a[0]?b[a.slice(1)]:a)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(a,b);return 0===c.length&&(c=function(a,b={}){let c=a.match(/\b_type\s+in\s+\[(.*?)\]/);return c?c[1].split(/,\s*/).map(a=>a.trim().replace(/^["']+|["']+$/g,"")).map(a=>"$"===a[0]?b[a.slice(1)]:a).filter(Boolean):[]}(a,b)),c}let at=a=>"listItem"===a.type,au=(a,b,c)=>(c.pane.items||[]).filter(az).some(a=>a.schemaType.name===b.type&&a._id===b.id)||ap(a,b,c),av=(a,b)=>{let c=(b.parent.items.filter(at).find(b=>b.id===a)||{child:void 0}).child;return c&&"function"==typeof c&&"function"==typeof c?c(a,b):c};class aw extends aq{constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!(b&&b.initialValueTemplates)}items(a){return this.clone({items:a})}getItems(){return this.spec.items}serialize(a={path:[]}){let b=this.spec.id;if("string"!=typeof b||!b)throw new J("`id` is required for lists",a.path,a.index).withHelpUrl(K.ID_REQUIRED);let c=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(c))throw new J("`items` must be an array of items",a.path,a.index).withHelpUrl(K.LIST_ITEMS_MUST_BE_ARRAY);let d=(a.path||[]).concat(b),e=c.map((a,b)=>(function(a,b,c){if(a instanceof ax)return a.serialize({path:c,index:b});if(a instanceof X)return a.serialize();if(a&&"divider"===a.type)return a;if(!a||"listItem"!==a.type){var d;let e=a&&a.type||(a instanceof aw?"ListBuilder":(d=a,(0,p.isRecord)(d)&&"function"==typeof d.then)?"Promise":Array.isArray(a)?"array":typeof a);throw new J(`List items must be of type "listItem", got "${e}"${"array"===e?" - did you forget to spread (...moreItems)?":""}`,c,b).withHelpUrl(K.INVALID_LIST_ITEM)}return a})(a,b,d)),f=e.filter((a,b)=>(0,B.find)(e,{id:a.id},b+1));if(f.length>0){let b=f.map(a=>a.id).slice(0,5),c=f.length>5?`${b.join(", ")}...`:b.join(", ");throw new J(`List items with same ID found (${c})`,a.path,a.index).withHelpUrl(K.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(a),type:"list",canHandleIntent:this.spec.canHandleIntent||au,child:this.spec.child||av,items:e}}clone(a){let b=new aw(this._context);return b.spec={...this.spec,...a},b}}class ax{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:V(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}icon(a){return this.clone({icon:a})}showIcon(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:a}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(a){return this.clone({child:a})}getChild(){return this.spec.child}schemaType(a){return this.clone({schemaType:a})}getSchemaType(){let a=this.spec.schemaType;return"string"==typeof a?this._context.schema.get(a):this.spec.schemaType}serialize(a={path:[]}){let{id:b,title:c,child:d}=this.spec;if("string"!=typeof b||!b)throw new J("`id` is required for list items",a.path,a.index).withHelpUrl(K.ID_REQUIRED);if(!a.titleIsOptional&&("string"!=typeof c||!c))throw new J("`title` is required for list items",a.path,b).withHelpUrl(K.TITLE_REQUIRED);let e=this.spec.schemaType;if("string"==typeof e){let c=this._context.schema.get(e);if(!c)throw new J(`Could not find type "${e}" in schema`,a.path,b).withHelpUrl(K.SCHEMA_TYPE_NOT_FOUND);e=c}let f={path:a.path.concat(b),hint:"child"},g=d instanceof W||d instanceof ar||d instanceof ae||d instanceof aw?d.serialize(f):d;if("function"==typeof g){let a=g;g=(b,c)=>a(b,{...c,serializeOptions:f})}return{...this.spec,id:U(b,a.path,a.index),schemaType:e,child:g,title:c,type:"listItem"}}clone(a){let b=new ax(this._context);return b.spec={...this.spec,...a},b}}class ay extends ax{constructor(a,b){super(a,b),this._context=a,this.spec=b||{}}serialize(a={path:[]}){let b,c=super.serialize({...a,titleIsOptional:!0});if(!c.schemaType)throw new J("`schemaType` is required for document list items",a.path,a.index).withHelpUrl(K.SCHEMA_TYPE_REQUIRED);let d=c.child||(b=this._context,a=>{let d=c.schemaType&&("string"==typeof c.schemaType?c.schemaType:c.schemaType.name);return d?b.resolveDocumentNode({schemaType:d,documentId:a}):new ae(b).id("documentEditor").documentId(a)});return{...c,child:d,schemaType:c.schemaType,_id:c.id}}clone(a){let b=new ay(this._context);return b.spec={...this.spec,...a},b}}function az(a){return(0,p.isRecord)(a)&&"u">typeof a.schemaType&&"string"==typeof a._id}class aA extends ar{constructor(a,b){super(a),this._context=a,this.spec=b||{}}child(a){return this.cloneWithoutDefaultIntentHandler({child:a})}clone(a){let b=super.clone(a),c=new aA(this._context);return c.spec={...this.spec,...b.getSpec(),...a},c}cloneWithoutDefaultIntentHandler(a){let b=super.clone(a),c=new aA(this._context),d=this.spec.canHandleIntent,e=d&&d.identity===al?{canHandleIntent:void 0}:{};return c.spec={...b.getSpec(),...this.spec,...a,...e},c}}let aB=["sanity.imageAsset","sanity.fileAsset"];function aC(a){return(function({schema:a}){return a.getTypeNames().filter(b=>{let c=a.get(b);return c&&c.type?.name==="document"}).filter(a=>!aB.includes(a))})(a).map(b=>aD(a,b))}function aD(a,b){let{schema:c}=a,d=c.get(b);if(!d)throw Error(`Schema type with name "${b}" not found`);let e=d.title||(0,C.startCase)(b);return new ax(a).id(b).title(e).schemaType(d).child((c,d)=>{let e=d.parent,f="list"===e.type?e.items.find(a=>a.id===c):null,g=aE(a,b);return f&&f.title&&(g=g.title(f.title)),g})}function aE(a,b){let{schema:c,resolveDocumentNode:d}=a,e="string"==typeof b?b:b.schemaType,f="string"==typeof e?e:e.name,g="string"==typeof b?{}:b,h=c.get(f);if(!h)throw Error(`Schema type with name "${f}" not found`);let i=h.title||(0,C.startCase)(f);return new aA(a).id(g.id||f).title(g.title||i).filter("_type == $type").params({type:f}).schemaType(h).defaultOrdering(L.by).menuItemGroups(g.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:F}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:F}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:F}}}]).child(g.child||(a=>d({schemaType:f,documentId:a}))).canHandleIntent(g.canHandleIntent||am).menuItems(g.menuItems||[...Q(a,h),new O(a).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:F}}).title("Compact view").icon(u.StackCompactIcon).action("setLayout").params({layout:"default"}),new O(a).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:F}}).title("Detailed view").icon(u.StackIcon).action("setLayout").params({layout:"detail"})])}function aF({defaultDocumentNode:a,source:b,perspectiveStack:c}){let d=(0,p.getConfigContextFromSource)(b),e={...b,getStructureBuilder:()=>f,resolveDocumentNode:b=>{let c=a?.(f,{...b,...d})||new ae(e);return c.getId()||(c=c.id("documentEditor")),b.documentId&&(c=c.documentId((0,o.getPublishedId)(b.documentId))),c.schemaType(b.schemaType)},perspectiveStack:c},f={defaults:()=>{let a;return a=aC(e),new aw(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:F}}).items(a).showIcons(a.some(a=>{var b;return!!(b=a.getSchemaType())&&"string"!=typeof b&&!!b.icon}))},documentTypeList:(...a)=>aE(e,...a),documentTypeListItem:(...a)=>aD(e,...a),documentTypeListItems:(...a)=>aC(e,...a),document:(...a)=>new ae(e,...a),documentWithInitialValueTemplate:(...a)=>ag(e,...a),defaultDocument:e.resolveDocumentNode,list:(...a)=>new aw(e,...a),listItem:(...a)=>new ax(e,...a),menuItem:(...a)=>new O(e,...a),menuItemGroup:(...a)=>new S(e,...a),menuItemsFromInitialValueTemplateItems:(...a)=>ak(e,...a),documentList:(...a)=>new ar(e,...a),documentListItem:(...a)=>new ay(e,...a),orderingMenuItem:(...a)=>P(e,...a),orderingMenuItemsForType:(...a)=>Q(e,...a),editor:(...a)=>af(e,...a),defaultInitialValueTemplateItems:(...a)=>ai(e,...a),initialValueTemplateItem:(a,b)=>new ah(e,{id:a,parameters:b,templateId:a}),component:a=>(0,t.isValidElementType)(a)?new W().component(a):new W(a),divider:a=>new X(a),view:ad,context:e};return f}function aG(a){let b,c,d,e,f,i=(0,h.c)(26),{defaultDocumentNode:j,structure:m,children:n}=a,[o,q]=(0,k.useState)(!1),r=(0,p.useSource)(),s=(0,p.useConfigContextFromSource)(r),t=(0,p.useDocumentStore)(),{perspectiveStack:u}=(0,p.usePerspective)();i[0]!==j||i[1]!==u||i[2]!==r?(b=aF({defaultDocumentNode:j,source:r,perspectiveStack:u}),i[0]=j,i[1]=u,i[2]=r,i[3]=b):b=i[3];let v=b;a:{let a;if(m){let a;i[4]!==v||i[5]!==s||i[6]!==t||i[7]!==u||i[8]!==m?(a=m(v,{...s,documentStore:t,perspectiveStack:u}),i[4]=v,i[5]=s,i[6]=t,i[7]=u,i[8]=m,i[9]=a):a=i[9],c=a;break a}i[10]!==v?(a=v.defaults(),i[10]=v,i[11]=a):a=i[11],c=a}let w=c,x=!o,y=!o,z=!o,A=!o;i[12]!==o||i[13]!==x||i[14]!==y||i[15]!==z||i[16]!==A?(d={backButton:o,resizablePanes:x,reviewChanges:y,splitPanes:z,splitViews:A},i[12]=o,i[13]=x,i[14]=y,i[15]=z,i[16]=A,i[17]=d):d=i[17];let B=d;i[18]!==v.context||i[19]!==B||i[20]!==o||i[21]!==w?(e={features:B,layoutCollapsed:o,setLayoutCollapsed:q,rootPaneNode:w,structureContext:v.context},i[18]=v.context,i[19]=B,i[20]=o,i[21]=w,i[22]=e):e=i[22];let C=e;return i[23]!==n||i[24]!==C?(f=(0,g.jsx)(l.StructureToolContext.Provider,{value:C,children:n}),i[23]=n,i[24]=C,i[25]=f):f=i[25],f}a.s(["ComponentBuilder",()=>W,"ComponentViewBuilder",()=>_,"DEFAULT_INTENT_HANDLER",()=>al,"DocumentBuilder",()=>ae,"DocumentListBuilder",()=>ar,"DocumentListItemBuilder",()=>ay,"DocumentTypeListBuilder",()=>aA,"FormViewBuilder",()=>aa,"GenericListBuilder",()=>aq,"GenericViewBuilder",()=>Z,"HELP_URL",()=>K,"InitialValueTemplateItemBuilder",()=>ah,"ListBuilder",()=>aw,"ListItemBuilder",()=>ax,"MenuItemBuilder",()=>O,"MenuItemGroupBuilder",()=>S,"SerializeError",()=>J,"StructureToolProvider",()=>aG,"component",()=>ac,"createStructureBuilder",()=>aF,"defaultInitialValueTemplateItems",()=>ai,"defaultIntentChecker",()=>am,"documentFromEditor",()=>af,"documentFromEditorWithInitialValue",()=>ag,"form",()=>ab,"getExtendedProjection",()=>I,"getOrderingMenuItem",()=>P,"getOrderingMenuItemsForSchemaType",()=>Q,"getTypeNamesFromFilter",()=>as,"isDocumentListItem",()=>az,"maybeSerializeInitialValueTemplateItem",()=>aj,"maybeSerializeMenuItem",()=>N,"maybeSerializeMenuItemGroup",()=>R,"maybeSerializeView",()=>$,"menuItemsFromInitialValueTemplateItems",()=>ak,"shallowIntentChecker",()=>ap,"structureLocaleNamespace",()=>F,"structureUsEnglishLocaleBundle",()=>G],306978);var aH=a.i(331004),aI=a.i(775716),aJ=a.i(738242),aK=a.i(311315),aL=a.i(952535),aM=a.i(839062),aN=a.i(842611),aO=a.i(241664),aP=a.i(765768),aQ=a.i(779454),aQ=aQ,aR=a.i(934103),aS=a.i(866407),aT=a.i(875730),aU=a.i(130379),aV=a.i(100050),aW=a.i(272036),aX=a.i(395224),aY=a.i(155733),aZ=a.i(953113),a$=a.i(727500);let a_=({clientWidth:a,clientHeight:b,scrollWidth:c,scrollHeight:d})=>d>b||c>a,a0=a=>{let b=window.getComputedStyle(a).overflow;return b.includes("auto")||b.includes("scroll")},a1=a=>{if(null==a)return{x:0,y:0};let{scrollTop:b,scrollHeight:c,clientHeight:d,scrollLeft:e,scrollWidth:f,clientWidth:g}=a;return{x:e?e/Math.max(1e-5,f-g):0,y:b?b/Math.max(1e-5,c-d):0}};function a2(){return(a2=Object.assign.bind()).apply(null,arguments)}function a3(a){return a.matches("body *")?a:window}class a4{constructor(a,b={}){var c,d=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(a){if(d.paused||!a.currentTarget)return;let b=d.getScrollContainer(a.currentTarget);await new Promise(a=>{requestAnimationFrame(()=>a())}),d.mirrorScrollPositions(a1(b),b)},this.elements=[...a].filter(Boolean).map(a=>this.getScrollContainer(a)),this.elements=[...new Set(this.elements)],this.options=a2({},this.defaults,b),this.options.debug&&(this.logger=(c="[scroll-mirror]",{log:(...a)=>console.log(c,...a),warn:(...a)=>console.warn(c,...a),error:(...a)=>console.error(c,...a)}),function(a,b){if(a.length<1)null==b||b.warn("No elements provided.");else for(let c of(a.length<2&&(null==b||b.warn("Only one element provided.",a)),a.some(a=>!a)&&(null==b||b.error("Some elements are not defined.",a)),a))c instanceof HTMLElement&&!a_(c)&&(null==b||b.warn("Element doesn't have overflow:",c)),c instanceof HTMLElement&&c.matches("body *")&&!a0(c)&&(null==b||b.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',c))}(this.elements,this.logger)),this.elements.forEach(a=>this.addScrollHandler(a)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(a1(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(a=>this.removeScrollHandler(a))}addScrollHandler(a){this.removeScrollHandler(a),a3(a).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(a){a3(a).removeEventListener("scroll",this.handleScroll)}getScrollContainer(a){return a instanceof HTMLElement&&a.matches("body *")?a:document.documentElement}mirrorScrollPositions(a,b){this.elements.forEach(c=>{b!==c&&(this.removeScrollHandler(c),this.setScrollPosition(a,c),window.requestAnimationFrame(()=>{this.addScrollHandler(c)}))})}setScrollPosition(a,b){let{vertical:c,horizontal:d}=this.options,e=b.scrollWidth-b.clientWidth,f=b.scrollHeight-b.clientHeight;c&&f&&b.scrollTo({top:f*a.y,behavior:"instant"}),d&&e&&b.scrollTo({left:e*a.x,behavior:"instant"})}get progress(){return a1(this.elements.find(a=>a_(a)))}set progress(a){"number"==typeof a&&(a={x:a,y:a});let b=a2({},this.progress,a);(function(a,b){let c=!0;for(let[d,e]of Object.entries(a))("number"!=typeof e||e<0||e>1)&&(null==b||b.error(`progress.${d} must be a number between 0-1`),c=!1);return c})(b,this.logger)&&this.mirrorScrollPositions(b)}}var a5=a.i(630407),a6=a.i(348074),a7=k,a8=a.i(940337),a9=a.i(175920);let ba=Math.ceil(10*Math.random());function bb(a){return Object.prototype.toString.call(a).slice(8,-1)}function bc(a){let b=bb(a);return"Object"!==b&&"Array"!==b}class bd extends a7.Component{shouldComponentUpdate(a){return a.highlight!==this.props.highlight}render(){let a=this.props.string||"",b=this.props.highlight||"",c=a.search(b);if(!b||-1===c)return(0,g.jsx)("span",{children:a});let d=b.source.length,e=a.slice(c,c+d);return(0,g.jsx)("span",{children:a.split(b).map(function(a,b){return(0,g.jsxs)("span",{children:[b>0?(0,g.jsx)("span",{className:"json-inspector__hl",children:e}):null,a]},b)})})}}function be(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}class bf extends a7.Component{constructor(a){super(a),this.state={expanded:this._isInitiallyExpanded(this.props)}}render(){let{label:a,data:b,root:c,id:d}=this.props,e="id_"+ ++ba,f={path:this.keypath(),key:a.toString(),value:b},h=this._onClick.bind(this,f);return(0,g.jsxs)("div",{"data-testid":c?"leaf-root":"leaf-child","aria-expanded":this.state.expanded,"data-root":c||void 0,className:this.getClassName(),id:"leaf-"+this._rootPath(),children:[(0,g.jsx)("input",{className:"json-inspector__radio",type:"radio",name:e,id:d,tabIndex:-1}),(0,g.jsxs)("label",{className:"json-inspector__line",htmlFor:e,onClick:h,children:[(0,g.jsx)("div",{className:"json-inspector__flatpath",children:f.path}),(0,g.jsxs)("span",{className:"json-inspector__key",children:[this.format(f.key),":",this.renderInteractiveLabel(f.key,!0)]}),this.renderTitle(),this.renderShowOriginalButton()]}),this.renderChildren()]})}renderTitle(){var a,b;let c=this.data(),d=bb(c);if(Array.isArray(c)){let b=c.length;return(0,g.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[b>0?"[…] ":"[] ",(a=b)+(1===a?" item":" items")]})}if("object"==typeof c&&null!==c){let a=Object.keys(c).length;return(0,g.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[a>0?"{…} ":"{} ",(b=a)+(1===b?" property":" properties")]})}return(0,g.jsxs)("span",{className:"json-inspector__value json-inspector__value_"+d.toLowerCase(),children:[this.format(String(c)),this.renderInteractiveLabel(c,!1)]})}renderChildren(){let{verboseShowOriginal:a,query:b,id:c,isExpanded:d,interactiveLabel:e,onClick:f,getOriginal:h}=this.props,i=this._rootPath(),j=this.data();return this.state.expanded&&(be(j)||Array.isArray(j))?Object.keys(j).map(k=>{var l,m;let n=j[k],o=!this.state.original||!!a&&b;return(0,g.jsx)(bf,{data:n,label:k,prefix:i,onClick:f,id:c,query:b,getOriginal:o?h:void 0,isExpanded:d,interactiveLabel:e,verboseShowOriginal:a},(l=k,bc(m=n)?l+":"+(0,a9.default)(String(m)):l+"["+bb(m)+"]"))}):null}renderShowOriginalButton(){let{data:a,getOriginal:b,query:c}=this.props;return bc(a)||this.state.original||!b||!c||c.test(this.keypath())?null:(0,g.jsx)("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})}renderInteractiveLabel(a,b){let c=this.props.interactiveLabel;return"function"==typeof c?(0,g.jsx)(c,{value:String(a),originalValue:a,isKey:b,keypath:this.keypath()}):null}static getDerivedStateFromProps(a,b){return a.query?{expanded:!a.query.test(a.label)}:null}componentDidUpdate(a){a.query&&!this.props.query&&this.setState({expanded:this._isInitiallyExpanded(this.props)})}_rootPath(){return(this.props.prefix||"")+"."+this.props.label}keypath(){return this._rootPath().slice(6)}data(){return this.state.original||this.props.data}format(a){return(0,g.jsx)(bd,{string:a,highlight:this.props.query})}getClassName(){let a="json-inspector__leaf";return this.props.root&&(a+=" json-inspector__leaf_root"),this.state.expanded&&(a+=" json-inspector__leaf_expanded"),bc(this.props.data)||(a+=" json-inspector__leaf_composite"),a}toggle(){this.setState({expanded:!this.state.expanded})}_onClick(a,b){this.toggle(),this.props.onClick&&this.props.onClick(a),b.stopPropagation()}_onShowOriginalClick=a=>{this.setState({original:this.props.getOriginal?.(this.keypath())}),a.stopPropagation()};_isInitiallyExpanded(a){if(a.root)return!0;let b=this.keypath();return a.query?!a.query.test(b)&&"function"==typeof a.getOriginal:!!a.isExpanded&&a.isExpanded(b,a.data)}}let bg=(...a)=>{},bh=({onChange:a=bg})=>{let b=(0,a7.useCallback)(b=>a(b.target.value),[a]);return(0,g.jsx)("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:b})};function bi(a){return be(a)?0===Object.keys(a).length:Array.isArray(a)?0===a.length:null===a||"string"!=typeof a||"number"!=typeof a||0===Object.keys(a).length}let bj=(f=(a,b)=>{let c=b||{cacheResults:!0},d={};return function(b){let e;if(!c.cacheResults)return bk(a,b,c);if(!d[b]){for(var f=b.length-1;f>0;f-=1)if(d[e=b.slice(0,f)]){d[b]=bk(d[e],b,c);break}}return d[b]||(d[b]=bk(a,b,c)),d[b]}},(a,b)=>(e&&a===c&&b===d||(c=a,d=b,e=f(a,b)),e));function bk(a,b,c){return be(a)||Array.isArray(a)?Object.keys(a).reduce(function(d,e){let f,g=a[e];return g&&("object"!=typeof g?(bl(b,e,c)||bl(b,g,c))&&(d[e]=g):bl(b,e,c)?d[e]=g:bi(f=bk(g,b,c))||Object.assign(d,{[e]:f})),d},{}):{}}function bl(a,b,c){if(!b)return!1;var d=String(b),e=a;return c?.ignoreCase&&(d=d.toLowerCase(),e=e.toLowerCase()),-1!==d.indexOf(e)}function bm(a){return parseInt(a,10)}let bn=a=>a.length>=2,bo={cacheResults:!0,ignoreCase:!1};class bp extends a7.Component{static defaultProps={data:null,search:bh,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:bg,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(a){return a.length>=2},isExpanded:function(a,b){return!1},verboseShowOriginal:!1};constructor(a){super(a),this.state={query:"",filterer:bj(a.data,a.filterOptions)}}render(){let{data:a,className:b,onClick:c,id:d,isExpanded:e,interactiveLabel:f,verboseShowOriginal:h,filterOptions:i=bo,validateQuery:j=bn}=this.props,k=""!==this.state.query&&j(this.state.query),l=k?this.state.filterer(this.state.query):a,m=k&&bi(l);return(0,g.jsxs)("div",{"data-testid":"json-inspector",className:"json-inspector "+b,children:[this.renderToolbar(),m?(0,g.jsx)("div",{className:"json-inspector__not-found",children:"Nothing found"}):(0,g.jsx)(bf,{data:l,onClick:c,id:d,getOriginal:this.getOriginal,query:k?new RegExp(this.state.query,i.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:e,interactiveLabel:f,verboseShowOriginal:h})]})}renderToolbar(){let a=this.props.search;return a?(0,g.jsx)("div",{className:"json-inspector__toolbar",children:(0,g.jsx)(a,{onChange:(0,a8.default)(this.search,this.props.searchOptions?.debounceTime),data:this.props.data,query:this.state.query})}):null}search=a=>{this.setState({query:a})};static getDerivedStateFromProps(a,b){let c=bj(a.data,a.filterOptions);return c===b.filterer?null:{...b,filterer:c}}shouldComponentUpdate(a,b){return b.query!==this.state.query||a.data!==this.props.data||a.onClick!==this.props.onClick}createFilterer=(a,b)=>{this.setState({filterer:bj(a,b)})};getOriginal=a=>(function a(b,c){var d=c.split("."),e=d.shift();return e?Array.isArray(b)&&b[bm(e)]?a(b[bm(e)],d.join(".")):be(b)&&e in b?a(b[e],d.join(".")):void 0:b})(this.props.data,a)}var bq=a.i(135027),br=a.i(189766),bs=a.i(275632),bt=a.i(35596),bu=a.i(256711),bv=a.i(800724),bw=a.i(547497),bx=a.i(564416),by=a.i(113028),bz=a.i(586276);function bA(a,b){return"function"==typeof a?a(b):a}function bB(a,b){return c=>{b.setState(b=>({...b,[a]:bA(c,b[a])}))}}function bC(a){return a instanceof Function}function bD(a,b,c){let d,e=[];return f=>{let g,h;c.key&&c.debug&&(g=Date.now());let i=a(f);if(!(i.length!==e.length||i.some((a,b)=>e[b]!==a)))return d;if(e=i,c.key&&c.debug&&(h=Date.now()),d=b(...i),null==c||null==c.onChange||c.onChange(d),c.key&&c.debug&&null!=c&&c.debug()){let a=Math.round((Date.now()-g)*100)/100,b=Math.round((Date.now()-h)*100)/100,d=b/16,e=(a,b)=>{for(a=String(a);a.length<b;)a=" "+a;return a};console.info(`%c⏱ ${e(b,5)} /${e(a,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,null==c?void 0:c.key)}return d}}function bE(a,b,c,d){return{debug:()=>{var c;return null!=(c=null==a?void 0:a.debugAll)?c:a[b]},key:!1,onChange:d}}let bF="debugHeaders";function bG(a,b,c){var d;let e={id:null!=(d=c.id)?d:b.id,column:b,index:c.index,isPlaceholder:!!c.isPlaceholder,placeholderId:c.placeholderId,depth:c.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let a=[],b=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(b),a.push(c)};return b(e),a},getContext:()=>({table:a,header:e,column:b})};return a._features.forEach(b=>{null==b.createHeader||b.createHeader(e,a)}),e}function bH(a,b,c,d){var e,f;let g=0,h=function(a,b){void 0===b&&(b=1),g=Math.max(g,b),a.filter(a=>a.getIsVisible()).forEach(a=>{var c;null!=(c=a.columns)&&c.length&&h(a.columns,b+1)},0)};h(a);let i=[],j=(a,b)=>{let e={depth:b,id:[d,`${b}`].filter(Boolean).join("_"),headers:[]},f=[];a.forEach(a=>{let g,h=[...f].reverse()[0],i=a.column.depth===e.depth,j=!1;if(i&&a.column.parent?g=a.column.parent:(g=a.column,j=!0),h&&(null==h?void 0:h.column)===g)h.subHeaders.push(a);else{let e=bG(c,g,{id:[d,b,g.id,null==a?void 0:a.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${f.filter(a=>a.column===g).length}`:void 0,depth:b,index:f.length});e.subHeaders.push(a),f.push(e)}e.headers.push(a),a.headerGroup=e}),i.push(e),b>0&&j(f,b-1)};j(b.map((a,b)=>bG(c,a,{depth:g,index:b})),g-1),i.reverse();let k=a=>a.filter(a=>a.column.getIsVisible()).map(a=>{let b=0,c=0,d=[0];return a.subHeaders&&a.subHeaders.length?(d=[],k(a.subHeaders).forEach(a=>{let{colSpan:c,rowSpan:e}=a;b+=c,d.push(e)})):b=1,c+=Math.min(...d),a.colSpan=b,a.rowSpan=c,{colSpan:b,rowSpan:c}});return k(null!=(e=null==(f=i[0])?void 0:f.headers)?e:[]),i}let bI=(a,b,c,d,e,f,g)=>{let h={id:b,index:d,original:c,depth:e,parentId:g,_valuesCache:{},_uniqueValuesCache:{},getValue:b=>{if(h._valuesCache.hasOwnProperty(b))return h._valuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return h._valuesCache[b]=c.accessorFn(h.original,d),h._valuesCache[b]},getUniqueValues:b=>{if(h._uniqueValuesCache.hasOwnProperty(b))return h._uniqueValuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return c.columnDef.getUniqueValues?h._uniqueValuesCache[b]=c.columnDef.getUniqueValues(h.original,d):h._uniqueValuesCache[b]=[h.getValue(b)],h._uniqueValuesCache[b]},renderValue:b=>{var c;return null!=(c=h.getValue(b))?c:a.options.renderFallbackValue},subRows:null!=f?f:[],getLeafRows:()=>{var a,b;let c,d;return a=h.subRows,b=a=>a.subRows,c=[],(d=a=>{a.forEach(a=>{c.push(a);let e=b(a);null!=e&&e.length&&d(e)})})(a),c},getParentRow:()=>h.parentId?a.getRow(h.parentId,!0):void 0,getParentRows:()=>{let a=[],b=h;for(;;){let c=b.getParentRow();if(!c)break;a.push(c),b=c}return a.reverse()},getAllCells:bD(()=>[a.getAllLeafColumns()],b=>b.map(b=>{var c;let d;return c=b.id,d={id:`${h.id}_${b.id}`,row:h,column:b,getValue:()=>h.getValue(c),renderValue:()=>{var b;return null!=(b=d.getValue())?b:a.options.renderFallbackValue},getContext:bD(()=>[a,b,h,d],(a,b,c,d)=>({table:a,column:b,row:c,cell:d,getValue:d.getValue,renderValue:d.renderValue}),bE(a.options,"debugCells","cell.getContext"))},a._features.forEach(c=>{null==c.createCell||c.createCell(d,b,h,a)},{}),d}),bE(a.options,"debugRows","getAllCells")),_getAllCellsByColumnId:bD(()=>[h.getAllCells()],a=>a.reduce((a,b)=>(a[b.column.id]=b,a),{}),bE(a.options,"debugRows","getAllCellsByColumnId"))};for(let b=0;b<a._features.length;b++){let c=a._features[b];null==c||null==c.createRow||c.createRow(h,a)}return h},bJ=(a,b,c)=>{var d,e;let f=null==c||null==(d=c.toString())?void 0:d.toLowerCase();return!!(null==(e=a.getValue(b))||null==(e=e.toString())||null==(e=e.toLowerCase())?void 0:e.includes(f))};bJ.autoRemove=a=>bT(a);let bK=(a,b,c)=>{var d;return!!(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.includes(c))};bK.autoRemove=a=>bT(a);let bL=(a,b,c)=>{var d;return(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.toLowerCase())===(null==c?void 0:c.toLowerCase())};bL.autoRemove=a=>bT(a);let bM=(a,b,c)=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)};bM.autoRemove=a=>bT(a);let bN=(a,b,c)=>!c.some(c=>{var d;return!(null!=(d=a.getValue(b))&&d.includes(c))});bN.autoRemove=a=>bT(a)||!(null!=a&&a.length);let bO=(a,b,c)=>c.some(c=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)});bO.autoRemove=a=>bT(a)||!(null!=a&&a.length);let bP=(a,b,c)=>a.getValue(b)===c;bP.autoRemove=a=>bT(a);let bQ=(a,b,c)=>a.getValue(b)==c;bQ.autoRemove=a=>bT(a);let bR=(a,b,c)=>{let[d,e]=c,f=a.getValue(b);return f>=d&&f<=e};bR.resolveFilterValue=a=>{let[b,c]=a,d="number"!=typeof b?parseFloat(b):b,e="number"!=typeof c?parseFloat(c):c,f=null===b||Number.isNaN(d)?-1/0:d,g=null===c||Number.isNaN(e)?1/0:e;if(f>g){let a=f;f=g,g=a}return[f,g]},bR.autoRemove=a=>bT(a)||bT(a[0])&&bT(a[1]);let bS={includesString:bJ,includesStringSensitive:bK,equalsString:bL,arrIncludes:bM,arrIncludesAll:bN,arrIncludesSome:bO,equals:bP,weakEquals:bQ,inNumberRange:bR};function bT(a){return null==a||""===a}function bU(a,b,c){return!!a&&!!a.autoRemove&&a.autoRemove(b,c)||void 0===b||"string"==typeof b&&!b}let bV={sum:(a,b,c)=>c.reduce((b,c)=>{let d=c.getValue(a);return b+("number"==typeof d?d:0)},0),min:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d>c||void 0===d&&c>=c)&&(d=c)}),d},max:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d<c||void 0===d&&c>=c)&&(d=c)}),d},extent:(a,b,c)=>{let d,e;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(void 0===d?c>=c&&(d=e=c):(d>c&&(d=c),e<c&&(e=c)))}),[d,e]},mean:(a,b)=>{let c=0,d=0;if(b.forEach(b=>{let e=b.getValue(a);null!=e&&(e*=1)>=e&&(++c,d+=e)}),c)return d/c},median:(a,b)=>{if(!b.length)return;let c=b.map(b=>b.getValue(a));if(!(Array.isArray(c)&&c.every(a=>"number"==typeof a)))return;if(1===c.length)return c[0];let d=Math.floor(c.length/2),e=c.sort((a,b)=>a-b);return c.length%2!=0?e[d]:(e[d-1]+e[d])/2},unique:(a,b)=>Array.from(new Set(b.map(b=>b.getValue(a))).values()),uniqueCount:(a,b)=>new Set(b.map(b=>b.getValue(a))).size,count:(a,b)=>b.length},bW=()=>({left:[],right:[]}),bX={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},bY=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bZ=null;function b$(a){return"touchstart"===a.type}function b_(a,b){return b?"center"===b?a.getCenterVisibleLeafColumns():"left"===b?a.getLeftVisibleLeafColumns():a.getRightVisibleLeafColumns():a.getVisibleLeafColumns()}let b0=()=>({pageIndex:0,pageSize:10}),b1=()=>({top:[],bottom:[]}),b2=(a,b,c,d,e)=>{var f;let g=e.getRow(b,!0);c?(g.getCanMultiSelect()||Object.keys(a).forEach(b=>delete a[b]),g.getCanSelect()&&(a[b]=!0)):delete a[b],d&&null!=(f=g.subRows)&&f.length&&g.getCanSelectSubRows()&&g.subRows.forEach(b=>b2(a,b.id,c,d,e))};function b3(a,b){let c=a.getState().rowSelection,d=[],e={},f=function(a,b){return a.map(a=>{var b;let g=b4(a,c);if(g&&(d.push(a),e[a.id]=a),null!=(b=a.subRows)&&b.length&&(a={...a,subRows:f(a.subRows)}),g)return a}).filter(Boolean)};return{rows:f(b.rows),flatRows:d,rowsById:e}}function b4(a,b){var c;return null!=(c=b[a.id])&&c}function b5(a,b,c){var d;if(!(null!=(d=a.subRows)&&d.length))return!1;let e=!0,f=!1;return a.subRows.forEach(a=>{if((!f||e)&&(a.getCanSelect()&&(b4(a,b)?f=!0:e=!1),a.subRows&&a.subRows.length)){let c=b5(a,b);"all"===c?f=!0:("some"===c&&(f=!0),e=!1)}}),e?"all":!!f&&"some"}let b6=/([0-9]+)/gm;function b7(a,b){return a===b?0:a>b?1:-1}function b8(a){return"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?"":String(a):"string"==typeof a?a:""}function b9(a,b){let c=a.split(b6).filter(Boolean),d=b.split(b6).filter(Boolean);for(;c.length&&d.length;){let a=c.shift(),b=d.shift(),e=parseInt(a,10),f=parseInt(b,10),g=[e,f].sort();if(isNaN(g[0])){if(a>b)return 1;if(b>a)return -1;continue}if(isNaN(g[1]))return isNaN(e)?-1:1;if(e>f)return 1;if(f>e)return -1}return c.length-d.length}let ca={alphanumeric:(a,b,c)=>b9(b8(a.getValue(c)).toLowerCase(),b8(b.getValue(c)).toLowerCase()),alphanumericCaseSensitive:(a,b,c)=>b9(b8(a.getValue(c)),b8(b.getValue(c))),text:(a,b,c)=>b7(b8(a.getValue(c)).toLowerCase(),b8(b.getValue(c)).toLowerCase()),textCaseSensitive:(a,b,c)=>b7(b8(a.getValue(c)),b8(b.getValue(c))),datetime:(a,b,c)=>{let d=a.getValue(c),e=b.getValue(c);return d>e?1:d<e?-1:0},basic:(a,b,c)=>b7(a.getValue(c),b.getValue(c))},cb=[{createTable:a=>{a.getHeaderGroups=bD(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>{var f,g;let h=null!=(f=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?f:[],i=null!=(g=null==e?void 0:e.map(a=>c.find(b=>b.id===a)).filter(Boolean))?g:[];return bH(b,[...h,...c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),...i],a)},bE(a.options,bF,"getHeaderGroups")),a.getCenterHeaderGroups=bD(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>bH(b,c=c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),a,"center"),bE(a.options,bF,"getCenterHeaderGroups")),a.getLeftHeaderGroups=bD(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left],(b,c,d)=>{var e;return bH(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"left")},bE(a.options,bF,"getLeftHeaderGroups")),a.getRightHeaderGroups=bD(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.right],(b,c,d)=>{var e;return bH(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"right")},bE(a.options,bF,"getRightHeaderGroups")),a.getFooterGroups=bD(()=>[a.getHeaderGroups()],a=>[...a].reverse(),bE(a.options,bF,"getFooterGroups")),a.getLeftFooterGroups=bD(()=>[a.getLeftHeaderGroups()],a=>[...a].reverse(),bE(a.options,bF,"getLeftFooterGroups")),a.getCenterFooterGroups=bD(()=>[a.getCenterHeaderGroups()],a=>[...a].reverse(),bE(a.options,bF,"getCenterFooterGroups")),a.getRightFooterGroups=bD(()=>[a.getRightHeaderGroups()],a=>[...a].reverse(),bE(a.options,bF,"getRightFooterGroups")),a.getFlatHeaders=bD(()=>[a.getHeaderGroups()],a=>a.map(a=>a.headers).flat(),bE(a.options,bF,"getFlatHeaders")),a.getLeftFlatHeaders=bD(()=>[a.getLeftHeaderGroups()],a=>a.map(a=>a.headers).flat(),bE(a.options,bF,"getLeftFlatHeaders")),a.getCenterFlatHeaders=bD(()=>[a.getCenterHeaderGroups()],a=>a.map(a=>a.headers).flat(),bE(a.options,bF,"getCenterFlatHeaders")),a.getRightFlatHeaders=bD(()=>[a.getRightHeaderGroups()],a=>a.map(a=>a.headers).flat(),bE(a.options,bF,"getRightFlatHeaders")),a.getCenterLeafHeaders=bD(()=>[a.getCenterFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),bE(a.options,bF,"getCenterLeafHeaders")),a.getLeftLeafHeaders=bD(()=>[a.getLeftFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),bE(a.options,bF,"getLeftLeafHeaders")),a.getRightLeafHeaders=bD(()=>[a.getRightFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),bE(a.options,bF,"getRightLeafHeaders")),a.getLeafHeaders=bD(()=>[a.getLeftHeaderGroups(),a.getCenterHeaderGroups(),a.getRightHeaderGroups()],(a,b,c)=>{var d,e,f,g,h,i;return[...null!=(d=null==(e=a[0])?void 0:e.headers)?d:[],...null!=(f=null==(g=b[0])?void 0:g.headers)?f:[],...null!=(h=null==(i=c[0])?void 0:i.headers)?h:[]].map(a=>a.getLeafHeaders()).flat()},bE(a.options,bF,"getLeafHeaders"))}},{getInitialState:a=>({columnVisibility:{},...a}),getDefaultOptions:a=>({onColumnVisibilityChange:bB("columnVisibility",a)}),createColumn:(a,b)=>{a.toggleVisibility=c=>{a.getCanHide()&&b.setColumnVisibility(b=>({...b,[a.id]:null!=c?c:!a.getIsVisible()}))},a.getIsVisible=()=>{var c,d;let e=a.columns;return null==(c=e.length?e.some(a=>a.getIsVisible()):null==(d=b.getState().columnVisibility)?void 0:d[a.id])||c},a.getCanHide=()=>{var c,d;return(null==(c=a.columnDef.enableHiding)||c)&&(null==(d=b.options.enableHiding)||d)},a.getToggleVisibilityHandler=()=>b=>{null==a.toggleVisibility||a.toggleVisibility(b.target.checked)}},createRow:(a,b)=>{a._getAllVisibleCells=bD(()=>[a.getAllCells(),b.getState().columnVisibility],a=>a.filter(a=>a.column.getIsVisible()),bE(b.options,"debugRows","_getAllVisibleCells")),a.getVisibleCells=bD(()=>[a.getLeftVisibleCells(),a.getCenterVisibleCells(),a.getRightVisibleCells()],(a,b,c)=>[...a,...b,...c],bE(b.options,"debugRows","getVisibleCells"))},createTable:a=>{let b=(b,c)=>bD(()=>[c(),c().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(a=>null==a.getIsVisible?void 0:a.getIsVisible()),bE(a.options,"debugColumns",b));a.getVisibleFlatColumns=b("getVisibleFlatColumns",()=>a.getAllFlatColumns()),a.getVisibleLeafColumns=b("getVisibleLeafColumns",()=>a.getAllLeafColumns()),a.getLeftVisibleLeafColumns=b("getLeftVisibleLeafColumns",()=>a.getLeftLeafColumns()),a.getRightVisibleLeafColumns=b("getRightVisibleLeafColumns",()=>a.getRightLeafColumns()),a.getCenterVisibleLeafColumns=b("getCenterVisibleLeafColumns",()=>a.getCenterLeafColumns()),a.setColumnVisibility=b=>null==a.options.onColumnVisibilityChange?void 0:a.options.onColumnVisibilityChange(b),a.resetColumnVisibility=b=>{var c;a.setColumnVisibility(b?{}:null!=(c=a.initialState.columnVisibility)?c:{})},a.toggleAllColumnsVisible=b=>{var c;b=null!=(c=b)?c:!a.getIsAllColumnsVisible(),a.setColumnVisibility(a.getAllLeafColumns().reduce((a,c)=>({...a,[c.id]:b||!(null!=c.getCanHide&&c.getCanHide())}),{}))},a.getIsAllColumnsVisible=()=>!a.getAllLeafColumns().some(a=>!(null!=a.getIsVisible&&a.getIsVisible())),a.getIsSomeColumnsVisible=()=>a.getAllLeafColumns().some(a=>null==a.getIsVisible?void 0:a.getIsVisible()),a.getToggleAllColumnsVisibilityHandler=()=>b=>{var c;a.toggleAllColumnsVisible(null==(c=b.target)?void 0:c.checked)}}},{getInitialState:a=>({columnOrder:[],...a}),getDefaultOptions:a=>({onColumnOrderChange:bB("columnOrder",a)}),createColumn:(a,b)=>{a.getIndex=bD(a=>[b_(b,a)],b=>b.findIndex(b=>b.id===a.id),bE(b.options,"debugColumns","getIndex")),a.getIsFirstColumn=c=>{var d;return(null==(d=b_(b,c)[0])?void 0:d.id)===a.id},a.getIsLastColumn=c=>{var d;let e=b_(b,c);return(null==(d=e[e.length-1])?void 0:d.id)===a.id}},createTable:a=>{a.setColumnOrder=b=>null==a.options.onColumnOrderChange?void 0:a.options.onColumnOrderChange(b),a.resetColumnOrder=b=>{var c;a.setColumnOrder(b?[]:null!=(c=a.initialState.columnOrder)?c:[])},a._getOrderColumnsFn=bD(()=>[a.getState().columnOrder,a.getState().grouping,a.options.groupedColumnMode],(a,b,c)=>d=>{let e=[];if(null!=a&&a.length){let b=[...a],c=[...d];for(;c.length&&b.length;){let a=b.shift(),d=c.findIndex(b=>b.id===a);d>-1&&e.push(c.splice(d,1)[0])}e=[...e,...c]}else e=d;var f=e;if(!(null!=b&&b.length)||!c)return f;let g=f.filter(a=>!b.includes(a.id));return"remove"===c?g:[...b.map(a=>f.find(b=>b.id===a)).filter(Boolean),...g]},bE(a.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:a=>({columnPinning:bW(),...a}),getDefaultOptions:a=>({onColumnPinningChange:bB("columnPinning",a)}),createColumn:(a,b)=>{a.pin=c=>{let d=a.getLeafColumns().map(a=>a.id).filter(Boolean);b.setColumnPinning(a=>{var b,e,f,g,h,i;return"right"===c?{left:(null!=(f=null==a?void 0:a.left)?f:[]).filter(a=>!(null!=d&&d.includes(a))),right:[...(null!=(g=null==a?void 0:a.right)?g:[]).filter(a=>!(null!=d&&d.includes(a))),...d]}:"left"===c?{left:[...(null!=(h=null==a?void 0:a.left)?h:[]).filter(a=>!(null!=d&&d.includes(a))),...d],right:(null!=(i=null==a?void 0:a.right)?i:[]).filter(a=>!(null!=d&&d.includes(a)))}:{left:(null!=(b=null==a?void 0:a.left)?b:[]).filter(a=>!(null!=d&&d.includes(a))),right:(null!=(e=null==a?void 0:a.right)?e:[]).filter(a=>!(null!=d&&d.includes(a)))}})},a.getCanPin=()=>a.getLeafColumns().some(a=>{var c,d,e;return(null==(c=a.columnDef.enablePinning)||c)&&(null==(d=null!=(e=b.options.enableColumnPinning)?e:b.options.enablePinning)||d)}),a.getIsPinned=()=>{let c=a.getLeafColumns().map(a=>a.id),{left:d,right:e}=b.getState().columnPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"left":!!g&&"right"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();return e?null!=(c=null==(d=b.getState().columnPinning)||null==(d=d[e])?void 0:d.indexOf(a.id))?c:-1:0}},createRow:(a,b)=>{a.getCenterVisibleCells=bD(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left,b.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.column.id))},bE(b.options,"debugRows","getCenterVisibleCells")),a.getLeftVisibleCells=bD(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"left"})),bE(b.options,"debugRows","getLeftVisibleCells")),a.getRightVisibleCells=bD(()=>[a._getAllVisibleCells(),b.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"right"})),bE(b.options,"debugRows","getRightVisibleCells"))},createTable:a=>{a.setColumnPinning=b=>null==a.options.onColumnPinningChange?void 0:a.options.onColumnPinningChange(b),a.resetColumnPinning=b=>{var c,d;return a.setColumnPinning(b?bW():null!=(c=null==(d=a.initialState)?void 0:d.columnPinning)?c:bW())},a.getIsSomeColumnsPinned=b=>{var c,d,e;let f=a.getState().columnPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.left)?void 0:d.length)||(null==(e=f.right)?void 0:e.length))},a.getLeftLeafColumns=bD(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),bE(a.options,"debugColumns","getLeftLeafColumns")),a.getRightLeafColumns=bD(()=>[a.getAllLeafColumns(),a.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),bE(a.options,"debugColumns","getRightLeafColumns")),a.getCenterLeafColumns=bD(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.id))},bE(a.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(a,b)=>{a._getFacetedRowModel=b.options.getFacetedRowModel&&b.options.getFacetedRowModel(b,a.id),a.getFacetedRowModel=()=>a._getFacetedRowModel?a._getFacetedRowModel():b.getPreFilteredRowModel(),a._getFacetedUniqueValues=b.options.getFacetedUniqueValues&&b.options.getFacetedUniqueValues(b,a.id),a.getFacetedUniqueValues=()=>a._getFacetedUniqueValues?a._getFacetedUniqueValues():new Map,a._getFacetedMinMaxValues=b.options.getFacetedMinMaxValues&&b.options.getFacetedMinMaxValues(b,a.id),a.getFacetedMinMaxValues=()=>{if(a._getFacetedMinMaxValues)return a._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:a=>({columnFilters:[],...a}),getDefaultOptions:a=>({onColumnFiltersChange:bB("columnFilters",a),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(a,b)=>{a.getAutoFilterFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"string"==typeof d?bS.includesString:"number"==typeof d?bS.inNumberRange:"boolean"==typeof d||null!==d&&"object"==typeof d?bS.equals:Array.isArray(d)?bS.arrIncludes:bS.weakEquals},a.getFilterFn=()=>{var c,d;return bC(a.columnDef.filterFn)?a.columnDef.filterFn:"auto"===a.columnDef.filterFn?a.getAutoFilterFn():null!=(c=null==(d=b.options.filterFns)?void 0:d[a.columnDef.filterFn])?c:bS[a.columnDef.filterFn]},a.getCanFilter=()=>{var c,d,e;return(null==(c=a.columnDef.enableColumnFilter)||c)&&(null==(d=b.options.enableColumnFilters)||d)&&(null==(e=b.options.enableFilters)||e)&&!!a.accessorFn},a.getIsFiltered=()=>a.getFilterIndex()>-1,a.getFilterValue=()=>{var c;return null==(c=b.getState().columnFilters)||null==(c=c.find(b=>b.id===a.id))?void 0:c.value},a.getFilterIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().columnFilters)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.setFilterValue=c=>{b.setColumnFilters(b=>{var d,e;let f=a.getFilterFn(),g=null==b?void 0:b.find(b=>b.id===a.id),h=bA(c,g?g.value:void 0);if(bU(f,h,a))return null!=(d=null==b?void 0:b.filter(b=>b.id!==a.id))?d:[];let i={id:a.id,value:h};return g?null!=(e=null==b?void 0:b.map(b=>b.id===a.id?i:b))?e:[]:null!=b&&b.length?[...b,i]:[i]})}},createRow:(a,b)=>{a.columnFilters={},a.columnFiltersMeta={}},createTable:a=>{a.setColumnFilters=b=>{let c=a.getAllLeafColumns();null==a.options.onColumnFiltersChange||a.options.onColumnFiltersChange(a=>{var d;return null==(d=bA(b,a))?void 0:d.filter(a=>{let b=c.find(b=>b.id===a.id);return!(b&&bU(b.getFilterFn(),a.value,b))&&!0})})},a.resetColumnFilters=b=>{var c,d;a.setColumnFilters(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.columnFilters)?c:[])},a.getPreFilteredRowModel=()=>a.getCoreRowModel(),a.getFilteredRowModel=()=>(!a._getFilteredRowModel&&a.options.getFilteredRowModel&&(a._getFilteredRowModel=a.options.getFilteredRowModel(a)),a.options.manualFiltering||!a._getFilteredRowModel)?a.getPreFilteredRowModel():a._getFilteredRowModel()}},{createTable:a=>{a._getGlobalFacetedRowModel=a.options.getFacetedRowModel&&a.options.getFacetedRowModel(a,"__global__"),a.getGlobalFacetedRowModel=()=>a.options.manualFiltering||!a._getGlobalFacetedRowModel?a.getPreFilteredRowModel():a._getGlobalFacetedRowModel(),a._getGlobalFacetedUniqueValues=a.options.getFacetedUniqueValues&&a.options.getFacetedUniqueValues(a,"__global__"),a.getGlobalFacetedUniqueValues=()=>a._getGlobalFacetedUniqueValues?a._getGlobalFacetedUniqueValues():new Map,a._getGlobalFacetedMinMaxValues=a.options.getFacetedMinMaxValues&&a.options.getFacetedMinMaxValues(a,"__global__"),a.getGlobalFacetedMinMaxValues=()=>{if(a._getGlobalFacetedMinMaxValues)return a._getGlobalFacetedMinMaxValues()}}},{getInitialState:a=>({globalFilter:void 0,...a}),getDefaultOptions:a=>({onGlobalFilterChange:bB("globalFilter",a),globalFilterFn:"auto",getColumnCanGlobalFilter:b=>{var c;let d=null==(c=a.getCoreRowModel().flatRows[0])||null==(c=c._getAllCellsByColumnId()[b.id])?void 0:c.getValue();return"string"==typeof d||"number"==typeof d}}),createColumn:(a,b)=>{a.getCanGlobalFilter=()=>{var c,d,e,f;return(null==(c=a.columnDef.enableGlobalFilter)||c)&&(null==(d=b.options.enableGlobalFilter)||d)&&(null==(e=b.options.enableFilters)||e)&&(null==(f=null==b.options.getColumnCanGlobalFilter?void 0:b.options.getColumnCanGlobalFilter(a))||f)&&!!a.accessorFn}},createTable:a=>{a.getGlobalAutoFilterFn=()=>bS.includesString,a.getGlobalFilterFn=()=>{var b,c;let{globalFilterFn:d}=a.options;return bC(d)?d:"auto"===d?a.getGlobalAutoFilterFn():null!=(b=null==(c=a.options.filterFns)?void 0:c[d])?b:bS[d]},a.setGlobalFilter=b=>{null==a.options.onGlobalFilterChange||a.options.onGlobalFilterChange(b)},a.resetGlobalFilter=b=>{a.setGlobalFilter(b?void 0:a.initialState.globalFilter)}}},{getInitialState:a=>({sorting:[],...a}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:a=>({onSortingChange:bB("sorting",a),isMultiSortEvent:a=>a.shiftKey}),createColumn:(a,b)=>{a.getAutoSortingFn=()=>{let c=b.getFilteredRowModel().flatRows.slice(10),d=!1;for(let b of c){let c=null==b?void 0:b.getValue(a.id);if("[object Date]"===Object.prototype.toString.call(c))return ca.datetime;if("string"==typeof c&&(d=!0,c.split(b6).length>1))return ca.alphanumeric}return d?ca.text:ca.basic},a.getAutoSortDir=()=>{let c=b.getFilteredRowModel().flatRows[0];return"string"==typeof(null==c?void 0:c.getValue(a.id))?"asc":"desc"},a.getSortingFn=()=>{var c,d;if(!a)throw Error();return bC(a.columnDef.sortingFn)?a.columnDef.sortingFn:"auto"===a.columnDef.sortingFn?a.getAutoSortingFn():null!=(c=null==(d=b.options.sortingFns)?void 0:d[a.columnDef.sortingFn])?c:ca[a.columnDef.sortingFn]},a.toggleSorting=(c,d)=>{let e=a.getNextSortingOrder(),f=null!=c;b.setSorting(g=>{let h,i=null==g?void 0:g.find(b=>b.id===a.id),j=null==g?void 0:g.findIndex(b=>b.id===a.id),k=[],l=f?c:"desc"===e;if("toggle"!=(h=null!=g&&g.length&&a.getCanMultiSort()&&d?i?"toggle":"add":null!=g&&g.length&&j!==g.length-1?"replace":i?"toggle":"replace")||f||e||(h="remove"),"add"===h){var m;(k=[...g,{id:a.id,desc:l}]).splice(0,k.length-(null!=(m=b.options.maxMultiSortColCount)?m:Number.MAX_SAFE_INTEGER))}else k="toggle"===h?g.map(b=>b.id===a.id?{...b,desc:l}:b):"remove"===h?g.filter(b=>b.id!==a.id):[{id:a.id,desc:l}];return k})},a.getFirstSortDir=()=>{var c,d;return(null!=(c=null!=(d=a.columnDef.sortDescFirst)?d:b.options.sortDescFirst)?c:"desc"===a.getAutoSortDir())?"desc":"asc"},a.getNextSortingOrder=c=>{var d,e;let f=a.getFirstSortDir(),g=a.getIsSorted();return g?(g===f||null!=(d=b.options.enableSortingRemoval)&&!d||!!c&&null!=(e=b.options.enableMultiRemove)&&!e)&&("desc"===g?"asc":"desc"):f},a.getCanSort=()=>{var c,d;return(null==(c=a.columnDef.enableSorting)||c)&&(null==(d=b.options.enableSorting)||d)&&!!a.accessorFn},a.getCanMultiSort=()=>{var c,d;return null!=(c=null!=(d=a.columnDef.enableMultiSort)?d:b.options.enableMultiSort)?c:!!a.accessorFn},a.getIsSorted=()=>{var c;let d=null==(c=b.getState().sorting)?void 0:c.find(b=>b.id===a.id);return!!d&&(d.desc?"desc":"asc")},a.getSortIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().sorting)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.clearSorting=()=>{b.setSorting(b=>null!=b&&b.length?b.filter(b=>b.id!==a.id):[])},a.getToggleSortingHandler=()=>{let c=a.getCanSort();return d=>{c&&(null==d.persist||d.persist(),null==a.toggleSorting||a.toggleSorting(void 0,!!a.getCanMultiSort()&&(null==b.options.isMultiSortEvent?void 0:b.options.isMultiSortEvent(d))))}}},createTable:a=>{a.setSorting=b=>null==a.options.onSortingChange?void 0:a.options.onSortingChange(b),a.resetSorting=b=>{var c,d;a.setSorting(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.sorting)?c:[])},a.getPreSortedRowModel=()=>a.getGroupedRowModel(),a.getSortedRowModel=()=>(!a._getSortedRowModel&&a.options.getSortedRowModel&&(a._getSortedRowModel=a.options.getSortedRowModel(a)),a.options.manualSorting||!a._getSortedRowModel)?a.getPreSortedRowModel():a._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:a=>{var b,c;return null!=(b=null==(c=a.getValue())||null==c.toString?void 0:c.toString())?b:null},aggregationFn:"auto"}),getInitialState:a=>({grouping:[],...a}),getDefaultOptions:a=>({onGroupingChange:bB("grouping",a),groupedColumnMode:"reorder"}),createColumn:(a,b)=>{a.toggleGrouping=()=>{b.setGrouping(b=>null!=b&&b.includes(a.id)?b.filter(b=>b!==a.id):[...null!=b?b:[],a.id])},a.getCanGroup=()=>{var c,d;return(null==(c=a.columnDef.enableGrouping)||c)&&(null==(d=b.options.enableGrouping)||d)&&(!!a.accessorFn||!!a.columnDef.getGroupingValue)},a.getIsGrouped=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.includes(a.id)},a.getGroupedIndex=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.indexOf(a.id)},a.getToggleGroupingHandler=()=>{let b=a.getCanGroup();return()=>{b&&a.toggleGrouping()}},a.getAutoAggregationFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"number"==typeof d?bV.sum:"[object Date]"===Object.prototype.toString.call(d)?bV.extent:void 0},a.getAggregationFn=()=>{var c,d;if(!a)throw Error();return bC(a.columnDef.aggregationFn)?a.columnDef.aggregationFn:"auto"===a.columnDef.aggregationFn?a.getAutoAggregationFn():null!=(c=null==(d=b.options.aggregationFns)?void 0:d[a.columnDef.aggregationFn])?c:bV[a.columnDef.aggregationFn]}},createTable:a=>{a.setGrouping=b=>null==a.options.onGroupingChange?void 0:a.options.onGroupingChange(b),a.resetGrouping=b=>{var c,d;a.setGrouping(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.grouping)?c:[])},a.getPreGroupedRowModel=()=>a.getFilteredRowModel(),a.getGroupedRowModel=()=>(!a._getGroupedRowModel&&a.options.getGroupedRowModel&&(a._getGroupedRowModel=a.options.getGroupedRowModel(a)),a.options.manualGrouping||!a._getGroupedRowModel)?a.getPreGroupedRowModel():a._getGroupedRowModel()},createRow:(a,b)=>{a.getIsGrouped=()=>!!a.groupingColumnId,a.getGroupingValue=c=>{if(a._groupingValuesCache.hasOwnProperty(c))return a._groupingValuesCache[c];let d=b.getColumn(c);return null!=d&&d.columnDef.getGroupingValue?(a._groupingValuesCache[c]=d.columnDef.getGroupingValue(a.original),a._groupingValuesCache[c]):a.getValue(c)},a._groupingValuesCache={}},createCell:(a,b,c,d)=>{a.getIsGrouped=()=>b.getIsGrouped()&&b.id===c.groupingColumnId,a.getIsPlaceholder=()=>!a.getIsGrouped()&&b.getIsGrouped(),a.getIsAggregated=()=>{var b;return!a.getIsGrouped()&&!a.getIsPlaceholder()&&!!(null!=(b=c.subRows)&&b.length)}}},{getInitialState:a=>({expanded:{},...a}),getDefaultOptions:a=>({onExpandedChange:bB("expanded",a),paginateExpandedRows:!0}),createTable:a=>{let b=!1,c=!1;a._autoResetExpanded=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetExpanded)?d:!a.options.manualExpanding){if(c)return;c=!0,a._queue(()=>{a.resetExpanded(),c=!1})}},a.setExpanded=b=>null==a.options.onExpandedChange?void 0:a.options.onExpandedChange(b),a.toggleAllRowsExpanded=b=>{(null!=b?b:!a.getIsAllRowsExpanded())?a.setExpanded(!0):a.setExpanded({})},a.resetExpanded=b=>{var c,d;a.setExpanded(b?{}:null!=(c=null==(d=a.initialState)?void 0:d.expanded)?c:{})},a.getCanSomeRowsExpand=()=>a.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),a.getToggleAllRowsExpandedHandler=()=>b=>{null==b.persist||b.persist(),a.toggleAllRowsExpanded()},a.getIsSomeRowsExpanded=()=>{let b=a.getState().expanded;return!0===b||Object.values(b).some(Boolean)},a.getIsAllRowsExpanded=()=>{let b=a.getState().expanded;return"boolean"==typeof b?!0===b:!(!Object.keys(b).length||a.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},a.getExpandedDepth=()=>{let b=0;return(!0===a.getState().expanded?Object.keys(a.getRowModel().rowsById):Object.keys(a.getState().expanded)).forEach(a=>{let c=a.split(".");b=Math.max(b,c.length)}),b},a.getPreExpandedRowModel=()=>a.getSortedRowModel(),a.getExpandedRowModel=()=>(!a._getExpandedRowModel&&a.options.getExpandedRowModel&&(a._getExpandedRowModel=a.options.getExpandedRowModel(a)),a.options.manualExpanding||!a._getExpandedRowModel)?a.getPreExpandedRowModel():a._getExpandedRowModel()},createRow:(a,b)=>{a.toggleExpanded=c=>{b.setExpanded(d=>{var e;let f=!0===d||!!(null!=d&&d[a.id]),g={};if(!0===d?Object.keys(b.getRowModel().rowsById).forEach(a=>{g[a]=!0}):g=d,c=null!=(e=c)?e:!f,!f&&c)return{...g,[a.id]:!0};if(f&&!c){let{[a.id]:b,...c}=g;return c}return d})},a.getIsExpanded=()=>{var c;let d=b.getState().expanded;return!!(null!=(c=null==b.options.getIsRowExpanded?void 0:b.options.getIsRowExpanded(a))?c:!0===d||(null==d?void 0:d[a.id]))},a.getCanExpand=()=>{var c,d,e;return null!=(c=null==b.options.getRowCanExpand?void 0:b.options.getRowCanExpand(a))?c:(null==(d=b.options.enableExpanding)||d)&&!!(null!=(e=a.subRows)&&e.length)},a.getIsAllParentsExpanded=()=>{let c=!0,d=a;for(;c&&d.parentId;)c=(d=b.getRow(d.parentId,!0)).getIsExpanded();return c},a.getToggleExpandedHandler=()=>{let b=a.getCanExpand();return()=>{b&&a.toggleExpanded()}}}},{getInitialState:a=>({...a,pagination:{...b0(),...null==a?void 0:a.pagination}}),getDefaultOptions:a=>({onPaginationChange:bB("pagination",a)}),createTable:a=>{let b=!1,c=!1;a._autoResetPageIndex=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetPageIndex)?d:!a.options.manualPagination){if(c)return;c=!0,a._queue(()=>{a.resetPageIndex(),c=!1})}},a.setPagination=b=>null==a.options.onPaginationChange?void 0:a.options.onPaginationChange(a=>bA(b,a)),a.resetPagination=b=>{var c;a.setPagination(b?b0():null!=(c=a.initialState.pagination)?c:b0())},a.setPageIndex=b=>{a.setPagination(c=>{let d=bA(b,c.pageIndex);return d=Math.max(0,Math.min(d,void 0===a.options.pageCount||-1===a.options.pageCount?Number.MAX_SAFE_INTEGER:a.options.pageCount-1)),{...c,pageIndex:d}})},a.resetPageIndex=b=>{var c,d;a.setPageIndex(b?0:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageIndex)?c:0)},a.resetPageSize=b=>{var c,d;a.setPageSize(b?10:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageSize)?c:10)},a.setPageSize=b=>{a.setPagination(a=>{let c=Math.max(1,bA(b,a.pageSize)),d=Math.floor(a.pageSize*a.pageIndex/c);return{...a,pageIndex:d,pageSize:c}})},a.setPageCount=b=>a.setPagination(c=>{var d;let e=bA(b,null!=(d=a.options.pageCount)?d:-1);return"number"==typeof e&&(e=Math.max(-1,e)),{...c,pageCount:e}}),a.getPageOptions=bD(()=>[a.getPageCount()],a=>{let b=[];return a&&a>0&&(b=[...Array(a)].fill(null).map((a,b)=>b)),b},bE(a.options,"debugTable","getPageOptions")),a.getCanPreviousPage=()=>a.getState().pagination.pageIndex>0,a.getCanNextPage=()=>{let{pageIndex:b}=a.getState().pagination,c=a.getPageCount();return -1===c||0!==c&&b<c-1},a.previousPage=()=>a.setPageIndex(a=>a-1),a.nextPage=()=>a.setPageIndex(a=>a+1),a.firstPage=()=>a.setPageIndex(0),a.lastPage=()=>a.setPageIndex(a.getPageCount()-1),a.getPrePaginationRowModel=()=>a.getExpandedRowModel(),a.getPaginationRowModel=()=>(!a._getPaginationRowModel&&a.options.getPaginationRowModel&&(a._getPaginationRowModel=a.options.getPaginationRowModel(a)),a.options.manualPagination||!a._getPaginationRowModel)?a.getPrePaginationRowModel():a._getPaginationRowModel(),a.getPageCount=()=>{var b;return null!=(b=a.options.pageCount)?b:Math.ceil(a.getRowCount()/a.getState().pagination.pageSize)},a.getRowCount=()=>{var b;return null!=(b=a.options.rowCount)?b:a.getPrePaginationRowModel().rows.length}}},{getInitialState:a=>({rowPinning:b1(),...a}),getDefaultOptions:a=>({onRowPinningChange:bB("rowPinning",a)}),createRow:(a,b)=>{a.pin=(c,d,e)=>{let f=d?a.getLeafRows().map(a=>{let{id:b}=a;return b}):[],g=new Set([...e?a.getParentRows().map(a=>{let{id:b}=a;return b}):[],a.id,...f]);b.setRowPinning(a=>{var b,d,e,f,h,i;return"bottom"===c?{top:(null!=(e=null==a?void 0:a.top)?e:[]).filter(a=>!(null!=g&&g.has(a))),bottom:[...(null!=(f=null==a?void 0:a.bottom)?f:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)]}:"top"===c?{top:[...(null!=(h=null==a?void 0:a.top)?h:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)],bottom:(null!=(i=null==a?void 0:a.bottom)?i:[]).filter(a=>!(null!=g&&g.has(a)))}:{top:(null!=(b=null==a?void 0:a.top)?b:[]).filter(a=>!(null!=g&&g.has(a))),bottom:(null!=(d=null==a?void 0:a.bottom)?d:[]).filter(a=>!(null!=g&&g.has(a)))}})},a.getCanPin=()=>{var c;let{enableRowPinning:d,enablePinning:e}=b.options;return"function"==typeof d?d(a):null==(c=null!=d?d:e)||c},a.getIsPinned=()=>{let c=[a.id],{top:d,bottom:e}=b.getState().rowPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"top":!!g&&"bottom"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();if(!e)return -1;let f=null==(c="top"===e?b.getTopRows():b.getBottomRows())?void 0:c.map(a=>{let{id:b}=a;return b});return null!=(d=null==f?void 0:f.indexOf(a.id))?d:-1}},createTable:a=>{a.setRowPinning=b=>null==a.options.onRowPinningChange?void 0:a.options.onRowPinningChange(b),a.resetRowPinning=b=>{var c,d;return a.setRowPinning(b?b1():null!=(c=null==(d=a.initialState)?void 0:d.rowPinning)?c:b1())},a.getIsSomeRowsPinned=b=>{var c,d,e;let f=a.getState().rowPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.top)?void 0:d.length)||(null==(e=f.bottom)?void 0:e.length))},a._getPinnedRows=(b,c,d)=>{var e;return(null==(e=a.options.keepPinnedRows)||e?(null!=c?c:[]).map(b=>{let c=a.getRow(b,!0);return c.getIsAllParentsExpanded()?c:null}):(null!=c?c:[]).map(a=>b.find(b=>b.id===a))).filter(Boolean).map(a=>({...a,position:d}))},a.getTopRows=bD(()=>[a.getRowModel().rows,a.getState().rowPinning.top],(b,c)=>a._getPinnedRows(b,c,"top"),bE(a.options,"debugRows","getTopRows")),a.getBottomRows=bD(()=>[a.getRowModel().rows,a.getState().rowPinning.bottom],(b,c)=>a._getPinnedRows(b,c,"bottom"),bE(a.options,"debugRows","getBottomRows")),a.getCenterRows=bD(()=>[a.getRowModel().rows,a.getState().rowPinning.top,a.getState().rowPinning.bottom],(a,b,c)=>{let d=new Set([...null!=b?b:[],...null!=c?c:[]]);return a.filter(a=>!d.has(a.id))},bE(a.options,"debugRows","getCenterRows"))}},{getInitialState:a=>({rowSelection:{},...a}),getDefaultOptions:a=>({onRowSelectionChange:bB("rowSelection",a),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:a=>{a.setRowSelection=b=>null==a.options.onRowSelectionChange?void 0:a.options.onRowSelectionChange(b),a.resetRowSelection=b=>{var c;return a.setRowSelection(b?{}:null!=(c=a.initialState.rowSelection)?c:{})},a.toggleAllRowsSelected=b=>{a.setRowSelection(c=>{b=void 0!==b?b:!a.getIsAllRowsSelected();let d={...c},e=a.getPreGroupedRowModel().flatRows;return b?e.forEach(a=>{a.getCanSelect()&&(d[a.id]=!0)}):e.forEach(a=>{delete d[a.id]}),d})},a.toggleAllPageRowsSelected=b=>a.setRowSelection(c=>{let d=void 0!==b?b:!a.getIsAllPageRowsSelected(),e={...c};return a.getRowModel().rows.forEach(b=>{b2(e,b.id,d,!0,a)}),e}),a.getPreSelectedRowModel=()=>a.getCoreRowModel(),a.getSelectedRowModel=bD(()=>[a.getState().rowSelection,a.getCoreRowModel()],(b,c)=>Object.keys(b).length?b3(a,c):{rows:[],flatRows:[],rowsById:{}},bE(a.options,"debugTable","getSelectedRowModel")),a.getFilteredSelectedRowModel=bD(()=>[a.getState().rowSelection,a.getFilteredRowModel()],(b,c)=>Object.keys(b).length?b3(a,c):{rows:[],flatRows:[],rowsById:{}},bE(a.options,"debugTable","getFilteredSelectedRowModel")),a.getGroupedSelectedRowModel=bD(()=>[a.getState().rowSelection,a.getSortedRowModel()],(b,c)=>Object.keys(b).length?b3(a,c):{rows:[],flatRows:[],rowsById:{}},bE(a.options,"debugTable","getGroupedSelectedRowModel")),a.getIsAllRowsSelected=()=>{let b=a.getFilteredRowModel().flatRows,{rowSelection:c}=a.getState(),d=!!(b.length&&Object.keys(c).length);return d&&b.some(a=>a.getCanSelect()&&!c[a.id])&&(d=!1),d},a.getIsAllPageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:c}=a.getState(),d=!!b.length;return d&&b.some(a=>!c[a.id])&&(d=!1),d},a.getIsSomeRowsSelected=()=>{var b;let c=Object.keys(null!=(b=a.getState().rowSelection)?b:{}).length;return c>0&&c<a.getFilteredRowModel().flatRows.length},a.getIsSomePageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows;return!a.getIsAllPageRowsSelected()&&b.filter(a=>a.getCanSelect()).some(a=>a.getIsSelected()||a.getIsSomeSelected())},a.getToggleAllRowsSelectedHandler=()=>b=>{a.toggleAllRowsSelected(b.target.checked)},a.getToggleAllPageRowsSelectedHandler=()=>b=>{a.toggleAllPageRowsSelected(b.target.checked)}},createRow:(a,b)=>{a.toggleSelected=(c,d)=>{let e=a.getIsSelected();b.setRowSelection(f=>{var g;if(c=void 0!==c?c:!e,a.getCanSelect()&&e===c)return f;let h={...f};return b2(h,a.id,c,null==(g=null==d?void 0:d.selectChildren)||g,b),h})},a.getIsSelected=()=>{let{rowSelection:c}=b.getState();return b4(a,c)},a.getIsSomeSelected=()=>{let{rowSelection:c}=b.getState();return"some"===b5(a,c)},a.getIsAllSubRowsSelected=()=>{let{rowSelection:c}=b.getState();return"all"===b5(a,c)},a.getCanSelect=()=>{var c;return"function"==typeof b.options.enableRowSelection?b.options.enableRowSelection(a):null==(c=b.options.enableRowSelection)||c},a.getCanSelectSubRows=()=>{var c;return"function"==typeof b.options.enableSubRowSelection?b.options.enableSubRowSelection(a):null==(c=b.options.enableSubRowSelection)||c},a.getCanMultiSelect=()=>{var c;return"function"==typeof b.options.enableMultiRowSelection?b.options.enableMultiRowSelection(a):null==(c=b.options.enableMultiRowSelection)||c},a.getToggleSelectedHandler=()=>{let b=a.getCanSelect();return c=>{var d;b&&a.toggleSelected(null==(d=c.target)?void 0:d.checked)}}}},{getDefaultColumnDef:()=>bX,getInitialState:a=>({columnSizing:{},columnSizingInfo:bY(),...a}),getDefaultOptions:a=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:bB("columnSizing",a),onColumnSizingInfoChange:bB("columnSizingInfo",a)}),createColumn:(a,b)=>{a.getSize=()=>{var c,d,e;let f=b.getState().columnSizing[a.id];return Math.min(Math.max(null!=(c=a.columnDef.minSize)?c:bX.minSize,null!=(d=null!=f?f:a.columnDef.size)?d:bX.size),null!=(e=a.columnDef.maxSize)?e:bX.maxSize)},a.getStart=bD(a=>[a,b_(b,a),b.getState().columnSizing],(b,c)=>c.slice(0,a.getIndex(b)).reduce((a,b)=>a+b.getSize(),0),bE(b.options,"debugColumns","getStart")),a.getAfter=bD(a=>[a,b_(b,a),b.getState().columnSizing],(b,c)=>c.slice(a.getIndex(b)+1).reduce((a,b)=>a+b.getSize(),0),bE(b.options,"debugColumns","getAfter")),a.resetSize=()=>{b.setColumnSizing(b=>{let{[a.id]:c,...d}=b;return d})},a.getCanResize=()=>{var c,d;return(null==(c=a.columnDef.enableResizing)||c)&&(null==(d=b.options.enableColumnResizing)||d)},a.getIsResizing=()=>b.getState().columnSizingInfo.isResizingColumn===a.id},createHeader:(a,b)=>{a.getSize=()=>{let b=0,c=a=>{if(a.subHeaders.length)a.subHeaders.forEach(c);else{var d;b+=null!=(d=a.column.getSize())?d:0}};return c(a),b},a.getStart=()=>{if(a.index>0){let b=a.headerGroup.headers[a.index-1];return b.getStart()+b.getSize()}return 0},a.getResizeHandler=c=>{let d=b.getColumn(a.column.id),e=null==d?void 0:d.getCanResize();return f=>{if(!d||!e||(null==f.persist||f.persist(),b$(f)&&f.touches&&f.touches.length>1))return;let g=a.getSize(),h=a?a.getLeafHeaders().map(a=>[a.column.id,a.column.getSize()]):[[d.id,d.getSize()]],i=b$(f)?Math.round(f.touches[0].clientX):f.clientX,j={},k=(a,c)=>{"number"==typeof c&&(b.setColumnSizingInfo(a=>{var d,e;let f="rtl"===b.options.columnResizeDirection?-1:1,g=(c-(null!=(d=null==a?void 0:a.startOffset)?d:0))*f,h=Math.max(g/(null!=(e=null==a?void 0:a.startSize)?e:0),-.999999);return a.columnSizingStart.forEach(a=>{let[b,c]=a;j[b]=Math.round(100*Math.max(c+c*h,0))/100}),{...a,deltaOffset:g,deltaPercentage:h}}),("onChange"===b.options.columnResizeMode||"end"===a)&&b.setColumnSizing(a=>({...a,...j})))},l=a=>{k("end",a),b.setColumnSizingInfo(a=>({...a,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=c||("u">typeof document?document:null),n={moveHandler:a=>k("move",a.clientX),upHandler:a=>{null==m||m.removeEventListener("mousemove",n.moveHandler),null==m||m.removeEventListener("mouseup",n.upHandler),l(a.clientX)}},o={moveHandler:a=>(a.cancelable&&(a.preventDefault(),a.stopPropagation()),k("move",a.touches[0].clientX),!1),upHandler:a=>{var b;null==m||m.removeEventListener("touchmove",o.moveHandler),null==m||m.removeEventListener("touchend",o.upHandler),a.cancelable&&(a.preventDefault(),a.stopPropagation()),l(null==(b=a.touches[0])?void 0:b.clientX)}},p=!!function(){if("boolean"==typeof bZ)return bZ;let a=!1;try{let b=()=>{};window.addEventListener("test",b,{get passive(){return a=!0,!1}}),window.removeEventListener("test",b)}catch(b){a=!1}return bZ=a}()&&{passive:!1};b$(f)?(null==m||m.addEventListener("touchmove",o.moveHandler,p),null==m||m.addEventListener("touchend",o.upHandler,p)):(null==m||m.addEventListener("mousemove",n.moveHandler,p),null==m||m.addEventListener("mouseup",n.upHandler,p)),b.setColumnSizingInfo(a=>({...a,startOffset:i,startSize:g,deltaOffset:0,deltaPercentage:0,columnSizingStart:h,isResizingColumn:d.id}))}}},createTable:a=>{a.setColumnSizing=b=>null==a.options.onColumnSizingChange?void 0:a.options.onColumnSizingChange(b),a.setColumnSizingInfo=b=>null==a.options.onColumnSizingInfoChange?void 0:a.options.onColumnSizingInfoChange(b),a.resetColumnSizing=b=>{var c;a.setColumnSizing(b?{}:null!=(c=a.initialState.columnSizing)?c:{})},a.resetHeaderSizeInfo=b=>{var c;a.setColumnSizingInfo(b?bY():null!=(c=a.initialState.columnSizingInfo)?c:bY())},a.getTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getLeftTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getLeftHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getCenterTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getCenterHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getRightTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getRightHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0}}}];function cc(a,b){var c,d,e;let f;return a?"function"==typeof(d=c=a)&&(f=Object.getPrototypeOf(d)).prototype&&f.prototype.isReactComponent||"function"==typeof c||"object"==typeof(e=c)&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)?k.createElement(a,b):a:null}let cd="diffView",ce="previousDocument",cf="nextDocument";function cg(){let a,b,c,d=(0,h.c)(9),{navigate:e,state:f}=(0,s.useRouter)();d[0]!==e||d[1]!==f?(a=a=>{let{mode:b,previousDocument:c,nextDocument:d}=a,g={...(0,aN.fromPairs)(f._searchParams),...b?{[cd]:b}:{},...c?{[ce]:[c.type,c.id].join(",")}:{},...d?{[cf]:[d.type,d.id].join(",")}:{}};e({...f,_searchParams:(0,aO.toPairs)(g)})},d[0]=e,d[1]=f,d[2]=a):a=d[2];let g=a;d[3]!==e||d[4]!==f?(b=()=>{e({...f,_searchParams:(f._searchParams??[]).filter(ch)})},d[3]=e,d[4]=f,d[5]=b):b=d[5];let i=b;return d[6]!==i||d[7]!==g?(c={navigateDiffView:g,exitDiffView:i},d[6]=i,d[7]=g,d[8]=c):c=d[8],c}function ch(a){let[b]=a;return![cd,ce,cf].includes(b)}let ci=["version"];function cj(a){let b,c,d,e,f,g,i,j,l=(0,h.c)(22);l[0]!==a?(b=void 0===a?{}:a,l[0]=a,l[1]=b):b=l[1];let{onParamsError:m}=b,{state:n}=(0,s.useRouter)();if(l[2]!==n._searchParams){let a=new URLSearchParams(n._searchParams);d=a.get(ce),c=a.get(cf),e=a.get(cd),l[2]=n._searchParams,l[3]=c,l[4]=d,l[5]=e}else c=l[3],d=l[4],e=l[5];let o=e,p=[d,c,o].some(ck),q=d??"",r=c??"",t=o??"";l[6]!==q||l[7]!==r||l[8]!==t?(f=function({previousDocument:a,nextDocument:b,mode:c}){let d=[],[e,f]=a.split(",").filter(Boolean),[g,h]=b.split(",").filter(Boolean);return ci.includes(c)||d.push(["invalidModeParam",c]),(typeof e>"u"||typeof f>"u")&&d.push(["invalidPreviousDocumentParam",a]),(typeof g>"u"||typeof h>"u")&&d.push(["invalidNextDocumentParam",b]),0!==d.length?{result:"error",errors:d}:{result:"success",params:{mode:c,documents:{previous:{type:e,id:f},next:{type:g,id:h}}}}}({previousDocument:q,nextDocument:r,mode:t}),l[6]=q,l[7]=r,l[8]=t,l[9]=f):f=l[9];let u=f;if(l[10]!==p||l[11]!==m||l[12]!==u.errors||l[13]!==u.result?(g=()=>{"error"===u.result&&p&&m?.(u.errors)},l[10]=p,l[11]=m,l[12]=u.errors,l[13]=u.result,l[14]=g):g=l[14],l[15]!==p||l[16]!==m||l[17]!==u?(i=[p,m,u],l[15]=p,l[16]=m,l[17]=u,l[18]=i):i=l[18],(0,k.useEffect)(g,i),"error"===u.result){let a;return l[19]===Symbol.for("react.memo_cache_sentinel")?(a={isActive:!1},l[19]=a):a=l[19],a}return l[20]!==u.params?(j={state:"ready",isActive:!0,...u.params},l[20]=u.params,l[21]=j):j=l[21],j}function ck(a){return null!==a}function cl(a){return null!==a}function cm(a,b){return(0,o.isPublishedId)(a)?"published":(0,o.isDraftId)(a)?"draft":b.find(({_id:b})=>(0,p.getReleaseIdFromReleaseDocumentId)(b)===(0,o.getVersionFromId)(a))??(0,o.getVersionFromId)(a)}let cn=aI.styled.header.withConfig({displayName:"VersionModeHeaderLayout",componentId:"sc-w17umd-0"})`display:grid;grid-area:header;grid-template-columns:1fr min-content 1fr;border-block-end:1px solid var(--card-border-color);`,co=aI.styled.div.withConfig({displayName:"VersionModeHeaderLayoutSection",componentId:"sc-w17umd-1"})`display:flex;justify-content:space-between;align-items:center;`,cp=a=>{let b,c,d,e,f,j,k,l,m,n,o,q,r,s,t,v,w=(0,h.c)(48),{documentId:x,state:y}=a,{t:z}=(0,p.useTranslation)(F);w[0]!==x?(b={documentId:x},w[0]=x,w[1]=b):b=w[1];let{data:A}=(0,p.useDocumentVersions)(b),{exitDiffView:B,navigateDiffView:C}=cg(),{documents:D}=cj(),E=(0,p.useActiveReleases)();w[2]!==A?(c=A.flatMap(cs),w[2]=A,w[3]=c):c=w[3];let G=c;if(w[4]!==E.data||w[5]!==G){let a;w[7]!==G?(a=a=>{let b=(0,p.getReleaseIdFromReleaseDocumentId)(a._id);return"u">typeof b&&G.includes(b)},w[7]=G,w[8]=a):a=w[8],d=E.data.filter(a),w[4]=E.data,w[5]=G,w[6]=d}else d=w[6];let H=d;w[9]!==E?(e=function({loading:a,error:b}){return a?"pending":"u">typeof b?"error":"ready"}(E),w[9]=E,w[10]=e):e=w[10];let I=e;w[11]!==D||w[12]!==C?(f=a=>{"u">typeof D?.previous&&C({previousDocument:{...D.previous,id:a}})},w[11]=D,w[12]=C,w[13]=f):f=w[13];let J=f;w[14]!==D||w[15]!==C?(j=a=>{"u">typeof D?.next&&C({nextDocument:{...D.next,id:a}})},w[14]=D,w[15]=C,w[16]=j):j=w[16];let K=j;return w[17]!==z?(k=z("compare-versions.title"),w[17]=z,w[18]=k):k=w[18],w[19]!==k?(l=(0,g.jsx)(i.Box,{padding:4,children:(0,g.jsx)(i.Text,{as:"h1",size:1,muted:!0,children:k})}),w[19]=k,w[20]=l):l=w[20],w[21]!==x||w[22]!==D||w[23]!==J||w[24]!==H||w[25]!==I||w[26]!==y?(m="u">typeof D?.previous&&(0,g.jsx)(cq,{releases:H,releasesState:I,onSelectRelease:J,role:"previous",documentId:x,state:y,document:D.previous}),w[21]=x,w[22]=D,w[23]=J,w[24]=H,w[25]=I,w[26]=y,w[27]=m):m=w[27],w[28]!==l||w[29]!==m?(n=(0,g.jsxs)(co,{children:[l,m]}),w[28]=l,w[29]=m,w[30]=n):n=w[30],w[31]===Symbol.for("react.memo_cache_sentinel")?(o=(0,g.jsx)(i.Flex,{align:"center",paddingX:3,children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(u.TransferIcon,{})})}),w[31]=o):o=w[31],w[32]!==x||w[33]!==D||w[34]!==K||w[35]!==H||w[36]!==I||w[37]!==y?(q="u">typeof D?.next&&(0,g.jsx)(cq,{releases:H,releasesState:I,onSelectRelease:K,role:"next",documentId:x,state:y,document:D.next}),w[32]=x,w[33]=D,w[34]=K,w[35]=H,w[36]=I,w[37]=y,w[38]=q):q=w[38],w[39]===Symbol.for("react.memo_cache_sentinel")?(r={justifySelf:"end"},w[39]=r):r=w[39],w[40]!==B?(s=(0,g.jsx)(i.Box,{padding:3,style:r,children:(0,g.jsx)(i.Button,{icon:u.CloseIcon,mode:"bleed",onClick:B,padding:2})}),w[40]=B,w[41]=s):s=w[41],w[42]!==q||w[43]!==s?(t=(0,g.jsxs)(co,{children:[q,s]}),w[42]=q,w[43]=s,w[44]=t):t=w[44],w[45]!==n||w[46]!==t?(v=(0,g.jsxs)(cn,{children:[n,o,t]}),w[45]=n,w[46]=t,w[47]=v):v=w[47],v},cq=a=>{let b,c,d,e,f,j,k,l,m,n,q=(0,h.c)(46),{releases:s,releasesState:t,onSelectRelease:v,role:w,documentId:x,document:y}=a;q[0]!==s?(b=void 0===s?[]:s,q[0]=s,q[1]=b):b=q[1];let z=b;q[2]!==y.id?(c=(0,o.getPublishedId)(y.id),q[2]=y.id,q[3]=c):c=q[3];let{published:A,draft:B}=(0,p.useEditState)(c,y.type);q[4]!==y.id||q[5]!==z?(d=cm(y.id,z),q[4]=y.id,q[5]=z,q[6]=d):d=q[6];let C=d,{t:D}=(0,p.useTranslation)(F),{t:E}=(0,p.useTranslation)(),{document:G}=(0,p.useWorkspace)(),{drafts:H}=G,{enabled:I}=H;if("error"===t){let a,b;return q[7]!==D?(a=D("compare-version.error.loadReleases.title"),q[7]=D,q[8]=a):a=q[8],q[9]!==a?(b=(0,g.jsx)(i.Badge,{tone:"critical",radius:3,children:a}),q[9]=a,q[10]=b):b=q[10],b}if(q[11]!==t||q[12]!==C||q[13]!==E||q[14]!==D?(e=function({selected:a,tCore:b,tStructure:c,releasesState:d}){if("pending"===d)return{text:b("common.loading"),tone:"neutral",disabled:!0};if((0,p.isReleaseDocument)(a)){let c=a?(0,p.getReleaseTone)(a):"neutral";return{text:a?.metadata.title||b("release.placeholder-untitled-release"),icon:(0,g.jsx)(p.ReleaseAvatar,{padding:1,tone:c}),iconRight:a&&(0,p.isReleaseScheduledOrScheduling)(a)?(0,g.jsx)(u.LockIcon,{}):void 0,tone:c}}if((0,p.isSystemBundleName)(a)){let b="published"===a?"positive":"caution";return{text:c(["compare-versions.status",a].join(".")),icon:(0,g.jsx)(p.ReleaseAvatar,{padding:1,tone:b}),tone:b}}return{text:a,icon:(0,g.jsx)(p.ReleaseAvatar,{padding:1,tone:"neutral"}),tone:"neutral"}}({selected:C,tCore:E,tStructure:D,releasesState:t}),q[11]=t,q[12]=C,q[13]=E,q[14]=D,q[15]=e):e=q[15],q[16]!==e?(f=(0,g.jsx)(i.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...e}),q[16]=e,q[17]=f):f=q[17],q[18]!==x||q[19]!==v||q[20]!==A||q[21]!==C?(j=A&&(0,g.jsx)(cr,{type:"published",onSelect:v,isSelected:"published"===C,documentId:x}),q[18]=x,q[19]=v,q[20]=A,q[21]=C,q[22]=j):j=q[22],q[23]!==x||q[24]!==B||q[25]!==I||q[26]!==v||q[27]!==C?(k=I&&B&&(0,g.jsx)(cr,{type:"draft",onSelect:v,isSelected:"draft"===C,documentId:x}),q[23]=x,q[24]=B,q[25]=I,q[26]=v,q[27]=C,q[28]=k):k=q[28],q[29]!==x||q[30]!==v||q[31]!==z||q[32]!==C){let a;q[34]!==x||q[35]!==v||q[36]!==C?(a=a=>(0,g.jsx)(cr,{release:a,onSelect:v,isSelected:"string"!=typeof C&&C?._id===a._id,documentId:x},a._id),q[34]=x,q[35]=v,q[36]=C,q[37]=a):a=q[37],l=z.map(a),q[29]=x,q[30]=v,q[31]=z,q[32]=C,q[33]=l}else l=q[33];return q[38]!==k||q[39]!==l||q[40]!==j?(m=(0,g.jsxs)(i.Menu,{children:[j,k,l]}),q[38]=k,q[39]=l,q[40]=j,q[41]=m):m=q[41],q[42]!==w||q[43]!==m||q[44]!==f?(n=(0,g.jsx)(r.MenuButton,{id:w,button:f,menu:m}),q[42]=w,q[43]=m,q[44]=f,q[45]=n):n=q[45],n},cr=a=>{let b,c,d,e,f,j,k,l,m,n,q,r,s,t,v=(0,h.c)(53),{type:w,release:x,onSelect:y,isSelected:z,documentId:A}=a,{t:B}=(0,p.useTranslation)(),{t:C}=(0,p.useTranslation)(F);v[0]!==A||v[1]!==y||v[2]!==x||v[3]!==w?(b=()=>{"draft"===w?y((0,o.getDraftId)(A)):"published"===w?y((0,o.getPublishedId)(A)):"u">typeof x?._id&&y((0,o.getVersionId)(A,(0,p.getReleaseIdFromReleaseDocumentId)(x._id)))},v[0]=A,v[1]=y,v[2]=x,v[3]=w,v[4]=b):b=v[4];let D=b;if(w){let a,b,c,d,e,f,h="published"===w?"positive":"caution";v[5]!==h?(a=(0,g.jsx)(p.ReleaseAvatar,{padding:2,tone:h}),v[5]=h,v[6]=a):a=v[6],v[7]!==w?(b=["compare-versions.status",w],v[7]=w,v[8]=b):b=v[8];let j=b.join(".");return v[9]!==j||v[10]!==C?(c=C(j),v[9]=j,v[10]=C,v[11]=c):c=v[11],v[12]!==c?(d=(0,g.jsx)(i.Box,{paddingY:2,children:(0,g.jsx)(i.Text,{size:1,weight:"medium",children:c})}),v[12]=c,v[13]=d):d=v[13],v[14]!==a||v[15]!==d?(e=(0,g.jsxs)(i.Flex,{gap:1,children:[a,d]}),v[14]=a,v[15]=d,v[16]=e):e=v[16],v[17]!==z||v[18]!==D||v[19]!==e?(f=(0,g.jsx)(i.MenuItem,{padding:1,paddingRight:3,onClick:D,pressed:z,children:e}),v[17]=z,v[18]=D,v[19]=e,v[20]=f):f=v[20],f}v[21]!==x?(c=x?(0,p.getReleaseTone)(x):"neutral",v[21]=x,v[22]=c):c=v[22];let E=c;v[23]!==E?(d=(0,g.jsx)(p.ReleaseAvatar,{padding:2,tone:E}),v[23]=E,v[24]=d):d=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(e={minWidth:0},v[25]=e):e=v[25];let G=x.metadata.title;return v[26]!==B?(f=B("release.placeholder-untitled-release"),v[26]=B,v[27]=f):f=v[27],v[28]===Symbol.for("react.memo_cache_sentinel")?(j={size:1,weight:"medium"},v[28]=j):j=v[28],v[29]!==x.metadata.title||v[30]!==f?(k=(0,g.jsx)(p.ReleaseTitle,{title:G,fallback:f,textProps:j}),v[29]=x.metadata.title,v[30]=f,v[31]=k):k=v[31],v[32]!==x.metadata.releaseType||v[33]!==B?(l=["asap","undecided"].includes(x.metadata.releaseType)&&(0,g.jsx)(i.Text,{muted:!0,size:1,children:B(`release.type.${x.metadata.releaseType}`)}),v[32]=x.metadata.releaseType,v[33]=B,v[34]=l):l=v[34],v[35]!==x?(m="scheduled"===x.metadata.releaseType&&(0,g.jsx)(i.Text,{muted:!0,size:1,children:(0,p.formatRelativeLocalePublishDate)(x)}),v[35]=x,v[36]=m):m=v[36],v[37]!==m||v[38]!==k||v[39]!==l?(n=(0,g.jsxs)(i.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,style:e,children:[k,l,m]}),v[37]=m,v[38]=k,v[39]=l,v[40]=n):n=v[40],v[41]!==x?(q=(0,p.isReleaseScheduledOrScheduling)(x)&&(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(u.LockIcon,{})})}),v[41]=x,v[42]=q):q=v[42],v[43]!==q?(r=(0,g.jsx)(i.Flex,{flex:"none",children:q}),v[43]=q,v[44]=r):r=v[44],v[45]!==n||v[46]!==r||v[47]!==d?(s=(0,g.jsxs)(i.Flex,{gap:1,children:[d,n,r]}),v[45]=n,v[46]=r,v[47]=d,v[48]=s):s=v[48],v[49]!==z||v[50]!==D||v[51]!==s?(t=(0,g.jsx)(i.MenuItem,{padding:1,paddingRight:3,onClick:D,pressed:z,children:s}),v[49]=z,v[50]=D,v[51]=s,v[52]=t):t=v[52],t};function cs(a){return(0,o.getVersionFromId)(a)??[]}let ct=aI.styled.div.withConfig({displayName:"DialogLayout",componentId:"sc-x0jh85-0"})`--offset-block:40px;display:grid;height:calc(100vh - var(--offset-block));min-height:0;overflow:hidden;grid-template-areas:'header header' 'previous-document next-document';grid-template-columns:1fr 1fr;grid-template-rows:min-content minmax(0,1fr);`;function cu(a){return a.document?.components?.unstable_layout}function cv(a){return a.path}function cw(a,b){return(0,a5.default)(a.path,b.path)}let cx=aI.styled.div.withConfig({displayName:"Scroller",componentId:"sc-16z7cpf-0"})`position:relative;height:100%;overflow:auto;scroll-behavior:smooth;scrollbar-width:var(--scrollbar-width);overscroll-behavior:contain;will-change:scroll-position;`,cy=(0,aI.styled)(i.Card).withConfig({displayName:"DiffViewPaneLayout",componentId:"sc-1856b20-0"})`position:relative;grid-area:var(--grid-area);`,cz=(0,aI.styled)(i.Container).withConfig({displayName:"Container",componentId:"sc-1856b20-1"})`width:auto;`,cA=(0,k.forwardRef)(function(a,b){let c,d,e,f,m,n,o,q,r,s,t,u,v=(0,h.c)(36),{role:w,documentType:x,documentId:y,scrollElement:z,syncChannel:A,compareDocument:B}=a,C=(0,k.useRef)(null),[D,E]=(0,k.useState)(null),[F,G]=(0,k.useState)(null);v[0]!==B||v[1]!==y||v[2]!==x||v[3]!==w||v[4]!==z||v[5]!==A?(c=()=>(0,g.jsx)(cB,{compareDocument:B,documentId:y,documentType:x,role:w,scrollElement:z,syncChannel:A}),v[0]=B,v[1]=y,v[2]=x,v[3]=w,v[4]=z,v[5]=A,v[6]=c):c=v[6];let H=c;v[7]!==H?(d={pick:cu,defaultComponent:H},v[7]=H,v[8]=d):d=v[8];let I=(0,p.useMiddlewareComponents)(d);v[9]===Symbol.for("react.memo_cache_sentinel")?(e={isInteractive:!1,onOpenReviewChanges:aP.noop,onSetFocus:aP.noop,isReviewChangesOpen:!1},v[9]=e):e=v[9];let J=`${w}-document`;v[10]!==J?(f={"--grid-area":J},v[10]=J,v[11]=f):f=v[11];let K=f,L="next"===w,M="next"!==w&&"none";v[12]!==M?(m={"--scrollbar-width":M},v[12]=M,v[13]=m):m=v[13];let N=m;return v[14]!==I||v[15]!==y||v[16]!==x?(n=(0,g.jsx)(j.DialogProvider,{position:"absolute",children:(0,g.jsx)(cz,{ref:C,padding:4,width:1,children:(0,g.jsx)(I,{documentId:y,documentType:x})})}),v[14]=I,v[15]=y,v[16]=x,v[17]=n):n=v[17],v[18]!==D||v[19]!==n?(o=(0,g.jsx)(i.PortalProvider,{element:D,children:n}),v[18]=D,v[19]=n,v[20]=o):o=v[20],v[21]!==b||v[22]!==N||v[23]!==o?(q=(0,g.jsx)(cx,{ref:b,style:N,children:o}),v[21]=b,v[22]=N,v[23]=o,v[24]=q):q=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(r=(0,g.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:E}),v[25]=r):r=v[25],v[26]!==q||v[27]!==K||v[28]!==L?(s=(0,g.jsxs)(cy,{ref:G,style:K,borderLeft:L,children:[q,r]}),v[26]=q,v[27]=K,v[28]=L,v[29]=s):s=v[29],v[30]!==F||v[31]!==s?(t=(0,g.jsx)(i.BoundaryElementProvider,{element:F,children:s}),v[30]=F,v[31]=s,v[32]=t):t=v[32],v[33]!==z||v[34]!==t?(u=(0,g.jsx)(l.ReviewChangesContext.Provider,{value:e,children:(0,g.jsx)(p.ChangeIndicatorsTracker,{children:(0,g.jsx)(p.VirtualizerScrollInstanceProvider,{scrollElement:z,containerElement:C,children:t})})}),v[33]=z,v[34]=t,v[35]=u):u=v[35],u}),cB=a=>{var b,c;let d,e,f,i,j,m,n,q,r,s,t,u=(0,h.c)(52),{role:v,documentType:w,documentId:x,syncChannel:y,compareDocument:z}=a;u[0]!==z?(d={compareDocument:z},u[0]=z,u[1]=d):d=u[1];let A=function(a){let b,c,d,e=(0,h.c)(4),{compareDocument:f}=a;e[0]!==f.id?(b=(0,o.getPublishedId)(f.id),e[0]=f.id,e[1]=b):b=e[1];let g=f.type;e[2]!==f.id?(c=(0,o.getVersionFromId)(f.id),e[2]=f.id,e[3]=c):c=e[3];let i=(0,p.useEditState)(b,g,"low",c);a:{if((0,o.isVersionId)(f.id)){d=i.version??void 0;break a}if((0,o.isDraftId)(f.id)){d=i.draft??void 0;break a}if((0,o.isPublishedId)(f.id)){d=i.published??void 0;break a}d=void 0}return d}(d),{data:B}=(0,p.useActiveReleases)(),[C]=(0,k.useState)(cC);u[2]!==x||u[3]!==B?(e=cm(x,B),u[2]=x,u[3]=B,u[4]=e):e=u[4];let D=e;u[5]!==x?(f=(0,o.getPublishedId)(x),u[5]=x,u[6]=f):f=u[6],u[7]!==x?(b=x,i=(0,o.isVersionId)(b)?(0,o.getVersionFromId)(b):(0,o.isPublishedId)(b)?"published":void 0,u[7]=x,u[8]=i):i=u[8],u[9]!==x?(j=(0,o.getVersionFromId)(x),u[9]=x,u[10]=j):j=u[10],u[11]!==A||u[12]!==w||u[13]!==f||u[14]!==i||u[15]!==j?(m={documentId:f,documentType:w,selectedPerspectiveName:i,releaseId:j,comparisonValue:A,displayInlineChanges:!0},u[11]=A,u[12]=w,u[13]=f,u[14]=i,u[15]=j,u[16]=m):m=u[16];let{formState:E,onChange:F,onFocus:G,onBlur:H,onSetActiveFieldGroup:I,onSetCollapsedFieldSet:J,onSetCollapsedPath:K,collapsedFieldSets:L,ready:M,collapsedPaths:N,schemaType:O,value:P,onProgrammaticFocus:Q,openPath:R,onPathOpen:S}=(0,p.useDocumentForm)(m),T=null===E||!M;u[17]!==v||u[18]!==y?(n={id:v,syncChannel:y},u[17]=v,u[18]=y,u[19]=n):n=u[19];let U=function(a){let b,c,d,e=(0,h.c)(11),{syncChannel:f,id:g}=a;e[0]!==g||e[1]!==f?(b=a=>f.next({...a,source:g}),e[0]=g,e[1]=f,e[2]=b):b=e[2];let i=b;if(e[3]!==g||e[4]!==f){let a;e[6]!==g?(a=a=>{let{source:b}=a;return b!==g},e[6]=g,e[7]=a):a=e[7],c=f.pipe((0,aL.distinctUntilChanged)(cw),(0,aL.filter)(a),(0,aL.map)(cv)),e[3]=g,e[4]=f,e[5]=c}else c=e[5];let j=c;return e[8]!==j||e[9]!==i?(d={path:j,push:i},e[8]=j,e[9]=i,e[10]=d):d=e[10],d}(n);u[20]!==S||u[21]!==U||u[22]!==v?(q=a=>{S(a),U.push({source:v,path:a})},u[20]=S,u[21]=U,u[22]=v,u[23]=q):q=u[23];let V=q;return u[24]!==S||u[25]!==Q||u[26]!==U.path?(r=()=>{let a=U.path.subscribe(a=>{S(a),Q(a)});return()=>a.unsubscribe()},u[24]=S,u[25]=Q,u[26]=U.path,u[27]=r):r=u[27],u[28]!==S||u[29]!==Q||u[30]!==U.path||u[31]!==v?(s=[S,Q,U.path,v],u[28]=S,u[29]=Q,u[30]=U.path,u[31]=v,u[32]=s):s=u[32],(0,k.useEffect)(r,s),u[33]!==L||u[34]!==N||u[35]!==A||u[36]!==E||u[37]!==T||u[38]!==H||u[39]!==F||u[40]!==G||u[41]!==V||u[42]!==I||u[43]!==J||u[44]!==K||u[45]!==R||u[46]!==C||u[47]!==D||u[48]!==v||u[49]!==O||u[50]!==P?(t=T?(0,g.jsx)(p.LoadingBlock,{showText:!0}):(0,g.jsx)(l.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,g.jsx)(p.FormBuilder,{__internal_patchChannel:C,id:`diffView-pane-${v}`,onChange:F,onPathFocus:G,onPathOpen:V,onPathBlur:H,onFieldGroupSelect:I,onSetFieldSetCollapsed:J,onSetPathCollapsed:K,collapsedPaths:N,collapsedFieldSets:L,focusPath:E.focusPath,openPath:R,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(c=D)?"drafts":c,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:O,value:P,compareValue:A})}),u[33]=L,u[34]=N,u[35]=A,u[36]=E,u[37]=T,u[38]=H,u[39]=F,u[40]=G,u[41]=V,u[42]=I,u[43]=J,u[44]=K,u[45]=R,u[46]=C,u[47]=D,u[48]=v,u[49]=O,u[50]=P,u[51]=t):t=u[51],t};function cC(){return(0,p.createPatchChannel)()}let cD=aI.styled.a.withConfig({displayName:"Link",componentId:"sc-ihhvnj-0"})`flex:1;text-decoration:none;color:inherit;`,cE=a=>{let b,c,d=(0,h.c)(6),{children:e,documentId:f,documentType:i}=a;d[0]!==f||d[1]!==i?(b={intent:"edit",params:{id:f,type:i}},d[0]=f,d[1]=i,d[2]=b):b=d[2];let{href:j}=(0,s.useIntentLink)(b);return d[3]!==e||d[4]!==j?(c=(0,g.jsx)(cD,{href:j,target:"_blank",rel:"noopener noreferrer",children:e}),d[3]=e,d[4]=j,d[5]=c):c=d[5],c},cF=a=>{var b;let c,d,e,f,i,j,m,n,o,p,q,s,t=(0,h.c)(24),{documentId:u}=a,{documents:v,state:w,mode:x}=cj(),{exitDiffView:y}=cg(),z=((o=(0,h.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(n=new aL.Subject,o[0]=n):n=o[0],n),[A,B]=(0,k.useState)(null),[C,D]=(0,k.useState)(null),E=(0,k.useContext)(l.ReferenceInputOptionsContext);t[0]!==E?(c={...E,disableNew:!0,EditReferenceLinkComponent:cE},t[0]=E,t[1]=c):c=t[1];let F=c;return t[2]!==C||t[3]!==A?(d=[A,C],t[2]=C,t[3]=A,t[4]=d):d=t[4],b=d,(s=(0,h.c)(3))[0]!==b?(p=()=>{let a=b.filter(cl);if(0===a.length)return;let c=new a4(a);return()=>c.destroy()},q=[b],s[0]=b,s[1]=p,s[2]=q):(p=s[1],q=s[2]),(0,k.useEffect)(p,q),t[5]!==u||t[6]!==x||t[7]!==w?(e="version"===x&&(0,g.jsx)(cp,{documentId:u,state:w}),t[5]=u,t[6]=x,t[7]=w,t[8]=e):e=t[8],t[9]!==v||t[10]!==C||t[11]!==A||t[12]!==w||t[13]!==z?(f="ready"===w&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(cA,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:B,scrollElement:A,syncChannel:z,compareDocument:v.previous}),(0,g.jsx)(cA,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:D,scrollElement:C,syncChannel:z,compareDocument:v.previous})]}),t[9]=v,t[10]=C,t[11]=A,t[12]=w,t[13]=z,t[14]=f):f=t[14],t[15]!==e||t[16]!==f?(i=(0,g.jsxs)(ct,{children:[e,f]}),t[15]=e,t[16]=f,t[17]=i):i=t[17],t[18]!==y||t[19]!==i?(j=(0,g.jsx)(r.Dialog,{id:"diffView",width:"auto",onClose:y,padding:!1,__unstable_hideCloseButton:!0,children:i}),t[18]=y,t[19]=i,t[20]=j):j=t[20],t[21]!==F||t[22]!==j?(m=(0,g.jsx)(l.ReferenceInputOptionsContext.Provider,{value:F,children:j}),t[21]=F,t[22]=j,t[23]=m):m=t[23],m},cG=a=>{let b,c,d,e=(0,h.c)(9),{children:f,documentId:i}=a,k=(0,j.useToast)(),{t:l}=(0,p.useTranslation)(F);e[0]!==l||e[1]!==k?(b={onParamsError:a=>{k.push({id:"diffViewParamsParsingError",status:"error",title:l("compare-version.error.invalidParams.title"),description:(0,g.jsx)("ul",{children:a.map(a=>{let[b,c]=a;return(0,g.jsx)("li",{children:l(`compare-version.error.${b}`,{input:c})},b)})})})}},e[0]=l,e[1]=k,e[2]=b):b=e[2];let{isActive:m}=cj(b);return e[3]!==i||e[4]!==m?(c=m&&(0,g.jsx)(cF,{documentId:i}),e[3]=i,e[4]=m,e[5]=c):c=e[5],e[6]!==f||e[7]!==c?(d=(0,g.jsxs)(g.Fragment,{children:[f,c]}),e[6]=f,e[7]=c,e[8]=d):d=e[8],d};function cH(){let a=(0,k.useContext)(l.PaneLayoutContext);if(!a)throw Error("PaneLayout: missing context value");return a}let cI=(0,aI.styled)(i.Layer).withConfig({displayName:"Root",componentId:"sc-k0eo57-0"})`position:relative;width:1px;min-width:1px;&:before{content:'';display:block;position:absolute;top:0;left:0;bottom:0;width:1px;background-color:var(--card-border-color);}&:not([data-disabled]){cursor:ew-resize;width:9px;min-width:9px;margin:0 -4px;&:before{left:4px;}&:after{content:'';display:block;position:absolute;top:0;left:0;width:9px;bottom:0;background-color:var(--card-border-color);opacity:0;transition:opacity 150ms;}&[data-dragging]:after,&:hover:after{opacity:0.2;}}`;function cJ(a){let b,c,d=(0,h.c)(7),{disabled:e,element:f}=a,{resize:i}=cH(),[j,l]=(0,k.useState)(!1);d[0]!==f||d[1]!==i?(b=a=>{if(!f)return;l(!0),a.preventDefault();let b=a.pageX;i("start",f,0);let c=a=>{a.preventDefault(),i("move",f,a.pageX-b)},d=a=>{a.preventDefault(),l(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),i("end",f,0)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},d[0]=f,d[1]=i,d[2]=b):b=d[2];let m=b,n=e?"":void 0,o=j?"":void 0;return d[3]!==m||d[4]!==n||d[5]!==o?(c=(0,g.jsx)(cI,{"data-disabled":n,"data-dragging":o,onMouseDown:m}),d[3]=m,d[4]=n,d[5]=o,d[6]=c):c=d[6],c}let cK=(0,aI.styled)(i.Card).withConfig({displayName:"Root",componentId:"sc-o2std4-0"})`outline:none;box-shadow:1px 0 0 var(--card-border-color);`,cL=(0,k.forwardRef)(function(a,b){let c,d,e,f,j,m,n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=(0,h.c)(86);L[0]!==a?({children:c,currentMinWidth:e,currentMaxWidth:d,flex:o,id:f,minWidth:m,maxWidth:j,selected:q,...n}=a,L[0]=a,L[1]=c,L[2]=d,L[3]=e,L[4]=f,L[5]=j,L[6]=m,L[7]=n,L[8]=o,L[9]=q):(c=L[1],d=L[2],e=L[3],f=L[4],j=L[5],m=L[6],n=L[7],o=L[8],q=L[9]);let M=void 0===o?1:o,N=void 0!==q&&q,[O,P]=(0,k.useState)(null),{collapse:Q,collapsed:R,expand:S,expandedElement:T,mount:U,panes:V}=cH();if(L[10]!==V||L[11]!==O){let a;L[14]!==O?(a=a=>a.element===O,L[14]=O,L[15]=a):a=L[15],s=(r=V.find(a))&&V.indexOf(r),L[10]=V,L[11]=O,L[12]=r,L[13]=s}else r=L[12],s=L[13];let W=s,X="number"==typeof W?V[W+1]:void 0,Y=W===V.length-1,Z=T===O,$=!R&&(r?.collapsed||!1),_=X?.collapsed||!1,aa=(0,k.useRef)(null),ab=r?.flex??M,ac=r?.currentMinWidth??e,ad=r?.currentMaxWidth??d;L[16]===Symbol.for("react.memo_cache_sentinel")?(t=()=>aa.current,L[16]=t):t=L[16],(0,k.useImperativeHandle)(b,t),L[17]===Symbol.for("react.memo_cache_sentinel")?(u=a=>{P(a),aa.current=a},L[17]=u):u=L[17];let ae=u;L[18]!==d||L[19]!==e||L[20]!==M||L[21]!==f||L[22]!==j||L[23]!==m||L[24]!==U||L[25]!==O?(v=()=>{if(O)return U(O,{currentMinWidth:e,currentMaxWidth:d,flex:M,id:f,minWidth:m,maxWidth:j})},w=[e,d,M,f,m,j,U,O],L[18]=d,L[19]=e,L[20]=M,L[21]=f,L[22]=j,L[23]=m,L[24]=U,L[25]=O,L[26]=v,L[27]=w):(v=L[26],w=L[27]),(0,k.useLayoutEffect)(v,w),L[28]!==Q||L[29]!==O?(x=()=>{O&&Q(O)},L[28]=Q,L[29]=O,L[30]=x):x=L[30];let af=x;L[31]!==S||L[32]!==O?(y=()=>{O&&S(O)},L[31]=S,L[32]=O,L[33]=y):y=L[33];let ag=y,ah=!R&&$;L[34]!==af||L[35]!==ag||L[36]!==Y||L[37]!==W||L[38]!==O||L[39]!==ah?(z={collapse:af,collapsed:ah,expand:ag,index:W,isLast:Y,rootElement:O},L[34]=af,L[35]=ag,L[36]=Y,L[37]=W,L[38]=O,L[39]=ah,L[40]=z):z=L[40];let ai=z;a:{if(R){A=void 0;break a}if($){A=51;break a}if(0===ac||Y){A=m||204;break a}A=ac||m||204}let aj=A;b:{if($){B=51;break b}if(R&&Y){B=void 0;break b}if(Y){if(j){B=ad??j;break b}B=void 0;break b}B=ad??j}let ak=B,al=R&&!Y;L[41]!==$||L[42]!==Y||L[43]!==R||L[44]!==_||L[45]!==O?(C=!Y&&!R&&(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,g.jsx)(cJ,{disabled:$||_,element:O})}),L[41]=$,L[42]=Y,L[43]=R,L[44]=_,L[45]=O,L[46]=C):C=L[46];let am=C,an=ak===1/0?void 0:ak;L[47]!==ab||L[48]!==aj||L[49]!==an?(D={flex:ab,minWidth:aj,maxWidth:an},L[47]=ab,L[48]=aj,L[49]=an,L[50]=D):D=L[50];let ao=D,ap=R?void 0:"hidden",aq=$?"":void 0,ar=N?"":void 0;return L[51]!==$||L[52]!==ad||L[53]!==ac||L[54]!==Z||L[55]!==ab||L[56]!==ak||L[57]!==aj||L[58]!==W?(E=!1,L[51]=$,L[52]=ad,L[53]=ac,L[54]=Z,L[55]=ab,L[56]=ak,L[57]=aj,L[58]=W,L[59]=E):E=L[59],L[60]!==c||L[61]!==al?(F=!al&&(0,g.jsx)(i.Flex,{direction:"column",height:"fill",children:c}),L[60]=c,L[61]=al,L[62]=F):F=L[62],L[63]!==O||L[64]!==F?(G=(0,g.jsx)(i.BoundaryElementProvider,{element:O,children:F}),L[63]=O,L[64]=F,L[65]=G):G=L[65],L[66]!==al||L[67]!==f||L[68]!==W||L[69]!==n||L[70]!==ao||L[71]!==ap||L[72]!==aq||L[73]!==ar||L[74]!==E||L[75]!==G?(H=(0,g.jsxs)(cK,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:al,id:f,overflow:ap,...n,"data-pane-collapsed":aq,"data-pane-index":W,"data-pane-selected":ar,ref:ae,style:ao,children:[E,G]}),L[66]=al,L[67]=f,L[68]=W,L[69]=n,L[70]=ao,L[71]=ap,L[72]=aq,L[73]=ar,L[74]=E,L[75]=G,L[76]=H):H=L[76],L[77]!==Y||L[78]!==H?(I=(0,g.jsx)(p.IsLastPaneProvider,{isLastPane:Y,children:H}),L[77]=Y,L[78]=H,L[79]=I):I=L[79],L[80]!==ai||L[81]!==I?(J=(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"pane",children:(0,g.jsx)(l.PaneContext.Provider,{value:ai,children:I})}),L[80]=ai,L[81]=I,L[82]=J):J=L[82],L[83]!==am||L[84]!==J?(K=(0,g.jsxs)(g.Fragment,{children:[J,am]}),L[83]=am,L[84]=J,L[85]=K):K=L[85],K}),cM=(0,aI.styled)(i.Card).withConfig({displayName:"Root",componentId:"sc-ok1xda-0"})`position:relative;outline:none;`;function cN(){let a=(0,k.useContext)(l.PaneContext);if(!a)throw Error("Pane: missing context value");return a}cM.displayName="PaneContent__root";let cO=(0,k.forwardRef)(function(a,b){let c,d,e,f,i,j,k=(0,h.c)(14);k[0]!==a?({as:c,children:d,overflow:e,padding:f,...i}=a,k[0]=a,k[1]=c,k[2]=d,k[3]=e,k[4]=f,k[5]=i):(c=k[1],d=k[2],e=k[3],f=k[4],i=k[5]);let{collapsed:l}=cN(),{collapsed:m}=cH(),n=m?void 0:e;return k[6]!==c||k[7]!==d||k[8]!==l||k[9]!==f||k[10]!==b||k[11]!==i||k[12]!==n?(j=(0,g.jsx)(cM,{"data-testid":"pane-content",forwardedAs:c,...i,flex:1,hidden:l,overflow:n,padding:f,ref:b,tone:"inherit",children:d}),k[6]=c,k[7]=d,k[8]=l,k[9]=f,k[10]=b,k[11]=i,k[12]=n,k[13]=j):j=k[13],j});function cP(a){return a?a.toLocaleLowerCase().replaceAll(" ",""):""}let cQ={constrainSize:!0,placement:"left-start",portal:!0};function cR(a){let b,c,d,e,f=(0,h.c)(35),{disabled:j,isAfterGroup:k,node:l}=a,m=(0,p.useGetI18nText)("i18n"in l?l:void 0);if("divider"===l.type){let a;return f[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(i.MenuDivider,{}),f[0]=a):a=f[0],a}f[1]!==m||f[2]!==l?(b=m(l),f[1]=m,f[2]=l,f[3]=b):b=f[3];let{title:n}=b;if("group"===l.type){let a,b,c,d;if(0===l.children.length)return null;if(l.expanded){let a,b,c;return f[4]!==k?(a=k&&(0,g.jsx)(i.MenuDivider,{}),f[4]=k,f[5]=a):a=f[5],f[6]!==j||f[7]!==l.children||f[8]!==l.disabled?(b=l.children.map((a,b)=>(0,g.jsx)(cR,{disabled:j||!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),f[6]=j,f[7]=l.children,f[8]=l.disabled,f[9]=b):b=f[9],f[10]!==a||f[11]!==b?(c=(0,g.jsxs)(g.Fragment,{children:[a,b]}),f[10]=a,f[11]=b,f[12]=c):c=f[12],c}f[13]!==k?(a=k&&(0,g.jsx)(i.MenuDivider,{}),f[13]=k,f[14]=a):a=f[14];let e=l.icon;return f[15]!==j||f[16]!==l.children||f[17]!==l.disabled?(b=l.children.map((a,b)=>(0,g.jsx)(cR,{disabled:j||!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),f[15]=j,f[16]=l.children,f[17]=l.disabled,f[18]=b):b=f[18],f[19]!==j||f[20]!==l.icon||f[21]!==b||f[22]!==n?(c=(0,g.jsx)(aY.MenuGroup,{disabled:j,icon:e,popover:cQ,text:n,children:b}),f[19]=j,f[20]=l.icon,f[21]=b,f[22]=n,f[23]=c):c=f[23],f[24]!==a||f[25]!==c?(d=(0,g.jsxs)(g.Fragment,{children:[a,c]}),f[24]=a,f[25]=c,f[26]=d):d=f[26],d}return f[27]!==k?(c=k&&(0,g.jsx)(i.MenuDivider,{}),f[27]=k,f[28]=c):c=f[28],f[29]!==j||f[30]!==l?(d=(0,g.jsx)(cS,{disabled:j,node:l}),f[29]=j,f[30]=l,f[31]=d):d=f[31],f[32]!==c||f[33]!==d?(e=(0,g.jsxs)(g.Fragment,{children:[c,d]}),f[32]=c,f[33]=d,f[34]=e):e=f[34],e}function cS(a){let b,c=(0,h.c)(5),{node:d}=a;if(d.intent){let b;return c[0]!==d.intent||c[1]!==a?(b=(0,g.jsx)(cU,{...a,intent:d.intent}),c[0]=d.intent,c[1]=a,c[2]=b):b=c[2],b}return c[3]!==a?(b=(0,g.jsx)(cT,{...a}),c[3]=a,c[4]=b):b=c[4],b}function cT(a){let b,c,d,e,f,j=(0,h.c)(19),{disabled:k,node:l}=a;j[0]!==l.disabled?(b="object"==typeof l.disabled&&(0,g.jsx)(i.Text,{size:1,children:l.disabled.reason}),j[0]=l.disabled,j[1]=b):b=j[1];let m=b,{title:n}=(0,p.useI18nText)(l),o=l.selected&&!l.hideSelectionIndicator,q=k||!!l.disabled;j[2]!==l.hotkey?(c=l.hotkey?.split("+"),j[2]=l.hotkey,j[3]=c):c=j[3];let s=l.icon,t=l.iconRight||o&&u.CheckmarkIcon,v=l.onAction,w=l.tone;j[4]!==l.title?(d=cP(l.title),j[4]=l.title,j[5]=d):d=j[5];let x=`action-${d}`;return j[6]!==l.icon||j[7]!==l.onAction||j[8]!==l.tone||j[9]!==o||j[10]!==q||j[11]!==c||j[12]!==t||j[13]!==x||j[14]!==n?(e=(0,g.jsx)(r.MenuItem,{disabled:q,hotkeys:c,icon:s,iconRight:t,onClick:v,pressed:o,text:n,tone:w,"data-testid":x}),j[6]=l.icon,j[7]=l.onAction,j[8]=l.tone,j[9]=o,j[10]=q,j[11]=c,j[12]=t,j[13]=x,j[14]=n,j[15]=e):e=j[15],j[16]!==e||j[17]!==m?(f=(0,g.jsx)(p.TooltipOfDisabled,{content:m,placement:"left",children:e}),j[16]=e,j[17]=m,j[18]=f):f=j[18],f}function cU(a){let b,c,d,e,f,j,k=(0,h.c)(23),{disabled:l,intent:m,node:n}=a;k[0]!==n.disabled?(b="object"==typeof n.disabled&&(0,g.jsx)(i.Text,{size:1,children:n.disabled.reason}),k[0]=n.disabled,k[1]=b):b=k[1];let o=b;k[2]!==m.params||k[3]!==m.type?(c={intent:m.type,params:m.params},k[2]=m.params,k[3]=m.type,k[4]=c):c=k[4];let q=(0,s.useIntentLink)(c);k[5]!==q||k[6]!==n?(d=a=>{q.onClick(a),n.onAction()},k[5]=q,k[6]=n,k[7]=d):d=k[7];let t=d,{title:v}=(0,p.useI18nText)(n),w=n.selected&&!n.hideSelectionIndicator,x=l||!!n.disabled;k[8]!==n.hotkey?(e=n.hotkey?.split("+"),k[8]=n.hotkey,k[9]=e):e=k[9];let y=w?u.CheckmarkIcon:void 0;return k[10]!==t||k[11]!==q.href||k[12]!==n.icon||k[13]!==n.tone||k[14]!==w||k[15]!==x||k[16]!==e||k[17]!==y||k[18]!==v?(f=(0,g.jsx)(r.MenuItem,{as:"a",disabled:x,hotkeys:e,href:q.href,icon:n.icon,iconRight:y,onClick:t,pressed:w,text:v,tone:n.tone}),k[10]=t,k[11]=q.href,k[12]=n.icon,k[13]=n.tone,k[14]=w,k[15]=x,k[16]=e,k[17]=y,k[18]=v,k[19]=f):f=k[19],k[20]!==f||k[21]!==o?(j=(0,g.jsx)(p.TooltipOfDisabled,{content:o,placement:"left",children:f}),k[20]=f,k[21]=o,k[22]=j):j=k[22],j}let cV={constrainSize:!0,placement:"bottom",portal:!0};function cW(a,b){return a.some(a=>"item"===a.type&&a.tone===b||"group"===a.type&&cW(a.children,b))}function cX(a){let b,c,d,e,f,j=(0,h.c)(13),{nodes:l,actionsNodes:m}=a,n=(0,k.useId)(),o=cW(l,"critical"),q=cW(l,"caution"),s=o?"critical":q?"caution":void 0;return j[0]!==s?(b=(0,g.jsx)(p.ContextMenuButton,{tone:s,"data-testid":"pane-context-menu-button"}),j[0]=s,j[1]=b):b=j[1],j[2]!==m?(c=m&&(0,g.jsxs)(g.Fragment,{children:[m,(0,g.jsx)(i.MenuDivider,{})]}),j[2]=m,j[3]=c):c=j[3],j[4]!==l?(d=l.map((a,b)=>{let c=l[b-1]?.type==="group";return(0,g.jsx)(cR,{isAfterGroup:c,node:a},a.key)}),j[4]=l,j[5]=d):d=j[5],j[6]!==c||j[7]!==d?(e=(0,g.jsxs)(i.Menu,{children:[c,d]}),j[6]=c,j[7]=d,j[8]=e):e=j[8],j[9]!==n||j[10]!==b||j[11]!==e?(f=(0,g.jsx)(r.MenuButton,{button:b,id:n,menu:e,popover:cV}),j[9]=n,j[10]=b,j[11]=e,j[12]=f):f=j[12],f}let cY=(0,aI.styled)(i.Layer).withConfig({displayName:"Root",componentId:"sc-rwc61s-0"})`position:sticky;bottom:0;`,cZ=(0,aI.styled)(i.Card).withConfig({displayName:"RootCard",componentId:"sc-rwc61s-1"})`padding-bottom:env(safe-area-inset-bottom);`,c$=(0,k.forwardRef)(function(a,b){let c,d,e=(0,h.c)(7),{children:f,padding:j}=a,{collapsed:k}=cN();return e[0]!==f||e[1]!==j?(c=(0,g.jsx)(cZ,{tone:"inherit",children:(0,g.jsx)(i.Box,{padding:j,children:f})}),e[0]=f,e[1]=j,e[2]=c):c=e[2],e[3]!==k||e[4]!==b||e[5]!==c?(d=(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,g.jsx)(cY,{"data-testid":"pane-footer",hidden:k,ref:b,children:c})}),e[3]=k,e[4]=b,e[5]=c,e[6]=d):d=e[6],d}),c_=(0,aI.styled)(i.Layer).withConfig({displayName:"Root",componentId:"sc-2mpzxb-0"})(({$border:a})=>aI.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${a?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),c0=(0,aI.styled)(i.Flex).withConfig({displayName:"Layout",componentId:"sc-2mpzxb-1"})`transform-origin:calc(51px / 2);[data-collapsed] > div > &{transform:rotate(90deg);}`,c1=(0,aI.styled)(i.Card).withConfig({displayName:"TitleCard",componentId:"sc-2mpzxb-2"})(({theme:a})=>{let{fg:b,bg:c}=a.sanity.color.card.enabled;return aI.css`
    background-color: ${c};

    [data-ui='Text'] {
      color: ${b};
    }
  `}),c2=(0,aI.styled)(j.TextSkeleton).withConfig({displayName:"TitleTextSkeleton",componentId:"sc-2mpzxb-3"})`width:66%;max-width:175px;`,c3=(0,aI.styled)(i.Text).withConfig({displayName:"TitleText",componentId:"sc-2mpzxb-4"})`cursor:default;outline:none;`,c4=(0,k.forwardRef)(function(a,b){let c,d,e,f,k,l,m,n,o,q,r,s,t,u=(0,h.c)(48),{actions:v,backButton:w,border:x,contentAfter:y,loading:z,subActions:A,tabs:B,tabIndex:C,title:D,appendTitle:E}=a,{collapse:F,collapsed:G,expand:H,rootElement:I}=cN(),J=(0,j.useElementRect)(I||null),K=G?J?.height||window.innerHeight:void 0;u[0]!==K?(c={width:K},u[0]=K,u[1]=c):c=u[1];let L=c;u[2]!==F||u[3]!==G?(d=()=>{G||F()},u[2]=F,u[3]=G,u[4]=d):d=u[4];let M=d;u[5]!==G||u[6]!==H?(e=()=>{G&&H()},u[5]=G,u[6]=H,u[7]=e):e=u[7];let N=e,O=!!(!G&&(B||A)),P=G?"":void 0,Q=G?"":void 0;u[8]!==w?(f=w&&(0,g.jsx)(i.Box,{flex:"none",children:w}),u[8]=w,u[9]=f):f=u[9];let R=w?1:2;u[10]!==z?(k=z&&(0,g.jsx)(i.Box,{children:(0,g.jsx)(c2,{animated:!0,radius:1,size:1})}),u[10]=z,u[11]=k):k=u[11],u[12]!==E||u[13]!==z||u[14]!==D?(l=!z&&(0,g.jsxs)(i.Flex,{align:"center",gap:1,children:[(0,g.jsx)(c3,{size:1,textOverflow:"ellipsis",weight:"semibold",children:D}),E]}),u[12]=E,u[13]=z,u[14]=D,u[15]=l):l=u[15],u[16]!==M||u[17]!==R||u[18]!==k||u[19]!==l||u[20]!==C?(m=(0,g.jsxs)(c1,{__unstable_focusRing:!0,flex:1,onClick:M,paddingLeft:R,padding:2,tabIndex:C,children:[k,l]}),u[16]=M,u[17]=R,u[18]=k,u[19]=l,u[20]=C,u[21]=m):m=u[21],u[22]!==v||u[23]!==G?(n=v&&(0,g.jsx)(i.Box,{hidden:G,children:(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"paneHeader",children:v})}),u[22]=v,u[23]=G,u[24]=n):n=u[24],u[25]!==m||u[26]!==n||u[27]!==f?(o=(0,g.jsxs)(i.Flex,{align:"flex-start",gap:3,children:[f,m,n]}),u[25]=m,u[26]=n,u[27]=f,u[28]=o):o=u[28],u[29]!==G||u[30]!==O||u[31]!==A||u[32]!==B?(q=O&&(0,g.jsxs)(i.Flex,{align:"center",hidden:G,overflow:"auto",children:[(0,g.jsx)(i.Box,{flex:1,marginRight:3*!!A,children:B}),A]}),u[29]=G,u[30]=O,u[31]=A,u[32]=B,u[33]=q):q=u[33],u[34]!==N||u[35]!==L||u[36]!==o||u[37]!==q?(r=(0,g.jsxs)(c0,{direction:"column",gap:3,onClick:N,padding:3,sizing:"border",style:L,children:[o,q]}),u[34]=N,u[35]=L,u[36]=o,u[37]=q,u[38]=r):r=u[38];let S=!G&&y;return u[39]!==r||u[40]!==S||u[41]!==Q?(s=(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,g.jsxs)(i.Card,{"data-collapsed":Q,tone:"inherit",children:[r,S]})}),u[39]=r,u[40]=S,u[41]=Q,u[42]=s):s=u[42],u[43]!==x||u[44]!==b||u[45]!==s||u[46]!==P?(t=(0,g.jsx)(i.LayerProvider,{zOffset:100,children:(0,g.jsx)(c_,{$border:x,"data-collapsed":P,"data-testid":"pane-header",ref:b,children:s})}),u[43]=x,u[44]=b,u[45]=s,u[46]=P,u[47]=t):t=u[47],t});function c5(a){return a.disabled?{disabledReason:"object"==typeof a.disabled?a.disabled.reason:void 0,ariaLabel:"object"==typeof a.disabled&&"string"==typeof a.disabled?.reason?a.disabled.reason:"This is disabled",isDisabled:!!a.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function c6(a){let b=(0,h.c)(4),{node:c}=a;if("item"===c.type){let a;return b[0]!==c?(a=(0,g.jsx)(c7,{node:c}),b[0]=c,b[1]=a):a=b[1],a}if("group"===c.type){let a;return b[2]!==c?(a=(0,g.jsx)(c9,{node:c}),b[2]=c,b[3]=a):a=b[3],a}return console.warn('unknown menu node (expected `type: "item" | "group"`):',c),null}function c7(a){let b,c,d,e,f,i=(0,h.c)(23),{node:j}=a,{title:k}=(0,p.useI18nText)(j),{t:l}=(0,p.useTranslation)();if(j.intent){let b;return i[0]!==j.intent||i[1]!==a?(b=(0,g.jsx)(c8,{...a,intent:j.intent}),i[0]=j.intent,i[1]=a,i[2]=b):b=i[2],b}i[3]!==j?(b=c5(j),i[3]=j,i[4]=b):b=i[4];let{disabledReason:m,ariaLabel:n,isDisabled:o}=b;i[5]!==n||i[6]!==l||i[7]!==k?(c=n||k||l("status-button.aria-label"),i[5]=n,i[6]=l,i[7]=k,i[8]=c):c=i[8],i[9]!==o||i[10]!==j.hotkey?(d=!o&&j.hotkey?j.hotkey.split("+"):void 0,i[9]=o,i[10]=j.hotkey,i[11]=d):d=i[11];let q=o?m:k;return i[12]!==d||i[13]!==q?(e={hotkeys:d,content:q},i[12]=d,i[13]=q,i[14]=e):e=i[14],i[15]!==o||i[16]!==j.icon||i[17]!==j.onAction||i[18]!==j.selected||i[19]!==j.tone||i[20]!==c||i[21]!==e?(f=(0,g.jsx)(p.StatusButton,{disabled:o,icon:j.icon,onClick:j.onAction,selected:j.selected,tone:j.tone,"aria-label":c,tooltipProps:e}),i[15]=o,i[16]=j.icon,i[17]=j.onAction,i[18]=j.selected,i[19]=j.tone,i[20]=c,i[21]=e,i[22]=f):f=i[22],f}function c8(a){let b,c,d,e,f,i,j,k=(0,h.c)(27),{intent:l,node:m}=a;k[0]!==l.params||k[1]!==l.type?(b={intent:l.type,params:l.params},k[0]=l.params,k[1]=l.type,k[2]=b):b=k[2];let n=(0,s.useIntentLink)(b),{t:o}=(0,p.useTranslation)();k[3]!==n||k[4]!==m?(c=a=>{n.onClick(a),m.onAction()},k[3]=n,k[4]=m,k[5]=c):c=k[5];let q=c;k[6]!==m?(d=c5(m),k[6]=m,k[7]=d):d=k[7];let{disabledReason:r,ariaLabel:t,isDisabled:u}=d;k[8]!==t||k[9]!==m.title||k[10]!==o?(e=t||m.title||o("status-button.aria-label"),k[8]=t,k[9]=m.title,k[10]=o,k[11]=e):e=k[11],k[12]!==u||k[13]!==m.hotkey?(f=!u&&m.hotkey?m.hotkey.split("+"):void 0,k[12]=u,k[13]=m.hotkey,k[14]=f):f=k[14];let v=u?r:m.title;return k[15]!==f||k[16]!==v?(i={hotkeys:f,content:v,placement:"bottom",portal:!0},k[15]=f,k[16]=v,k[17]=i):i=k[17],k[18]!==q||k[19]!==n.href||k[20]!==u||k[21]!==m.icon||k[22]!==m.selected||k[23]!==m.tone||k[24]!==e||k[25]!==i?(j=(0,g.jsx)(p.StatusButton,{forwardedAs:"a",disabled:u,href:n.href,icon:m.icon,onClick:q,selected:m.selected,tone:m.tone,"aria-label":e,tooltipProps:i}),k[18]=q,k[19]=n.href,k[20]=u,k[21]=m.icon,k[22]=m.selected,k[23]=m.tone,k[24]=e,k[25]=i,k[26]=j):j=k[26],j}function c9(a){let b,c,d,e,f,j=(0,h.c)(16),{node:l}=a,{title:m}=(0,p.useI18nText)(l),n=!!l.disabled,o=l.icon??u.UnknownIcon;j[0]!==l.title?(b={content:l.title,portal:!0},j[0]=l.title,j[1]=b):b=j[1],j[2]!==n||j[3]!==o||j[4]!==b||j[5]!==m?(c=(0,g.jsx)(r.Button,{disabled:n,icon:o,label:m,mode:"bleed",tooltipProps:b}),j[2]=n,j[3]=o,j[4]=b,j[5]=m,j[6]=c):c=j[6];let q=(0,k.useId)();return j[7]!==l.children||j[8]!==l.disabled?(d=l.children.map((a,b)=>(0,g.jsx)(cR,{disabled:!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),j[7]=l.children,j[8]=l.disabled,j[9]=d):d=j[9],j[10]!==d?(e=(0,g.jsx)(i.Menu,{children:d}),j[10]=d,j[11]=e):e=j[11],j[12]!==c||j[13]!==q||j[14]!==e?(f=(0,g.jsx)(r.MenuButton,{button:c,id:q,menu:e}),j[12]=c,j[13]=q,j[14]=e,j[15]=f):f=j[15],f}let da=(0,aI.styled)(i.Card).withConfig({displayName:"Root",componentId:"sc-9fi7st-0"})`transition:opacity 200ms;position:relative;z-index:1;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);opacity:0;&:not([hidden]){display:flex;}&:not([data-collapsed]){overflow:auto;}&[data-mounted]{opacity:1;}&[data-resizing]{pointer-events:none;}`,db=[];function dc(a){let b,c,d,e,f,i,m,n,o,p,q,r,s,t,u,v,w,x=(0,h.c)(41);x[0]!==a?({children:b,minWidth:c,onCollapse:d,onExpand:e,...f}=a,x[0]=a,x[1]=b,x[2]=c,x[3]=d,x[4]=e,x[5]=f):(b=x[1],c=x[2],d=x[3],e=x[4],f=x[5]);let[y]=(0,k.useState)(dd),[z,A]=(0,k.useState)(null),B=(0,j.useElementRect)(z)?.width||0,C=void 0!==B&&c?B<c:void 0;x[6]===Symbol.for("react.memo_cache_sentinel")?(i={expandedElement:null,panes:[],resizing:!1},x[6]=i):i=x[6];let[D,E]=(0,k.useState)(i);x[7]!==y||x[8]!==z?(m=()=>y.setRootElement(z),n=[y,z],x[7]=y,x[8]=z,x[9]=m,x[10]=n):(m=x[9],n=x[10]),(0,k.useEffect)(m,n),x[11]!==y||x[12]!==B?(o=()=>y.setRootWidth(B),p=[y,B],x[11]=y,x[12]=B,x[13]=o,x[14]=p):(o=x[13],p=x[14]),(0,k.useEffect)(o,p),x[15]!==y?(q=()=>y.subscribe(E),r=[y],x[15]=y,x[16]=q,x[17]=r):(q=x[16],r=x[17]),(0,k.useEffect)(q,r),x[18]!==C||x[19]!==d||x[20]!==e?(s=()=>{void 0!==C&&(C&&d&&d(),!C&&e&&e())},t=[C,d,e],x[18]=C,x[19]=d,x[20]=e,x[21]=s,x[22]=t):(s=x[21],t=x[22]),(0,k.useEffect)(s,t),x[23]!==C||x[24]!==y.collapse||x[25]!==y.expand||x[26]!==y.mount||x[27]!==y.resize||x[28]!==D.expandedElement||x[29]!==D.panes||x[30]!==D.resizing?(u={collapse:y.collapse,collapsed:C,expand:y.expand,expandedElement:D.expandedElement,mount:y.mount,panes:D.panes,resize:y.resize,resizing:D.resizing},x[23]=C,x[24]=y.collapse,x[25]=y.expand,x[26]=y.mount,x[27]=y.resize,x[28]=D.expandedElement,x[29]=D.panes,x[30]=D.resizing,x[31]=u):u=x[31];let F=u,G=C?"":void 0,H=D.resizing?"":void 0,I=B?"":void 0;return x[32]!==b||x[33]!==f||x[34]!==G||x[35]!==H||x[36]!==I?(v=(0,g.jsx)(da,{"data-ui":"PaneLayout",...f,"data-collapsed":G,"data-resizing":H,"data-mounted":I,ref:A,children:b}),x[32]=b,x[33]=f,x[34]=G,x[35]=H,x[36]=I,x[37]=v):v=x[37],x[38]!==F||x[39]!==v?(w=(0,g.jsx)(l.PaneLayoutContext.Provider,{value:F,children:v}),x[38]=F,x[39]=v,x[40]=w):w=x[40],w}function dd(){return function(){let a=[],b=[],c=new WeakMap,d=new Set,e={},f=null,g=0,h=null,i=null,j=new Map,k=!1;function l(a){d.delete(a),h=a,m()}return{collapse:function(a){d.add(a),h===a&&(h=null),m()},expand:l,maximize:function(a){i=a,m()},mount:function(a,d){return c.set(a,{...d,original:d}),b.push(a),f&&function(a,b){let c=new WeakMap;for(let d of b)c.set(d,function(a,b){let c=[],d=b;for(;d!==a;){let b=d.parentElement;if(!b)break;let e=Array.from(b.childNodes).indexOf(d);if(c.unshift(e),b===a)break;d=b}return c}(a,d));b.sort((a,b)=>{let d=c.get(a)||db,e=c.get(b)||db,f=Math.max(d.length,e.length);for(let a=0;a<f;a+=1){let b=d[a]||-1,c=e[a]||-1;if(b!==c)return b-c}return 0})}(f,b),l(a),()=>{let d=b.indexOf(a);d>-1&&b.splice(d,1),c.delete(a),i===a&&(i=null),m()}},resize:function(a,d,f){let g=b.indexOf(d),h=c.get(d);if(!h)return;let i=b[g+1],l=c.get(i);if(l){if("start"===a&&(k=!0,e.left={element:d,flex:h.flex||1,width:d.offsetWidth},e.right={element:i,flex:l.flex||1,width:i.offsetWidth},m()),"move"===a&&e.left&&e.right){let a,b,c,g,k,n,o,p,q,r,s,t;j=new Map;let{leftW:u,rightW:v,leftFlex:w,rightFlex:x}=(a={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},b=h.minWidth??204,c=l.minWidth??204,g=Math.min(h.maxWidth||1/0,a.width-c),k=Math.min(l.maxWidth||1/0,a.width-b),n=b-e.left.width,n<(o=e.right.width-k)&&(n=o),p=e.right.width-c,p>(q=g-e.left.width)&&(p=q),r=Math.min(Math.max(f,n),p),s=e.left.width+r,t=e.right.width-r,{leftFlex:s/a.width*a.flex,leftW:s,rightFlex:t/a.width*a.flex,rightW:t});j.set(d,{flex:w,width:u}),j.set(i,{flex:x,width:v}),m()}if("end"===a){k=!1;let a=j.get(d),b=j.get(i);c.set(d,{...h,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:a?.flex??h.flex}),c.set(i,{...l,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:b?.flex??l.flex}),j=new Map,delete e.left,delete e.right,m()}}},setRootElement:function(a){f=a},setRootWidth:function(a){g=a,m()},subscribe:function(b){return a.push(b),()=>{let c=a.push(b);c>-1&&a.splice(c,1)}}};function m(){if(!g)return;let e=[];for(let a of b)a!==h&&e.unshift(a);h&&e.unshift(h);let f=new WeakMap,l=e.length,m=e[0],n=g-(l-1)*51;for(let a of e){let b=c.get(a);if(!b)continue;let e=b.currentMinWidth||b.minWidth||204,g=a===m,h=d.has(a),k=e>n,l=!g&&(h||k),o=j.get(a);f.set(a,{element:a,collapsed:l,currentMinWidth:o?.width??b.currentMinWidth,currentMaxWidth:o?.width??b.currentMaxWidth,flex:o?.flex??b.flex??1,maximized:a===i}),l?n-=51:n-=e-51}let o=[];for(let a of b){let b=f.get(a);b&&o.push(b)}for(let c of a)c({expandedElement:h||b[b.length-1]||null,panes:o,resizing:k})}}()}function de(a){let b,c,d,e=(0,h.c)(12),{children:f,currentMinWidth:j,flex:k,minWidth:l,paneKey:m,title:n,tone:o}=a,p=void 0===n?"Error":n,q=void 0===o?"critical":o;return e[0]!==p?(b=(0,g.jsx)(c4,{title:p}),e[0]=p,e[1]=b):b=e[1],e[2]!==f?(c=(0,g.jsx)(cO,{overflow:"auto",children:(0,g.jsx)(i.Box,{paddingX:4,paddingY:5,children:f})}),e[2]=f,e[3]=c):c=e[3],e[4]!==j||e[5]!==k||e[6]!==l||e[7]!==m||e[8]!==b||e[9]!==c||e[10]!==q?(d=(0,g.jsxs)(cL,{currentMinWidth:j,flex:k,id:m,minWidth:l,tone:q,children:[b,c]}),e[4]=j,e[5]=k,e[6]=l,e[7]=m,e[8]=b,e[9]=c,e[10]=q,e[11]=d):d=e[11],d}function df(a){let b,c,d,e=(0,h.c)(6),{children:f,ms:i}=a,j=void 0===i?0:i,[l,m]=(0,k.useState)(j<=0);if(e[0]!==j?(b=()=>{if(j<=0)return;let a=setTimeout(()=>m(!0),j);return()=>{clearTimeout(a)}},c=[j],e[0]=j,e[1]=b,e[2]=c):(b=e[1],c=e[2]),(0,k.useEffect)(b,c),!l||!f){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(g.Fragment,{}),e[3]=a):a=e[3],a}return e[4]!==f?(d="function"==typeof f?f():f,e[4]=f,e[5]=d):d=e[5],d}function dg(a){let b=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(p.isDev){let c=["Check console for errors?","Is your observable/promise resolving?",a.length>0?`Structure path: ${a.join(" ➝ ")}`:""];b.push({ms:1e4,message:c.join(`
`)})}let c=(0,aL.of)(null);return(0,aL.merge)(...b.map(a=>c.pipe((0,aW.mapTo)("messageKey"in a?{messageKey:a.messageKey}:{message:a.message}),(0,aW.delay)(a.ms))))}let dh=(0,aI.styled)(i.Flex).withConfig({displayName:"Content",componentId:"sc-1viiodb-0"})`opacity:0;transition:opacity 200ms;&[data-mounted]{opacity:1;}`,di=(0,k.memo)(a=>{let b,c,d,e,f,i,l,m,n,o,q=(0,h.c)(28),{delay:r,flex:s,message:t,minWidth:u,paneKey:v,path:w,selected:x,title:y,tone:z}=a,A=void 0===r?300:r,B=void 0===t?dg:t,{t:C}=(0,p.useTranslation)(F);a:{if("function"==typeof B){let a;q[0]!==B||q[1]!==w?(a=B(w?w.split(";"):[]),q[0]=B,q[1]=w,q[2]=a):a=q[2],b=a;break a}b=B}let D=b;q[3]!==D||q[4]!==C?(c=()=>"string"==typeof D?D:C("panes.resolving.default-message"),q[3]=D,q[4]=C,q[5]=c):c=q[5];let[E,G]=(0,k.useState)(c);q[6]!==D||q[7]!==C?(d=()=>{if("object"!=typeof D||"function"!=typeof D.subscribe)return;let a=D.subscribe(a=>{G("messageKey"in a?C(a.messageKey):a.message)});return()=>a.unsubscribe()},e=[D,C],q[6]=D,q[7]=C,q[8]=d,q[9]=e):(d=q[8],e=q[9]),(0,k.useEffect)(d,e);let[H,I]=(0,k.useState)(null),[J,K]=(0,k.useState)(!1);q[10]!==H?(f=()=>{if(H)return(0,j._raf2)(()=>K(!0))},i=[H],q[10]=H,q[11]=f,q[12]=i):(f=q[11],i=q[12]),(0,k.useEffect)(f,i);let L=J?"":void 0,M=y||E;q[13]!==M?(l=(0,g.jsx)(p.LoadingBlock,{showText:!0,title:M}),q[13]=M,q[14]=l):l=q[14],q[15]!==l||q[16]!==L?(m=(0,g.jsx)(dh,{align:"center","data-mounted":L,direction:"column",height:"fill",justify:"center",ref:I,children:l}),q[15]=l,q[16]=L,q[17]=m):m=q[17];let N=m;return q[18]!==N||q[19]!==A?(n=(0,g.jsx)(cO,{children:N}),q[18]=N,q[19]=A,q[20]=n):n=q[20],q[21]!==s||q[22]!==u||q[23]!==v||q[24]!==x||q[25]!==n||q[26]!==z?(o=(0,g.jsx)(cL,{flex:s,id:v,minWidth:u,selected:x,tone:z,children:n}),q[21]=s,q[22]=u,q[23]=v,q[24]=x,q[25]=n,q[26]=z,q[27]=o):o=q[27],o});function dj(){let a=(0,k.useContext)(l.DocumentPaneContext);if(!a)throw Error("DocumentPane: missing context value");return a}function dk(a){let b,c,d=(0,h.c)(8),{children:e,documentId:f,documentType:i}=a;return d[0]!==e||d[1]!==f||d[2]!==i?(b=(0,g.jsx)(dl,{documentId:f,documentType:i,children:e}),d[0]=e,d[1]=f,d[2]=i,d[3]=b):b=d[3],d[4]!==f||d[5]!==i||d[6]!==b?(c=(0,g.jsx)(p.CommentsEnabledProvider,{documentId:f,documentType:i,children:b}),d[4]=f,d[5]=i,d[6]=b,d[7]=c):c=d[7],c}function dl(a){let b,c,d,e,f,i,j=(0,h.c)(28),{children:l,documentId:m,documentType:n}=a,{enabled:o}=(0,p.useCommentsEnabled)(),{connectionState:q,onPathOpen:r,inspector:t,openInspector:u}=dj(),{selectedReleaseId:v}=(0,p.usePerspective)(),{params:w,setParams:x}=eb(),{resolveIntentLink:y}=(0,s.useRouter)(),z=w?.comment,A=w?.scheduledDraft,B=(0,k.useRef)(w);j[0]!==w?(b=()=>{B.current=w},c=[w],j[0]=w,j[1]=b,j[2]=c):(b=j[1],c=j[2]),(0,k.useLayoutEffect)(b,c),j[3]!==m||j[4]!==n||j[5]!==y||j[6]!==A||j[7]!==v?(d=a=>{let b=v&&!A?[["perspective",v]]:[],c=y("edit",{id:m,type:n,inspect:p.COMMENTS_INSPECTOR_NAME,comment:a,...A?{scheduledDraft:A}:{}},b);return`${window.location.origin}${c}`},j[3]=m,j[4]=n,j[5]=y,j[6]=A,j[7]=v,j[8]=d):d=j[8];let C=d;j[9]!==x?(e=()=>{x({...B.current,comment:void 0})},j[9]=x,j[10]=e):e=j[10];let D=e;j[11]!==t?.name||j[12]!==u?(f=()=>{t?.name!==p.COMMENTS_INSPECTOR_NAME&&u(p.COMMENTS_INSPECTOR_NAME)},j[11]=t?.name,j[12]=u,j[13]=f):f=j[13];let E=f;if(!o){let a;return j[14]!==l?(a=(0,g.jsx)(g.Fragment,{children:l}),j[14]=l,j[15]=a):a=j[15],a}let F=t?.name===p.COMMENTS_INSPECTOR_NAME,G="connecting"===q;return j[16]!==l||j[17]!==m||j[18]!==n||j[19]!==C||j[20]!==D||j[21]!==E||j[22]!==r||j[23]!==z||j[24]!==v||j[25]!==F||j[26]!==G?(i=(0,g.jsx)(p.CommentsProvider,{documentId:m,documentType:n,getCommentLink:C,isCommentsOpen:F,isConnecting:G,onClearSelectedComment:D,onCommentsOpen:E,onPathOpen:r,selectedCommentId:z,sortOrder:"desc",type:"field",releaseId:v,children:l}),j[16]=l,j[17]=m,j[18]=n,j[19]=C,j[20]=D,j[21]=E,j[22]=r,j[23]=z,j[24]=v,j[25]=F,j[26]=G,j[27]=i):i=j[27],i}function dm(a){let b,c,d,e,f,i,j=(0,h.c)(20),{children:l}=a,{data:m}=(0,p.useActiveReleases)(),{actions:n,editState:o,isInitialValueLoading:q,revisionId:r}=dj(),s=(0,k.useRef)(null);if(j[0]!==m||j[1]!==o?.release){let a;j[3]!==o?.release?(a=a=>a===o?.release,j[3]=o?.release,j[4]=a):a=j[4],b=m.map(dn).find(a),j[0]=m,j[1]=o?.release,j[2]=b}else b=j[2];let t=b;j[5]!==o||j[6]!==q||j[7]!==t||j[8]!==r?(c=o?{...o,release:t,revision:r||void 0,initialValueResolved:!q}:null,j[5]=o,j[6]=q,j[7]=t,j[8]=r,j[9]=c):c=j[9];let u=c;if(!u)return null;j[10]===Symbol.for("react.memo_cache_sentinel")?(d=()=>s.current?.(),j[10]=d):d=j[10],j[11]!==u?(e={...u,onComplete:d},j[11]=u,j[12]=e):e=j[12];let v=n||p.EMPTY_ARRAY;return j[13]!==u||j[14]!==l?(f=a=>{let{states:b}=a;return(0,g.jsx)(dq,{states:b,actionProps:u,children:l})},j[13]=u,j[14]=l,j[15]=f):f=j[15],j[16]!==e||j[17]!==v||j[18]!==f?(i=(0,g.jsx)(p.GetHookCollectionState,{args:e,hooks:v,resetRef:s,children:f}),j[16]=e,j[17]=v,j[18]=f,j[19]=i):i=j[19],i}function dn(a){return(0,p.getReleaseIdFromReleaseDocumentId)(a._id)}di.displayName="Memo(LoadingPane)";let dp=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function dq(a){let b,c,d,e=(0,h.c)(9),{states:f,children:i,actionProps:j}=a,{t:k}=(0,p.useTranslation)(F);e[0]!==j?(b=(0,p.getDocumentIdForCanvasLink)(j),e[0]=j,e[1]=b):b=e[1];let{isLinked:m}=(0,p.useCanvasCompanionDoc)(b);return e[2]!==m||e[3]!==f||e[4]!==k?(c=m?f.map(a=>a.action&&dp.includes(a.action)?a:{...a,disabled:!0,title:k("action.disabled-by-canvas.tooltip")}):f,e[2]=m,e[3]=f,e[4]=k,e[5]=c):c=e[5],e[6]!==i||e[7]!==c?(d=(0,g.jsx)(l.DocumentActionsStateContext.Provider,{value:c,children:i}),e[6]=i,e[7]=c,e[8]=d):d=e[8],d}function dr(){let a=(0,k.useContext)(l.StructureToolContext);if(!a)throw Error("StructureTool: missing context value");return a}let ds={},dt="inspect:",du=[{id:"inspectors"},{id:"links"}],dv="sanity/structure/history";function dw(a){let b,c,d,e,f,i,j,l,m,n=(0,h.c)(22),{documentId:o,documentType:q,inspectors:r,onMenuItems:s}=a,t=r.length;n[0]!==t?(b=()=>Array.from(Array(t)),n[0]=t,n[1]=b):b=n[1];let[u,v]=(0,k.useState)(b);n[2]!==t||n[3]!==u?(c=()=>{if(u.length!==t){let a=Array.from(Array(t));for(let b=0;b<t;b++)a[b]=u[b];v(a)}},d=[t,u],n[2]=t,n[3]=u,n[4]=c,n[5]=d):(c=n[4],d=n[5]),(0,k.useEffect)(c,d),n[6]===Symbol.for("react.memo_cache_sentinel")?(e=(a,b)=>{v(c=>{let d=[...c];return d[a]=b,d})},n[6]=e):e=n[6];let w=e;if(n[7]!==u||n[8]!==s?(f=()=>{s(u.filter(Boolean))},i=[u,s],n[7]=u,n[8]=s,n[9]=f,n[10]=i):(f=n[9],i=n[10]),(0,k.useEffect)(f,i),n[11]!==o||n[12]!==q||n[13]!==r){let a;n[15]!==o||n[16]!==q?(a=(a,b)=>a.useMenuItem?[function({documentId:a,documentType:b,index:c,setMenuItem:d,useMenuItem:e}){return(0,k.memo)(function(){let f,g,i,j=(0,h.c)(4);j[0]===Symbol.for("react.memo_cache_sentinel")?(f={documentId:a,documentType:b},j[0]=f):f=j[0];let l=e(f),m=(0,p.useUnique)(l);return j[1]!==m?(g=()=>{d(c,m)},i=[m],j[1]=m,j[2]=g,j[3]=i):(g=j[2],i=j[3]),(0,k.useEffect)(g,i),null})}({documentId:o,documentType:q,index:b,setMenuItem:w,useMenuItem:a.useMenuItem}),a.name]:[dy,""],n[15]=o,n[16]=q,n[17]=a):a=n[17],j=r.map(a),n[11]=o,n[12]=q,n[13]=r,n[14]=j}else j=n[14];let x=j;return n[18]!==x?(l=x.map(dx),n[18]=x,n[19]=l):l=n[19],n[20]!==l?(m=(0,g.jsx)(g.Fragment,{children:l}),n[20]=l,n[21]=m):m=n[21],m}function dx(a){let[b,c]=a;return c&&(0,g.jsx)(b,{},c)}function dy(){return null}function dz(){let a,b,c,d,e=(0,h.c)(22),{connectionState:f,schemaType:g,editState:i,isDeleted:j,lastRevisionDocument:k}=dj(),{selectedPerspectiveName:l}=(0,p.usePerspective)(),{t:m}=(0,p.useTranslation)(F);a:{if(j){a=k;break a}if(l&&(0,p.isPublishedPerspective)(l)){a=i?.published;break a}a=i?.version||i?.draft||i?.published}let n=a,o=!!n;b:{if(j&&k&&g)try{let a;e[0]!==k||e[1]!==g?(a=(0,p.prepareForPreview)(k,g),e[0]=k,e[1]=g,e[2]=a):a=e[2],b=a;break b}catch(a){console.warn("Failed to prepare preview for deleted document:",a),b=null;break b}b=null}let q=b,r=o&&!j;e[3]!==n||e[4]!==g||e[5]!==r?(c={enabled:r,schemaType:g,value:n},e[3]=n,e[4]=g,e[5]=r,e[6]=c):c=e[6];let{error:s,value:t}=(0,p.useValuePreview)(c);if("connecting"===f&&!o){let a;return e[7]===Symbol.for("react.memo_cache_sentinel")?(a={error:void 0,title:void 0},e[7]=a):a=e[7],a}if(j&&q){let a;return e[8]!==q.title?(a={error:void 0,title:q.title},e[8]=q.title,e[9]=a):a=e[9],a}if(!t&&!j){let a,b,c=g?.title||g?.name;return e[10]!==m||e[11]!==c?(a=m("panes.document-header-title.new.text",{schemaType:c}),e[10]=m,e[11]=c,e[12]=a):a=e[12],e[13]!==a?(b={error:void 0,title:a},e[13]=a,e[14]=b):b=e[14],b}if(s){let a,b;return e[15]!==s.message||e[16]!==m?(a=m("panes.document-list-pane.error.text",{error:s.message}),e[15]=s.message,e[16]=m,e[17]=a):a=e[17],e[18]!==a?(b={error:a,title:void 0},e[18]=a,e[19]=b):b=e[19],b}let u=t?.title;return e[20]!==u?(d={error:void 0,title:u},e[20]=u,e[21]=d):d=e[21],d}dw.displayName="DocumentInspectorMenuItemsResolver";let dA=["patch","commit"],dB=(0,k.memo)(function(){let a,b,c,d,e,f=(0,h.c)(13),{push:i}=(0,j.useToast)(),{documentId:l,documentType:m,value:n}=dj(),o=dz(),q=o.error,r=(0,p.useDocumentOperationEvent)(l,m),s=(0,k.useRef)(r),t=eb(),{t:u}=(0,p.useTranslation)(F),{handleOpenDialog:v}=(0,p.useDocumentLimitsUpsellContext)();a:{if(!o.title&&!q&&!dA.includes(r?.op)&&"string"==typeof n.title&&r?.type==="success"){a=n.title;break a}a=o.title}let w=a;f[0]!==u||f[1]!==w?(b=w||u("panes.document-operation-results.operation-undefined-title"),f[0]=u,f[1]=w,f[2]=b):b=f[2];let x=b;f[3]!==x?(c=x.length>25?`${x.slice(0,25)}...`:x,f[3]=x,f[4]=c):c=f[4];let y=c;return f[5]!==y||f[6]!==r||f[7]!==v||f[8]!==t||f[9]!==i||f[10]!==u?(d=()=>{let a;if(r&&r!==s.current){if("error"===r.type){if((0,p.isDocumentLimitError)(r.error))return void v("document_action");i({closable:!0,duration:3e4,status:"error",title:u("panes.document-operation-results.operation-error",{context:r.op}),description:(0,g.jsxs)("details",{children:[(0,g.jsx)("summary",{children:u("panes.document-operation-results.error.summary.title")}),r.error.message]})})}return"success"!==r.type||dA.includes(r.op)||i({closable:!0,status:"success",title:(0,g.jsx)(p.Translate,{context:r.op,i18nKey:"panes.document-operation-results.operation-success",t:u,values:{op:r.op,title:y},components:{Strong:"strong"}})}),"success"===r.type&&"delete"===r.op&&(a=setTimeout(()=>t.closeCurrentAndAfter(),0)),s.current=r,()=>clearTimeout(a)}},e=[r,t,i,u,y,v],f[5]=y,f[6]=r,f[7]=v,f[8]=t,f[9]=i,f[10]=u,f[11]=d,f[12]=e):(d=f[11],e=f[12]),(0,k.useEffect)(d,e),null}),dC=(0,aI.styled)(i.Card).withConfig({displayName:"Root",componentId:"sc-1anmotz-0"})({position:"relative",zIndex:"1",lineHeight:"0"});function dD(a){let b,c,d,e,f,j,k,l,m,n,o,q,s=(0,h.c)(25);s[0]!==a?({as:d,children:b,closeButtonLabel:c,onClose:e,title:j,...f}=a,s[0]=a,s[1]=b,s[2]=c,s[3]=d,s[4]=e,s[5]=f,s[6]=j):(b=s[1],c=s[2],d=s[3],e=s[4],f=s[5],j=s[6]);let{t}=(0,p.useTranslation)(F);return s[7]!==j?(k=(0,g.jsx)(i.Box,{flex:1,padding:3,children:(0,g.jsx)(i.Text,{as:"h1",size:1,weight:"medium",children:j})}),s[7]=j,s[8]=k):k=s[8],s[9]!==t?(l=t("document-inspector.close-button.tooltip"),s[9]=t,s[10]=l):l=s[10],s[11]!==l?(m={content:l},s[11]=l,s[12]=m):m=s[12],s[13]!==c||s[14]!==e||s[15]!==m?(n=(0,g.jsx)(i.Box,{flex:"none",padding:1,children:(0,g.jsx)(r.Button,{"aria-label":c,icon:u.CloseIcon,mode:"bleed",onClick:e,tooltipProps:m})}),s[13]=c,s[14]=e,s[15]=m,s[16]=n):n=s[16],s[17]!==k||s[18]!==n?(o=(0,g.jsxs)(i.Flex,{padding:2,children:[k,n]}),s[17]=k,s[18]=n,s[19]=o):o=s[19],s[20]!==b||s[21]!==d||s[22]!==f||s[23]!==o?(q=(0,g.jsxs)(dC,{...f,as:d,children:[o,b]}),s[20]=b,s[21]=d,s[22]=f,s[23]=o,s[24]=q):q=s[24],q}function dE(a){let b,c,d,e=(0,h.c)(14),{documentId:f,documentType:j,flex:k}=a,{collapsed:l}=cN(),{closeInspector:m,inspector:n}=dj(),{features:o}=dr();e[0]!==m||e[1]!==n?(b=()=>{n&&m(n.name)},e[0]=m,e[1]=n,e[2]=b):b=e[2];let q=b;if(l||!n)return null;let r=n.component;e[3]!==r||e[4]!==f||e[5]!==j||e[6]!==q?(c=(0,g.jsx)(r,{onClose:q,documentId:f,documentType:j}),e[3]=r,e[4]=f,e[5]=j,e[6]=q,e[7]=c):c=e[7];let s=c;if(o.resizablePanes){let a;return e[8]!==s||e[9]!==k?(a=(0,g.jsx)(p.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:k,resizerPosition:"left",maxWidth:540,minWidth:320,children:s}),e[8]=s,e[9]=k,e[10]=a):a=e[10],a}return e[11]!==s||e[12]!==k?(d=(0,g.jsx)(i.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:k,children:s}),e[11]=s,e[12]=k,e[13]=d):d=e[13],d}function dF(a,b,c){let d,e,f,g,i=(0,h.c)(16),j=(0,p.useKeyValueStore)();i[0]!==b||i[1]!==a?(d=["studio.structure-tool",a,b].filter(Boolean),i[0]=b,i[1]=a,i[2]=d):d=i[2];let k=d.join(".");if(i[3]!==c||i[4]!==j||i[5]!==k){let a;i[7]!==c?(a=a=>null===a?c:a,i[7]=c,i[8]=a):a=i[8],e=j.getKey(k).pipe((0,aW.map)(a)),i[3]=c,i[4]=j,i[5]=k,i[6]=e}else e=i[6];let l=(0,aK.useObservable)(e,c);i[9]!==j||i[10]!==k||i[11]!==l?(f=async a=>{a!==l&&await j.setKey(k,a)},i[9]=j,i[10]=k,i[11]=l,i[12]=f):f=i[12];let m=f;return i[13]!==m||i[14]!==l?(g=[l,m],i[13]=m,i[14]=l,i[15]=g):g=i[15],g}let dG={id:"parsed",title:"document-inspector.view-mode.parsed"},dH={id:"raw",title:"document-inspector.view-mode.raw-json"},dI=[dG,dH],dJ=new bq.default({maxSize:1e3});function dK(a){let{path:b}=a,c=dJ.get(b);void 0!==c&&dJ.set(b,!c)}function dL(a){let b=window.getSelection();if(b){let c=document.createRange();b.removeAllRanges(),c.selectNodeContents(a),b.addRange(c)}}function dM(a){dL(a.target)}function dN(a){65===a.keyCode&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),dL(a.currentTarget))}let dO=aI.styled.div.withConfig({displayName:"JSONInspectorWrapper",componentId:"sc-1nlr6yd-0"})(({theme:a})=>{let{color:b,fonts:c,space:d}=a.sanity;return aI.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${c.code.family};
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,i.rem)(d[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,i.rem)(d[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,i.rem)(d[4])} + 3px);
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,i.rem)(d[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${b.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${b.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,i.rem)(d[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${b.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${b.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${b.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function dP(a){let b,c,d,e=(0,h.c)(8),{onChange:f,query:j}=a;e[0]!==f?(b=a=>f(a.target.value),e[0]=f,e[1]=b):b=e[1];let k=b,{t:l}=(0,p.useTranslation)(F);e[2]!==l?(c=l("document-inspector.search.placeholder"),e[2]=l,e[3]=c):c=e[3];let m=j||"";return e[4]!==k||e[5]!==c||e[6]!==m?(d=(0,g.jsx)(i.TextInput,{icon:u.SearchIcon,onChange:k,placeholder:c,radius:2,value:m}),e[4]=k,e[5]=c,e[6]=m,e[7]=d):d=e[7],d}function dQ(a){let b,c,d,e,f,k,l,m,n,o,q,s,t,u,v,w,x=(0,h.c)(49),{value:y}=a,{onInspectClose:z,paneKey:A}=dj(),B=`${A}_inspect_`,[C,D]=dF("inspect-view-mode",null,"parsed");x[0]!==C?(b=dI.find(a=>a.id===C),x[0]=C,x[1]=b):b=x[1];let E=b;x[2]!==D?(c=async()=>{await D(dG.id)},x[2]=D,x[3]=c):c=x[3];let G=c;x[4]!==D?(d=async()=>{await D(dH.id)},x[4]=D,x[5]=d):d=x[5];let H=d,{t:I}=(0,p.useTranslation)(F),J=`${B}dialog`;x[6]!==I||x[7]!==y?(e=(0,p.isRecord)(y)&&(0,p.isString)(y._id)&&(0,p.isString)(y._type)?(0,g.jsx)(p.Translate,{t:I,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,g.jsx)("em",{children:(0,g.jsx)(hq,{document:y})})}}):(0,g.jsx)("em",{children:I("document-inspector.dialog.title-no-value")}),x[6]=I,x[7]=y,x[8]=e):e=x[8],x[9]===Symbol.for("react.memo_cache_sentinel")?(f={position:"sticky",bottom:0,zIndex:3},x[9]=f):f=x[9];let K=`${B}tabpanel`,L=`${B}tab-${dG.id}`;x[10]!==I?(k=I(dG.title),x[10]=I,x[11]=k):k=x[11];let M=E===dG;x[12]!==G||x[13]!==K||x[14]!==L||x[15]!==k||x[16]!==M?(l=(0,g.jsx)(r.Tab,{"aria-controls":K,id:L,label:k,onClick:G,selected:M}),x[12]=G,x[13]=K,x[14]=L,x[15]=k,x[16]=M,x[17]=l):l=x[17];let N=`${B}tabpanel`,O=`${B}tab-${dH.id}`;x[18]!==I?(m=I(dH.title),x[18]=I,x[19]=m):m=x[19];let P=E===dH;x[20]!==H||x[21]!==N||x[22]!==O||x[23]!==m||x[24]!==P?(n=(0,g.jsx)(r.Tab,{"aria-controls":N,id:O,label:m,onClick:H,selected:P}),x[20]=H,x[21]=N,x[22]=O,x[23]=m,x[24]=P,x[25]=n):n=x[25],x[26]!==l||x[27]!==n?(o=(0,g.jsx)(i.Card,{padding:3,paddingTop:0,shadow:1,style:f,children:(0,g.jsxs)(i.TabList,{space:1,children:[l,n]})}),x[26]=l,x[27]=n,x[28]=o):o=x[28];let Q=`${B}tab-${C}`,R=`${B}tabpanel`;return x[29]===Symbol.for("react.memo_cache_sentinel")?(q={outline:"none"},x[29]=q):q=x[29],x[30]!==y||x[31]!==E?(s=E===dG&&(0,g.jsx)(dO,{children:(0,g.jsx)(bp,{data:y,isExpanded:function a(b,c){let d=dJ.get(b);return void 0===d?(dJ.set(b,Array.isArray(c)||(0,p.isRecord)(c)),a(b,c)):d},onClick:dK,search:dP,filterOptions:{ignoreCase:!0}})}),x[30]=y,x[31]=E,x[32]=s):s=x[32],x[33]!==y||x[34]!==E?(t=E===dH&&(0,g.jsx)(i.Code,{language:"json",tabIndex:0,onKeyDown:dN,onDoubleClick:dM,size:1,children:JSON.stringify(y,null,2)}),x[33]=y,x[34]=E,x[35]=t):t=x[35],x[36]!==Q||x[37]!==R||x[38]!==s||x[39]!==t?(u=(0,g.jsxs)(j.TabPanel,{"aria-labelledby":Q,flex:1,id:R,overflow:"auto",padding:4,style:q,children:[s,t]}),x[36]=Q,x[37]=R,x[38]=s,x[39]=t,x[40]=u):u=x[40],x[41]!==o||x[42]!==u?(v=(0,g.jsxs)(i.Flex,{direction:"column",height:"fill",children:[o,u]}),x[41]=o,x[42]=u,x[43]=v):v=x[43],x[44]!==z||x[45]!==v||x[46]!==J||x[47]!==e?(w=(0,g.jsx)(r.Dialog,{bodyHeight:"fill",id:J,header:e,onClose:z,onClickOutside:z,padding:!1,width:2,children:v}),x[44]=z,x[45]=v,x[46]=J,x[47]=e,x[48]=w):w=x[48],w}function dR(a){let b,c,d,e,f,j,k,l,m,n,o,p=(0,h.c)(22);p[0]!==a?({action:c,content:d,icon:b,tone:f,paddingY:j,...e}=a,p[0]=a,p[1]=b,p[2]=c,p[3]=d,p[4]=e,p[5]=f,p[6]=j):(b=p[1],c=p[2],d=p[3],e=p[4],f=p[5],j=p[6]);let q=void 0===f?"transparent":f,s=void 0===j?2:j;return p[7]!==b?(k=b&&(0,g.jsx)(i.Text,{size:0,children:(0,g.jsx)(b,{})}),p[7]=b,p[8]=k):k=p[8],p[9]!==d?(l=(0,g.jsx)(i.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:d}),p[9]=d,p[10]=l):l=p[10],p[11]!==c?(m=c&&(0,g.jsx)(r.Button,{...c,mode:c.mode||"ghost",tone:c.tone||"default"}),p[11]=c,p[12]=m):m=p[12],p[13]!==k||p[14]!==l||p[15]!==m?(n=(0,g.jsxs)(i.Flex,{align:"center",gap:3,paddingX:2,children:[k,l,m]}),p[13]=k,p[14]=l,p[15]=m,p[16]=n):n=p[16],p[17]!==s||p[18]!==e||p[19]!==n||p[20]!==q?(o=(0,g.jsx)(i.Box,{padding:1,children:(0,g.jsx)(i.Card,{radius:3,paddingX:2,paddingY:s,tone:q,...e,children:n})}),p[17]=s,p[18]=e,p[19]=n,p[20]=q,p[21]=o):o=p[21],o}function dS(){let a=(0,h.c)(3),{isDeleted:b,isDeleting:c,ready:d}=dj(),{selectedPerspective:e}=(0,p.usePerspective)();if(!d)return null;if(!(0,p.isPublishedPerspective)(e)&&!(0,p.isDraftPerspective)(e)&&(0,p.isReleaseDocument)(e)&&"archived"===e.state){let b;return a[0]!==e?(b=(0,g.jsx)(dU,{release:e}),a[0]=e,a[1]=b):b=a[1],b}if(b&&!c){let b;return a[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsx)(dT,{}),a[2]=b):b=a[2],b}}function dT(){let a,b,c,d,e,f,j=(0,h.c)(17),{documentId:k,documentType:l}=dj(),{restore:m}=(0,p.useDocumentOperation)(k,l),{navigateIntent:n}=(0,s.useRouter)();j[0]!==k||j[1]!==l||j[2]!==n||j[3]!==m?(a=()=>{m.execute("lastRevision"),n("edit",{id:k,type:l})},j[0]=k,j[1]=l,j[2]=n,j[3]=m,j[4]=a):a=j[4];let o=a,{t:q}=(0,p.useTranslation)(F);return j[5]!==q?(b=q("banners.deleted-document-banner.restore-button.text"),j[5]=q,j[6]=b):b=j[6],j[7]!==o||j[8]!==b?(c={onClick:o,text:b},j[7]=o,j[8]=b,j[9]=c):c=j[9],j[10]!==q?(d=q("banners.deleted-document-banner.text"),j[10]=q,j[11]=d):d=j[11],j[12]!==d?(e=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:d}),j[12]=d,j[13]=e):e=j[13],j[14]!==c||j[15]!==e?(f=(0,g.jsx)(dR,{action:c,content:e,"data-testid":"deleted-document-banner",icon:u.ReadOnlyIcon}),j[14]=c,j[15]=e,j[16]=f):f=j[16],f}let dU=a=>{let b,c,d,e=(0,h.c)(8),{release:f}=a,{t:j}=(0,p.useTranslation)();return e[0]!==f.metadata?.title||e[1]!==j?(b=f.metadata?.title||j("release.placeholder-untitled-release"),e[0]=f.metadata?.title,e[1]=j,e[2]=b):b=e[2],e[3]!==b?(c={title:b},e[3]=b,e[4]=c):c=e[4],e[5]!==j||e[6]!==c?(d=(0,g.jsx)(dR,{tone:"caution",content:(0,g.jsx)(i.Text,{size:1,weight:"medium",children:(0,g.jsx)(p.Translate,{t:j,i18nKey:"banners.deleted-release-banner.text",values:c})}),"data-testid":"deleted-release-banner",icon:u.DocumentRemoveIcon}),e[5]=j,e[6]=c,e[7]=d):d=e[7],d};function dV(){let a,b,c=(0,h.c)(5),{schemaType:d}=dj(),{t:e}=(0,p.useTranslation)(F);return(0,q.isDeprecatedSchemaType)(d)?(c[0]!==e?(a=(0,g.jsx)(p.Translate,{t:e,i18nKey:"banners.deprecated-document-type-banner.text"}),c[0]=e,c[1]=a):a=c[1],c[2]!==d.deprecated.reason||c[3]!==a?(b=(0,g.jsx)(dR,{content:(0,g.jsxs)(i.Text,{size:1,weight:"medium",children:[a," ",d.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:u.ErrorOutlineIcon}),c[2]=d.deprecated.reason,c[3]=a,c[4]=b):b=c[4],b):null}let dW=(0,a$.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),dX=(0,a$.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),dY=(0,aI.styled)(i.Box).withConfig({displayName:"DialogBody",componentId:"sc-68p9pn-0"})`box-sizing:border-box;`;function dZ(a){let b,c,d,e,f,l,m,n,o,q,s,t,u,v,w,x=(0,h.c)(56),{onClose:y,onRequestSubmitted:z}=a,{t:A}=(0,p.useTranslation)(F),B=(0,aZ.useTelemetry)(),C=`request-permissions-${(0,k.useId)()}`,D=(0,p.useProjectId)();x[0]===Symbol.for("react.memo_cache_sentinel")?(b={apiVersion:"2024-09-26"},x[0]=b):b=x[0];let E=(0,p.useClient)(b),G=(0,j.useToast)(),H=(0,p.useZIndex)(),[I,J]=(0,k.useState)(!1),[K,L]=(0,k.useState)(""),[M,N]=(0,k.useState)(),[O,P]=(0,k.useState)(!1),[Q,R]=(0,k.useState)(!1);a:{let a,b="administrator";if(!D||!E){let a;x[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aL.of)(b),x[1]=a):a=x[1],c=a;break a}if(x[2]!==E.observable||x[3]!==D){let c,d;x[5]===Symbol.for("react.memo_cache_sentinel")?(c=a=>a.filter(d_).find(d$)?"editor":b,x[5]=c):c=x[5],x[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>(0,aL.of)(b),x[6]=d):d=x[6],a=E.observable.request({url:`/projects/${D}/roles`}).pipe((0,aL.map)(c),(0,aL.startWith)(b),(0,aL.catchError)(d)),x[2]=E.observable,x[3]=D,x[4]=a}else a=x[4];c=a}let S=(0,aK.useObservable)(c);x[7]!==E||x[8]!==K||x[9]!==z||x[10]!==D||x[11]!==S||x[12]!==B||x[13]!==G?(d=()=>{J(!0),E.request({url:`/access/project/${D}/requests`,method:"post",body:{note:K,requestUrl:window?.location.href,requestedRole:S,type:"role"}}).then(a=>{a&&(z&&z(),B.log(dX),G.push({title:"Edit access requested"}))}).catch(a=>{let b=a?.response?.statusCode,c=a?.response?.body?.message;429===b&&(P(!0),N(c)),409===b?(R(!0),N(c)):G.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{J(!1)})},x[7]=E,x[8]=K,x[9]=z,x[10]=D,x[11]=S,x[12]=B,x[13]=G,x[14]=d):d=x[14];let T=d,U=H.fullscreen;x[15]!==A?(e=A("request-permission-dialog.header.text"),x[15]=A,x[16]=e):e=x[16],x[17]!==A?(f=A("confirm-dialog.cancel-button.fallback-text"),x[17]=A,x[18]=f):f=x[18],x[19]!==y||x[20]!==f?(l={onClick:y,text:f},x[19]=y,x[20]=f,x[21]=l):l=x[21];let V=O||Q;return x[22]!==A?(m=A("request-permission-dialog.confirm-button.text"),x[22]=A,x[23]=m):m=x[23],x[24]!==I||x[25]!==T||x[26]!==V||x[27]!==m?(n={onClick:T,loading:I,disabled:V,text:m,tone:"primary",type:"submit"},x[24]=I,x[25]=T,x[26]=V,x[27]=m,x[28]=n):n=x[28],x[29]!==n||x[30]!==l?(o={cancelButton:l,confirmButton:n},x[29]=n,x[30]=l,x[31]=o):o=x[31],x[32]!==A?(q=A("request-permission-dialog.description.text"),x[32]=A,x[33]=q):q=x[33],x[34]!==q?(s=(0,g.jsx)(i.Text,{children:q}),x[34]=q,x[35]=s):s=x[35],x[36]!==Q||x[37]!==O||x[38]!==I||x[39]!==M||x[40]!==K||x[41]!==T||x[42]!==A?(t=O||Q?(0,g.jsx)(i.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,g.jsxs)(i.Text,{size:1,children:[O&&(0,g.jsx)(g.Fragment,{children:M??A("request-permission-dialog.warning.limit-reached.text")}),Q&&(0,g.jsx)(g.Fragment,{children:M??A("request-permission-dialog.warning.denied.text")})]})}):(0,g.jsxs)(i.Stack,{space:3,paddingBottom:0,children:[(0,g.jsx)(i.TextInput,{placeholder:A("request-permission-dialog.note-input.placeholder.text"),disabled:I,onKeyDown:a=>{"Enter"===a.key&&T()},maxLength:150,value:K,onChange:a=>{L(a.currentTarget.value)}}),(0,g.jsx)(i.Text,{align:"right",muted:!0,size:1,children:`${K.length}/150`})]}),x[36]=Q,x[37]=O,x[38]=I,x[39]=M,x[40]=K,x[41]=T,x[42]=A,x[43]=t):t=x[43],x[44]!==s||x[45]!==t?(u=(0,g.jsx)(dY,{children:(0,g.jsxs)(i.Stack,{space:4,children:[s,t]})}),x[44]=s,x[45]=t,x[46]=u):u=x[46],x[47]!==C||x[48]!==y||x[49]!==o||x[50]!==u||x[51]!==e?(v=(0,g.jsx)(r.Dialog,{width:1,id:C,header:e,footer:o,onClose:y,onClickOutside:y,children:u}),x[47]=C,x[48]=y,x[49]=o,x[50]=u,x[51]=e,x[52]=v):v=x[52],x[53]!==v||x[54]!==H.fullscreen?(w=(0,g.jsx)(j.DialogProvider,{position:"fixed",zOffset:U,children:v}),x[53]=v,x[54]=H.fullscreen,x[55]=w):w=x[55],w}function d$(a){return"editor"===a.name}function d_(a){return a?.appliesToUsers}(0,aI.styled)(i.Flex).attrs({align:"center",direction:"column",justify:"center"}).withConfig({displayName:"LoadingContainer",componentId:"sc-68p9pn-1"})`height:110px;`;let d0={loading:!0,error:!1,status:void 0},d1={loading:!1,error:!1,status:"none"},d2={loading:!1,error:!1,status:"declined"},d3={loading:!1,error:!1,status:"pending"},d4={loading:!1,error:!1,status:"expired"};function d5(a){let b,c,d,e,f,j,l,m,n=(0,h.c)(29),{requiredPermission:o}=a,q=(0,p.useCurrentUser)(),{data:r,loading:s,error:t}=(()=>{let a,b,c,d=(0,h.c)(9);d[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:"2024-07-01"},d[0]=a):a=d[0];let e=(0,p.useClient)(a),f=(0,p.useProjectId)();a:{var g,i;let a;if(!e||!f){let a;d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aL.of)(d1),d[1]=a):a=d[1],b=a;break a}d[2]!==e||d[3]!==f?(g=e,i=f,a=g.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,aW.map)(a=>{if(!a||0===a.length)return d1;let b=a.filter(a=>a.resourceId===i&&"role"===a.type),c=b.find(a=>"declined"===a.status);return c&&(0,br.isAfter)((0,bs.addWeeks)(new Date(c.createdAt),2),new Date)?d2:b.find(a=>"pending"===a.status&&(0,br.isAfter)((0,bs.addWeeks)(new Date(a.createdAt),2),new Date))?d3:b.find(a=>"pending"===a.status&&(0,bt.isBefore)((0,bs.addWeeks)(new Date(a.createdAt),2),new Date))?d4:d1}),(0,aW.catchError)(a=>(console.error("Failed to fetch access requests",a),(0,aL.of)({loading:!1,error:!0,status:void 0}))),(0,aW.startWith)(d0)),d[2]=e,d[3]=f,d[4]=a):a=d[4],b=a}let j=b,{loading:k,error:l,status:m}=(0,aK.useObservable)(j,d0);return d[5]!==l||d[6]!==k||d[7]!==m?(c={data:m,loading:k,error:l},d[5]=l,d[6]=k,d[7]=m,d[8]=c):c=d[8],c})(),[v,w]=(0,k.useState)(!1),x="pending"===r||"declined"===r||v,y=q?.roles||[],z=1===y.length&&"viewer"===y[0].name,[A,B]=(0,k.useState)(!1);n[0]===Symbol.for("react.memo_cache_sentinel")?(b={style:"short"},n[0]=b):b=n[0];let C=(0,p.useListFormat)(b),{t:D}=(0,p.useTranslation)(F),E=(0,aZ.useTelemetry)(),G=y.map(d7),H=C.formatToParts(G).map(d6);return n[1]!==H?(c={Roles:()=>(0,g.jsx)(g.Fragment,{children:H})},n[1]=H,n[2]=c):c=n[2],n[3]!==G||n[4]!==H.length?(d={count:H.length,roles:G},n[3]=G,n[4]=H.length,n[5]=d):d=n[5],n[6]!==o||n[7]!==D||n[8]!==c||n[9]!==d?(e=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:(0,g.jsx)(p.Translate,{t:D,i18nKey:"banners.permission-check-banner.missing-permission",components:c,values:d,context:o})}),n[6]=o,n[7]=D,n[8]=c,n[9]=d,n[10]=e):e=n[10],n[11]!==z||n[12]!==x||n[13]!==t||n[14]!==s||n[15]!==r||n[16]!==B||n[17]!==D||n[18]!==E?(f=z&&r&&!t&&!s?{onClick:x?void 0:()=>{B(!0),E.log(dW)},text:D(x?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:x?"default":"primary",disabled:x,mode:x?"bleed":void 0}:void 0,n[11]=z,n[12]=x,n[13]=t,n[14]=s,n[15]=r,n[16]=B,n[17]=D,n[18]=E,n[19]=f):f=n[19],n[20]!==e||n[21]!==f?(j=(0,g.jsx)(dR,{content:e,action:f,"data-testid":"permission-check-banner",icon:u.ReadOnlyIcon}),n[20]=e,n[21]=f,n[22]=j):j=n[22],n[23]!==B||n[24]!==A?(l=A&&(0,g.jsx)(dZ,{onClose:()=>B(!1),onRequestSubmitted:()=>{w(!0),B(!1)}}),n[23]=B,n[24]=A,n[25]=l):l=n[25],n[26]!==j||n[27]!==l?(m=(0,g.jsxs)(g.Fragment,{children:[j,l]}),n[26]=j,n[27]=l,n[28]=m):m=n[28],m}function d6(a){return"element"===a.type?(0,g.jsx)("code",{children:a.value},a.value):a.value}function d7(a){return a.title}let d8=(0,k.memo)(()=>{let a,b,c,d,e,f,j,k,l=(0,h.c)(32),m=(0,p.useDocumentPreviewStore)(),{selectedPerspectiveName:n}=(0,p.usePerspective)(),{params:q,groupIndex:r,routerPanesState:s,replaceCurrent:t,BackLink:v}=eb(),w=s[r]?.[0].id,x=s[r-1]?.[0],y=x?.id,z=!!x?.params?.rev;l[0]!==q?(a=q?.parentRefPath&&(0,aX.fromString)(q.parentRefPath)||null,l[0]=q,l[1]=a):a=l[1];let A=a,{t:B}=(0,p.useTranslation)(F);a:{let a,c=A?.[0];if(!y||!c||!A){let a;l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aL.of)({loading:!1}),l[2]=a):a=l[2],b=a;break a}if(l[3]!==m||l[4]!==y||l[5]!==A||l[6]!==c||l[7]!==n){let b,d,e=(0,o.getPublishedId)(y),f=(0,aX.fromString)(c),g=f.findIndex(d9);l[9]!==n?(b=(0,p.isSystemBundle)(n)?void 0:n,l[9]=n,l[10]=b):b=l[10],l[11]!==A?(d=a=>{let{draft:b,published:c,version:d}=a;return{loading:!1,result:{availability:{draft:b.availability,published:c.availability,...d?.availability?{version:d.availability}:{}},refValue:(0,aX.get)(d?.snapshot||b.snapshot||c.snapshot,A)?._ref}}},l[11]=A,l[12]=d):d=l[12],a=(0,aL.concat)((0,aL.of)({loading:!0}),m.unstable_observePathsDocumentPair(e,-1===g?f:f.slice(0,g),{version:b}).pipe((0,aW.debounceTime)(750),(0,aW.map)(d))),l[3]=m,l[4]=y,l[5]=A,l[6]=c,l[7]=n,l[8]=a}else a=l[8];b=a}let C=b;l[13]===Symbol.for("react.memo_cache_sentinel")?(c={loading:!0},l[13]=c):c=l[13];let D=(0,aK.useObservable)(C,c);l[14]!==q||l[15]!==D.loading||l[16]!==D.result||l[17]!==t?(d=()=>{D.loading||D.result?.refValue&&t({id:D.result.refValue,params:q})},l[14]=q,l[15]=D.loading,l[16]=D.result,l[17]=t,l[18]=d):d=l[18];let E=d;return y&&A&&!z&&!D.loading&&(D.result?.availability.draft.available||D.result?.availability.published.available)&&D.result?.refValue!==w?(l[19]!==v||l[20]!==E||l[21]!==D.result?.refValue||l[22]!==B?(e=D.result?.refValue?{onClick:E,icon:u.SyncIcon,text:B("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:v,icon:u.CloseIcon,text:B("banners.reference-changed-banner.reason-removed.close-button.text")},l[19]=v,l[20]=E,l[21]=D.result?.refValue,l[22]=B,l[23]=e):e=l[23],l[24]!==D.result?.refValue||l[25]!==B?(f=B(D.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),l[24]=D.result?.refValue,l[25]=B,l[26]=f):f=l[26],l[27]!==f?(j=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:f}),l[27]=f,l[28]=j):j=l[28],l[29]!==e||l[30]!==j?(k=(0,g.jsx)(dR,{action:e,"data-testid":"reference-changed-banner",content:j,icon:u.WarningOutlineIcon,tone:"caution"}),l[29]=e,l[30]=j,l[31]=k):k=l[31],k):null});function d9(a){return"object"==typeof a&&"_key"in a}function ea(a){let b,c=(0,h.c)(2),{releaseId:d,draftDocument:e}=a,{t:f}=(0,p.useTranslation)(F),{firstDocument:j}=(0,p.useScheduledDraftDocument)(d),k=e?._id?(0,o.getPublishedId)(e._id):null,l=j?._id?(0,o.getPublishedId)(j._id):null,m=e?._rev,n=j?._system?.base?.rev;return k!==l||m&&n&&m===n?null:(c[0]!==f?(b=(0,g.jsx)(dR,{tone:"caution",icon:u.WarningOutlineIcon,content:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{t:f,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),c[0]=f,c[1]=b):b=c[1],b)}function eb(){return(0,k.useContext)(l.PaneRouterContext)}function ec(){let a,b,c,d,e,f,j,k,l=(0,h.c)(24),{t:m}=(0,p.useTranslation)(F),{t:n}=(0,p.useTranslation)(),{data:o}=(0,p.useArchivedReleases)(),{params:q,setParams:r}=eb();l[0]!==q||l[1]!==r?(a=()=>{r({...q,rev:q?.historyEvent||void 0,since:void 0,historyVersion:void 0})},l[0]=q,l[1]=r,l[2]=a):a=l[2];let s=a;if(l[3]!==o||l[4]!==q?.historyVersion){let a;l[6]!==q?.historyVersion?(a=a=>(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===q?.historyVersion,l[6]=q?.historyVersion,l[7]=a):a=l[7],b=o.find(a),l[3]=o,l[4]=q?.historyVersion,l[5]=b}else b=l[5];let t=b;a:{if(t?.state==="published"){c="banners.published-release.description";break a}if(t&&(0,p.isCardinalityOneRelease)(t)){c="banners.archived-scheduled-draft.description";break a}c="banners.archived-release.description"}let u=c,v=t?.metadata.title;return l[8]!==n?(d=n("release.placeholder-untitled-release"),l[8]=n,l[9]=d):d=l[9],l[10]!==u||l[11]!==t||l[12]!==m?(e=a=>{let{displayTitle:b}=a;return(0,g.jsx)(p.Translate,{t:m,i18nKey:u,values:{title:b},components:{VersionBadge:a=>{let{children:b}=a,c=(0,p.getVersionInlineBadge)(t);return(0,g.jsx)(c,{children:b})}}})},l[10]=u,l[11]=t,l[12]=m,l[13]=e):e=l[13],l[14]!==v||l[15]!==d||l[16]!==e?(f=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.ReleaseTitle,{title:v,fallback:d,children:e})}),l[14]=v,l[15]=d,l[16]=e,l[17]=f):f=l[17],l[18]!==s||l[19]!==q?.archivedRelease?(j=q?.archivedRelease?void 0:{text:"Go back to published version",onClick:s},l[18]=s,l[19]=q?.archivedRelease,l[20]=j):j=l[20],l[21]!==f||l[22]!==j?(k=(0,g.jsx)(dR,{tone:"caution",content:f,action:j}),l[21]=f,l[22]=j,l[23]=k):k=l[23],k}d8.displayName="Memo(ReferenceChangedBanner)";let ed=aI.styled.img.withConfig({displayName:"Image",componentId:"sc-9vwcvu-0"})`object-fit:cover;width:100%;height:100%;height:180px;display:flex;`,ee=a=>{let b,c,d,e,f,j,l,m,n,o,q,s,t=(0,h.c)(24),{onClose:v,isLockedByCanvas:w}=a,{t:x}=(0,p.useTranslation)(F),y=(0,k.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>[y.current],t[0]=b):b=t[0],(0,i.useClickOutsideEvent)(v,b),t[1]!==w||t[2]!==x?(c=x(w?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),t[1]=w,t[2]=x,t[3]=c):c=t[3];let z=c;t[4]!==w||t[5]!==x?(d=x(w?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),t[4]=w,t[5]=x,t[6]=d):d=t[6];let A=d;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(ed,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),t[7]=e):e=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(f=(0,g.jsx)(i.Text,{size:1,weight:"semibold",children:"Canvas"}),t[8]=f):f=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(j=(0,g.jsxs)(i.Flex,{paddingY:1,gap:2,children:[f,(0,g.jsx)(i.Text,{size:1,muted:!0,children:(0,g.jsx)(u.ComposeSparklesIcon,{})})]}),t[9]=j):j=t[9],t[10]!==z?(l=(0,g.jsx)(i.Box,{paddingTop:3,children:(0,g.jsx)(i.Heading,{size:1,children:z})}),t[10]=z,t[11]=l):l=t[11],t[12]!==A?(m=(0,g.jsx)(i.Box,{paddingTop:4,children:(0,g.jsx)(i.Text,{size:1,children:A})}),t[12]=A,t[13]=m):m=t[13],t[14]!==l||t[15]!==m?(n=(0,g.jsxs)(i.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[j,l,m]}),t[14]=l,t[15]=m,t[16]=n):n=t[16],t[17]!==x?(o=x("canvas.banner.popover-button-text"),t[17]=x,t[18]=o):o=t[18],t[19]!==o?(q=(0,g.jsx)(i.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,g.jsx)(r.Button,{mode:"bleed",text:o,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:u.LaunchIcon})}),t[19]=o,t[20]=q):q=t[20],t[21]!==q||t[22]!==n?(s=(0,g.jsx)(i.Card,{radius:3,overflow:"hidden",width:0,ref:y,children:(0,g.jsxs)(i.Container,{width:0,children:[e,n,q]})}),t[21]=q,t[22]=n,t[23]=s):s=t[23],s},ef=a=>{let b,c,d,e,f,j,l,m,n=(0,h.c)(21),{documentId:o}=a,{t:q}=(0,p.useTranslation)(F),[s,t]=(0,k.useState)(!1),v=(0,p.getDocumentVariantType)(o),{isLockedByCanvas:w}=(0,p.useCanvasCompanionDoc)(o);a:{let a;if(!w){let a;n[0]!==q?(a=q("canvas.banner.editable.linked-text"),n[0]=q,n[1]=a):a=n[1],b=a;break a}if("published"===v){let a;n[2]!==q?(a=q("canvas.banner.linked-text.published"),n[2]=q,n[3]=a):a=n[3],b=a;break a}if("draft"===v){let a;n[4]!==q?(a=q("canvas.banner.linked-text.draft"),n[4]=q,n[5]=a):a=n[5],b=a;break a}n[6]!==q?(a=q("canvas.banner.linked-text.version"),n[6]=q,n[7]=a):a=n[7],b=a}let x=b;n[8]===Symbol.for("react.memo_cache_sentinel")?(c=()=>t(eh),n[8]=c):c=n[8];let y=c;n[9]===Symbol.for("react.memo_cache_sentinel")?(d=()=>t(!1),n[9]=d):d=n[9];let z=d;return n[10]!==x?(e=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:x}),n[10]=x,n[11]=e):e=n[11],n[12]!==w?(f=(0,g.jsx)(ee,{onClose:z,isLockedByCanvas:w}),n[12]=w,n[13]=f):f=n[13],n[14]===Symbol.for("react.memo_cache_sentinel")?(j=(0,g.jsx)(r.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:u.InfoOutlineIcon,onClick:y}),n[14]=j):j=n[14],n[15]!==s||n[16]!==f?(l=(0,g.jsx)(r.Popover,{open:s,size:0,tone:"default",portal:!0,placement:"bottom-start",content:f,children:j}),n[15]=s,n[16]=f,n[17]=l):l=n[17],n[18]!==e||n[19]!==l?(m=(0,g.jsxs)(i.Flex,{align:"center",gap:2,children:[e,l]}),n[18]=e,n[19]=l,n[20]=m):m=n[20],m};function eg(){let a,b,c,d,e=(0,h.c)(10),{documentId:f,displayed:i}=dj(),{t:j}=(0,p.useTranslation)(F),k=i?._id||f,{companionDoc:l}=(0,p.useCanvasCompanionDoc)(k),m=(0,p.useNavigateToCanvasDoc)(l?.canvasDocumentId,"banner");return l?(e[0]!==k?(a=(0,g.jsx)(ef,{documentId:k}),e[0]=k,e[1]=a):a=e[1],e[2]!==j?(b=j("canvas.banner.edit-in-canvas-action"),e[2]=j,e[3]=b):b=e[3],e[4]!==m||e[5]!==b?(c={mode:"ghost",text:b,onClick:m},e[4]=m,e[5]=b,e[6]=c):c=e[6],e[7]!==a||e[8]!==c?(d=(0,g.jsx)(dR,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:a,action:c}),e[7]=a,e[8]=c,e[9]=d):d=e[9],d):null}function eh(a){return!a}let ei=a=>{let b,c,d,e,f,j,k,l,m,n,o=(0,h.c)(32),{schemaType:q,selectedPerspective:r,reason:s}=a,{t}=(0,p.useTranslation)(F),{t:v}=(0,p.useTranslation)(),{document:w}=(0,p.useWorkspace)(),{drafts:x}=w,{enabled:y}=x;o[0]!==y||o[1]!==q?(b=a=>{let{perspective:b}=a;return{disabled:!(0,p.isPerspectiveWriteable)({selectedPerspective:b,isDraftModelEnabled:y,schemaType:q}).result}},o[0]=y,o[1]=q,o[2]=b):b=o[2];let z=b,A=(0,p.isReleaseDocument)(r)?r:void 0;o[3]!==A||o[4]!==v?(c=A?A.metadata.title||v("release.placeholder-untitled-release"):void 0,o[3]=A,o[4]=v,o[5]=c):c=o[5];let B=c;return o[6]!==s||o[7]!==t?(d="PUBLISHED_NOT_WRITEABLE"===s&&t("banners.choose-new-document-destination.cannot-create-published-document"),o[6]=s,o[7]=t,o[8]=d):d=o[8],o[9]!==s||o[10]!==t?(e="DRAFTS_NOT_WRITEABLE"===s&&t("banners.choose-new-document-destination.cannot-create-draft-document"),o[9]=s,o[10]=t,o[11]=e):e=o[11],o[12]!==s||o[13]!==A||o[14]!==B||o[15]!==t||o[16]!==v?(f="RELEASE_NOT_ACTIVE"===s&&A&&B&&(0,g.jsx)(p.Translate,{t,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:B},components:{VersionBadge:a=>{let{children:b}=a,c=(0,p.getVersionInlineBadge)(A);return(0,g.jsx)(p.ReleaseTitle,{title:A.metadata.title,fallback:v("release.placeholder-untitled-release"),children:()=>(0,g.jsx)(c,{children:b})})}}}),o[12]=s,o[13]=A,o[14]=B,o[15]=t,o[16]=v,o[17]=f):f=o[17],o[18]!==t?(j=t("banners.choose-new-document-destination.choose-destination"),o[18]=t,o[19]=j):j=o[19],o[20]!==j?(k=(0,g.jsxs)(g.Fragment,{children:[" ",j]}),o[20]=j,o[21]=k):k=o[21],o[22]!==d||o[23]!==e||o[24]!==f||o[25]!==k?(l=(0,g.jsxs)(i.Text,{size:1,children:[d,e,f,k]}),o[22]=d,o[23]=e,o[24]=f,o[25]=k,o[26]=l):l=o[26],o[27]!==z?(m=(0,g.jsx)(p.ReleasesNav,{menuItemProps:z}),o[27]=z,o[28]=m):m=o[28],o[29]!==l||o[30]!==m?(n=(0,g.jsx)(dR,{tone:"caution",icon:u.WarningOutlineIcon,content:(0,g.jsxs)(i.Flex,{align:"center",gap:2,children:[l,m]})}),o[29]=l,o[30]=m,o[31]=n):n=o[31],n};function ej(){let a,b,c=(0,h.c)(5),{value:d}=dj(),{documentLinkedBannerContent:e}=(0,p.useSanityCreateConfig)().components??{};c[0]!==d?(a=(0,p.getSanityCreateLinkMetadata)(d),c[0]=d,c[1]=a):a=c[1];let f=a;return e&&f?(c[2]!==e||c[3]!==f?(b=(0,g.jsx)(dR,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,g.jsx)(e,{metadata:f})}),c[2]=e,c[3]=f,c[4]=b):b=c[4],b):null}function ek(a){let b,c,d,e,f,l,m,n,o,q,r,s=(0,h.c)(41),{documentId:t,currentRelease:u,isScheduledRelease:v}=a,w=u??p.LATEST;s[0]!==w?(b=(0,p.getReleaseTone)(w),s[0]=w,s[1]=b):b=s[1];let x=b,{t:y}=(0,p.useTranslation)(F),{t:z}=(0,p.useTranslation)(),{createVersion:A}=(0,p.useVersionOperations)(),B="string"==typeof u;s[2]!==u||s[3]!==B||s[4]!==z?(c=B?u:u?.metadata?.title||z("release.placeholder-untitled-release"),s[2]=u,s[3]=B,s[4]=z,s[5]=c):c=s[5];let C=c,[D,E]=(0,k.useState)(),G=(0,j.useToast)();s[6]!==A||s[7]!==u||s[8]!==t||s[9]!==B||s[10]!==y||s[11]!==G?(d=async()=>{if(B||u._id){E({status:"creating",lastUpdate:new Date});let a=B?u:(0,p.getReleaseIdFromReleaseDocumentId)(u._id);try{await A(a,t),E({status:"created",lastUpdate:new Date})}catch(a){G.push({status:"error",closable:!0,title:y("banners.release.error.title"),description:y("banners.release.error.description",{message:a.message})}),E(void 0)}}},s[6]=A,s[7]=u,s[8]=t,s[9]=B,s[10]=y,s[11]=G,s[12]=d):d=s[12];let H=d,I=function(a){let b,c,d,e=(0,h.c)(4);e[0]===Symbol.for("react.memo_cache_sentinel")?(b=new Date,e[0]=b):b=e[0];let[f,g]=(0,k.useState)(b);return 200!==e[1]?(c=()=>{let a=setInterval(()=>{g(new Date)},200);return()=>clearInterval(a)},d=[200],e[1]=200,e[2]=c,e[3]=d):(c=e[2],d=e[3]),(0,k.useEffect)(c,d),f}(200),J=D?.status==="created"&&I.getTime()-D.lastUpdate.getTime()>1e3;return s[13]!==y?(e=y("banners.release.waiting.title"),s[13]=y,s[14]=e):e=s[14],s[15]!==y?(f=y("banners.release.waiting.description"),s[15]=y,s[16]=f):f=s[16],s[17]!==J||s[18]!==e||s[19]!==f?(l={status:"info",id:"add-document-to-release",enabled:J,closable:!0,title:e,description:f},s[17]=J,s[18]=e,s[19]=f,s[20]=l):l=s[20],(0,p.useConditionalToast)(l),s[21]!==C?(m={title:C},s[21]=C,s[22]=m):m=s[22],s[23]!==u||s[24]!==B||s[25]!==z?(n={VersionBadge:a=>{let{children:b}=a,c=(0,p.getVersionInlineBadge)(u);return B?(0,g.jsx)(c,{children:b}):(0,g.jsx)(p.ReleaseTitle,{title:u.metadata?.title,fallback:z("release.placeholder-untitled-release"),children:()=>(0,g.jsx)(c,{children:b})})}},s[23]=u,s[24]=B,s[25]=z,s[26]=n):n=s[26],s[27]!==y||s[28]!==n||s[29]!==m?(o=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{i18nKey:"banners.release.not-in-release",t:y,values:m,components:n})}),s[27]=y,s[28]=n,s[29]=m,s[30]=o):o=s[30],s[31]!==H||s[32]!==v||s[33]!==y||s[34]!==x||s[35]!==D?(q=v?void 0:{text:y("banners.release.action.add-to-release"),tone:x,disabled:!!D,onClick:H,mode:"default"},s[31]=H,s[32]=v,s[33]=y,s[34]=x,s[35]=D,s[36]=q):q=s[36],s[37]!==o||s[38]!==q||s[39]!==x?(r=(0,g.jsx)(dR,{tone:x,content:o,action:q}),s[37]=o,s[38]=q,s[39]=x,s[40]=r):r=s[40],r}let el=(0,a$.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),em=a=>{let b,c,d,e,f,j,l,m,n,q,s,t,v,w,x,y=(0,h.c)(47),{displayed:z,documentId:A,schemaType:B,i18nKey:C,isEditBlocking:D}=a,{t:E}=(0,p.useTranslation)(F),[G,H]=(0,k.useState)(!1),[I,J]=(0,k.useState)(!1),K=(0,aZ.useTelemetry)(),{publish:L,discardChanges:M}=(0,p.useDocumentOperation)(A,z?._type||"");y[0]!==L||y[1]!==K?(b=()=>{L.execute(),H(!0),K.log(el,{liveEditResolveType:"publish"})},y[0]=L,y[1]=K,y[2]=b):b=y[2];let N=b;y[3]!==M||y[4]!==K?(c=()=>{M.execute(),J(!0),K.log(el,{liveEditResolveType:"discard"})},y[3]=M,y[4]=K,y[5]=c):c=y[5];let O=c;y[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>()=>{H(!1),J(!1)},y[6]=d):d=y[6],(0,k.useEffect)(d);let P=cg();y[7]!==P||y[8]!==z?._id||y[9]!==B.name?(e=()=>{typeof z?._id>"u"||P.navigateDiffView({mode:"version",previousDocument:{type:B.name,id:(0,o.getPublishedId)(z?._id)},nextDocument:{type:B.name,id:(0,o.getDraftId)(z?._id)}})},y[7]=P,y[8]=z?._id,y[9]=B.name,y[10]=e):e=y[10];let Q=e;return y[11]!==B.title?(f={schemaType:B.title},y[11]=B.title,y[12]=f):f=y[12],y[13]!==C||y[14]!==E||y[15]!==f?(j=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:(0,g.jsx)(p.Translate,{t:E,i18nKey:C,values:f})}),y[13]=C,y[14]=E,y[15]=f,y[16]=j):j=y[16],y[17]!==E?(l=E("banners.obsolete-draft.actions.compare-draft.text"),y[17]=E,y[18]=l):l=y[18],y[19]!==Q||y[20]!==l?(m=(0,g.jsx)(r.Button,{text:l,mode:"ghost",onClick:Q}),y[19]=Q,y[20]=l,y[21]=m):m=y[21],y[22]!==E?(n=E("banners.obsolete-draft.actions.publish-draft.text"),y[22]=E,y[23]=n):n=y[23],y[24]!==D||y[25]!==E?(q=D?{content:E("banners.live-edit-draft-banner.publish.tooltip")}:{},y[24]=D,y[25]=E,y[26]=q):q=y[26],y[27]!==N||y[28]!==G||y[29]!==q||y[30]!==n?(s=(0,g.jsx)(r.Button,{onClick:N,text:n,tooltipProps:q,loading:G,tone:"positive"}),y[27]=N,y[28]=G,y[29]=q,y[30]=n,y[31]=s):s=y[31],y[32]!==E?(t=E("banners.obsolete-draft.actions.discard-draft.text"),y[32]=E,y[33]=t):t=y[33],y[34]!==D||y[35]!==E?(v=D?{content:E("banners.live-edit-draft-banner.discard.tooltip")}:{},y[34]=D,y[35]=E,y[36]=v):v=y[36],y[37]!==O||y[38]!==I||y[39]!==t||y[40]!==v?(w=(0,g.jsx)(r.Button,{onClick:O,text:t,tooltipProps:v,loading:I,tone:"caution"}),y[37]=O,y[38]=I,y[39]=t,y[40]=v,y[41]=w):w=y[41],y[42]!==s||y[43]!==w||y[44]!==j||y[45]!==m?(x=(0,g.jsx)(dR,{content:(0,g.jsxs)(i.Flex,{align:"center",justify:"space-between",gap:2,children:[j,m,s,w]}),"data-testid":"live-edit-type-banner",icon:u.ErrorOutlineIcon}),y[42]=s,y[43]=w,y[44]=j,y[45]=m,y[46]=x):x=y[46],x};function en(a){let b,c,d=(0,h.c)(4),{documentId:e,isPinnedDraftOrPublished:f}=a;d[0]!==e?(b={documentId:e},d[0]=e,d[1]=b):b=d[1];let i=(0,p.useOnlyHasVersions)(b);return(0,o.isVersionId)(e)&&i&&f?(d[2]!==e?(c=(0,g.jsx)(eo,{documentId:e}),d[2]=e,d[3]=c):c=d[3],c):null}function eo(a){let b,c,d,e,f,j,k,l,m,n,q,r=(0,h.c)(37),{documentId:s}=a,{data:t}=(0,p.useActiveReleases)(),u=(0,p.useSetPerspective)();r[0]!==s?(b=(0,o.getVersionFromId)(s)??"",r[0]=s,r[1]=b):b=r[1];let v=b;if(r[2]!==t||r[3]!==v){let a;r[5]!==v?(a=a=>a._id.includes(v),r[5]=v,r[6]=a):a=r[6],c=t.find(a),r[2]=t,r[3]=v,r[4]=c}else c=r[4];let w=c,{t:x}=(0,p.useTranslation)();r[7]!==s?(d={documentId:s},r[7]=s,r[8]=d):d=r[8];let{data:y}=(0,p.useDocumentVersions)(d);if(r[9]!==t||r[10]!==y){let a;r[12]!==y?(a=a=>y.find(b=>{let c=(0,o.getVersionFromId)(b)??"";return(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===c})&&!(0,p.isCardinalityOneRelease)(a),r[12]=y,r[13]=a):a=r[13],e=t.filter(a),r[9]=t,r[10]=y,r[11]=e}else e=r[11];let z=e;r[14]!==w?(f=w&&(0,p.getReleaseTone)(w),r[14]=w,r[15]=f):f=r[15];let A=f,{t:B}=(0,p.useTranslation)(F);r[16]!==v||r[17]!==u?(j=async()=>{u(v)},r[16]=v,r[17]=u,r[18]=j):j=r[18];let C=j;if(0===z.length)return null;let D=z[0];r[19]!==x?(k=x("release.placeholder-untitled-release"),r[19]=x,r[20]=k):k=r[20];let E=k;return r[21]!==z.length||r[22]!==B?(l=a=>{let{displayTitle:b}=a;return z.length>1?(0,g.jsx)(p.Translate,{t:B,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,g.jsx)(p.VersionInlineBadge,{children:b})},values:{count:z.length-1}}):(0,g.jsx)(p.Translate,{t:B,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,g.jsx)(p.VersionInlineBadge,{children:b})}})},r[21]=z.length,r[22]=B,r[23]=l):l=r[23],r[24]!==E||r[25]!==D.metadata.title||r[26]!==l?(m=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(i.Flex,{direction:"row",gap:1,wrap:"wrap",children:(0,g.jsx)(p.ReleaseTitle,{title:D.metadata.title,fallback:E,children:l})})}),r[24]=E,r[25]=D.metadata.title,r[26]=l,r[27]=m):m=r[27],r[28]!==z.length||r[29]!==C||r[30]!==B||r[31]!==A?(n=z.length>0?{text:B("banners.release.action.open-to-edit"),tone:A,onClick:C,mode:"default"}:void 0,r[28]=z.length,r[29]=C,r[30]=B,r[31]=A,r[32]=n):n=r[32],r[33]!==n||r[34]!==m||r[35]!==A?(q=(0,g.jsx)(dR,{tone:A,"data-testid":"open-release-to-edit-banner",content:m,action:n}),r[33]=n,r[34]=m,r[35]=A,r[36]=q):q=r[36],q}function ep(){let a,b=(0,h.c)(2),{t:c}=(0,p.useTranslation)(F);return b[0]!==c?(a=(0,g.jsx)(dR,{tone:"caution",icon:u.PauseIcon,content:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{t:c,i18nKey:"banners.paused-scheduled-draft.text"})})}),b[0]=c,b[1]=a):a=b[1],a}function eq(){let a,b,c=(0,h.c)(4),{revisionNotFound:d}=dj(),{t:e}=(0,p.useTranslation)(F);return d?(c[0]!==e?(a=e("banners.revision-not-found.description"),c[0]=e,c[1]=a):a=c[1],c[2]!==a?(b=(0,g.jsx)(dR,{tone:"caution","data-test-id":"revision-not-found-banner",icon:u.WarningOutlineIcon,content:(0,g.jsx)(i.Text,{size:1,children:a})}),c[2]=a,c[3]=b):b=c[3],b):null}function er(a){let b,c,d,e,f,j=(0,h.c)(12),{currentRelease:k}=a,l=k??p.LATEST;j[0]!==l?(b=(0,p.getReleaseTone)(l),j[0]=l,j[1]=b):b=j[1];let m=b,{t:n}=(0,p.useTranslation)();return j[2]!==k?(c=(0,p.formatRelativeLocalePublishDate)(k),j[2]=k,j[3]=c):c=j[3],j[4]!==c?(d={date:c},j[4]=c,j[5]=d):d=j[5],j[6]!==d||j[7]!==n?(e=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{t:n,i18nKey:"release.banner.scheduled-for-publishing-on",values:d})}),j[6]=d,j[7]=n,j[8]=e):e=j[8],j[9]!==e||j[10]!==m?(f=(0,g.jsx)(dR,{tone:m,icon:u.LockIcon,content:e}),j[9]=e,j[10]=m,j[11]=f):f=j[11],f}function es(){let a=(0,h.c)(17),{value:b,editState:c}=dj(),{selectedPerspective:d}=(0,p.usePerspective)(),e=(0,p.isGoingToUnpublish)(b)||c?.version&&(0,p.isGoingToUnpublish)(c?.version),{t:f}=(0,p.useTranslation)(F),{t:j}=(0,p.useTranslation)();if((0,p.isReleaseDocument)(d)&&e){let b,c,e,h,k,l;a[0]!==d.metadata?.title||a[1]!==j?(b=d.metadata?.title||j("release.placeholder-untitled-release"),a[0]=d.metadata?.title,a[1]=j,a[2]=b):b=a[2];let m=b;return a[3]!==m?(c={title:m},a[3]=m,a[4]=c):c=a[4],a[5]!==d||a[6]!==j?(e={VersionBadge:a=>{let{children:b}=a,c=(0,p.getVersionInlineBadge)(d);return(0,g.jsx)(p.ReleaseTitle,{title:d.metadata?.title,fallback:j("release.placeholder-untitled-release"),children:()=>(0,g.jsx)(c,{children:b})})}},a[5]=d,a[6]=j,a[7]=e):e=a[7],a[8]!==f||a[9]!==c||a[10]!==e?(h=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{t:f,i18nKey:"banners.unpublished-release-banner.text",values:c,components:e})}),a[8]=f,a[9]=c,a[10]=e,a[11]=h):h=a[11],a[12]!==f?(k=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{t:f,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),a[12]=f,a[13]=k):k=a[13],a[14]!==h||a[15]!==k?(l=(0,g.jsx)(dR,{tone:"critical",content:(0,g.jsxs)(i.Stack,{space:2,children:[h,k]}),icon:u.UnpublishIcon}),a[14]=h,a[15]=k,a[16]=l):l=a[16],l}return null}let et=(0,aI.styled)(i.Stack).withConfig({displayName:"TitleContainer",componentId:"sc-e3cjxp-0"})`${({theme:a})=>aI.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${a.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${a.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}`,eu=a=>{let b,c,d,e,f=(0,h.c)(14),{documentId:j,schemaType:k,title:l}=a,m=j===k.name,n=k.description,{t:o}=(0,p.useTranslation)(F);if(!1===k.__experimental_formPreviewTitle)return null;f[0]!==n||f[1]!==m||f[2]!==k.name||f[3]!==k.title?(b=!m&&(0,g.jsxs)(i.Inline,{space:1,children:[(0,g.jsx)(i.Text,{muted:!0,size:1,children:k.title??k.name}),n&&(0,g.jsx)(r.Tooltip,{content:n,placement:"right",children:(0,g.jsx)(u.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),f[0]=n,f[1]=m,f[2]=k.name,f[3]=k.title,f[4]=b):b=f[4];let q=!l;return f[5]!==o||f[6]!==l?(c=l??o("document-view.form-view.form-title-fallback"),f[5]=o,f[6]=l,f[7]=c):c=f[7],f[8]!==q||f[9]!==c?(d=(0,g.jsx)(i.Heading,{as:"h2","data-heading":!0,muted:q,"data-testid":"document-panel-document-title",children:c}),f[8]=q,f[9]=c,f[10]=d):d=f[10],f[11]!==b||f[12]!==d?(e=(0,g.jsxs)(et,{marginBottom:6,space:4,children:[b,d]}),f[11]=b,f[12]=d,f[13]=e):e=f[13],e},ev=a=>a.preventDefault(),ew=(0,k.forwardRef)(function(a,b){let c,d,e,f,l,m,n,o,q,r,s,t,u,v,w,x=(0,h.c)(77),{hidden:y,margins:z}=a,{collapsedFieldSets:A,collapsedPaths:B,displayed:C,editState:D,documentId:E,documentType:G,fieldActions:H,onChange:I,validation:J,ready:K,formState:L,onFocus:M,connectionState:N,onBlur:O,onSetCollapsedPath:P,onPathOpen:Q,onSetCollapsedFieldSet:R,onSetActiveFieldGroup:S,openPath:T,compareValue:U,hasUpstreamVersion:V}=dj(),{selectedReleaseId:W,selectedPerspective:X}=(0,p.usePerspective)(),Y=(0,p.useDocumentStore)(),Z=(0,p.useDocumentPresence)(E),{title:$}=dz(),[_]=(0,k.useState)(ex),aa=D?.transactionSyncLock?.enabled,{t:ab}=(0,p.useTranslation)(F);x[0]!==ab?(c=ab("document-view.form-view.sync-lock-toast.title"),x[0]=ab,x[1]=c):c=x[1],x[2]!==ab?(d=ab("document-view.form-view.sync-lock-toast.description"),x[2]=ab,x[3]=d):d=x[3],x[4]!==aa||x[5]!==c||x[6]!==d?(e={id:"sync-lock",status:"warning",enabled:aa,title:c,description:d,closable:!0},x[4]=aa,x[5]=c,x[6]=d,x[7]=e):e=x[7],(0,p.useConditionalToast)(e),x[8]!==E||x[9]!==Y.pair||x[10]!==G||x[11]!==_||x[12]!==W?(f=()=>{let a=Y.pair.documentEvents(E,G,W).pipe((0,aW.tap)(a=>{var b,c;let d,e,f;"mutation"===a.type&&_.publish((d=(b=a).mutations.map(a=>a.patch).filter(Boolean),{type:"mutation",snapshot:b.document,patches:(0,p.fromMutationPatches)(b.origin,d)})),"rebase"===a.type&&_.publish((e=(c=a).remoteMutations.map(a=>a.patch).filter(Boolean),f=c.localMutations.map(a=>a.patch).filter(Boolean),{type:"rebase",snapshot:c.document,patches:(0,p.fromMutationPatches)("remote",e).concat((0,p.fromMutationPatches)("local",f))}))})).subscribe();return()=>{a.unsubscribe()}},x[8]=E,x[9]=Y.pair,x[10]=G,x[11]=_,x[12]=W,x[13]=f):f=x[13],x[14]!==E||x[15]!==Y||x[16]!==G||x[17]!==_||x[18]!==W?(l=[E,Y,G,_,W],x[14]=E,x[15]=Y,x[16]=G,x[17]=_,x[18]=W,x[19]=l):l=x[19],(0,k.useEffect)(f,l);let ac=!!C?._rev;x[20]!==_||x[21]!==C?(m=()=>{_.publish({type:"mutation",patches:[],snapshot:C})},x[20]=_,x[21]=C,x[22]=m):m=x[22];let ad=(0,k.useEffectEvent)(m);x[23]!==ad||x[24]!==ac?(n=()=>{ac&&ad()},x[23]=ad,x[24]=ac,x[25]=n):n=x[25],x[26]!==ac?(o=[ac],x[26]=ac,x[27]=o):o=x[27],(0,k.useEffect)(n,o);let[ae,af]=(0,k.useState)(null),[ag,ah]=(0,k.useState)(!1);x[28]!==ag||x[29]!==ae||x[30]!==L?.focusPath.length||x[31]!==K?(q=()=>{!ag&&K&&!L?.focusPath.length&&ae&&(ah(!0),(0,j.focusFirstDescendant)(ae))},x[28]=ag,x[29]=ae,x[30]=L?.focusPath.length,x[31]=K,x[32]=q):q=x[32];let ai=L?.focusPath.length;x[33]!==ag||x[34]!==ae||x[35]!==K||x[36]!==ai?(r=[ag,ae,ai,K],x[33]=ag,x[34]=ae,x[35]=K,x[36]=ai,x[37]=r):r=x[37],(0,k.useEffect)(q,r),x[38]!==b?(s=a=>{af(a),"function"==typeof b?b(a):b&&(b.current=a)},x[38]=b,x[39]=s):s=x[39];let aj=s,ak="reconnecting"===N||L?.readOnly||!D?.ready,al=ak?"true":void 0;return x[40]!==A||x[41]!==B||x[42]!==U||x[43]!==N||x[44]!==E||x[45]!==D?.draft||x[46]!==D?.published||x[47]!==H||x[48]!==L||x[49]!==V||x[50]!==y||x[51]!==ak||x[52]!==O||x[53]!==I||x[54]!==M||x[55]!==Q||x[56]!==S||x[57]!==R||x[58]!==P||x[59]!==T||x[60]!==_||x[61]!==Z||x[62]!==X||x[63]!==ab||x[64]!==$||x[65]!==J?(t="connecting"!==N||D?.draft||D?.published?null===L||y?(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsx)(i.Text,{children:ab("document-view.form-view.form-hidden")})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(eu,{documentId:E,schemaType:L.schemaType,title:$}),(0,g.jsx)(p.FormBuilder,{__internal_fieldActions:H,__internal_patchChannel:_,changed:L.changed,collapsedFieldSets:A,collapsedPaths:B,compareValue:U??void 0,focused:L.focused,focusPath:L.focusPath,groups:L.groups,id:"root",members:L.members,onChange:I,onFieldGroupSelect:S,onPathBlur:O,onPathFocus:M,onPathOpen:Q,onSetFieldSetCollapsed:R,onSetPathCollapsed:P,openPath:T,perspective:X,hasUpstreamVersion:V,presence:Z,readOnly:ak,schemaType:L.schemaType,validation:J,value:L.value})]}):(0,g.jsx)(df,{ms:300,children:(0,g.jsxs)(i.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,g.jsx)(i.Spinner,{muted:!0}),(0,g.jsx)(i.Box,{marginTop:3,children:(0,g.jsx)(i.Text,{align:"center",muted:!0,size:1,children:ab("document-view.form-view.loading")})})]})}),x[40]=A,x[41]=B,x[42]=U,x[43]=N,x[44]=E,x[45]=D?.draft,x[46]=D?.published,x[47]=H,x[48]=L,x[49]=V,x[50]=y,x[51]=ak,x[52]=O,x[53]=I,x[54]=M,x[55]=Q,x[56]=S,x[57]=R,x[58]=P,x[59]=T,x[60]=_,x[61]=Z,x[62]=X,x[63]=ab,x[64]=$,x[65]=J,x[66]=t):t=x[66],x[67]!==aj||x[68]!==al||x[69]!==t?(u=(0,g.jsx)(i.Box,{as:"form",onSubmit:ev,ref:aj,"data-testid":"form-view","data-read-only":al,children:t}),x[67]=aj,x[68]=al,x[69]=t,x[70]=u):u=x[70],x[71]!==z||x[72]!==u?(v=(0,g.jsx)(p.PresenceOverlay,{margins:z,children:u}),x[71]=z,x[72]=u,x[73]=v):v=x[73],x[74]!==y||x[75]!==v?(w=(0,g.jsx)(i.Container,{hidden:y,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:v}),x[74]=y,x[75]=v,x[76]=w):w=x[76],w});function ex(){return(0,p.createPatchChannel)()}function ey(){let a,b,c=(0,h.c)(11),{activeViewId:d,paneKey:e,views:f}=dj(),j=`${e}tabpanel`;if(c[0]!==d||c[1]!==e||c[2]!==j||c[3]!==f){let b;c[5]!==d||c[6]!==e||c[7]!==j?(b=(a,b)=>(0,g.jsx)(ez,{icon:a.icon,id:`${e}tab-${a.id}`,isActive:d===a.id,label:a.title,tabPanelId:j,viewId:0===b?null:a.id??null},a.id),c[5]=d,c[6]=e,c[7]=j,c[8]=b):b=c[8],a=f.map(b),c[0]=d,c[1]=e,c[2]=j,c[3]=f,c[4]=a}else a=c[4];return c[9]!==a?(b=(0,g.jsx)(i.TabList,{space:1,children:a}),c[9]=a,c[10]=b):b=c[10],b}function ez(a){let b,c,d,e,f,i,j,k,l,m=(0,h.c)(20);m[0]!==a?({icon:b,id:c,isActive:d,label:e,tabPanelId:i,viewId:j,...f}=a,m[0]=a,m[1]=b,m[2]=c,m[3]=d,m[4]=e,m[5]=f,m[6]=i,m[7]=j):(b=m[1],c=m[2],d=m[3],e=m[4],f=m[5],i=m[6],j=m[7]);let{ready:n,editState:o}=dj(),{setView:p}=eb();m[8]!==p||m[9]!==j?(k=()=>p(j),m[8]=p,m[9]=j,m[10]=k):k=m[10];let q=k,s=!n&&!o?.draft&&!o?.published;return m[11]!==q||m[12]!==b||m[13]!==c||m[14]!==d||m[15]!==e||m[16]!==f||m[17]!==s||m[18]!==i?(l=(0,g.jsx)(r.Tab,{...f,"aria-controls":i,disabled:s,icon:b,id:c,label:e,onClick:q,selected:d}),m[11]=q,m[12]=b,m[13]=c,m[14]=d,m[15]=e,m[16]=f,m[17]=s,m[18]=i,m[19]=l):l=m[19],l}let eA={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function eB(){return(0,k.useContext)(l.ResolvedPanesContext)??eA}let eC=Object.freeze({}),eD=Symbol("LOADING_PANE"),eE="documentPanelPortalElement",eF=(0,a$.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),eG=(0,a$.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),eH=(0,a$.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function eI(a){let b,c,d,e,f,i,j,k,l=(0,h.c)(27),{paneData:m,index:n}=a,{pane:o}=m,q=(0,s.useRouter)(),{t}=(0,p.useTranslation)(F),u=(0,s.useRouterState)(),v=(0,aZ.useTelemetry)();l[0]!==u?.panes?(b=u?.panes||[],l[0]=u?.panes,l[1]=b):b=l[1];let w=b,{perspectiveStack:x}=(0,p.usePerspective)(),y=o!==eD&&"title"in o?o.title:null,z=o!==eD&&"document"===o.type?o.options.id:null,A=o!==eD&&"document"===o.type?o.options.type:null,B=z??"",C=A??"";l[2]!==x||l[3]!==B||l[4]!==C?(c={documentId:B,documentType:C,perspectiveStack:x},l[2]=x,l[3]=B,l[4]=C,l[5]=c):c=l[5];let{value:D,isLoading:E}=(0,p.useDocumentPreviewValues)(c);a:{if(z&&!E){let a;l[6]!==D?.title||l[7]!==t?(a=D?.title||t("panes.document-header-title.untitled.text"),l[6]=D?.title,l[7]=t,l[8]=a):a=l[8],d=a;break a}d=y}let G=d;l[9]!==m.groupIndex||l[10]!==q||l[11]!==w||l[12]!==v?(e=()=>{v.log(eH),q.navigate({panes:w.slice(0,m.groupIndex)})},l[9]=m.groupIndex,l[10]=q,l[11]=w,l[12]=v,l[13]=e):e=l[13];let H=e;if(!G&&!E)return null;l[14]!==G||l[15]!==t?(f=G||t("panes.document-header-title.untitled.text"),l[14]=G,l[15]=t,l[16]=f):f=l[16],l[17]!==G||l[18]!==t?(i=G||t("panes.document-header-title.untitled.text"),l[17]=G,l[18]=t,l[19]=i):i=l[19],l[20]!==i?(j={content:i},l[20]=i,l[21]=j):j=l[21];let I=+(0!==n);return l[22]!==H||l[23]!==I||l[24]!==f||l[25]!==j?(k=(0,g.jsx)(r.Button,{mode:"bleed",text:f,tooltipProps:j,onClick:H,paddingLeft:I}),l[22]=H,l[23]=I,l[24]=f,l[25]=j,l[26]=k):k=l[26],k}function eJ(a){let b,c,d=(0,h.c)(7),{paneDataItems:e,currentPaneIndex:f}=a;if(d[0]!==f||d[1]!==e){let a;d[3]!==f?(a=(a,b)=>{if(b>f)return null;let c=a.pane!==eD&&"document"===a.pane.type;return(0,g.jsxs)(k.Fragment,{children:[(0,g.jsx)(eI,{paneData:a,index:b}),b<f&&(c?(0,g.jsx)(i.Box,{padding:1,children:(0,g.jsx)(u.ArrowRightIcon,{})}):(0,g.jsx)(i.Text,{children:"/"}))]},`breadcrumb-item-${a.key}-${b}`)},d[3]=f,d[4]=a):a=d[4],b=e.map(a),d[0]=f,d[1]=e,d[2]=b}else b=d[2];return d[5]!==b?(c=(0,g.jsx)(i.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:b}),d[5]=b,d[6]=c):c=d[6],c}function eK(){let a,b,c,d=(0,h.c)(23),{connectionState:e,schemaType:f,title:i,value:j,index:k}=dj(),{paneDataItems:l}=eB(),{title:m,error:n}=dz(),{t:o}=(0,p.useTranslation)(F);d[0]!==l?(a=l.some(eL),d[0]=l,d[1]=a):a=d[1];let q=a;if("connecting"===e&&!j){let a;return d[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(g.Fragment,{}),d[2]=a):a=d[2],a}if(i){let a;return d[3]!==i?(a=(0,g.jsx)(g.Fragment,{children:i}),d[3]=i,d[4]=a):a=d[4],a}if(!j){let a,b,c=f?.title||f?.name;return d[5]!==o||d[6]!==c?(a=o("panes.document-header-title.new.text",{schemaType:c}),d[5]=o,d[6]=c,d[7]=a):a=d[7],d[8]!==a?(b=(0,g.jsx)(g.Fragment,{children:a}),d[8]=a,d[9]=b):b=d[9],b}if(n){let a,b;return d[10]!==n||d[11]!==o?(a=o("panes.document-header-title.error.text",{error:n}),d[10]=n,d[11]=o,d[12]=a):a=d[12],d[13]!==a?(b=(0,g.jsx)(g.Fragment,{children:a}),d[13]=a,d[14]=b):b=d[14],b}return d[15]!==m||d[16]!==q||d[17]!==k||d[18]!==l||d[19]!==o?(b=q?(0,g.jsx)(eJ,{paneDataItems:l,currentPaneIndex:k}):m||(0,g.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:o("panes.document-header-title.untitled.text")}),d[15]=m,d[16]=q,d[17]=k,d[18]=l,d[19]=o,d[20]=b):b=d[20],d[21]!==b?(c=(0,g.jsx)(g.Fragment,{children:b}),d[21]=b,d[22]=c):c=d[22],c}function eL(a){return a.maximized}let eM=a=>{let b,c,d,e,f,j,k=(0,h.c)(16);k[0]!==a?({documentExists:b,...c}=a,k[0]=a,k[1]=b,k[2]=c):(b=k[1],c=k[2]);let{isFavorited:l,isReady:m,favorite:n,unfavorite:o}=(0,p.useManageFavorite)(c),{t:q}=(0,p.useTranslation)(F),s=l?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";k[3]!==q||k[4]!==s?(d=q(s),k[3]=q,k[4]=s,k[5]=d):d=k[5];let t=d,v=l?o:n,w=!m||!b;return k[6]!==t?(e={content:(0,g.jsx)(i.Text,{size:1,children:t}),placement:"right"},k[6]=t,k[7]=e):e=k[7],k[8]!==l?(f=(0,g.jsx)(i.Text,{size:1,children:l?(0,g.jsx)(u.StarFilledIcon,{}):(0,g.jsx)(u.StarIcon,{})}),k[8]=l,k[9]=f):f=k[9],k[10]!==t||k[11]!==v||k[12]!==w||k[13]!==e||k[14]!==f?(j=(0,g.jsx)(r.Button,{mode:"bleed",onClick:v,disabled:w,"aria-label":t,"aria-live":"assertive",tooltipProps:e,children:f}),k[10]=t,k[11]=v,k[12]=w,k[13]=e,k[14]=f,k[15]=j):j=k[15],j},eN=(0,k.memo)(function(){let a,b,c,d,e,f,i=(0,h.c)(24),{editState:j,connectionState:k,views:l,documentId:m,displayed:n}=dj(),{features:o}=dr(),{index:q,BackLink:s}=eb(),{activeWorkspace:t}=(0,p.useActiveWorkspace)(),v=l.length>1,{collapsed:w,isLast:x}=cN(),y=x&&!w?-1:0,z=o.backButton&&q>0,{t:A}=(0,p.useTranslation)(F);i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(eK,{}),i[0]=a):a=i[0];let B=a;i[1]!==v?(b=v&&(0,g.jsx)(ey,{}),i[1]=v,i[2]=b):b=i[2];let C=b;i[3]!==s||i[4]!==z||i[5]!==A?(c=z&&(0,g.jsx)(r.Button,{as:s,"data-as":"a",icon:u.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:A("pane-header.back-button.text")}}),i[3]=s,i[4]=z,i[5]=A,i[6]=c):c=i[6];let D=c,E=n?._id??m,G=n?._type??"";i[7]!==t.dataset||i[8]!==t.projectId?(d=[t.projectId,t.dataset],i[7]=t.dataset,i[8]=t.projectId,i[9]=d):d=i[9];let H=d.join("."),I=(j?.ready&&(j.version??j.draft??j.published)!==null)??!1;i[10]!==t.dataset||i[11]!==t.name||i[12]!==t.projectId||i[13]!==E||i[14]!==G||i[15]!==H||i[16]!==I?(e=(0,g.jsx)(p.CapabilityGate,{capability:"comlink",condition:"available",children:(0,g.jsx)(eM,{resourceType:"studio",documentId:E,documentType:G,resourceId:H,schemaName:t.name,projectId:t.projectId,dataset:t.dataset,documentExists:I})}),i[10]=t.dataset,i[11]=t.name,i[12]=t.projectId,i[13]=E,i[14]=G,i[15]=H,i[16]=I,i[17]=e):e=i[17];let J=e,K="connecting"===k&&!j?.draft&&!j?.published;return i[18]!==D||i[19]!==J||i[20]!==K||i[21]!==y||i[22]!==C?(f=(0,g.jsx)(c4,{loading:K,title:B,tabs:C,tabIndex:y,backButton:D,appendTitle:J}),i[18]=D,i[19]=J,i[20]=K,i[21]=y,i[22]=C,i[23]=f):f=i[23],f}),eO=(0,aI.styled)(i.Box).withConfig({displayName:"DocumentBox",componentId:"sc-10i0hcs-0"})({position:"relative"}),eP=(0,aI.styled)(p.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-10i0hcs-1"})(({$disabled:a})=>a?{height:"100%"}:aI.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),eQ=function(a){let b,c,d,e,f,j,l,m,n,q,r,s,t,u,v,w,x=(0,h.c)(114),{footerHeight:y,headerHeight:z,isInspectOpen:A,rootElement:B,setDocumentPanelPortalElement:C,footer:D}=a,{activeViewId:E,displayed:F,documentId:G,editState:H,inspector:I,value:J,views:K,ready:L,schemaType:M,permissions:N,isPermissionsLoading:O}=dj();if(x[0]!==J){let a=(0,p.getSanityCreateLinkMetadata)(J);b=(0,p.isSanityCreateLinked)(a),x[0]=J,x[1]=b}else b=x[1];let P=b,{params:Q}=eb(),{collapsed:R}=cH(),{collapsed:S}=cN(),T=(0,i.usePortal)(),{features:U}=dr(),[V,W]=(0,k.useState)(null),[X,Y]=(0,k.useState)(null),Z=(0,k.useRef)(null),$=(0,p.useWorkspace)(),_=J._createdAt?"update":"create";x[2]!==E||x[3]!==K?(c=K.find(a=>a.id===E)||K[0]||{type:"form"},x[2]=E,x[3]=K,x[4]=c):c=x[4];let aa=c,ab=U.splitPanes&&V||T.element;a:{let a;if(R){let a,b=z||0,c=y?y+2:2;x[5]!==b||x[6]!==c?(a=[b,0,c,0],x[5]=b,x[6]=c,x[7]=a):a=x[7],d=a;break a}x[8]===Symbol.for("react.memo_cache_sentinel")?(a=[0,0,2,0],x[8]=a):a=x[8],d=a}let ac=d,ad="form"!==aa.type;x[9]!==aa.component||x[10]!==aa.options||x[11]!==aa.type||x[12]!==F||x[13]!==G||x[14]!==H?.draft||x[15]!==H?.published||x[16]!==M||x[17]!==J?(e=()=>{if("component"===aa.type&&aa.component){let a=aa.component;return(0,g.jsx)(a,{document:{draft:H?.draft||null,displayed:F||J,historical:F,published:H?.published||null},documentId:G,options:aa.options,schemaType:M})}return!1},x[9]=aa.component,x[10]=aa.options,x[11]=aa.type,x[12]=F,x[13]=G,x[14]=H?.draft,x[15]=H?.published,x[16]=M,x[17]=J,x[18]=e):e=x[18],x[19]!==e?(f=e(),x[19]=e,x[20]=f):f=x[20];let ae=f,af=(0,k.useRef)(void 0);x[21]!==G||x[22]!==X?(j=()=>{if(X?.scrollTo){if(void 0===af.current){af.current=G;return}af.current!==G&&(X.scrollTo(0,0),af.current=G)}},l=[G,X],x[21]=G,x[22]=X,x[23]=j,x[24]=l):(j=x[23],l=x[24]),(0,k.useEffect)(j,l),x[25]!==ab||x[26]!==C?(m=()=>{ab&&C(ab)},n=[ab,C],x[25]=ab,x[26]=C,x[27]=m,x[28]=n):(m=x[27],n=x[28]),(0,k.useEffect)(m,n),x[29]!==F||x[30]!==A||x[31]!==J?(q=A?(0,g.jsx)(dQ,{value:F||J}):null,x[29]=F,x[30]=A,x[31]=J,x[32]=q):q=x[32];let ag=q,ah=!!(!S&&I),{selectedPerspective:ai,selectedReleaseId:aj,selectedPerspectiveName:ak}=(0,p.usePerspective)(),al=Q?.historyVersion;x[33]!==F||x[34]!==G||x[35]!==al?(r={historyVersion:al,displayed:F,documentId:G},x[33]=F,x[34]=G,x[35]=al,x[36]=r):r=x[36];let am=(0,p.useFilteredReleases)(r),{isPaused:an}=(0,p.usePausedScheduledDraft)();b:{let a,b,c,d,e,f,h,i,j,k,l,m,n,q,r;if(Q?.historyVersion){let a;x[37]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(ec,{}),x[37]=a):a=x[37],s=a;break b}x[38]!==ai?(a=(0,p.isReleaseDocument)(ai)&&(0,p.isReleaseScheduledOrScheduling)(ai),x[38]=ai,x[39]=a):a=x[39];let t=a,u=!!(t&&F?._id&&(0,o.getVersionFromId)(F?._id)===aj);if(x[40]!==H||x[41]!==M||x[42]!==ai||x[43]!==$.document.drafts.enabled?(c=function({isSelectedPerspectiveWriteable:a,editState:b}){return(0,p.isNewDocument)(b)&&!a.result}({isSelectedPerspectiveWriteable:b=(0,p.isPerspectiveWriteable)({selectedPerspective:ai,isDraftModelEnabled:$.document.drafts.enabled,schemaType:M}),editState:H}),x[40]=H,x[41]=M,x[42]=ai,x[43]=$.document.drafts.enabled,x[44]=b,x[45]=c):(b=x[44],c=x[45]),c){let a;x[46]!==b.reason||x[47]!==b.result||x[48]!==M||x[49]!==ai?(a=!b.result&&(0,g.jsx)(ei,{schemaType:M,selectedPerspective:ai,reason:b.reason}),x[46]=b.reason,x[47]=b.result,x[48]=M,x[49]=ai,x[50]=a):a=x[50],s=a;break b}if(an&&F?._id){let a;x[51]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(ep,{}),x[51]=a):a=x[51],s=a;break b}if(u){let a;x[52]!==ai?(a=(0,g.jsx)(er,{currentRelease:ai}),x[52]=ai,x[53]=a):a=x[53],s=a;break b}x[54]!==am.currentReleases||x[55]!==am.notCurrentReleases?(d=[...am.currentReleases,...am.notCurrentReleases].find(eR),x[54]=am.currentReleases,x[55]=am.notCurrentReleases,x[56]=d):d=x[56];let v=d,w=F?._id&&(0,o.isDraftId)(F._id);if("drafts"===ai&&v&&w){let a;x[57]!==F||x[58]!==v._id?(a=(0,g.jsx)(ea,{releaseId:v._id,draftDocument:F}),x[57]=F,x[58]=v._id,x[59]=a):a=x[59],s=a;break b}x[60]!==ai?(e=(0,p.isSystemBundle)(ai),x[60]=ai,x[61]=e):e=x[61];let y=e,z=H?.version&&(0,p.isGoingToUnpublish)(H?.version);if(!(0,p.isSystemBundle)(ai)&&F?._id&&(0,o.getVersionFromId)(F._id)!==ak&&L&&!y&&!1===(0,p.isNewDocument)(H)&&!z){let a;x[62]!==t||x[63]!==ai||x[64]!==J._id?(a=(0,g.jsx)(ek,{documentId:J._id,currentRelease:ai,isScheduledRelease:t}),x[62]=t,x[63]=ai,x[64]=J._id,x[65]=a):a=x[65],s=a;break b}let A=function({editState:a,workspace:b,schemaType:c}){if(!a?.ready)return{result:void 0};let d=null!==a.draft,{document:{drafts:{enabled:e}}}=b;return d?e?!0===c.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}:{result:!1}}({editState:H,workspace:$,schemaType:M});if("form"===aa.type&&!aj&&A.result){if("DRAFT_MODEL_INACTIVE"===A.reason){let a;x[66]!==F||x[67]!==G||x[68]!==M?(a=(0,g.jsx)(em,{displayed:F,documentId:G,schemaType:M,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),x[66]=F,x[67]=G,x[68]=M,x[69]=a):a=x[69],s=a;break b}if("LIVE_EDIT_ACTIVE"===A.reason){let a;x[70]!==F||x[71]!==G||x[72]!==M?(a=(0,g.jsx)(em,{displayed:F,documentId:G,schemaType:M,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),x[70]=F,x[71]=G,x[72]=M,x[73]=a):a=x[73],s=a;break b}}if("form"!==aa.type||O){s=null;break b}x[74]!==P?(f=P&&(0,g.jsx)(ej,{}),x[74]=P,x[75]=f):f=x[75],x[76]!==N?.granted||x[77]!==_?(h=!N?.granted&&(0,g.jsx)(d5,{requiredPermission:_}),x[76]=N?.granted,x[77]=_,x[78]=h):h=x[78],x[79]===Symbol.for("react.memo_cache_sentinel")?(i=(0,g.jsx)(eq,{}),j=(0,g.jsx)(d8,{}),k=(0,g.jsx)(dV,{}),l=(0,g.jsx)(eg,{}),m=(0,g.jsx)(dS,{}),n=(0,g.jsx)(es,{}),x[79]=i,x[80]=j,x[81]=k,x[82]=l,x[83]=m,x[84]=n):(i=x[79],j=x[80],k=x[81],l=x[82],m=x[83],n=x[84]);let B=F?._id??G;x[85]!==y||x[86]!==B?(q=(0,g.jsx)(en,{documentId:B,isPinnedDraftOrPublished:y}),x[85]=y,x[86]=B,x[87]=q):q=x[87],x[88]!==f||x[89]!==h||x[90]!==q?(r=(0,g.jsxs)(g.Fragment,{children:[f,h,i,j,k,l,m,n,q]}),x[88]=f,x[89]=h,x[90]=q,x[91]=r):r=x[91],s=r}let ao=s;x[92]!==X?(t={documentScrollElement:X},x[92]=X,x[93]=t):t=x[93];let ap=t,aq=U.resizablePanes||!ah;return x[94]!==ae||x[95]!==ao||x[96]!==X||x[97]!==D||x[98]!==ad||x[99]!==ag||x[100]!==R||x[101]!==ac||x[102]!==ab||x[103]!==ap||x[104]!==aq?(u=aq&&(0,g.jsxs)(i.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,g.jsxs)(p.LegacyLayerProvider,{zOffset:"paneHeader",children:[ao,(0,g.jsx)(eN,{})]}),(0,g.jsx)(eO,{flex:2,children:(0,g.jsx)(i.PortalProvider,{element:ab,__unstable_elements:ap,children:(0,g.jsx)(i.BoundaryElementProvider,{element:X,children:(0,g.jsxs)(p.VirtualizerScrollInstanceProvider,{scrollElement:X,containerElement:Z,children:[(0,g.jsxs)(eP,{$disabled:R||!1,"data-testid":"document-panel-scroller",ref:Y,children:[(0,g.jsx)(ew,{hidden:ad,margins:ac,ref:Z}),ae]}),ag,(0,g.jsx)("div",{"data-testid":"document-panel-portal",ref:W})]})})})}),D]}),x[94]=ae,x[95]=ao,x[96]=X,x[97]=D,x[98]=ad,x[99]=ag,x[100]=R,x[101]=ac,x[102]=ab,x[103]=ap,x[104]=aq,x[105]=u):u=x[105],x[106]!==G||x[107]!==B||x[108]!==M||x[109]!==ah?(v=ah&&(0,g.jsx)(i.BoundaryElementProvider,{element:B,children:(0,g.jsx)(dE,{documentId:G,documentType:M.name,flex:1})}),x[106]=G,x[107]=B,x[108]=M,x[109]=ah,x[110]=v):v=x[110],x[111]!==u||x[112]!==v?(w=(0,g.jsx)(cO,{children:(0,g.jsxs)(i.Flex,{height:"fill",children:[u,v]})}),x[111]=u,x[112]=v,x[113]=w):w=x[113],w};function eR(a){return(0,p.isCardinalityOneRelease)(a)&&((0,p.isReleaseScheduledOrScheduling)(a)||(0,p.isPausedCardinalityOneRelease)(a))}eQ.displayName="DocumentPanel";let eS=a=>{let b,c,d,e,f,g,i,j=(0,h.c)(26),{id:l,type:m,revision:n,release:o}=a,{restore:q}=(0,p.useDocumentOperation)(l,m,o),{revisionNotFound:r}=dj(),t=(0,p.useDocumentOperationEvent)(l,m),{navigateIntent:v}=(0,s.useRouter)(),w=(0,k.useRef)(t),[x,y]=(0,k.useState)(!1),{t:z}=(0,p.useTranslation)(F);j[0]!==q||j[1]!==n?(b=()=>{q.execute(n),y(!1)},j[0]=q,j[1]=n,j[2]=b):b=j[2];let A=b;j[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{y(!1)},j[3]=c):c=j[3];let B=c;j[4]!==t||j[5]!==l||j[6]!==v||j[7]!==m?(d=()=>{t&&t!==w.current&&("success"===t.type&&"restore"===t.op&&v("edit",{id:l,type:m}),w.current=t)},e=[t,l,v,m],j[4]=t,j[5]=l,j[6]=v,j[7]=m,j[8]=d,j[9]=e):(d=j[8],e=j[9]),(0,k.useEffect)(d,e),j[10]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{y(!0)},j[10]=f):f=j[10];let C=f;a:{if(x){let a,b;j[11]!==z?(a=z("action.restore.confirm.message"),j[11]=z,j[12]=a):a=j[12],j[13]!==A||j[14]!==a?(b={type:"confirm",tone:"critical",onCancel:B,onConfirm:A,message:a},j[13]=A,j[14]=a,j[15]=b):b=j[15],g=b;break a}g=null}let D=g,E="@initial"===n,G=void 0===n;b:{let a,b,c;if(G||r){i=null;break b}j[16]!==z?(a=z("action.restore.label"),j[16]=z,j[17]=a):a=j[17];let d=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";j[18]!==z||j[19]!==d?(b=z(d),j[18]=z,j[19]=d,j[20]=b):b=j[20],j[21]!==D||j[22]!==E||j[23]!==b||j[24]!==a?(c={label:a,tone:"caution",onHandle:C,title:b,icon:u.RevertIcon,dialog:D,disabled:E},j[21]=D,j[22]=E,j[23]=b,j[24]=a,j[25]=c):c=j[25],i=c}return i};function eT(a){return("item"===a.type||"group"===a.type)&&a.renderAsButton}eS.action="restore",eS.displayName="HistoryRestoreAction";let eU=(0,aQ.default)(eT);function eV(a){let{fieldActions:b=[],menuItems:c,menuItemGroups:d}=a,e=[],f=0;for(let a=0;a<b.length;a+=1){let c=b[a];e.push(function a(b,c){return"divider"===b.type?{type:"divider",key:c}:"group"===b.type?{type:"group",key:c,children:b.children.map((b,d)=>a(b,`${c}-${d}-${b.type}`)),disabled:b.disabled,expanded:b.expanded??!0,icon:b.icon,title:b.title,i18n:b.i18n,renderAsButton:b.renderAsButton??!1}:{type:"item",key:c,intent:b.intent,disabled:b.disabled,icon:b.icon,iconRight:b.iconRight,onAction:b.onAction,renderAsButton:b.renderAsButton??!1,selected:b.selected,title:b.title,i18n:b.i18n,tone:b.tone}}(c,`${a}-${c.type}`))}f+=e.length;let g=[];for(let a of d)g.find(b=>b.key===a.id)||g.push({type:"group",key:a.id,children:[],expanded:!0,renderAsButton:!1,title:a.title,i18n:a.i18n});let h=[];for(let b=0;b<c.length;b+=1){let d=c[b],e=d.group&&g.find(a=>a.key===d.group),i="string"==typeof d.disabled?{reason:d.disabled}:d.disabled;d.group&&!e&&(e={type:"group",key:d.group,disabled:i,expanded:!0,icon:d.icon,title:d.group,children:[],renderAsButton:!1},g.push(e)),e?e.children.push({type:"item",key:`${f+b}-item`,hideSelectionIndicator:d.params?.hideSelectionIndicator===!0,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone}):h.push({type:"item",key:`${f+b}-item`,hideSelectionIndicator:d.params?.hideSelectionIndicator===!0,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone})}return[...h,...g,...e]}let eW=["left","bottom"],eX={small:0,medium:1,large:2,full:"auto"};function eY(a){let b,c,d,e=(0,h.c)(16),{dialog:f,referenceElement:i}=a,{t:j}=(0,p.useTranslation)(F),{cancelButtonIcon:k,cancelButtonText:l,confirmButtonIcon:m,confirmButtonText:n,message:o,onCancel:q,onConfirm:r,tone:s}=f;return e[0]!==l||e[1]!==j?(b=l||j("confirm-dialog.cancel-button.fallback-text"),e[0]=l,e[1]=j,e[2]=b):b=e[2],e[3]!==n||e[4]!==j?(c=n||j("confirm-dialog.confirm-button.fallback-text"),e[3]=n,e[4]=j,e[5]=c):c=e[5],e[6]!==k||e[7]!==m||e[8]!==o||e[9]!==q||e[10]!==r||e[11]!==i||e[12]!==b||e[13]!==c||e[14]!==s?(d=(0,g.jsx)(aY.ConfirmPopover,{cancelButtonIcon:k,cancelButtonText:b,confirmButtonIcon:m,confirmButtonText:c,message:o,onCancel:q,onConfirm:r,open:!0,referenceElement:i,tone:s,placement:"top",fallbackPlacements:eW}),e[6]=k,e[7]=m,e[8]=o,e[9]=q,e[10]=r,e[11]=i,e[12]=b,e[13]=c,e[14]=s,e[15]=d):d=e[15],d}function eZ(a){let b,c,d,e=(0,h.c)(12),{dialog:f}=a,l=(0,k.useId)();e[0]!==f.footer?(b=f.footer&&(0,g.jsx)(i.Box,{paddingX:4,paddingY:3,children:f.footer}),e[0]=f.footer,e[1]=b):b=e[1];let m=b,n=!1===f.showCloseButton,o=void 0===f.width?1:eX[f.width];return e[2]!==f.content?(c=(0,g.jsx)(i.Box,{padding:4,children:f.content}),e[2]=f.content,e[3]=c):c=e[3],e[4]!==f.header||e[5]!==f.onClose||e[6]!==l||e[7]!==m||e[8]!==n||e[9]!==o||e[10]!==c?(d=(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,g.jsx)(j.Dialog,{animate:!0,__unstable_hideCloseButton:n,footer:m,header:f.header,id:l,onClose:f.onClose,onClickOutside:f.onClose,width:o,children:c})}),e[4]=f.header,e[5]=f.onClose,e[6]=l,e[7]=m,e[8]=n,e[9]=o,e[10]=c,e[11]=d):d=e[11],d}function e$(a){let b,c,d=(0,h.c)(5),{dialog:e,referenceElement:f}=a;return d[0]!==e?(b=(0,g.jsx)(e_,{dialog:e}),d[0]=e,d[1]=b):b=d[1],d[2]!==f||d[3]!==b?(c=(0,g.jsx)(i.Popover,{content:b,fallbackPlacements:eW,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:f}),d[2]=f,d[3]=b,d[4]=c):c=d[4],c}function e_(a){let b,c,d,e=(0,h.c)(6),{dialog:f}=a,{content:j,onClose:l}=f,{isTopLayer:m}=(0,i.useLayer)(),n=(0,k.useRef)(null);return e[0]!==m||e[1]!==l?(b=a=>{"Escape"===a.key&&m&&l()},e[0]=m,e[1]=l,e[2]=b):b=e[2],(0,i.useGlobalKeyDown)(b),e[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>[n.current],e[3]=c):c=e[3],(0,i.useClickOutsideEvent)(m&&l,c),e[4]!==j?(d=(0,g.jsx)("div",{ref:n,children:j}),e[4]=j,e[5]=d):d=e[5],d}function e0(a){let b,c=(0,h.c)(3),{children:d}=a,{element:e,elements:f}=(0,i.usePortal)(),j=f?.[eE]||e;return c[0]!==d||c[1]!==j?(b=(0,g.jsx)(i.PortalProvider,{element:j,children:d}),c[0]=d,c[1]=j,c[2]=b):b=c[2],b}function e1(a){let b,c,d=(0,h.c)(17),{dialog:e,referenceElement:f}=a,j=void 0===f?null:f,l=(0,k.useId)();if("confirm"===e.type){let a;return d[0]!==e||d[1]!==j?(a=(0,g.jsx)(eY,{dialog:e,referenceElement:j}),d[0]=e,d[1]=j,d[2]=a):a=d[2],a}if("popover"===e.type){let a;return d[3]!==e||d[4]!==j?(a=(0,g.jsx)(e$,{dialog:e,referenceElement:j}),d[3]=e,d[4]=j,d[5]=a):a=d[5],a}if("dialog"===e.type||!e.type){let a;return d[6]!==e?(a=(0,g.jsx)(e0,{children:(0,g.jsx)(eZ,{dialog:e})}),d[6]=e,d[7]=a):a=d[7],a}if("custom"===e.type){let a,b=e?.component;return d[8]!==b?(a=(0,g.jsx)(e0,{children:b}),d[8]=b,d[9]=a):a=d[9],a}return console.warn(`Unsupported modal type ${e.type}`),d[10]!==e.content||d[11]!==e.type?(b=e.content||(0,g.jsxs)(i.Text,{size:1,children:["Unexpected modal type (",(0,g.jsx)("code",{children:e.type}),")"]}),d[10]=e.content,d[11]=e.type,d[12]=b):b=d[12],d[13]!==l||d[14]!==b||d[15]!==e.onClose?(c=(0,g.jsx)(r.Dialog,{id:l,onClose:e.onClose,onClickOutside:e.onClose,width:1,children:b}),d[13]=l,d[14]=b,d[15]=e.onClose,d[16]=c):c=d[16],c}let e2=(0,k.memo)(function(a){let b,c,d,e,f=(0,h.c)(9),{actionStates:i,children:j,referenceElement:l}=a,[m,n]=(0,k.useState)(-1),o=i[m];f[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{n(a)},f[0]=b):b=f[0];let q=b;f[1]!==j?(c=j({handleAction:q}),f[1]=j,f[2]=c):c=f[2];let r=c;return f[3]!==o||f[4]!==l?(d=o&&o.dialog&&(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,g.jsx)(e1,{dialog:o.dialog,referenceElement:l})}),f[3]=o,f[4]=l,f[5]=d):d=f[5],f[6]!==r||f[7]!==d?(e=(0,g.jsxs)(g.Fragment,{children:[d,r]}),f[6]=r,f[7]=d,f[8]=e):e=f[8],e});function e3(a){let b,c,d,e=(0,h.c)(10),{actionStates:f,disabled:j}=a,l=(0,k.useId)(),[m,n]=(0,k.useState)(null);e[0]===Symbol.for("react.memo_cache_sentinel")?(b={placement:"top-end",portal:!0,preventOverflow:!0},e[0]=b):b=e[0];let o=b,{t:q}=(0,p.useTranslation)(F);e[1]!==f||e[2]!==j||e[3]!==l||e[4]!==q?(c=a=>{let{handleAction:b}=a;return(0,g.jsx)(r.MenuButton,{id:`${l}-action-menu`,button:(0,g.jsx)(p.ContextMenuButton,{"aria-label":q("buttons.action-menu-button.aria-label"),disabled:j,"data-testid":"action-menu-button",tooltipProps:{content:q("buttons.action-menu-button.tooltip")}}),menu:(0,g.jsx)(i.Menu,{padding:1,children:f.map((a,c)=>(0,g.jsx)(e4,{actionState:a,disabled:j,index:c,onAction:b},c))}),popover:o,ref:n})},e[1]=f,e[2]=j,e[3]=l,e[4]=q,e[5]=c):c=e[5];let s=c;return e[6]!==f||e[7]!==m||e[8]!==s?(d=(0,g.jsx)(e2,{actionStates:f,referenceElement:m,children:s}),e[6]=f,e[7]=m,e[8]=s,e[9]=d):d=e[9],d}function e4(a){let b,c,d,e,f,i=(0,h.c)(20),{actionState:j,disabled:k,index:l,onAction:m}=a,{onHandle:n}=j;i[0]!==l||i[1]!==m||i[2]!==n?(b=()=>{m(l),n&&n()},i[0]=l,i[1]=m,i[2]=n,i[3]=b):b=i[3];let o=b;i[4]!==j.shortcut?(c=j.shortcut?String(j.shortcut).split("+").map(e5):void 0,i[4]=j.shortcut,i[5]=c):c=i[5];let p=c;i[6]!==j.label?(d=j.label.replace(" ",""),i[6]=j.label,i[7]=d):d=i[7];let q=`action-${d}`,s=k||!!j.disabled;return i[8]!==j.disabled||i[9]!==j.title?(e=j.disabled&&{tooltipProps:{content:j.title}},i[8]=j.disabled,i[9]=j.title,i[10]=e):e=i[10],i[11]!==j.icon||i[12]!==j.label||i[13]!==j.tone||i[14]!==o||i[15]!==p||i[16]!==q||i[17]!==s||i[18]!==e?(f=(0,g.jsx)(r.MenuItem,{"data-testid":q,disabled:s,hotkeys:p,icon:j.icon,onClick:o,text:j.label,tone:j.tone,...e}),i[11]=j.icon,i[12]=j.label,i[13]=j.tone,i[14]=o,i[15]=p,i[16]=q,i[17]=s,i[18]=e,i[19]=f):f=i[19],f}function e5(a){return a.slice(0,1).toUpperCase()+a.slice(1)}function e6(a){var b,c;let d,e,f,j,l,m,n,q,s,t,v,w,x=(0,h.c)(43),{nonReleaseVersions:y,selectedPerspective:z,onSelectBundle:A,onCopyToDraftsNavigate:B,documentType:C,releasesLoading:D,releases:E}=a,{t:F}=(0,p.useTranslation)(),[G,H]=(0,k.useState)(!1),[I,J]=(0,k.useState)(null);x[0]!==z?(e=a=>(0,o.getVersionFromId)(a)===z,x[0]=z,x[1]=e):e=x[1],x[2]!==y||x[3]!==e?(b=y,c=e,f=[-1===(d=b.findIndex(c))?void 0:b[d],-1===d?b:b.slice(0,d).concat(b.slice(d+1))],x[2]=y,x[3]=e,x[4]=f):f=x[4];let[K,L]=f,M=(0,k.useRef)(null);if(x[5]===Symbol.for("react.memo_cache_sentinel")?(j=a=>{a.target&&"matches"in a.target&&"function"==typeof a.target.matches&&a.target.matches("[data-portal] *")||H(!1)},l=()=>[M.current],x[5]=j,x[6]=l):(j=x[5],l=x[6]),(0,i.useClickOutsideEvent)(j,l),0===y.length)return null;if(x[7]!==C||x[8]!==B||x[9]!==A||x[10]!==E||x[11]!==D||x[12]!==K?(m=K&&(w=(0,o.getVersionFromId)(K),(0,g.jsx)(p.VersionChip,{selected:!0,text:w,tone:"default",onClick:()=>A(w),onCopyToDraftsNavigate:B,contextValues:{documentId:(0,o.getPublishedId)(K),releases:E,releasesLoading:D,documentType:C,bundleId:w,isVersion:!0}},K)),x[7]=C,x[8]=B,x[9]=A,x[10]=E,x[11]=D,x[12]=K,x[13]=m):m=x[13],x[14]!==G||x[15]!==L.length||x[16]!==F?(n=L.length>0?(0,g.jsx)(r.Tooltip,{content:F("release.chip.tooltip.other-versions",{count:L.length}),fallbackPlacements:[],portal:!0,placement:G?"top":"bottom",children:(0,g.jsx)(p.Chip,{mode:"bleed",fontSize:1,muted:!0,selected:G,iconRight:G?u.ChevronUpIcon:u.ChevronDownIcon,ref:J,onClick:()=>H(e7),text:F("release.chip.button.other-versions",{count:L.length})})}):null,x[14]=G,x[15]=L.length,x[16]=F,x[17]=n):n=x[17],x[18]!==C||x[19]!==B||x[20]!==A||x[21]!==L||x[22]!==E||x[23]!==D||x[24]!==z){let a;x[26]!==C||x[27]!==B||x[28]!==A||x[29]!==E||x[30]!==D||x[31]!==z?(a=a=>{let b=(0,o.getVersionFromId)(a);return(0,g.jsx)(p.VersionChip,{selected:z===b,text:b,disabled:!1,contextMenuPortal:!1,tone:"default",onClick:()=>A(b),onCopyToDraftsNavigate:B,contextValues:{documentId:(0,o.getPublishedId)(a),releases:E,releasesLoading:D,documentType:C,bundleId:b,isVersion:!0}},a)},x[26]=C,x[27]=B,x[28]=A,x[29]=E,x[30]=D,x[31]=z,x[32]=a):a=x[32],q=L.map(a),x[18]=C,x[19]=B,x[20]=A,x[21]=L,x[22]=E,x[23]=D,x[24]=z,x[25]=q}else q=x[25];return x[33]!==q?(s=(0,g.jsx)(i.Container,{width:1,children:(0,g.jsx)(i.Flex,{width:1,padding:3,gap:2,wrap:"wrap",children:q})}),x[33]=q,x[34]=s):s=x[34],x[35]!==G||x[36]!==I||x[37]!==s?(t=(0,g.jsx)(r.Popover,{animate:!1,open:G,portal:!0,arrow:!0,ref:M,placement:"bottom",referenceElement:I,zOffset:10,content:s}),x[35]=G,x[36]=I,x[37]=s,x[38]=t):t=x[38],x[39]!==m||x[40]!==n||x[41]!==t?(v=(0,g.jsxs)(g.Fragment,{children:[m,n,t]}),x[39]=m,x[40]=n,x[41]=t,x[42]=v):v=x[42],v}function e7(a){return!a}let e8=a=>{let b=(0,h.c)(16),{release:c}=a,{t:d}=(0,p.useTranslation)();if("archived"===c.state){let a,c;return b[0]!==d?(a=d("release.chip.tooltip.archived"),b[0]=d,b[1]=a):a=b[1],b[2]!==a?(c=(0,g.jsx)(i.Text,{size:1,children:a}),b[2]=a,b[3]=c):c=b[3],c}if("asap"===c.metadata.releaseType){let a,c;return b[4]!==d?(a=d("release.type.asap"),b[4]=d,b[5]=a):a=b[5],b[6]!==a?(c=(0,g.jsx)(i.Text,{size:1,children:a}),b[6]=a,b[7]=c):c=b[7],c}if("scheduled"===c.metadata.releaseType){let a,e="active"===c.state;return b[8]!==e||b[9]!==c||b[10]!==d?(a=c.metadata.intendedPublishAt&&(0,g.jsx)(i.Text,{size:1,children:e?(0,g.jsx)(p.Translate,{t:d,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,p.formatRelativeLocalePublishDate)(c)}}):(0,g.jsx)(p.Translate,{t:d,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,p.formatRelativeLocalePublishDate)(c)}})}),b[8]=e,b[9]=c,b[10]=d,b[11]=a):a=b[11],a}if("undecided"===c.metadata.releaseType){let a,c;return b[12]!==d?(a=d("release.type.undecided"),b[12]=d,b[13]=a):a=b[13],b[14]!==a?(c=(0,g.jsx)(i.Text,{size:1,children:a}),b[14]=a,b[15]=c):c=b[15],c}return null},e9={dateStyle:"medium",timeStyle:"short"},fa=(0,k.memo)(function(){let a,b,c,d,e,f,j,k,l,m,n,q,r,s,t,u,v,w,x,y,z,A,B=(0,h.c)(112),{selectedReleaseId:C,selectedPerspectiveName:D}=(0,p.usePerspective)(),{t:E}=(0,p.useTranslation)(),F=(0,p.useSetPerspective)(),{params:G,setParams:H}=eb(),I=(0,p.useDateTimeFormat)(e9),{loading:J}=(0,p.useActiveReleases)(),K=(0,p.useSchema)(),{editState:L,displayed:M,documentType:N,documentId:O}=dj(),P=M&&!M._createdAt,Q=(0,p.useGetDefaultPerspective)(),R=G?.historyVersion;B[0]!==M||B[1]!==O||B[2]!==R?(a={historyVersion:R,displayed:M,documentId:O},B[0]=M,B[1]=O,B[2]=R,B[3]=a):a=B[3];let S=(0,p.useFilteredReleases)(a);B[4]!==O?(b={documentId:O},B[4]=O,B[5]=b):b=B[5];let{data:T}=(0,p.useDocumentVersions)(b);B[6]!==T?(c=T&&T.length>0&&!T.some(fb),B[6]=T,B[7]=c):c=B[7];let U=c,V=(0,p.useWorkspace)(),{onSetScheduledDraftPerspective:W}=(0,p.useSingleDocRelease)();B[8]!==W||B[9]!==G?.scheduledDraft||B[10]!==F?(d=()=>{G?.scheduledDraft?W(""):F("drafts")},B[8]=W,B[9]=G?.scheduledDraft,B[10]=F,B[11]=d):d=B[11];let X=d;B[12]!==Q||B[13]!==W||B[14]!==G||B[15]!==H||B[16]!==F?(e=a=>{if((0,p.isReleaseDocument)(a)&&(0,p.isCardinalityOneRelease)(a))return void W((0,p.getReleaseIdFromReleaseDocumentId)(a._id));"published"===a&&G?.historyVersion&&H({...G,rev:G?.historyEvent||void 0,since:void 0,historyVersion:void 0});let b=(0,p.isReleaseDocument)(a)?(0,p.getReleaseIdFromReleaseDocumentId)(a._id):a===Q?"":a;G?.scheduledDraft?H({...G,scheduledDraft:void 0},{perspective:b}):F(b)},B[12]=Q,B[13]=W,B[14]=G,B[15]=H,B[16]=F,B[17]=e):e=B[17];let Y=e;if(B[18]!==N||B[19]!==K){let a=K.get(N);f=!!a&&!0===a.liveEdit,B[18]=N,B[19]=K,B[20]=f}else f=B[20];let Z=f;a:{if(Z&&!C){j=!1;break a}j=!L?.published}let $=j;B[21]!==M?._id||B[22]!==L?.version||B[23]!==G?(k=a=>{if(!G?.historyVersion){let b=L?.version&&(0,p.isGoingToUnpublish)(L?.version)&&(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===(0,o.getVersionFromId)(L?.version?._id);return{selected:!!((0,p.getReleaseIdFromReleaseDocumentId)(a._id)===(0,o.getVersionFromId)(M?._id||"")||b)}}let b=(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===G.historyVersion;return{selected:b,disabled:b}},B[21]=M?._id,B[22]=L?.version,B[23]=G,B[24]=k):k=B[24];let _=k;B[25]!==M?._id||B[26]!==L?.draft?._id||B[27]!==Z||B[28]!==D||B[29]!==C?(l=()=>!!(Z&&!L?.draft?._id&&!C||(0,o.isPublishedId)(M?._id||"")&&(0,p.isPublishedPerspective)(D||"")),B[25]=M?._id,B[26]=L?.draft?._id,B[27]=Z,B[28]=D,B[29]=C,B[30]=l):l=B[30];let aa=l();b:{let a=M?._id||"";if(aa||G?.historyVersion||D||(0,o.isVersionId)(a)){m=!1;break b}if((0,o.isDraftId)(a)){m=!0;break b}if((0,o.isPublishedId)(a)&&L?.published&&(0,p.isPublishedPerspective)(D||"")){m=!1;break b}m=!0}let ab=m;B[31]!==L?.draft||B[32]!==P||B[33]!==Z||B[34]!==U||B[35]!==C?(n=()=>!!U||!!P&&!!C||(!!L?.draft||!!Z)&&!!(P&&C||Z),B[31]=L?.draft,B[32]=P,B[33]=Z,B[34]=U,B[35]=C,B[36]=n):n=B[36];let ac=n(),ad=V.document.drafts?.enabled;if(B[37]!==T||B[38]!==S.currentReleases){let a;B[40]!==S.currentReleases?(a=a=>!((0,o.isPublishedId)(a)||(0,o.isDraftId)(a))&&!S.currentReleases.some(b=>(0,p.getReleaseIdFromReleaseDocumentId)(b._id)===(0,o.getVersionFromId)(a)),B[40]=S.currentReleases,B[41]=a):a=B[41],q=T.filter(a),B[37]=T,B[38]=S.currentReleases,B[39]=q}else q=B[39];let ae=q;B[42]!==I||B[43]!==L?.published||B[44]!==E?(r=(0,g.jsx)(i.Text,{size:1,children:L?.published&&L?.published?._updatedAt?(0,g.jsx)(p.Translate,{t:E,i18nKey:"release.chip.tooltip.published-date",values:{date:I.format(new Date(L?.published._updatedAt))}}):(0,g.jsx)(g.Fragment,{children:E("release.chip.tooltip.not-published")})}),B[42]=I,B[43]=L?.published,B[44]=E,B[45]=r):r=B[45],B[46]!==Y?(s=()=>Y("published"),B[46]=Y,B[47]=s):s=B[47],B[48]!==E?(t=E("release.chip.published"),B[48]=E,B[49]=t):t=B[49];let af=L?.published?._id||L?.id||"",ag=!L?.published;return B[50]!==N||B[51]!==S.notCurrentReleases||B[52]!==J||B[53]!==af||B[54]!==ag?(u={documentId:af,releases:S.notCurrentReleases,releasesLoading:J,documentType:N,bundleId:"published",isVersion:!1,disabled:ag},B[50]=N,B[51]=S.notCurrentReleases,B[52]=J,B[53]=af,B[54]=ag,B[55]=u):u=B[55],B[56]!==X||B[57]!==aa||B[58]!==$||B[59]!==r||B[60]!==s||B[61]!==t||B[62]!==u?(v=(0,g.jsx)(p.VersionChip,{tooltipContent:r,disabled:$,onClick:s,selected:aa,text:t,tone:"positive",onCopyToDraftsNavigate:X,contextValues:u}),B[56]=X,B[57]=aa,B[58]=$,B[59]=r,B[60]=s,B[61]=t,B[62]=u,B[63]=v):v=B[63],B[64]!==I||B[65]!==N||B[66]!==L?.draft||B[67]!==L?.id||B[68]!==L?.published?._id||B[69]!==S.notCurrentReleases||B[70]!==X||B[71]!==Y||B[72]!==ac||B[73]!==ad||B[74]!==ab||B[75]!==Z||B[76]!==J||B[77]!==E?(w=ad&&(0,g.jsx)(p.VersionChip,{tooltipContent:(0,g.jsx)(i.Text,{size:1,children:L?.draft?(0,g.jsx)(g.Fragment,{children:L?.draft._updatedAt?(0,g.jsx)(p.Translate,{t:E,i18nKey:"release.chip.tooltip.edited-date",values:{date:I.format(new Date(L?.draft._updatedAt))}}):(0,g.jsx)(p.Translate,{t:E,i18nKey:"release.chip.tooltip.created-date",values:{date:I.format(new Date(L?.draft._createdAt))}})}):(0,g.jsx)(g.Fragment,{children:E(Z?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:ab,disabled:ac,text:E("release.chip.draft"),tone:L?.draft?"caution":"neutral",onClick:()=>Y("drafts"),onCopyToDraftsNavigate:X,contextValues:{documentId:L?.draft?._id||L?.published?._id||L?.id||"",documentType:N,releases:S.notCurrentReleases,releasesLoading:J,bundleId:"draft",isVersion:!1}}),B[64]=I,B[65]=N,B[66]=L?.draft,B[67]=L?.id,B[68]=L?.published?._id,B[69]=S.notCurrentReleases,B[70]=X,B[71]=Y,B[72]=ac,B[73]=ad,B[74]=ab,B[75]=Z,B[76]=J,B[77]=E,B[78]=w):w=B[78],B[79]!==M?._id||B[80]!==N||B[81]!==S.inCreation||B[82]!==S.notCurrentReleases||B[83]!==X||B[84]!==J||B[85]!==E?(x=S.inCreation&&(0,g.jsx)(p.ReleaseTitle,{title:S.inCreation.metadata.title,fallback:E("release.placeholder-untitled-release"),enableTooltip:!1,children:a=>{let{displayTitle:b,fullTitle:c,isTruncated:d}=a;return(0,g.jsx)(p.VersionChip,{tooltipContent:d?(0,g.jsxs)(i.Stack,{space:2,style:{maxWidth:"300px"},children:[(0,g.jsx)(i.Text,{size:1,weight:"medium",children:c}),(0,g.jsx)(e8,{release:S.inCreation})]}):(0,g.jsx)(e8,{release:S.inCreation}),selected:!0,onClick:fc,locked:!1,tone:(0,p.getReleaseTone)(S.inCreation),text:b,onCopyToDraftsNavigate:X,contextValues:{documentId:M?._id||"",documentType:N,disabled:!0,releases:S.notCurrentReleases,releasesLoading:J,bundleId:(0,p.getReleaseIdFromReleaseDocumentId)(S.inCreation._id),isVersion:!0,release:S.inCreation}})}}),B[79]=M?._id,B[80]=N,B[81]=S.inCreation,B[82]=S.notCurrentReleases,B[83]=X,B[84]=J,B[85]=E,B[86]=x):x=B[86],B[87]!==M||B[88]!==N||B[89]!==L?.version||B[90]!==S.currentReleases||B[91]!==S.notCurrentReleases||B[92]!==_||B[93]!==X||B[94]!==Y||B[95]!==J||B[96]!==E?(y=M&&S.currentReleases?.map(a=>(0,g.jsx)(p.ReleaseTitle,{title:a.metadata.title,fallback:E("release.placeholder-untitled-release"),enableTooltip:!1,children:b=>{let{displayTitle:c,fullTitle:d,isTruncated:e}=b;return(0,g.jsx)(p.VersionChip,{tooltipContent:e?(0,g.jsxs)(i.Stack,{space:2,style:{maxWidth:"300px"},children:[(0,g.jsx)(i.Text,{size:1,weight:"medium",children:d}),(0,g.jsx)(e8,{release:a})]}):(0,g.jsx)(e8,{release:a}),..._(a),onClick:()=>Y(a),text:c,tone:(0,p.getReleaseTone)(a),locked:(0,p.isReleaseScheduledOrScheduling)(a),onCopyToDraftsNavigate:X,contextValues:{documentId:M?._id||"",documentType:N,releases:S.notCurrentReleases,releasesLoading:J,bundleId:(0,p.getReleaseIdFromReleaseDocumentId)(a._id),isVersion:!0,release:a,isGoingToUnpublish:!!L?.version&&(0,p.isGoingToUnpublish)(L?.version)}})}},a._id)),B[87]=M,B[88]=N,B[89]=L?.version,B[90]=S.currentReleases,B[91]=S.notCurrentReleases,B[92]=_,B[93]=X,B[94]=Y,B[95]=J,B[96]=E,B[97]=y):y=B[97],B[98]!==N||B[99]!==S.notCurrentReleases||B[100]!==X||B[101]!==Y||B[102]!==J||B[103]!==ae||B[104]!==D?(z=(0,g.jsx)(e6,{nonReleaseVersions:ae,selectedPerspective:D,onSelectBundle:Y,onCopyToDraftsNavigate:X,releases:S.notCurrentReleases,releasesLoading:J,documentType:N}),B[98]=N,B[99]=S.notCurrentReleases,B[100]=X,B[101]=Y,B[102]=J,B[103]=ae,B[104]=D,B[105]=z):z=B[105],B[106]!==v||B[107]!==w||B[108]!==x||B[109]!==y||B[110]!==z?(A=(0,g.jsxs)(g.Fragment,{children:[v,w,x,y,z]}),B[106]=v,B[107]=w,B[108]=x,B[109]=y,B[110]=z,B[111]=A):A=B[111],A});function fb(a){return!(0,o.isVersionId)(a)}function fc(){}let fd=(0,aI.styled)(i.Card).withConfig({displayName:"HorizontalScroller",componentId:"sc-4smkq-0"})(a=>{let b=(0,bv.getTheme_v2)(a.theme);return aI.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${a.$showGradient&&aI.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,bv.rgba)(b.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),fe=(0,k.memo)((0,k.forwardRef)(function(a,b){let c,d,e,f,j,l,m,n=(0,h.c)(41),{menuItems:o}=a,{editState:q,onMenuAction:s,onPaneClose:t,onPaneSplit:v,onSetMaximizedPane:w,menuItemGroups:x,schemaType:y,connectionState:z,views:A,unstable_languageFilter:B,documentId:C}=dj(),{features:D}=dr(),{index:E,BackLink:G,hasGroupSiblings:H}=eb(),{maximizedPane:I}=eB(),{actions:J}=(0,p.useFieldActions)(),[K,L]=(0,k.useState)(null),M=(0,k.useRef)(null),N=function(a){let b,c,d=(0,h.c)(3),[e,f]=(0,k.useState)(!1);return d[0]!==a?(b=()=>{let b=()=>{let b=a.current;if(!b)return;let{scrollWidth:c,clientWidth:d}=b;if(!(c>d))return void f(!1);let{scrollLeft:e}=b;f(!(e+d>=c))},{intersectionObserver:c,mutationObserver:d}=function(){b();let c=a.current;if(!c)return{intersectionObserver:null,mutationObserver:null};let d=new IntersectionObserver(a=>{let b=a[0];b&&f(!b.isIntersecting)}),e=()=>{d.disconnect();let a=c.children[c.children.length-1];d.observe(a)};e();let g=new MutationObserver(()=>{e(),b()});return g.observe(c,{childList:!0,subtree:!1}),{intersectionObserver:d,mutationObserver:g}}();return()=>{c?.disconnect(),d?.disconnect()}},c=[a],d[0]=a,d[1]=b,d[2]=c):(b=d[1],c=d[2]),(0,k.useEffect)(b,c),e}(M),O=(0,aZ.useTelemetry)();n[0]!==J||n[1]!==x||n[2]!==o||n[3]!==s?(c=eV({actionHandler:s,fieldActions:J,menuItems:o,menuItemGroups:x}),n[0]=J,n[1]=x,n[2]=o,n[3]=s,n[4]=c):c=n[4];let P=c;n[5]!==P?(d=P.filter(eT),n[5]=P,n[6]=d):d=n[6];let Q=d;n[7]!==P?(e=P.filter(eU),n[7]=P,n[8]=e):e=n[8];let R=e,{collapsed:S,isLast:T}=cN(),U=T&&!S?-1:0,V=D.splitViews&&v&&A.length>1,W=V&&H,X=D.backButton&&E>0,Y=!W&&!X&&!!G,{t:Z}=(0,p.useTranslation)(F),$=I?.pane&&"object"==typeof I.pane&&"document"===I.pane.type&&I.pane.options.id===C;n[9]!==$||n[10]!==w||n[11]!==O?(f=()=>{w?.(),$?O.log(eG):O.log(eF)},n[9]=$,n[10]=w,n[11]=O,n[12]=f):f=n[12];let _=f;n[13]===Symbol.for("react.memo_cache_sentinel")?(j=(0,g.jsx)(eK,{}),n[13]=j):j=n[13];let aa=j;n[14]!==G||n[15]!==X||n[16]!==Z?(l=X&&(0,g.jsx)(r.Button,{as:G,"data-as":"a",icon:u.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:Z("pane-header.back-button.text")}}),n[14]=G,n[15]=X,n[16]=Z,n[17]=l):l=n[17];let ab=l;return n[18]!==G||n[19]!==ab||n[20]!==S||n[21]!==z||n[22]!==R||n[23]!==q||n[24]!==_||n[25]!==$||n[26]!==Q||n[27]!==t||n[28]!==v||n[29]!==w||n[30]!==b||n[31]!==K||n[32]!==y||n[33]!==N||n[34]!==Y||n[35]!==V||n[36]!==W||n[37]!==Z||n[38]!==U||n[39]!==B?(m=(0,g.jsx)(r.TooltipDelayGroupProvider,{children:S?(0,g.jsx)(c4,{border:!0,ref:b,loading:"connecting"===z&&!q?.draft&&!q?.published,title:aa,tabIndex:U,backButton:ab}):(0,g.jsx)(i.Card,{hidden:S,style:{lineHeight:0},borderBottom:!0,children:(0,g.jsxs)(i.Flex,{gap:3,paddingY:3,children:[(0,g.jsx)(fd,{$showGradient:N,children:(0,g.jsx)(i.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:M,children:(0,g.jsx)(fa,{})})}),(0,g.jsx)(i.Box,{flex:"none",paddingRight:3,children:(0,g.jsxs)(i.Flex,{align:"center",gap:1,children:[B.length>0&&(0,g.jsx)(g.Fragment,{children:B.map((a,b)=>(0,g.jsx)(a,{schemaType:y},`language-filter-${b}`))}),Q.map(fh),q&&(0,g.jsx)(h8,{group:"paneActions",children:a=>{let{states:b}=a;return(0,g.jsx)(ff,{contextMenuNodes:R,setReferenceElement:L,referenceElement:K,states:b})}}),V&&(0,g.jsx)(r.Button,{"aria-label":Z("buttons.split-pane-button.aria-label"),icon:u.SplitVerticalIcon,mode:"bleed",onClick:v,tooltipProps:{content:Z("buttons.split-pane-button.tooltip")}},"split-pane-button"),w&&(0,g.jsx)(r.Button,{"aria-label":Z($?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:$?u.CollapseIcon:u.ExpandIcon,mode:"bleed",onClick:_,tooltipProps:{content:Z($?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":$?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),W&&(0,g.jsx)(r.Button,{icon:u.CloseIcon,mode:"bleed",onClick:t,tooltipProps:{content:Z("buttons.split-pane-close-button.title")}},"close-view-button"),Y&&(0,g.jsx)(r.Button,{icon:u.CloseIcon,mode:"bleed",tooltipProps:{content:Z("buttons.split-pane-close-group-button.title")},as:G},"close-view-button")]})})]})})}),n[18]=G,n[19]=ab,n[20]=S,n[21]=z,n[22]=R,n[23]=q,n[24]=_,n[25]=$,n[26]=Q,n[27]=t,n[28]=v,n[29]=w,n[30]=b,n[31]=K,n[32]=y,n[33]=N,n[34]=Y,n[35]=V,n[36]=W,n[37]=Z,n[38]=U,n[39]=B,n[40]=m):m=n[40],m})),ff=(0,k.memo)(function(a){let b,c,d=(0,h.c)(7),{setReferenceElement:e,referenceElement:f,contextMenuNodes:i}=a,j=(0,k.useDeferredValue)(a.states);return d[0]!==j?(b=j.filter(fi),d[0]=j,d[1]=b):b=d[1],d[2]!==i||d[3]!==f||d[4]!==e||d[5]!==b?(c=(0,g.jsx)(fg,{setReferenceElement:e,referenceElement:f,contextMenuNodes:i,states:b}),d[2]=i,d[3]=f,d[4]=e,d[5]=b,d[6]=c):c=d[6],c}),fg=(0,k.memo)(function(a){let b,c,d=(0,h.c)(8),{states:e,setReferenceElement:f,contextMenuNodes:i,referenceElement:j}=a;d[0]!==i||d[1]!==f||d[2]!==e?(b=a=>{let{handleAction:b}=a;return(0,g.jsx)("div",{ref:f,children:(0,g.jsx)(cX,{nodes:i,actionsNodes:e.length>0?e.map((a,c)=>(0,g.jsx)(e4,{actionState:a,disabled:!!a.disabled,index:c,onAction:b},a.label)):void 0},"context-menu")})},d[0]=i,d[1]=f,d[2]=e,d[3]=b):b=d[3];let k=b;return d[4]!==j||d[5]!==k||d[6]!==e?(c=(0,g.jsx)(e2,{actionStates:e,referenceElement:j,children:k}),d[4]=j,d[5]=k,d[6]=e,d[7]=c):c=d[7],c});function fh(a){return(0,g.jsx)(c6,{node:a},a.key)}function fi(a){return!a.action||a.action!==eS.action}function fj(a){let b,c,d=(0,h.c)(3),{size:e}=a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(b={pointerEvents:"none",visibility:"hidden",width:0},d[0]=b):b=d[0],d[1]!==e?(c=(0,g.jsx)(r.Button,{"aria-hidden":!0,disabled:!0,size:e,style:b,text:"-"}),d[1]=e,d[2]=c):c=d[2],c}let fk={primary:"primary",success:"positive",warning:"caution",danger:"critical"},fl=(0,k.memo)(function(a){let b,c,d=(0,h.c)(4),{states:e}=a;return 0===e.length?null:(d[0]!==e?(b=e.map(fp),d[0]=e,d[1]=b):b=d[1],d[2]!==b?(c=(0,g.jsx)(i.Inline,{space:1,children:b}),d[2]=b,d[3]=c):c=d[3],c)}),fm=(0,k.memo)(function(a){let b,c=(0,h.c)(2),d=(0,k.useDeferredValue)(a.states);return c[0]!==d?(b=(0,g.jsx)(fl,{states:d}),c[0]=d,c[1]=b):b=c[1],b});function fn(){let a,b=(0,h.c)(3),{badges:c,editState:d}=dj();return d&&c?(b[0]!==c||b[1]!==d?(a=(0,g.jsx)(h9,{badges:c,badgeProps:d,children:fo}),b[0]=c,b[1]=d,b[2]=a):a=b[2],a):null}function fo(a){let{states:b}=a;return(0,g.jsx)(fm,{states:b})}function fp(a,b){return(0,g.jsx)(r.Tooltip,{content:a.title,disabled:!a.title,placement:"top",portal:!0,children:(0,g.jsx)(i.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:a.color?fk[a.color]:void 0,style:{whiteSpace:"nowrap"},children:a.label})},`${a.label}-${b}`)}let fq={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},fr=a=>{let b,c,d,e,f,i,j,l,m=(0,h.c)(41),{id:n,type:q,draft:r,version:s}=a;m[0]!==s?(b=s?._id&&(0,o.getVersionFromId)(s._id),m[0]=s,m[1]=b):b=m[1];let t=b,{delete:v}=(0,p.useDocumentOperation)(n,q,t),[w,x]=(0,k.useState)(!1),[y,z]=(0,k.useState)(!1),{t:A}=(0,p.useTranslation)(F);m[2]!==n?(c={documentId:n},m[2]=n,m[3]=c):c=m[3];let{sortedDocumentList:B}=(0,p.useDocumentVersionTypeSortedList)(c);m[4]!==B?(d=B.some(p.isReleaseScheduledOrScheduling),m[4]=B,m[5]=d):d=m[5];let C=d;m[6]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{z(!1)},m[6]=e):e=m[6];let D=e;m[7]!==v?(f=a=>{z(!1),x(!0),v.execute(a),x(!1)},m[7]=v,m[8]=f):f=m[8];let E=f;m[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{z(!0)},m[9]=i):i=m[9];let G=i;m[10]!==t||m[11]!==n||m[12]!==q?(j={id:n,type:q,version:t,permission:"delete"},m[10]=t,m[11]=n,m[12]=q,m[13]=j):j=m[13];let[H,I]=(0,p.useDocumentPairPermissions)(j),J=(0,p.useCurrentUser)();a:{let a,b,c,d,e;if(!I&&!H?.granted){let a,b,c;m[14]!==A?(a=A("action.delete.label"),m[14]=A,m[15]=a):a=m[15],m[16]!==J?(b=(0,g.jsx)(p.InsufficientPermissionsMessage,{context:"delete-document",currentUser:J}),m[16]=J,m[17]=b):b=m[17],m[18]!==b||m[19]!==a?(c={tone:"critical",icon:u.TrashIcon,disabled:!0,label:a,title:b},m[18]=b,m[19]=a,m[20]=c):c=m[20],l=c;break a}m[21]!==v.disabled||m[22]!==C||m[23]!==A?(a=()=>C?A("action.delete.disabled.scheduled-release"):v.disabled?A(fq[v.disabled]):"",m[21]=v.disabled,m[22]=C,m[23]=A,m[24]=a):a=m[24];let f=a,h=w||C||!!v.disabled||I;m[25]!==f?(b=f(),m[25]=f,m[26]=b):b=m[26],m[27]!==w||m[28]!==A?(c=A(w?"action.delete.running.label":"action.delete.label"),m[27]=w,m[28]=A,m[29]=c):c=m[29],m[30]!==r?._id||m[31]!==E||m[32]!==n||m[33]!==y||m[34]!==q?(d=y&&{type:"custom",component:(0,g.jsx)(hR,{action:"delete",id:r?._id||n,type:q,onCancel:D,onConfirm:E})},m[30]=r?._id,m[31]=E,m[32]=n,m[33]=y,m[34]=q,m[35]=d):d=m[35],m[36]!==h||m[37]!==b||m[38]!==c||m[39]!==d?(e={tone:"critical",icon:u.TrashIcon,disabled:h,title:b,label:c,shortcut:"Ctrl+Alt+D",onHandle:G,dialog:d},m[36]=h,m[37]=b,m[38]=c,m[39]=d,m[40]=e):e=m[40],l=e}return l};function fs(a){let b,c,d,e,f,j,l=(0,h.c)(18),{publishedExists:m,onCancel:n,onConfirm:o}=a,{t:q}=(0,p.useTranslation)(F),s=`deletion-confirmation-${(0,k.useId)()}`;return l[0]!==q?(b=q("action.discard-changes.confirm-dialog.header.text"),l[0]=q,l[1]=b):b=l[1],l[2]!==q?(c=q("action.discard-changes.label"),l[2]=q,l[3]=c):c=l[3],l[4]!==o||l[5]!==c?(d={confirmButton:{text:c,onClick:o}},l[4]=o,l[5]=c,l[6]=d):d=l[6],l[7]!==m||l[8]!==q?(e=q(m?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),l[7]=m,l[8]=q,l[9]=e):e=l[9],l[10]!==e?(f=(0,g.jsx)(i.Text,{size:1,children:e}),l[10]=e,l[11]=f):f=l[11],l[12]!==s||l[13]!==n||l[14]!==b||l[15]!==d||l[16]!==f?(j=(0,g.jsx)(r.Dialog,{width:1,id:s,header:b,footer:d,onClose:n,onClickOutside:n,children:f}),l[12]=s,l[13]=n,l[14]=b,l[15]=d,l[16]=f,l[17]=j):j=l[17],j}fr.action="delete",fr.displayName="DeleteAction";let ft={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},fu=a=>{let b,c,d,e,f,i,j=(0,h.c)(31),{id:l,type:m,published:n,version:q,draft:r}=a;j[0]!==q?(b=q?._id&&(0,o.getVersionFromId)(q._id),j[0]=q,j[1]=b):b=j[1];let s=b,{discardChanges:t}=(0,p.useDocumentOperation)(l,m,s),[v,w]=(0,k.useState)(!1);j[2]!==s||j[3]!==l||j[4]!==m?(c={id:l,type:m,version:s,permission:"discardDraft"},j[2]=s,j[3]=l,j[4]=m,j[5]=c):c=j[5];let[x,y]=(0,p.useDocumentPairPermissions)(c),z=(0,p.useCurrentUser)(),{displayed:A}=dj(),{t:B}=(0,p.useTranslation)(F),C=A?._id&&(0,o.isPublishedId)(A?._id);j[6]!==t?(d=()=>{t.execute(),w(!1)},j[6]=t,j[7]=d):d=j[7];let D=d;j[8]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{w(!1)},j[8]=e):e=j[8];let E=e;j[9]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{w(!0)},j[9]=f):f=j[9];let G=f;a:{let a,b,c,d;if(!q&&!r||C){i=null;break a}if(!y&&!x?.granted){let a,b,c;j[10]!==B?(a=B("action.discard-changes.label"),j[10]=B,j[11]=a):a=j[11],j[12]!==z?(b=(0,g.jsx)(p.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:z}),j[12]=z,j[13]=b):b=j[13],j[14]!==a||j[15]!==b?(c={tone:"critical",icon:u.ResetIcon,disabled:!0,label:a,title:b},j[14]=a,j[15]=b,j[16]=c):c=j[16],i=c;break a}let e=!!t.disabled||y,f=t.disabled&&ft[t.disabled]||"";j[17]!==B||j[18]!==f?(a=B(f),j[17]=B,j[18]=f,j[19]=a):a=j[19],j[20]!==B?(b=B("action.discard-changes.label"),j[20]=B,j[21]=b):b=j[21],j[22]!==D||j[23]!==v||j[24]!==n?(c=v&&{type:"custom",component:(0,g.jsx)(fs,{onCancel:E,onConfirm:D,publishedExists:!!n})},j[22]=D,j[23]=v,j[24]=n,j[25]=c):c=j[25],j[26]!==b||j[27]!==c||j[28]!==e||j[29]!==a?(d={tone:"critical",icon:u.ResetIcon,disabled:e,title:a,label:b,onHandle:G,dialog:c},j[26]=b,j[27]=c,j[28]=e,j[29]=a,j[30]=d):d=j[30],i=d}return i};fu.action="discardChanges",fu.displayName="DiscardChangesAction";let fv={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},fw=a=>{let b,c,d,e,f=(0,h.c)(31),{id:i,type:j,release:l,mapDocument:m,version:n}=a,q=(0,p.useDocumentStore)();f[0]!==n?(b=n?._id&&(0,o.getVersionFromId)(n._id),f[0]=n,f[1]=b):b=f[1];let r=b,{duplicate:t}=(0,p.useDocumentOperation)(i,j,r),{navigateIntent:v}=(0,s.useRouter)(),[w,x]=(0,k.useState)(!1);f[2]!==i||f[3]!==l||f[4]!==j?(c={id:i,type:j,version:l,permission:"duplicate"},f[2]=i,f[3]=l,f[4]=j,f[5]=c):c=f[5];let[y,z]=(0,p.useDocumentPairPermissions)(c),{t:A}=(0,p.useTranslation)(F),B=(0,p.useCurrentUser)();f[6]!==q.pair||f[7]!==t||f[8]!==i||f[9]!==m||f[10]!==v||f[11]!==j?(d=async()=>{let a=(0,aH.uuid)();x(!0);let b=(0,aL.firstValueFrom)(q.pair.operationEvents(i,j).pipe((0,aL.filter)(fx)));t.execute(a,{mapDocument:m}),await b,v("edit",{id:a,type:j}),x(!1)},f[6]=q.pair,f[7]=t,f[8]=i,f[9]=m,f[10]=v,f[11]=j,f[12]=d):d=f[12];let C=d;a:{let a,b,c;if(!z&&!y?.granted){let a,b,c;f[13]!==A?(a=A("action.duplicate.label"),f[13]=A,f[14]=a):a=f[14],f[15]!==B?(b=(0,g.jsx)(p.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:B}),f[15]=B,f[16]=b):b=f[16],f[17]!==a||f[18]!==b?(c={icon:u.CopyIcon,disabled:!0,label:a,title:b},f[17]=a,f[18]=b,f[19]=c):c=f[19],e=c;break a}let d=w||!!t.disabled||z;f[20]!==w||f[21]!==A?(a=A(w?"action.duplicate.running.label":"action.duplicate.label"),f[20]=w,f[21]=A,f[22]=a):a=f[22],f[23]!==t.disabled||f[24]!==A?(b=t.disabled?A(fv[t.disabled]):"",f[23]=t.disabled,f[24]=A,f[25]=b):b=f[25],f[26]!==C||f[27]!==d||f[28]!==a||f[29]!==b?(c={icon:u.CopyIcon,disabled:d,label:a,title:b,onHandle:C},f[26]=C,f[27]=d,f[28]=a,f[29]=b,f[30]=c):c=f[30],e=c}return e};function fx(a){return"duplicate"===a.op&&"success"===a.type}fw.action="duplicate",fw.displayName="DuplicateAction";let fy=(0,a$.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),fz={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},fA={status:"published"};function fB(a,b,c){return"ALREADY_PUBLISHED"===a&&b?(0,g.jsx)(fC,{publishedAt:b}):c(fz[a])}function fC(a){let b,c,d,e=(0,h.c)(6),{publishedAt:f}=a,{t:j}=(0,p.useTranslation)(F);e[0]===Symbol.for("react.memo_cache_sentinel")?(b={useTemporalPhrase:!0},e[0]=b):b=e[0];let k=(0,p.useRelativeTime)(f,b);return e[1]!==j||e[2]!==k?(c=j("action.publish.already-published.tooltip",{timeSincePublished:k}),e[1]=j,e[2]=k,e[3]=c):c=e[3],e[4]!==c?(d=(0,g.jsx)(i.Text,{children:c}),e[4]=c,e[5]=d):d=e[5],d}let fD=a=>{let b,c,d,e,f,i,l,m,n,r,s,t,v=(0,h.c)(86),{id:w,type:x,liveEdit:y,draft:z,published:A,release:B,version:C}=a,{selectedPerspective:D}=(0,p.usePerspective)(),[E,G]=(0,k.useState)(null);v[0]!==C?(b=C?._id&&(0,o.getVersionFromId)(C._id),v[0]=C,v[1]=b):b=v[1];let H=b,{publish:I}=(0,p.useDocumentOperation)(w,x,H),{changesOpen:J,documentId:K,documentType:L,value:M}=dj(),N=(0,p.useValidationStatus)(M._id,x,!B),O=(0,p.useSyncState)(w,x),P=(0,p.useEditState)(K,L,"default",H),{t:Q}=(0,p.useTranslation)(F);v[2]!==P?.draft||v[3]!==P?.published||v[4]!==P?.version?(c=P?.version||P?.draft||P?.published||{},v[2]=P?.draft,v[3]=P?.published,v[4]=P?.version,v[5]=c):c=v[5];let R=c._rev,S=(0,j.useToast)();v[6]!==N.validation?(d=N.validation.some(q.isValidationErrorMarker),v[6]=N.validation,v[7]=d):d=v[7];let T=d,[U,V]=(0,k.useState)(!1),W=O.isSyncing,X=N.isValidating;v[8]!==w||v[9]!==x?(e={id:w,type:x,permission:"publish"},v[8]=w,v[9]=x,v[10]=e):e=v[10];let[Y,Z]=(0,p.useDocumentPairPermissions)(e),$=(0,p.useCurrentUser)();v[11]!==T||v[12]!==I.disabled||v[13]!==A||v[14]!==Q?(f=I.disabled?fB(I.disabled,(A||{})._updatedAt,Q)||"":T?Q("action.publish.validation-issues.tooltip"):"",v[11]=T,v[12]=I.disabled,v[13]=A,v[14]=Q,v[15]=f):f=v[15];let _=f,aa=A?._rev;v[16]!==aa||v[17]!==I?(i=()=>{I.execute(),G({status:"publishing",publishRevision:aa})},v[16]=aa,v[17]=I,v[18]=i):i=v[18];let ab=i;v[19]!==ab||v[20]!==T||v[21]!==W||v[22]!==U||v[23]!==R||v[24]!==Q||v[25]!==S||v[26]!==N.isValidating||v[27]!==N.revision?(l=()=>{let a=!N.isValidating&&N.revision===R;U&&!W&&a&&(T?S.push({title:Q("action.publish.validation-issues-toast.title"),description:Q("action.publish.validation-issues-toast.description"),status:"error"}):ab(),V(!1))},v[19]=ab,v[20]=T,v[21]=W,v[22]=U,v[23]=R,v[24]=Q,v[25]=S,v[26]=N.isValidating,v[27]=N.revision,v[28]=l):l=v[28],v[29]!==ab||v[30]!==T||v[31]!==W||v[32]!==X||v[33]!==U||v[34]!==R||v[35]!==Q||v[36]!==S||v[37]!==N.isValidating||v[38]!==N.revision?(m=[W,ab,T,U,N.revision,R,X,N.isValidating,S,Q],v[29]=ab,v[30]=T,v[31]=W,v[32]=X,v[33]=U,v[34]=R,v[35]=Q,v[36]=S,v[37]=N.isValidating,v[38]=N.revision,v[39]=m):m=v[39],(0,k.useEffect)(l,m),v[40]!==aa||v[41]!==E?(n=()=>{let a=E?.status==="publishing"&&aa!==E.publishRevision,b=a?fA:null,c=setTimeout(()=>{G(b)},a?200:4e3);return()=>clearTimeout(c)},v[40]=aa,v[41]=E,v[42]=n):n=v[42],v[43]!==J||v[44]!==aa||v[45]!==E?(r=[J,E,aa],v[43]=J,v[44]=aa,v[45]=E,v[46]=r):r=v[46],(0,k.useEffect)(n,r);let ac=(0,aZ.useTelemetry)();v[47]!==ab||v[48]!==z?._createdAt||v[49]!==A||v[50]!==R||v[51]!==O.isSyncing||v[52]!==ac||v[53]!==N.isValidating||v[54]!==N.revision?(s=()=>{ac.log(fy,{publishedImmediately:!z?._createdAt,previouslyPublished:!!A}),O.isSyncing||N.isValidating||N.revision!==R?V(!0):ab()},v[47]=ab,v[48]=z?._createdAt,v[49]=A,v[50]=R,v[51]=O.isSyncing,v[52]=ac,v[53]=N.isValidating,v[54]=N.revision,v[55]=s):s=v[55];let ad=s;a:{let a,b,c;if((0,p.isPublishedPerspective)(D)||B&&C||y&&!C){t=null;break a}if(A&&!z&&!C){let a,b,c;v[56]!==Q?(a=Q("action.publish.label"),v[56]=Q,v[57]=a):a=v[57];let d=A?._updatedAt;v[58]!==Q||v[59]!==d?(b=fB("ALREADY_PUBLISHED",d,Q),v[58]=Q,v[59]=d,v[60]=b):b=v[60],v[61]!==a||v[62]!==b?(c={tone:"default",icon:u.PublishIcon,label:a,title:b,disabled:!0},v[61]=a,v[62]=b,v[63]=c):c=v[63],t=c;break a}if(!Z&&!Y?.granted){let a,b,c;v[64]!==Q?(a=Q("action.publish.label"),v[64]=Q,v[65]=a):a=v[65],v[66]!==$?(b=(0,g.jsx)(p.InsufficientPermissionsMessage,{context:"publish-document",currentUser:$}),v[66]=$,v[67]=b):b=v[67],v[68]!==a||v[69]!==b?(c={tone:"default",icon:u.PublishIcon,label:a,title:b,disabled:!0},v[68]=a,v[69]=b,v[70]=c):c=v[70],t=c;break a}let d=!!(U||P?.transactionSyncLock?.enabled||E?.status==="publishing"||E?.status==="published"||T||I.disabled),e=d||Z;v[71]!==U||v[72]!==E?.status||v[73]!==Q?(a=E?.status==="published"?Q("action.publish.published.label"):U?Q("action.publish.validation-in-progress.label"):E?.status==="publishing"?Q("action.publish.running.label"):Q("action.publish.draft.label"),v[71]=U,v[72]=E?.status,v[73]=Q,v[74]=a):a=v[74],v[75]!==U||v[76]!==E?.status||v[77]!==Q||v[78]!==_?(b=U?Q("action.publish.waiting"):E?.status==="published"||E?.status==="publishing"?null:_,v[75]=U,v[76]=E?.status,v[77]=Q,v[78]=_,v[79]=b):b=v[79];let f=d||U?null:"Ctrl+Alt+P";v[80]!==ad||v[81]!==e||v[82]!==a||v[83]!==b||v[84]!==f?(c={disabled:e,tone:"default",label:a,icon:u.PublishIcon,title:b,shortcut:f,onHandle:ad},v[80]=ad,v[81]=e,v[82]=a,v[83]=b,v[84]=f,v[85]=c):c=v[85],t=c}return t};fD.action="publish",fD.displayName="PublishAction";let fE={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},fF=a=>{let b,c,d,e,f,i,j=(0,h.c)(22),{id:l,type:m,draft:n,liveEdit:o,release:q}=a,{unpublish:r}=(0,p.useDocumentOperation)(l,m),[s,t]=(0,k.useState)(!1);j[0]!==l||j[1]!==m?(b={id:l,type:m,permission:"unpublish"},j[0]=l,j[1]=m,j[2]=b):b=j[2];let[v,w]=(0,p.useDocumentPairPermissions)(b),x=(0,p.useCurrentUser)(),{t:y}=(0,p.useTranslation)(F),{selectedPerspective:z}=(0,p.usePerspective)(),A="drafts"===z;j[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{t(!1)},j[3]=c):c=j[3];let B=c;j[4]!==r?(d=()=>{t(!1),r.execute()},j[4]=r,j[5]=d):d=j[5];let C=d;a:{if(s){let a,b=n?._id||l;j[6]!==C||j[7]!==b||j[8]!==m?(a={type:"dialog",onClose:B,content:(0,g.jsx)(hR,{id:b,type:m,action:"unpublish",onCancel:B,onConfirm:C})},j[6]=C,j[7]=b,j[8]=m,j[9]=a):a=j[9],e=a;break a}e=null}let D=e;return j[10]!==x||j[11]!==D||j[12]!==A||j[13]!==w||j[14]!==o||j[15]!==v?.granted||j[16]!==q||j[17]!==y||j[18]!==r.disabled?(f=()=>q||A||o?null:w||v?.granted?{tone:"critical",icon:u.UnpublishIcon,disabled:!!r.disabled||w,label:y("action.unpublish.label"),title:r.disabled?y(fE[r.disabled]):"",onHandle:()=>t(!0),dialog:D}:{tone:"critical",icon:u.UnpublishIcon,label:"Unpublish",title:(0,g.jsx)(p.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:x}),disabled:!0},j[10]=x,j[11]=D,j[12]=A,j[13]=w,j[14]=o,j[15]=v?.granted,j[16]=q,j[17]=y,j[18]=r.disabled,j[19]=f):f=j[19],j[20]!==f?(i=f(),j[20]=f,j[21]=i):i=j[21],i};fF.action="unpublish",fF.displayName="UnpublishAction";let fG=(0,k.memo)(function(a){let b,c,d,e,f,j,l,m,n,o=(0,h.c)(39),{disabled:q,states:s}=a,{__internal_tasks:t}=(0,p.useSource)(),{editState:u}=dj(),{params:v}=eb(),w=!!v?.rev,{selectedReleaseId:x}=(0,p.usePerspective)();o[0]!==s?([b,...c]=s,o[0]=s,o[1]=b,o[2]=c):(b=o[1],c=o[2]);let[y,z]=(0,k.useState)(null),{isPaused:A}=(0,p.usePausedScheduledDraft)();a:{let a,c,e,f;if(!b||!b.title&&!b.shortcut){d=null;break a}o[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:300},o[3]=a):a=o[3],o[4]!==b.title?(c=b.title&&(0,g.jsx)(i.Text,{size:1,children:b.title}),o[4]=b.title,o[5]=c):c=o[5],o[6]!==b.shortcut?(e=b.shortcut&&(0,g.jsx)(r.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(b.shortcut).split("+").map(fN)}),o[6]=b.shortcut,o[7]=e):e=o[7],o[8]!==c||o[9]!==e?(f=(0,g.jsxs)(i.Flex,{style:a,align:"center",gap:3,children:[c,e]}),o[8]=c,o[9]=e,o[10]=f):f=o[10],d=f}let B=d,C=b?.action==="schedule"&&A;o[11]!==u?.liveEdit||o[12]!==u?.version||o[13]!==b||o[14]!==x||o[15]!==C||o[16]!==w?(e=w?!!b:x?b&&(C||!(0,p.isSanityDefinedAction)(b)):b&&(!u?.liveEdit||u?.version),o[11]=u?.liveEdit,o[12]=u?.version,o[13]=b,o[14]=x,o[15]=C,o[16]=w,o[17]=e):e=o[17];let D=e;o[18]!==b||o[19]!==c||o[20]!==D?(f=D?c:[b,...c].filter(Boolean),o[18]=b,o[19]=c,o[20]=D,o[21]=f):f=o[21];let E=f,F=t&&t.footerAction;return o[22]!==q||o[23]!==b||o[24]!==D||o[25]!==B?(j=D&&(0,g.jsx)(i.LayerProvider,{zOffset:200,children:(0,g.jsx)(r.Tooltip,{disabled:!B,content:B,placement:"top",children:(0,g.jsx)(i.Stack,{children:(0,g.jsx)(r.Button,{"data-testid":`action-${cP(b.label)}`,disabled:q||!!b.disabled,icon:b.icon,onClick:b.onHandle,ref:z,text:b.label,tone:b.tone||"primary"})})})}),o[22]=q,o[23]=b,o[24]=D,o[25]=B,o[26]=j):j=o[26],o[27]!==q||o[28]!==E?(l=E.length>0&&(0,g.jsx)(e3,{actionStates:E,disabled:q}),o[27]=q,o[28]=E,o[29]=l):l=o[29],o[30]!==y||o[31]!==b||o[32]!==D?(m=D&&b&&b.dialog&&(0,g.jsx)(e1,{dialog:b.dialog,referenceElement:y}),o[30]=y,o[31]=b,o[32]=D,o[33]=m):m=o[33],o[34]!==F||o[35]!==j||o[36]!==l||o[37]!==m?(n=(0,g.jsxs)(i.Flex,{align:"center",gap:1,children:[F,j,l,m]}),o[34]=F,o[35]=j,o[36]=l,o[37]=m,o[38]=n):n=o[38],n}),fH=(0,k.memo)(function(){let a,b=(0,h.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(h8,{group:"default",children:fO}),b[0]=a):a=b[0],a});function fI(a){let b,c,d=(0,h.c)(6),{connectionState:e,documentId:f}=dj();d[0]!==a.states?(b=a.states.filter(fJ),d[0]=a.states,d[1]=b):b=d[1];let i=b;if(0===i.length)return null;let j="connected"!==e;return d[2]!==f||d[3]!==i||d[4]!==j?(c=(0,g.jsx)(fG,{disabled:j,states:i},f),d[2]=f,d[3]=i,d[4]=j,d[5]=c):c=d[5],c}function fJ(a){return!a.action||a.action!==eS.action}let fK=(0,k.memo)(function(){let a,b=(0,h.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(h8,{group:"default",children:fP}),b[0]=a):a=b[0],a});function fL(a){let b,c,d,e=(0,h.c)(8),{states:f}=a,{connectionState:i,editState:j,revisionId:k}=dj();e[0]!==j?.draft||e[1]!==j?.published?(b=j?.draft||j?.published||{},e[0]=j?.draft,e[1]=j?.published,e[2]=b):b=e[2];let l=b._rev===k,m="connected"!==i||!!l;return e[3]!==f?(c=f.filter(fM).slice(-1),e[3]=f,e[4]=c):c=e[4],e[5]!==m||e[6]!==c?(d=(0,g.jsx)(fG,{disabled:m,states:c}),e[5]=m,e[6]=c,e[7]=d):d=e[7],d}function fM(a){return!!a.action&&a.action===eS.action}function fN(a){return a.slice(0,1).toUpperCase()+a.slice(1).toLowerCase()}function fO(a){let{states:b}=a;return(0,g.jsx)(fI,{states:b})}function fP(a){let{states:b}=a;return(0,g.jsx)(fL,{states:b})}let fQ={create:u.AddIcon,delete:u.TrashIcon,discardDraft:u.CloseIcon,initial:u.AddIcon,editDraft:u.EditIcon,editLive:u.EditIcon,publish:u.PublishIcon,unpublish:u.UnpublishIcon},fR=(0,aI.styled)(u.ChevronLeftIcon).withConfig({displayName:"FlipIcon",componentId:"sc-13ovfi5-0"})`transition:transform 200ms;&[data-expanded='true']{transform:rotate(-90deg);}`;function fS(a){let b,c,d,e,f,i=(0,h.c)(14),{isExpanded:j,onExpand:k}=a,{t:l}=(0,p.useTranslation)(F);i[0]!==j||i[1]!==k?(b=a=>{a.stopPropagation(),function(a){if(a)return;let b=document.getElementById(f6);if(b){let a=b.children[0];if(!(a.scrollHeight>a.clientHeight)){let b=getComputedStyle(a).overflowY;a.style.overflowY="hidden",setTimeout(()=>{a.style.overflowY=b},0)}}}(j),k()},i[0]=j,i[1]=k,i[2]=b):b=i[2];let m=b;return i[3]!==j?(c=(0,g.jsx)(fR,{"data-expanded":j}),i[3]=j,i[4]=c):c=i[4],i[5]!==j||i[6]!==l?(d=l(j?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),i[5]=j,i[6]=l,i[7]=d):d=i[7],i[8]!==d?(e={content:d},i[8]=d,i[9]=e):e=i[9],i[10]!==m||i[11]!==c||i[12]!==e?(f=(0,g.jsx)(r.Button,{mode:"bleed",icon:c,tooltipProps:e,onClick:m}),i[10]=m,i[11]=c,i[12]=e,i[13]=f):f=i[13],f}let fT=(0,aI.styled)(i.Stack).withConfig({displayName:"StackWrapper",componentId:"sc-1ai615s-0"})`max-width:200px;`,fU=(0,aI.styled)(i.Flex).withConfig({displayName:"ListWrapper",componentId:"sc-1ai615s-1"})`max-height:${a=>a.$maxHeight};min-width:244px;`,fV=(0,aI.styled)(i.Box).withConfig({displayName:"Root",componentId:"sc-1ai615s-2"})(({$visible:a})=>aI.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${a&&aI.css`
        opacity: 1;
        pointer-events: auto;
      `}
  `),fW={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function fX(a){let b,c,d=(0,h.c)(9),{maxLength:e,userIds:f,size:j,withTooltip:k}=a,l=void 0===k||k;if(d[0]!==f||d[1]!==l){let a;d[3]!==l?(a=a=>(0,g.jsx)(p.UserAvatar,{user:a,withTooltip:l},a),d[3]=l,d[4]=a):a=d[4],b=f.map(a),d[0]=f,d[1]=l,d[2]=b}else b=d[2];return d[5]!==e||d[6]!==j||d[7]!==b?(c=(0,g.jsx)(i.AvatarStack,{maxLength:e,size:j,children:b}),d[5]=e,d[6]=j,d[7]=b,d[8]=c):c=d[8],c}let fY=(0,aI.styled)(i.Flex).withConfig({displayName:"IconBox",componentId:"sc-19iwr6i-0"})(a=>{let b=(0,bv.getTheme_v2)(a.theme),c=a.$color;return aI.css`
    --card-icon-color: ${b.color.avatar[c].fg};
    background-color: ${b.color.avatar[c].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${b.avatar.sizes[0].size}px;
    height: ${b.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),fZ={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},f$={minimal:!0,useTemporalPhrase:!0},f_=(0,aI.styled)(j.Skeleton).withConfig({displayName:"NameSkeleton",componentId:"sc-19iwr6i-1"})(a=>{let b=(0,bv.getTheme_v2)(a.theme);return aI.css`
    width: 6ch;
    height: ${b.font.text.sizes[0].lineHeight}px;
  `}),f0=a=>{let b,c,d,e=(0,h.c)(10),{userId:f}=a,[j,k]=(0,p.useUser)(f);return e[0]!==k||e[1]!==j?(b=(0,g.jsx)(i.Box,{children:k||!j?(0,g.jsx)(p.AvatarSkeleton,{animated:!0}):(0,g.jsx)(p.UserAvatar,{user:j})}),e[0]=k,e[1]=j,e[2]=b):b=e[2],e[3]!==k||e[4]!==j?(c=(0,g.jsx)(i.Box,{children:k||!j?.displayName?(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(f_,{animated:!0})}):(0,g.jsx)(i.Text,{muted:!0,size:1,children:j.displayName})}),e[3]=k,e[4]=j,e[5]=c):c=e[5],e[6]!==b||e[7]!==c||e[8]!==f?(d=(0,g.jsxs)(i.Flex,{align:"center",gap:2,padding:1,children:[b,c]},f),e[6]=b,e[7]=c,e[8]=f,e[9]=d):d=e[9],d},f1=a=>{let b,c,d,e,f=(0,h.c)(9),{collaborators:j}=a,{t:k}=(0,p.useTranslation)("studio");return f[0]!==k?(b=k("timeline.changes.title"),f[0]=k,f[1]=b):b=f[1],f[2]!==b?(c=(0,g.jsx)(i.Box,{padding:1,paddingBottom:2,children:(0,g.jsx)(i.Text,{size:1,weight:"medium",children:b})}),f[2]=b,f[3]=c):c=f[3],f[4]!==j?(d=j.map(f3),f[4]=j,f[5]=d):d=f[5],f[6]!==c||f[7]!==d?(e=(0,g.jsxs)(i.Stack,{paddingBottom:1,children:[c,d]}),f[6]=c,f[7]=d,f[8]=e):e=f[8],e};function f2(a){let b,c,d,e,f,j,k,l,m,n,o,q,s,t,u,v,w,x,y,z,A,B=(0,h.c)(55),{chunk:C,isSelected:D,onSelect:E,collaborators:F,optionsMenu:G}=a,{t:H}=(0,p.useTranslation)("studio"),{type:I,endTimestamp:J}=C;B[0]!==I?(b=fQ[I],B[0]=I,B[1]=b):b=B[1];let K=b;B[2]!==C.authors?(c=Array.from(C.authors),B[2]=C.authors,B[3]=c):c=B[3];let L=c;B[4]!==F?(d=F?Array.from(F):[],B[4]=F,B[5]=d):d=B[5];let M=d,N="delete"!==I;B[6]===Symbol.for("react.memo_cache_sentinel")?(e={dateStyle:"medium",timeStyle:"short"},B[6]=e):e=B[6];let O=(0,p.useDateTimeFormat)(e);B[7]!==J?(f=new Date(J),B[7]=J,B[8]=f):f=B[8];let P=(0,p.useRelativeTime)(f||"",f$);if(B[9]!==O||B[10]!==J){let a=new Date(J);j=O.format(a),B[9]=O,B[10]=J,B[11]=j}else j=B[11];let Q=j;B[12]!==C||B[13]!==N||B[14]!==E?(k=a=>{a.preventDefault(),a.stopPropagation(),N&&E(C)},B[12]=C,B[13]=N,B[14]=E,B[15]=k):k=B[15];let R=k;B[16]===Symbol.for("react.memo_cache_sentinel")?(l={position:"relative"},B[16]=l):l=B[16],B[17]!==L?(m=(0,g.jsx)(fX,{maxLength:3,userIds:L,size:2}),B[17]=L,B[18]=m):m=B[18];let S=fZ[I];return B[19]!==K?(n=K&&(0,g.jsx)(K,{}),B[19]=K,B[20]=n):n=B[20],B[21]!==n?(o=(0,g.jsx)(i.Text,{size:0,children:n}),B[21]=n,B[22]=o):o=B[22],B[23]!==S||B[24]!==o?(q=(0,g.jsx)(fY,{align:"center",justify:"center",$color:S,children:o}),B[23]=S,B[24]=o,B[25]=q):q=B[25],B[26]!==q||B[27]!==m?(s=(0,g.jsxs)("div",{style:l,children:[m,q]}),B[26]=q,B[27]=m,B[28]=s):s=B[28],B[29]!==H||B[30]!==I?(t=H(fW[I])||(0,g.jsx)("code",{children:I}),B[29]=H,B[30]=I,B[31]=t):t=B[31],B[32]!==t?(u=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:t}),B[32]=t,B[33]=u):u=B[33],B[34]!==Q||B[35]!==J||B[36]!==P?(v=(0,g.jsx)(i.Text,{as:"time",size:1,muted:!0,dateTime:J,title:Q,children:P}),B[34]=Q,B[35]=J,B[36]=P,B[37]=v):v=B[37],B[38]!==u||B[39]!==v?(w=(0,g.jsxs)(i.Stack,{space:2,children:[u,v]}),B[38]=u,B[39]=v,B[40]=w):w=B[40],B[41]!==M?(x=M.length>0&&(0,g.jsx)(i.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,g.jsx)(r.Tooltip,{placement:"top",content:(0,g.jsx)(f1,{collaborators:M}),portal:!0,children:(0,g.jsx)(i.Box,{paddingLeft:2,paddingY:2,children:(0,g.jsx)(fX,{maxLength:3,userIds:M,size:0,withTooltip:!1})})})}),B[41]=M,B[42]=x):x=B[42],B[43]!==s||B[44]!==w||B[45]!==x?(y=(0,g.jsxs)(i.Flex,{align:"center",gap:3,children:[s,w,x]}),B[43]=s,B[44]=w,B[45]=x,B[46]=y):y=B[46],B[47]!==C.id||B[48]!==R||B[49]!==D||B[50]!==y?(z=(0,g.jsx)(i.Card,{as:"button",onClick:R,padding:2,pressed:D,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":C.id,children:y}),B[47]=C.id,B[48]=R,B[49]=D,B[50]=y,B[51]=z):z=B[51],B[52]!==G||B[53]!==z?(A=(0,g.jsxs)(i.Flex,{align:"center",gap:1,children:[z,G]}),B[52]=G,B[53]=z,B[54]=A):A=B[54],A}function f3(a){return(0,g.jsx)(f0,{userId:a},a)}let f4=a=>"publish"!==a.type,f5=a=>"publish"===a.type,f6="timeline-list-wrapper",f7=a=>{let b,c,d,e,f,j,l,m,n,o,q,r,s,t,u,v,w=(0,h.c)(51),{chunks:x,hasMoreChunks:y,lastChunk:z,onLoadMore:A,onSelect:B,listMaxHeight:C}=a,D=void 0===C?"calc(100vh - 280px)":C,[E,F]=(0,k.useState)(!1),{t:G}=(0,p.useTranslation)("studio"),H=z?.id;w[0]!==x?(b=function(a){let b=[];for(let c of a){if(f5(c)){b.push({...c,type:"publish",children:[],collaborators:new Set});continue}if(f4(c)){let a=function(a){let b=null;for(let c=a.length-1;c>=0;c--){let d=a[c];if(f5(d)){b=d;break}if("editDraft"!==d.type)break}return b}(b);if("editDraft"===c.type&&a?.type==="publish"){Array.from(c.authors).forEach(b=>{a.collaborators.add(b)}),a.children.push(c.id),b.push({...c,parentId:a.id});continue}}f4(c)&&b.push(c)}return b}(x),w[0]=x,w[1]=b):b=w[1];let I=b;w[2]!==I||w[3]!==H?(c=()=>{if(H){let a=I.find(a=>a.id===H);if(a&&f4(a)&&a.parentId)return new Set([a.parentId])}return new Set},w[2]=I,w[3]=H,w[4]=c):c=w[4];let[J,K]=(0,k.useState)(c);if(w[5]!==I||w[6]!==H?(d=()=>{if(H){let a=I.find(a=>a.id===H);if(a&&f4(a)&&a.parentId){let b=a.parentId;K(a=>{if(a.has(b))return a;let c=new Set(a);return c.add(b),c})}}},e=[I,H],w[5]=I,w[6]=H,w[7]=d,w[8]=e):(d=w[7],e=w[8]),(0,k.useEffect)(d,e),w[9]!==I||w[10]!==J){let a;w[12]!==J?(a=a=>!!f5(a)||!a.parentId||J.has(a.parentId),w[12]=J,w[13]=a):a=w[13],f=I.filter(a),w[9]=I,w[10]=J,w[11]=f}else f=w[11];let L=f;w[14]!==L.length||w[15]!==y||w[16]!==A?(j=()=>{L.length<16&&y&&A()},w[14]=L.length,w[15]=y,w[16]=A,w[17]=j):j=w[17],w[18]!==L||w[19]!==y||w[20]!==A?(l=[L,y,A],w[18]=L,w[19]=y,w[20]=A,w[21]=l):l=w[21],(0,k.useEffect)(j,l),w[22]===Symbol.for("react.memo_cache_sentinel")?(m=a=>()=>K(b=>{let c=new Set(b);return b.has(a)?c.delete(a):c.add(a),c}),w[22]=m):m=w[22];let M=m;w[23]!==L||w[24]!==H?(n=H?L.findIndex(a=>a.id===H):-1,w[23]=L,w[24]=H,w[25]=n):n=w[25];let N=n;w[26]!==x||w[27]!==B?(o=a=>{let b=x.find(b=>b.id===a.id);b?B(b):(console.error("TimelineItem: chunk not found"),B(a))},w[26]=x,w[27]=B,w[28]=o):o=w[28];let O=o;w[29]!==J||w[30]!==L.length||w[31]!==O||w[32]!==y||w[33]!==H?(q=(a,b)=>{let{activeIndex:c}=b;return(0,g.jsxs)(i.Box,{paddingBottom:1,paddingTop:+(0===c),paddingRight:1,paddingLeft:f4(a)&&a.parentId?4:1,children:[(0,g.jsx)(f2,{chunk:a,isSelected:H===a.id,onSelect:O,collaborators:f5(a)?a.collaborators:void 0,optionsMenu:f5(a)&&a.children.length>0?(0,g.jsx)(fS,{isExpanded:J.has(a.id),onExpand:M(a.id)}):null}),c===L.length-1&&y&&(0,g.jsx)(p.LoadingBlock,{})]})},w[29]=J,w[30]=L.length,w[31]=O,w[32]=y,w[33]=H,w[34]=q):q=w[34];let P=q;w[35]===Symbol.for("react.memo_cache_sentinel")?(r=()=>F(!0),s=[],w[35]=r,w[36]=s):(r=w[35],s=w[36]),(0,k.useEffect)(r,s);let Q=!N||E;return w[37]!==L.length||w[38]!==G?(t=0===L.length&&(0,g.jsxs)(fT,{padding:3,space:3,children:[(0,g.jsx)(i.Text,{size:1,weight:"medium",children:G("timeline.error.no-document-history-title")}),(0,g.jsx)(i.Text,{muted:!0,size:1,children:G("timeline.error.no-document-history-description")})]}),w[37]=L.length,w[38]=G,w[39]=t):t=w[39],w[40]!==L||w[41]!==D||w[42]!==A||w[43]!==P||w[44]!==N||w[45]!==G?(u=L.length>0&&(0,g.jsx)(fU,{direction:"column",$maxHeight:D,id:f6,children:(0,g.jsx)(p.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:G("timeline.list.aria-label"),autoFocus:"list",initialIndex:N,initialScrollAlign:"center",itemHeight:57,items:L,onEndReached:A,onEndReachedIndexOffset:20,overscan:5,renderItem:P,wrapAround:!1})}),w[40]=L,w[41]=D,w[42]=A,w[43]=P,w[44]=N,w[45]=G,w[46]=u):u=w[46],w[47]!==Q||w[48]!==t||w[49]!==u?(v=(0,g.jsxs)(fV,{$visible:Q,"data-ui":"timeline",children:[t,u]}),w[47]=Q,w[48]=t,w[49]=u,w[50]=v):v=w[50],v};function f8(a){let b,c,d,e,f,j,k=(0,h.c)(14),{versionError:l}=a,{t:m}=(0,p.useTranslation)("studio");return k[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsx)(p.TextWithTone,{tone:"critical",children:(0,g.jsx)(u.ErrorOutlineIcon,{})}),k[0]=b):b=k[0],k[1]!==m||k[2]!==l?(c=m(l?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),k[1]=m,k[2]=l,k[3]=c):c=k[3],k[4]!==c?(d=(0,g.jsx)(p.TextWithTone,{size:1,tone:"critical",weight:"medium",children:c}),k[4]=c,k[5]=d):d=k[5],k[6]!==m||k[7]!==l?(e=m(l?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),k[6]=m,k[7]=l,k[8]=e):e=k[8],k[9]!==e?(f=(0,g.jsx)(p.TextWithTone,{size:1,tone:"critical",children:e}),k[9]=e,k[10]=f):f=k[10],k[11]!==d||k[12]!==f?(j=(0,g.jsxs)(i.Flex,{align:"flex-start",gap:3,padding:4,children:[b,(0,g.jsxs)(i.Stack,{space:4,children:[d,f]})]}),k[11]=d,k[12]=f,k[13]=j):j=k[13],j}let f9=(0,aI.styled)(r.Popover).withConfig({displayName:"Root",componentId:"sc-5dzvio-0"})`overflow:hidden;overflow:clip;`,ga="timeline-menu";function gb(a){let b,c,d,e,f,l,m,n,o,q,s,t,v,w,x,y,z=(0,h.c)(62),{chunk:A,mode:B,placement:C}=a,{setTimelineRange:D,timelineError:E,ready:F,timelineStore:G}=dj(),[H,I]=(0,k.useState)(!1),[J,K]=(0,k.useState)(null),[L,M]=(0,k.useState)(null),N=(0,j.useToast)(),O=(0,p.useTimelineSelector)(G,gg),P=(0,p.useTimelineSelector)(G,gf),Q=(0,p.useTimelineSelector)(G,ge),R=(0,p.useTimelineSelector)(G,gd),S=(0,p.useTimelineSelector)(G,gc),{t:T}=(0,p.useTranslation)("studio");z[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{I(!0)},z[0]=b):b=z[0];let U=b;z[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{I(!1)},z[1]=c):c=z[1];let V=c;z[2]!==J||z[3]!==H?(d=a=>{H&&("Escape"===a.key||"Tab"===a.key)&&(V(),J?.focus())},z[2]=J,z[3]=H,z[4]=d):d=z[4],(0,i.useGlobalKeyDown)(d),z[5]!==J||z[6]!==L?(e=()=>[J,L],z[5]=J,z[6]=L,z[7]=e):e=z[7],(0,i.useClickOutsideEvent)(H&&V,e),z[8]!==D||z[9]!==T||z[10]!==G||z[11]!==N?(f=a=>{try{(()=>{let[b,c]=G?.findRangeForRev(a)||[null,null];D(b,c)})()}catch(a){N.push({closable:!0,description:a.message,status:"error",title:T("timeline.error.unable-to-load-revision")})}},z[8]=D,z[9]=T,z[10]=G,z[11]=N,z[12]=f):f=z[12];let W=f;z[13]!==D||z[14]!==T||z[15]!==G||z[16]!==N?(l=a=>{try{(()=>{let[b,c]=G?.findRangeForSince(a)||[null,null];D(b,c)})()}catch(a){N.push({closable:!0,description:a.message,status:"error",title:T("timeline.error.unable-to-load-revision")})}},z[13]=D,z[14]=T,z[15]=G,z[16]=N,z[17]=l):l=z[17];let X=l;z[18]!==P||z[19]!==G?(m=()=>{P||G?.loadMore()},z[18]=P,z[19]=G,z[20]=m):m=z[20];let Y=m;a:{let a,b;if(E){let a;z[21]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(f8,{}),z[21]=a):a=z[21],n=a;break a}if("rev"===B){let a;z[22]!==O||z[23]!==Y||z[24]!==Q||z[25]!==R||z[26]!==W?(a=(0,g.jsx)(f7,{chunks:O,hasMoreChunks:Q,lastChunk:R,onLoadMore:Y,onSelect:W}),z[22]=O,z[23]=Y,z[24]=Q,z[25]=R,z[26]=W,z[27]=a):a=z[27],n=a;break a}z[28]!==O||z[29]!==R?(a=R?O.filter(a=>a.index<R.index):O,z[28]=O,z[29]=R,z[30]=a):a=z[30];let c=a;z[31]!==c||z[32]!==Y||z[33]!==Q||z[34]!==X||z[35]!==S?(b=(0,g.jsx)(f7,{chunks:c,hasMoreChunks:Q,lastChunk:S,onLoadMore:Y,onSelect:X}),z[31]=c,z[32]=Y,z[33]=Q,z[34]=X,z[35]=S,z[36]=b):b=z[36],n=b}let Z=n;if(z[37]!==A||z[38]!==T){let a={timestamp:{dateStyle:"medium",timeStyle:"short"}};o=A?T(fW[A.type],{context:"timestamp",timestamp:new Date(A?.endTimestamp),formatParams:a}):T("timeline.latest-revision"),q=A?T("timeline.since",{timestamp:new Date(A?.endTimestamp),formatParams:a}):T("timeline.since-version-missing"),z[37]=A,z[38]=T,z[39]=o,z[40]=q}else o=z[39],q=z[40];let $="rev"===B?o:q;z[41]!==L?(s={[ga]:L},z[41]=L,z[42]=s):s=z[42];let _=s,aa=H&&Z,ab=H?"timeline-menu-close-button":"timeline-menu-open-button",ac=!F,ad=H?V:U;return z[43]===Symbol.for("react.memo_cache_sentinel")?(t={maxWidth:"100%"},z[43]=t):t=z[43],z[44]!==$||z[45]!==F||z[46]!==T?(v=F?$:T("timeline.loading-history"),z[44]=$,z[45]=F,z[46]=T,z[47]=v):v=z[47],z[48]!==H||z[49]!==ab||z[50]!==ac||z[51]!==ad||z[52]!==v?(w=(0,g.jsx)(i.Flex,{width:"fill",children:(0,g.jsx)(r.Button,{"data-testid":ab,disabled:ac,mode:"ghost",onClick:ad,ref:K,selected:H,width:"fill",tooltipProps:null,justify:"space-between",style:t,iconRight:u.ChevronDownIcon,text:v})}),z[48]=H,z[49]=ab,z[50]=ac,z[51]=ad,z[52]=v,z[53]=w):w=z[53],z[54]!==H||z[55]!==C||z[56]!==aa||z[57]!==w?(x=(0,g.jsx)(f9,{"data-testid":"timeline-menu",constrainSize:!0,content:aa,"data-ui":"versionMenu",open:H,placement:C,matchReferenceWidth:!0,portal:!0,ref:M,children:w}),z[54]=H,z[55]=C,z[56]=aa,z[57]=w,z[58]=x):x=z[58],z[59]!==_||z[60]!==x?(y=(0,g.jsx)(i.PortalProvider,{__unstable_elements:_,children:x}),z[59]=_,z[60]=x,z[61]=y):y=z[61],y}function gc(a){return a.sinceTime}function gd(a){return a.realRevChunk}function ge(a){return a.hasMoreChunks}function gf(a){return a.isLoading}function gg(a){return a.chunks}let gh=(0,aI.styled)(m.motion.path).withConfig({displayName:"StyledMotionPath",componentId:"sc-1l2ln4p-0"})`transform-origin:center;`,gi=a=>{let b,c=(0,h.c)(2);return c[0]!==a?(b=(0,g.jsx)(m.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...a}),c[0]=a,c[1]=b):b=c[1],b},gj=a=>{let b,c=(0,h.c)(2);return c[0]!==a?(b=(0,g.jsx)(gh,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...a}),c[0]=a,c[1]=b):b=c[1],b},gk=a=>{let b,c=(0,h.c)(2);return c[0]!==a?(b=(0,g.jsx)(m.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...a}),c[0]=a,c[1]=b):b=c[1],b},gl=aI.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,gm=aI.styled.g.withConfig({displayName:"RotateGroup",componentId:"sc-1l2ln4p-1"})`transform-origin:center;&[data-rotate]{animation:${gl} 1s ease-in-out infinite;}`,gn={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},go={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},gp={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},gq={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function gr(a){let b,c,d,e,f,i=(0,h.c)(13),{status:j}=a;if(!j)return null;let k="changes"===j?void 0:"";return i[0]!==j?(b=(0,g.jsx)(gj,{variants:gp,initial:j,animate:j}),c=(0,g.jsx)(gi,{variants:go,initial:j,animate:j}),i[0]=j,i[1]=b,i[2]=c):(b=i[1],c=i[2]),i[3]!==k||i[4]!==b||i[5]!==c?(d=(0,g.jsxs)(gm,{"data-rotate":k,children:[b,c]}),i[3]=k,i[4]=b,i[5]=c,i[6]=d):d=i[6],i[7]!==j?(e=(0,g.jsx)(gk,{variants:gq,initial:j,animate:j}),i[7]=j,i[8]=e):e=i[8],i[9]!==j||i[10]!==d||i[11]!==e?(f=(0,g.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,g.jsxs)(m.motion.g,{variants:gn,initial:j,animate:j,children:[d,e]})}),i[9]=j,i[10]=d,i[11]=e,i[12]=f):f=i[12],f}let gs={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},gt=a=>{let b,c,d,e,f,j=(0,h.c)(13),{status:k}=a,{t:l}=(0,p.useTranslation)(F);if("saved"!==k&&"syncing"!==k)return null;let m=gs[k];return j[0]!==k?(b=(0,g.jsx)(gr,{status:k}),j[0]=k,j[1]=b):b=j[1],j[2]!==m.tone||j[3]!==b?(c=(0,g.jsx)(p.TextWithTone,{size:1,tone:m.tone,children:b}),j[2]=m.tone,j[3]=b,j[4]=c):c=j[4],j[5]!==m.i18nKey||j[6]!==l?(d=l(m.i18nKey),j[5]=m.i18nKey,j[6]=l,j[7]=d):d=j[7],j[8]!==d?(e=(0,g.jsx)(i.Text,{muted:!0,size:1,children:d}),j[8]=d,j[9]=e):e=j[9],j[10]!==c||j[11]!==e?(f=(0,g.jsxs)(i.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[c,e]}),j[10]=c,j[11]=e,j[12]=f):f=j[12],f},gu={minimal:!0,useTemporalPhrase:!0},gv=m.motion.create(i.Button),gw=m.motion.create(i.Box);function gx(a){return"timeline.operation.published"===a?"document-status.last-published":a}let gy=()=>{let a,b,c=(0,h.c)(2);return c[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)("div",{style:{margin:-5},children:(0,g.jsx)(p.AvatarSkeleton,{$size:0,animated:!0})}),c[0]=a):a=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsxs)(i.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[a,(0,g.jsx)(j.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),c[1]=b):b=c[1],b},gz=a=>{let b,c,d,e,f,j,k,l,m=(0,h.c)(17),{author:n,translationKey:o,timestamp:q}=a,{onHistoryOpen:r,inspector:s,onHistoryClose:t}=dj(),{t:u}=(0,p.useTranslation)(),v=(0,p.useRelativeTime)(void 0===q?"":q,gu);m[0]===Symbol.for("react.memo_cache_sentinel")?(b={opacity:1},c={opacity:0},d={opacity:0},m[0]=b,m[1]=c,m[2]=d):(b=m[0],c=m[1],d=m[2]);let w=s?.name===dv?t:r;return m[3]!==n?(e=n&&(0,g.jsx)("div",{style:{margin:-5},children:(0,g.jsx)(p.UserAvatar,{user:n,size:0})}),m[3]=n,m[4]=e):e=m[4],m[5]!==u||m[6]!==o?(f=u(o),m[5]=u,m[6]=o,m[7]=f):f=m[7],m[8]!==v||m[9]!==f?(j=(0,g.jsxs)(i.Text,{muted:!0,size:1,children:[f," ",v]}),m[8]=v,m[9]=f,m[10]=j):j=m[10],m[11]!==e||m[12]!==j?(k=(0,g.jsxs)(i.Flex,{align:"center",flex:"none",gap:3,children:[e,j]}),m[11]=e,m[12]=j,m[13]=k):k=m[13],m[14]!==w||m[15]!==k?(l=(0,g.jsx)(gv,{"data-testid":"pane-footer-document-status",animate:b,initial:c,exit:d,mode:"bleed",onClick:w,padding:2,muted:!0,children:k}),m[14]=w,m[15]=k,m[16]=l):l=m[16],l},gA=()=>{let a,b,c=(0,h.c)(6),{editState:d}=dj(),{selectedPerspective:e}=(0,p.usePerspective)();c[0]!==d||c[1]!==e?(a=(0,p.isPublishedPerspective)(e)&&d?.published?._updatedAt?{translationKey:p.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:d.published._updatedAt}:d?.version?._updatedAt?{translationKey:d.version._updatedAt===d.version._createdAt?p.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:p.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:d.version._updatedAt}:d?.draft?._updatedAt?{translationKey:d.draft._updatedAt===d.draft._createdAt?p.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:p.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:d.draft._updatedAt}:null,c[0]=d,c[1]=e,c[2]=a):a=c[2];let f=a;return f?(c[3]!==f.timestamp||c[4]!==f.translationKey?(b=(0,g.jsx)(gz,{author:"",translationKey:f.translationKey,timestamp:f.timestamp}),c[3]=f.timestamp,c[4]=f.translationKey,c[5]=b):b=c[5],b):null},gB=()=>{let a,b,c=(0,h.c)(8),{events:d,loading:e}=(0,p.useEvents)(),f=d?.[0];if(!f&&e){let a;return c[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gy,{}),c[0]=a):a=c[0],a}if(!f){let a;return c[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gA,{}),c[1]=a):a=c[1],a}let i=f.author,j=p.TIMELINE_ITEM_I18N_KEY_MAPPING[f.documentVariantType][f.type];return c[2]!==j?(a=gx(j),c[2]=j,c[3]=a):a=c[3],c[4]!==f.author||c[5]!==f.timestamp||c[6]!==a?(b=(0,g.jsx)(gz,{author:i,translationKey:a,timestamp:f.timestamp}),c[4]=f.author,c[5]=f.timestamp,c[6]=a,c[7]=b):b=c[7],b},gC=()=>{let a,b,c,d=(0,h.c)(10),{timelineStore:e}=dj(),f=(0,p.useTimelineSelector)(e,gE),i=(0,p.useTimelineSelector)(e,gF),j=f?.[0];if(!j&&i){let a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gy,{}),d[0]=a):a=d[0],a}if(!j){let a;return d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gA,{}),d[1]=a):a=d[1],a}d[2]!==j.authors?(a=Array.from(j.authors),d[2]=j.authors,d[3]=a):a=d[3];let k=a[0],l=fW[j.type];return d[4]!==l?(b=gx(l),d[4]=l,d[5]=b):b=d[5],d[6]!==k||d[7]!==j.endTimestamp||d[8]!==b?(c=(0,g.jsx)(gz,{author:k,translationKey:b,timestamp:j.endTimestamp}),d[6]=k,d[7]=j.endTimestamp,d[8]=b,d[9]=c):c=d[9],c};function gD(){let a,b,c,d,e,f,i,j=(0,h.c)(18),{documentId:l,documentType:m,editState:o,value:q}=dj(),[r,s]=(0,k.useState)(null),t=(0,p.useSource)().beta?.eventsAPI?.documents,u=(0,p.useSyncState)(l,m,o?.release),v=q?._updatedAt;return j[0]!==r||j[1]!==u.isSyncing?(a=()=>{if("syncing"===r&&!u.isSyncing){let a=setTimeout(()=>s("saved"),1e3);return()=>clearTimeout(a)}if("saved"===r){let a=setTimeout(()=>s(null),3e3);return()=>clearTimeout(a)}},j[0]=r,j[1]=u.isSyncing,j[2]=a):a=j[2],j[3]!==v||j[4]!==r||j[5]!==u.isSyncing?(b=[r,v,u.isSyncing],j[3]=v,j[4]=r,j[5]=u.isSyncing,j[6]=b):b=j[6],(0,k.useEffect)(a,b),j[7]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{s(null)},j[7]=c):c=j[7],j[8]!==l?(d=[l],j[8]=l,j[9]=d):d=j[9],(0,k.useLayoutEffect)(c,d),j[10]!==u.isSyncing?(e=()=>{u.isSyncing&&s("syncing")},j[10]=u.isSyncing,j[11]=e):e=j[11],j[12]!==v||j[13]!==u.isSyncing?(f=[u.isSyncing,v],j[12]=v,j[13]=u.isSyncing,j[14]=f):f=j[14],(0,k.useLayoutEffect)(e,f),j[15]!==t||j[16]!==r?(i=(0,g.jsx)(n.AnimatePresence,{children:r?(0,g.jsx)(gw,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,g.jsx)(gt,{status:r||void 0})}):(0,g.jsx)(g.Fragment,{children:t?(0,g.jsx)(gB,{}):(0,g.jsx)(gC,{})})}),j[15]=t,j[16]=r,j[17]=i):i=j[17],i}function gE(a){return a.chunks}function gF(a){return a.isLoading}let gG=(0,aI.styled)(i.Text).withConfig({displayName:"StatusText",componentId:"sc-15z6xze-0"})`color:var(--card-muted-fg-color);em{color:var(--card-fg-color);font-weight:500;font-style:normal;}`;function gH(){let a,b,c,d,e=(0,h.c)(9),{displayed:f,revisionNotFound:j}=dj(),m=(0,k.useContext)(l.EventsContext),n=m?.revision,o=m?.events.find(a=>a.id===n?.revisionId),{t:q}=(0,p.useTranslation)(),r=o?.timestamp||f?._updatedAt||f?._createdAt,s=r?(0,g.jsx)(p.Translate,{t:q,i18nKey:"document-status.revision-from",values:{date:(0,bu.format)(new Date(r),"MMM d, yyyy '@' pp")}}):null;e[0]!==s?(a={name:"revision",text:s,tone:"caution"},e[0]=s,e[1]=a):a=e[1];let t=a;return e[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsx)(i.Box,{flex:"none",children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(u.RestoreIcon,{})})}),e[2]=b):b=e[2],e[3]!==t||e[4]!==j||e[5]!==q?(c=j?(0,g.jsx)(p.Translate,{t:q,i18nKey:"document-status.revision-not-found"}):t.text,e[3]=t,e[4]=j,e[5]=q,e[6]=c):c=e[6],e[7]!==c?(d=(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(i.Flex,{flex:1,gap:3,padding:2,children:[b,(0,g.jsx)(i.Box,{flex:1,children:(0,g.jsx)(gG,{size:1,textOverflow:"ellipsis",children:c})})]})}),e[7]=c,e[8]=d):d=e[8],d}let gI=m.motion.create(i.Card);function gJ(a){let b,c,d,e,f,j,l,m,n=(0,h.c)(22),{actionsBoxRef:o,createLinkMetadata:q}=a,{editState:r,onChange:s,revisionNotFound:t}=dj(),{params:u}=eb(),v=void 0===u?ds:u,{selectedPerspective:w}=(0,p.usePerspective)(),{title:x}=dz(),y=(0,p.useSanityCreateConfig)().components?.documentLinkedActions,z=!!v.rev,[A,B]=(0,k.useState)(null),[C,D]=(0,k.useState)(null);n[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{B(a.contentRect.width<480)},n[0]=b):b=n[0];let E=b;n[1]!==C?(c={element:C,onResize:E},n[1]=C,n[2]=c):c=n[2],function(a){let b,c,d=(0,h.c)(4),{element:e,onResize:f}=a;d[0]!==e||d[1]!==f?(b=()=>(e&&p.resizeObserver.observe(e,f),()=>{e&&p.resizeObserver.unobserve(e)}),c=[e,f],d[0]=e,d[1]=f,d[2]=b,d[3]=c):(b=d[2],c=d[3]),(0,k.useLayoutEffect)(b,c)}(c);a:{let a=!!(r?.ready&&"boolean"==typeof A);if(w){if((0,p.isPublishedPerspective)(w)){d=a&&!!r?.published;break a}if((0,p.isReleaseDocument)(w)){d=a&&!!r?.version;break a}}d=a}let F=d;if(q&&(0,p.isSanityCreateLinked)(q)&&y){let a;n[3]!==y||n[4]!==q||n[5]!==s||n[6]!==x?(a=(0,g.jsx)(y,{metadata:q,panelPortalElementId:eE,onDocumentChange:s,documentTitle:x}),n[3]=y,n[4]=q,n[5]=s,n[6]=x,n[7]=a):a=n[7],e=a}else if(z){let a;n[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(fK,{}),n[8]=a):a=n[8],e=a}else{let a;n[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(fH,{}),n[9]=a):a=n[9],e=a}if(z&&t)return null;let G=z?"revision":"published";n[10]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:.2},n[10]=f):f=n[10],n[11]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:1,transition:{duration:.3}},n[11]=j):j=n[11];let H=z?"caution":void 0;return n[12]!==e||n[13]!==o||n[14]!==A||n[15]!==F||n[16]!==z?(l=F&&(0,g.jsxs)(i.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!z,paddingRight:+!z,children:[(0,g.jsxs)(i.Flex,{align:"center",flex:1,gap:A?2:3,wrap:"wrap",paddingRight:3,children:[(0,g.jsxs)(i.Flex,{align:"center",children:[z?(0,g.jsx)(gH,{}):(0,g.jsx)(gD,{}),(0,g.jsx)(fj,{})]}),(0,g.jsx)(fn,{})]}),(0,g.jsxs)(i.Flex,{align:"flex-start",justify:"flex-end",ref:o,style:{flexShrink:0,marginLeft:"auto"},children:[(0,g.jsx)(fj,{}),e]})]}),n[12]=e,n[13]=o,n[14]=A,n[15]=F,n[16]=z,n[17]=l):l=n[17],n[18]!==G||n[19]!==H||n[20]!==l?(m=(0,g.jsx)(gI,{initial:f,animate:j,tone:H,radius:3,ref:D,sizing:"border",padding:2,children:l},G),n[18]=G,n[19]=H,n[20]=l,n[21]=m):m=n[21],m}let gK=(0,k.memo)(function(a){let b,c,d,e,f,i,j,k,l,m,n,o,q,r=(0,h.c)(26);r[0]!==a?({actionsBoxElement:b,activeIndex:c,as:m,children:d,id:e,onActionStart:f,onKeyDown:i,rootRef:k,states:l,...j}=a,r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=e,r[5]=f,r[6]=i,r[7]=j,r[8]=k,r[9]=l,r[10]=m):(b=r[1],c=r[2],d=r[3],e=r[4],f=r[5],i=r[6],j=r[7],k=r[8],l=r[9],m=r[10]);let s=void 0===m?"div":m,t=l[c];r[11]!==f||r[12]!==i||r[13]!==l?(n=a=>{let b=l.filter(b=>b.shortcut&&(0,a6.isHotkey)(b.shortcut,a)),c=b[0];if(b.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${c.shortcut}"`),c&&!c.disabled&&c.onHandle){a.preventDefault(),c.onHandle(),f(l.indexOf(c));return}i&&i(a)},r[11]=f,r[12]=i,r[13]=l,r[14]=n):n=r[14];let u=n;return r[15]!==b||r[16]!==t?(o=t&&t.dialog&&(0,g.jsx)(p.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,g.jsx)(e1,{dialog:t.dialog,referenceElement:b})}),r[15]=b,r[16]=t,r[17]=o):o=r[17],r[18]!==s||r[19]!==d||r[20]!==u||r[21]!==e||r[22]!==j||r[23]!==k||r[24]!==o?(q=(0,g.jsxs)(s,{id:e,onKeyDown:u,tabIndex:-1,...j,ref:k,children:[d,o]}),r[18]=s,r[19]=d,r[20]=u,r[21]=e,r[22]=j,r[23]=k,r[24]=o,r[25]=q):q=r[25],q}),gL=(0,k.memo)(a=>{let b,c,d,e,f,i,j=(0,h.c)(12);j[0]!==a?({actionsBoxElement:b,as:e,children:c,...d}=a,j[0]=a,j[1]=b,j[2]=c,j[3]=d,j[4]=e):(b=j[1],c=j[2],d=j[3],e=j[4]);let l=void 0===e?"div":e,[m,n]=(0,k.useState)(-1);j[5]===Symbol.for("react.memo_cache_sentinel")?(f=a=>{n(a)},j[5]=f):f=j[5];let o=f;return j[6]!==b||j[7]!==m||j[8]!==l||j[9]!==c||j[10]!==d?(i=(0,g.jsx)(h8,{children:a=>{let{states:e}=a;return(0,g.jsx)(gK,{...d,activeIndex:m,actionsBoxElement:b,as:l,onActionStart:o,states:e,children:c})}}),j[6]=b,j[7]=m,j[8]=l,j[9]=c,j[10]=d,j[11]=i):i=j[11],i});gL.displayName="Memo(DocumentActionShortcuts)";let gM=()=>{let a,b=(0,h.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(u.CheckmarkIcon,{style:{visibility:"hidden"}}),b[0]=a):a=b[0],a};function gN(a){let b,c,d,e,f,j,k,l=(0,h.c)(23),{documentType:m,value:n,currentMinWidth:o,paneKey:q,minWidth:r}=a,{t:s}=(0,p.useTranslation)();return l[0]!==m?(b={documentType:m},l[0]=m,l[1]=b):b=l[1],l[2]!==s||l[3]!==b?(c=(0,g.jsx)(p.Translate,{t:s,i18nKey:"panes.document-pane.document-unknown-type.title",values:b}),l[2]=s,l[3]=b,l[4]=c):c=l[4],l[5]!==m||l[6]!==s?(d=m&&(0,g.jsx)(i.Text,{as:"p",children:(0,g.jsx)(p.Translate,{t:s,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:m}})}),l[5]=m,l[6]=s,l[7]=d):d=l[7],l[8]!==m||l[9]!==s?(e=!m&&(0,g.jsx)(i.Text,{as:"p",children:s("panes.document-pane.document-unknown-type.without-schema.text")}),l[8]=m,l[9]=s,l[10]=e):e=l[10],l[11]!==n?(f=p.isDev&&n&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,g.jsx)(i.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,g.jsx)(i.Code,{language:"json",size:[1,1,2],children:JSON.stringify(n,null,2)})})]}),l[11]=n,l[12]=f):f=l[12],l[13]!==d||l[14]!==e||l[15]!==f?(j=(0,g.jsxs)(i.Stack,{space:4,children:[d,e,f]}),l[13]=d,l[14]=e,l[15]=f,l[16]=j):j=l[16],l[17]!==o||l[18]!==r||l[19]!==q||l[20]!==c||l[21]!==j?(k=(0,g.jsx)(de,{currentMinWidth:o,flex:2.5,minWidth:r,paneKey:q,title:c,tone:"caution",children:j}),l[17]=o,l[18]=r,l[19]=q,l[20]=c,l[21]=j,l[22]=k):k=l[22],k}let gO=["fixed","fixed","absolute"];function gP(a){let b,c,d,e,f,k,l=(0,h.c)(16),{documentPanelPortalElement:m,setFooterElement:n,setActionsBoxElement:o}=a,q=(0,p.useZIndex)(),{value:s}=dj();l[0]!==m?(b={[eE]:m},l[0]=m,l[1]=b):b=l[1];let t=b;l[2]!==s?(c=(0,p.getSanityCreateLinkMetadata)(s),l[2]=s,l[3]=c):c=l[3];let u=c;return l[4]!==u||l[5]!==o?(d=(0,g.jsx)(r.TooltipDelayGroupProvider,{children:(0,g.jsx)(gJ,{actionsBoxRef:o,createLinkMetadata:u})}),l[4]=u,l[5]=o,l[6]=d):d=l[6],l[7]!==n||l[8]!==d?(e=(0,g.jsx)(c$,{ref:n,padding:1,children:d}),l[7]=n,l[8]=d,l[9]=e):e=l[9],l[10]!==e||l[11]!==q.portal?(f=(0,g.jsx)(j.DialogProvider,{position:gO,zOffset:q.portal,children:e}),l[10]=e,l[11]=q.portal,l[12]=f):f=l[12],l[13]!==t||l[14]!==f?(k=(0,g.jsx)(i.PortalProvider,{__unstable_elements:t,children:f}),l[13]=t,l[14]=f,l[15]=k):k=l[15],k}let gQ=[],gR=["fixed","fixed","absolute"],gS=(0,aI.styled)(p.ChangeConnectorRoot).withConfig({displayName:"StyledChangeConnectorRoot",componentId:"sc-tn8aer-0"})`flex:1;display:flex;flex-direction:column;min-height:0;min-width:0;`;function gT(){var a;let b,c,d,e,f,l,m,n,o,q,r,t,v,w,x,y,z,A,B,C,D,E,G=(0,h.c)(82),{changesOpen:H,displayed:I,documentId:J,documentType:K,editState:L,fieldActions:M,focusPath:N,inspectOpen:O,inspector:P,inspectors:Q,onFocus:R,onHistoryOpen:S,onMenuAction:T,onPathOpen:U,paneKey:V,schemaType:W,value:X,previewUrl:Y}=dj(),{stickyParams:Z}=(0,s.useRouter)(),{params:$}=eb(),{features:_}=dr(),{t:aa}=(0,p.useTranslation)(F),{collapsed:ab}=cH(),ac=(0,p.useZIndex)(),[ad,ae]=(0,k.useState)(null),[af,ag]=(0,k.useState)(null),[ah,ai]=(0,k.useState)(null),[aj,ak]=(0,k.useState)(null),[al,am]=(0,k.useState)(null);G[0]!==N||G[1]!==ad||G[2]!==X?(b={element:ad,focusPath:N,value:X},G[0]=N,G[1]=ad,G[2]=X,G[3]=b):b=G[3],(0,p.useGlobalCopyPasteElementHandler)(b),G[4]===Symbol.for("react.memo_cache_sentinel")?(c=[],G[4]=c):c=G[4];let[an,ao]=(0,k.useState)(c);G[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],G[5]=d):d=G[5];let[ap,aq]=(0,k.useState)(d),ar=(0,j.useElementRect)(af),as=(0,j.useElementRect)(ah),at=ar?.height,au=as?.height,av=600+320*!!P,aw=320+320*!!P;G[6]!==P?.name||G[7]!==Q?(e=Q?.find(a=>a.name===P?.name),G[6]=P?.name,G[7]=Q,G[8]=e):e=G[8];let ax=e;G[9]!==I||G[10]!==J||G[11]!==L?(f={displayed:I,documentId:J,editState:L},G[9]=I,G[10]=J,G[11]=L,G[12]=f):f=G[12];let ay=(0,p.useDocumentIdStack)(f),az=!!X,aA="true"===Z.displayInlineChanges;G[13]!==ax||G[14]!==ay||G[15]!==_||G[16]!==az||G[17]!==an||G[18]!==Q||G[19]!==Y||G[20]!==aa||G[21]!==aA?(D=function({currentInspector:a,hasValue:b,inspectors:c,inspectorMenuItems:d}){return c.map((c,e)=>{let f=d[e];return!f||f.hidden?null:{action:`${dt}${c.name}`,group:f.showAsAction?void 0:"inspectors",icon:f.icon,disabled:!b,selected:a?.name===c.name,shortcut:f.hotkeys?.join("+"),showAsAction:f.showAsAction,title:f.title,tone:f.tone}}).filter(Boolean)}(a={currentInspector:ax,features:_,hasValue:az,inspectorMenuItems:an,inspectors:Q,previewUrl:Y,documentIdStack:ay,t:aa,displayInlineChanges:aA}),E=[function({previewUrl:a,t:b}){return a?{action:"production-preview",group:"links",title:b("production-preview.menu-item.title"),icon:u.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(a),function({documentIdStack:a,t:b}){let c=typeof a?.previousId>"u"&&{reason:b("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:b("compare-versions.menu-item.title"),icon:u.TransferIcon,disabled:c}}(a),function({displayInlineChanges:a,t:b}){return{action:"toggleInlineChanges",group:"inspectors",title:b("toggle-inline-changes.menu-item.title"),icon:a?u.CheckmarkIcon:gM}}(a)].filter(Boolean),l=[{action:"copy-document-url",showAsAction:!0,title:a.t("action.copy-document-url.label"),icon:u.LinkIcon},...D,function({hasValue:a,t:b}){return{action:"inspect",group:"inspectors",title:b("document-inspector.menu-item.title"),icon:u.JsonIcon,disabled:!a,shortcut:"Ctrl+Alt+I"}}(a),...E],G[13]=ax,G[14]=ay,G[15]=_,G[16]=az,G[17]=an,G[18]=Q,G[19]=Y,G[20]=aa,G[21]=aA,G[22]=l):l=G[22];let aB=l;G[23]!==aB||G[24]!==T?(m=a=>{for(let b of aB)if(b.shortcut&&(0,a6.isHotkey)(b.shortcut,a)){a.preventDefault(),a.stopPropagation(),T(b);return}},G[23]=aB,G[24]=T,G[25]=m):m=G[25];let aC=m;G[26]!==R||G[27]!==U?(n=a=>{U(a),R(a)},G[26]=R,G[27]=U,G[28]=n):n=G[28];let aD=n;if(!W){let a;return G[29]!==av||G[30]!==K||G[31]!==aw||G[32]!==V||G[33]!==X?(a=(0,g.jsx)(gN,{currentMinWidth:av,documentType:K,minWidth:aw,paneKey:V,value:X}),G[29]=av,G[30]=K,G[31]=aw,G[32]=V,G[33]=X,G[34]=a):a=G[34],a}G[35]!==J||G[36]!==K||G[37]!==Q?(o=Q.length>0&&(0,g.jsx)(dw,{documentId:J,documentType:K,inspectors:Q,onMenuItems:ao}),G[35]=J,G[36]=K,G[37]=Q,G[38]=o):o=G[38],G[39]!==J||G[40]!==K||G[41]!==M||G[42]!==W?(q=M.length>0&&W&&(0,g.jsx)(p.FieldActionsResolver,{actions:M,documentId:J,documentType:K,onActions:aq,path:gQ,schemaType:W}),G[39]=J,G[40]=K,G[41]=M,G[42]=W,G[43]=q):q=G[43],G[44]!==aB?(r=(0,g.jsx)(fe,{ref:ai,menuItems:aB}),G[44]=aB,G[45]=r):r=G[45];let aE=ab?void 0:"fill",aF=H&&$?.changesInspectorTab==="review",aG=at||null,aH=au||null;return G[46]!==al?(t=(0,g.jsx)(gP,{documentPanelPortalElement:al,setFooterElement:ag,setActionsBoxElement:ak}),G[46]=al,G[47]=t):t=G[47],G[48]!==O||G[49]!==ad||G[50]!==aG||G[51]!==aH||G[52]!==t?(v=(0,g.jsx)(eQ,{footerHeight:aG,headerHeight:aH,isInspectOpen:O,rootElement:ad,setDocumentPanelPortalElement:am,footer:t}),G[48]=O,G[49]=ad,G[50]=aG,G[51]=aH,G[52]=t,G[53]=v):v=G[53],G[54]!==aD||G[55]!==S||G[56]!==aF||G[57]!==v?(w=(0,g.jsx)(gS,{"data-testid":"change-connector-root",isReviewChangesOpen:aF,onOpenReviewChanges:S,onSetFocus:aD,children:v}),G[54]=aD,G[55]=S,G[56]=aF,G[57]=v,G[58]=w):w=G[58],G[59]!==aE||G[60]!==w?(x=(0,g.jsx)(i.Flex,{direction:"column",flex:1,height:aE,children:w}),G[59]=aE,G[60]=w,G[61]=x):x=G[61],G[62]!==x||G[63]!==ac.paneDialog?(y=(0,g.jsx)(j.DialogProvider,{position:gR,zOffset:ac.paneDialog,children:x}),G[62]=x,G[63]=ac.paneDialog,G[64]=y):y=G[64],G[65]===Symbol.for("react.memo_cache_sentinel")?(z=(0,g.jsx)(dB,{}),G[65]=z):z=G[65],G[66]!==aj||G[67]!==av||G[68]!==aC||G[69]!==aw||G[70]!==V||G[71]!==r||G[72]!==y?(A=(0,g.jsxs)(gL,{actionsBoxElement:aj,as:cL,currentMinWidth:av,"data-testid":"document-pane",flex:2.5,id:V,minWidth:aw,onKeyUp:aC,rootRef:ae,children:[r,y,z]}),G[66]=aj,G[67]=av,G[68]=aC,G[69]=aw,G[70]=V,G[71]=r,G[72]=y,G[73]=A):A=G[73],G[74]!==ap||G[75]!==A?(B=(0,g.jsx)(dm,{children:(0,g.jsx)(p.FieldActionsProvider,{actions:ap,path:gQ,children:A})}),G[74]=ap,G[75]=A,G[76]=B):B=G[76],G[77]!==q||G[78]!==B||G[79]!==o||G[80]!==X?(C=(0,g.jsxs)(p.GetFormValueProvider,{value:X,children:[o,q,B]}),G[77]=q,G[78]=B,G[79]=o,G[80]=X,G[81]=C):C=G[81],C}let gU=(a,b)=>{let c,d,e,f,g=(0,h.c)(11),i=(0,p.useHistoryStore)(),[j,l]=(0,k.useState)(null),[m,n]=(0,k.useState)(!1);g[0]!==a||g[1]!==b?(c={documentId:a,documentType:b},g[0]=a,g[1]=b,g[2]=c):c=g[2];let o=(0,p.useTimelineStore)(c),q=(0,p.useTimelineSelector)(o,gV);return g[3]!==a||g[4]!==i||g[5]!==q?(d=()=>{q&&a?(n(!0),i.getDocumentAtRevision(a,q).then(a=>{l(a||null),n(!1)}).catch(()=>{l(null),n(!1)})):(l(null),n(!1))},e=[a,q,i],g[3]=a,g[4]=i,g[5]=q,g[6]=d,g[7]=e):(d=g[6],e=g[7]),(0,k.useEffect)(d,e),g[8]!==j||g[9]!==m?(f={lastRevisionDocument:j,loading:m},g[8]=j,g[9]=m,g[10]=f):f=g[10],f};function gV(a){return a.lastNonDeletedRevId}let gW=(0,a$.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),gX=(0,a$.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),gY=(0,a$.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function gZ(a){return a.name===dv}function g$(a){let b=(0,p.isRecord)(a)&&"string"==typeof a.message?a.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${b}`)}function g_(a){let b,c,d,e,f,i,m,n,q,r,t,u,v,w,x,y,z,A,B,C,D,E,G,H,I,J,K,L,M,N,O,P,Q,R,S,T=(0,h.c)(204),{children:U,index:V,pane:W,paneKey:X,onFocusPath:Y,onSetMaximizedPane:Z,maximized:$,forcedVersion:_,historyStore:aa}=a,ab=void 0!==$&&$,{store:ac,error:ad,ready:ae,revisionDocument:af,onOlderRevision:ag,sinceDocument:ah,isPristine:ai,revisionId:aj,lastNonDeletedRevId:ak}=aa,al=(0,p.useSchema)(),{setDocumentMeta:am}=(0,p.useCopyPaste)(),{document:an}=(0,p.useSource)(),{actions:ao,badges:ap,unstable_fieldActions:aq,unstable_languageFilter:ar,drafts:as}=an,{enabled:at}=as,au=(0,aZ.useTelemetry)(),av=(0,s.useRouter)(),aw=eb(),ax=aw.setParams,{push:ay}=(0,j.useToast)(),{options:az,menuItemGroups:aA,title:aB,views:aC}=W,aD=void 0===aA?du:aA,aE=void 0===aB?null:aB;T[0]!==aC?(b=void 0===aC?[]:aC,T[0]=aC,T[1]=b):b=T[1];let aF=b,aG=(0,p.useUnique)(az),aH=aG.id;T[2]!==aH?(c=(0,o.getPublishedId)(aH),T[2]=aH,T[3]=c):c=T[3];let aI=c,aJ=az.type,aM=(0,p.useUnique)(aw.params)||ds,{buildStudioUrl:aN}=(0,p.useStudioUrl)(),aO=(0,p.usePerspective)(),{document:aP,beta:aQ}=(0,p.useWorkspace)(),{drafts:aR}=aP,{enabled:aS}=aR,aT=aQ?.form?.enhancedObjectDialog?.enabled;a:{let a;if(_){d=_;break a}T[4]!==aO.selectedPerspectiveName||T[5]!==aO.selectedReleaseId?(a={selectedPerspectiveName:aO.selectedPerspectiveName,selectedReleaseId:aO.selectedReleaseId},T[4]=aO.selectedPerspectiveName,T[5]=aO.selectedReleaseId,T[6]=a):a=T[6],d=a}let{selectedReleaseId:aU,selectedPerspectiveName:aV}=d,{data:aY}=(0,p.useActiveReleases)(),a$=void 0===aY?p.EMPTY_ARRAY:aY,a_=cg();T[7]!==aI||T[8]!==aJ||T[9]!==aG||T[10]!==aM?(e={paneOptions:aG,documentId:aI,documentType:aJ,params:aM},T[7]=aI,T[8]=aJ,T[9]=aG,T[10]=aM,T[11]=e):e=T[11];let a0=(a=>{var b;let c,d,e,f,g,i,j,k,l=(0,h.c)(13),{paneOptions:m,documentType:n,documentId:o,params:q}=a,r=(0,p.useTemplates)(),s=eb(),t=(0,p.useUnique)(s.payload);l[0]!==n||l[1]!==m.template||l[2]!==m.templateParameters||l[3]!==t||l[4]!==q.template||l[5]!==r?(e=(b={documentType:n,templateName:m.template,templateParams:m.templateParameters,panePayload:t,urlTemplate:q.template}).panePayload||{},f=b.templateName,b.urlTemplate&&f&&f!==b.urlTemplate&&console.warn(`Conflicting templates: URL says "${b.urlTemplate}", structure node says "${f}". Using "${f}".`),g=f||b.urlTemplate,i=r.filter(a=>a.schemaType===b.documentType),j={...b.templateParams,..."object"==typeof e&&e||{}},k=g,g||1!==i.length||(k=i[0].id),c={templateName:k,templateParams:j},l[0]=n,l[1]=m.template,l[2]=m.templateParameters,l[3]=t,l[4]=q.template,l[5]=r,l[6]=c):c=l[6];let{templateName:u,templateParams:v}=c;l[7]!==o||l[8]!==n||l[9]!==q.version||l[10]!==u||l[11]!==v?(d={documentId:o,documentType:n,templateName:u,templateParams:v,version:q.version},l[7]=o,l[8]=n,l[9]=q.version,l[10]=u,l[11]=v,l[12]=d):d=l[12];let w=(0,p.useInitialValue)(d);return(0,p.useUnique)(w)})(e),a1=a0.loading;T[12]!==aI||T[13]!==aJ||T[14]!==aM||T[15]!==ax?(f={documentId:aI,documentType:aJ,params:aM,setParams:ax},T[12]=aI,T[13]=aJ,T[14]=aM,T[15]=ax,T[16]=f):f=T[16];let{changesOpen:a2,currentInspector:a3,inspectors:a4,closeInspector:a5,openInspector:a6,handleHistoryClose:a7,handleHistoryOpen:a8,handleInspectorAction:a9,inspectOpen:ba,handleLegacyInspectClose:bb}=function(a){let b,c,d,e,f,g,i,j,l,m,n,o,q,r,s=(0,h.c)(54),{documentId:t,documentType:u,params:v,setParams:w}=a,{features:x}=dr(),y=(0,p.useSource)().document.inspectors;s[0]!==t||s[1]!==u||s[2]!==y?(b=y({documentId:t,documentType:u}),s[0]=t,s[1]=u,s[2]=y,s[3]=b):b=s[3];let z=b;s[4]!==v.inspect?(c=()=>v.inspect||null,s[4]=v.inspect,s[5]=c):c=s[5];let[A,B]=(0,k.useState)(c),C=(0,k.useRef)(v.inspect);s[6]!==v.inspect?(d=()=>{C.current!==v.inspect&&(C.current=v.inspect,B(v.inspect||null))},e=[v.inspect],s[6]=v.inspect,s[7]=d,s[8]=e):(d=s[7],e=s[8]),(0,k.useEffect)(d,e),s[9]!==A||s[10]!==z?(f=z?.find(a=>a.name===A),s[9]=A,s[10]=z,s[11]=f):f=s[11];let D=f;s[12]!==z?(g=z.find(gZ),s[12]=z,s[13]=g):g=s[13];let E=g,F=D?.name===dv;s[14]!==D||s[15]!==z||s[16]!==v||s[17]!==w?(i=a=>{let b=a&&z.find(b=>b.name===a);if(a&&!b)return void console.warn(`No inspector named "${a}"`);if(D){if(b){let a=b.onClose?.({params:v})??{params:v};B(null),C.current=void 0,w({...a.params,inspect:void 0});return}if(D){let a=D.onClose?.({params:v})??{params:v};B(null),C.current=void 0,w({...a.params,inspect:void 0})}}},s[14]=D,s[15]=z,s[16]=v,s[17]=w,s[18]=i):i=s[18];let G=i;s[19]!==D||s[20]!==z||s[21]!==v||s[22]!==w?(j=(a,b)=>{let c=z.find(b=>b.name===a);if(!c)return void console.warn(`No inspector named "${a}"`);if(D?.name===c.name)return void w({...v,...b,inspect:c.name});let d=v;D&&(d=(c.onClose?.({params:d})??{params:d}).params);let e=c.onOpen?.({params:d})??{params:d};B(c.name),C.current=c.name,w({...e.params,...b,inspect:c.name})},s[19]=D,s[20]=z,s[21]=v,s[22]=w,s[23]=j):j=s[23];let H=j;s[24]!==G||s[25]!==E?(l=()=>{E&&G(E.name)},s[24]=G,s[25]=E,s[26]=l):l=s[26];let I=l;s[27]!==x.reviewChanges||s[28]!==E||s[29]!==H?(m=()=>{x.reviewChanges&&E&&H(E.name,{changesInspectorTab:"review"})},s[27]=x.reviewChanges,s[28]=E,s[29]=H,s[30]=m):m=s[30];let J=m,K="on"===v.inspect;s[31]!==K||s[32]!==v||s[33]!==w?(n=a=>{w((void 0===a?!K:a)?{...v,inspect:"on"}:{...v,inspect:void 0})},s[31]=K,s[32]=v,s[33]=w,s[34]=n):n=s[34];let L=n;s[35]!==L?(o=()=>L(!1),s[35]=L,s[36]=o):o=s[36];let M=o;s[37]!==G||s[38]!==A||s[39]!==z||s[40]!==H||s[41]!==L?(q=a=>{if("inspect"===a.action)return L(!0),!0;if("string"!=typeof a.action)return!1;let b=a.action.slice(dt.length),c=z.find(a=>a.name===b);return!!c&&(c.name===A?G(c.name):H(c.name),!0)},s[37]=G,s[38]=A,s[39]=z,s[40]=H,s[41]=L,s[42]=q):q=s[42];let N=q;return s[43]!==F||s[44]!==G||s[45]!==D||s[46]!==I||s[47]!==J||s[48]!==N||s[49]!==M||s[50]!==K||s[51]!==z||s[52]!==H?(r={changesOpen:F,currentInspector:D,inspectors:z,closeInspector:G,openInspector:H,handleHistoryClose:I,handleHistoryOpen:J,handleInspectorAction:N,handleLegacyInspectClose:M,inspectOpen:K},s[43]=F,s[44]=G,s[45]=D,s[46]=I,s[47]=J,s[48]=N,s[49]=M,s[50]=K,s[51]=z,s[52]=H,s[53]=r):r=s[53],r}(f),[bc,bd]=(0,k.useState)(!1),{lastRevisionDocument:be}=gU(aI,aJ);T[17]!==ai||T[18]!==ae?(i=a=>!!ae&&!a?.draft&&!a?.published&&!a?.version&&!ai,T[17]=ai,T[18]=ae,T[19]=i):i=T[19];let bf=i;T[20]!==a2||T[21]!==ah?(m=a=>{let b=(0,p.selectUpstreamVersion)(a);return a2?ah||b:b||null},T[20]=a2,T[21]=ah,T[22]=m):m=T[22];let bg=m;T[23]!==aJ||T[24]!==al?(n=al.get(aJ),T[23]=aJ,T[24]=al,T[25]=n):n=T[25];let bh=n;T[26]!==bf||T[27]!==bc||T[28]!==aS||T[29]!==aM.rev||T[30]!==aO.selectedPerspective||T[31]!==a$||T[32]!==bh||T[33]!==aU?(q=a=>{let b=bf(a),c=!!aM.rev,d=a$.find(a=>(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===aU),e=(0,p.isPausedCardinalityOneRelease)(d);return c||bc||b||!e&&!(0,p.isPerspectiveWriteable)({selectedPerspective:aO.selectedPerspective,isDraftModelEnabled:aS,schemaType:bh}).result},T[26]=bf,T[27]=bc,T[28]=aS,T[29]=aM.rev,T[30]=aO.selectedPerspective,T[31]=a$,T[32]=bh,T[33]=aU,T[34]=q):q=T[34];let bi=q;T[35]!==ak||T[36]!==be||T[37]!==ag||T[38]!==af?(r=a=>ag?af||{_id:a._id,_type:a._type}:!a._createdAt&&!a._updatedAt&&ak&&be?be:a,T[35]=ak,T[36]=be,T[37]=ag,T[38]=af,T[39]=r):r=T[39];let bj=r;T[40]!==aM.path?(t=aM.path?(0,aX.fromString)(aM.path):p.EMPTY_ARRAY,T[40]=aM.path,T[41]=t):t=T[41];let bk="true"===av.stickyParams.displayInlineChanges;T[42]!==a2||T[43]!==aI||T[44]!==aJ||T[45]!==bg||T[46]!==bj||T[47]!==bi||T[48]!==a0||T[49]!==Y||T[50]!==aV||T[51]!==t||T[52]!==bk?(u={changesOpen:a2,documentType:aJ,documentId:aI,initialValue:a0,comparisonValue:bg,releaseId:aV,selectedPerspectiveName:aV,initialFocusPath:t,readOnly:bi,onFocusPath:Y,getFormDocumentValue:bj,displayInlineChanges:bk},T[42]=a2,T[43]=aI,T[44]=aJ,T[45]=bg,T[46]=bj,T[47]=bi,T[48]=a0,T[49]=Y,T[50]=aV,T[51]=t,T[52]=bk,T[53]=u):u=T[53];let{editState:bl,upstreamEditState:bm,hasUpstreamVersion:bn,connectionState:bo,focusPath:bp,onChange:bq,validation:br,ready:bs,value:bt,formState:bu,permissions:bv,onPathOpen:bw,isPermissionsLoading:bx,formStateRef:by,onProgrammaticFocus:bz,collapsedFieldSets:bA,collapsedPaths:bB,onBlur:bC,onFocus:bD,onSetActiveFieldGroup:bE,onSetCollapsedPath:bF,onSetCollapsedFieldSet:bG,openPath:bH}=(0,p.useDocumentForm)(u);T[54]!==at||T[55]!==aM||T[56]!==a$||T[57]!==aV||T[58]!==aU||T[59]!==bt?(v=function(a,b,c,d,e,f){let g;switch(!0){case!!a?.rev:g="revision";break;case b&&(0,o.isVersionId)(c._id):{let a=f.find(a=>(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===b);g=a&&(0,p.isCardinalityOneRelease)(a)?"scheduled-draft":"version";break}case"published"===d:g="published";break;case e:g="draft";break;default:g="published"}return g}(aM,aU,bt,aV,at,a$),T[54]=at,T[55]=aM,T[56]=a$,T[57]=aV,T[58]=aU,T[59]=bt,T[60]=v):v=T[60];let bI=v;T[61]!==bI||T[62]!==aI||T[63]!==aJ||T[64]!==aU?(w={schemaType:aJ,documentId:aI,versionType:bI,releaseId:aU},T[61]=bI,T[62]=aI,T[63]=aJ,T[64]=aU,T[65]=w):w=T[65];let bJ=w;T[66]!==ao||T[67]!==bJ?(x=ao(bJ),T[66]=ao,T[67]=bJ,T[68]=x):x=T[68];let bK=x;T[69]!==aT||T[70]!==bw||T[71]!==aM||T[72]!==ax?(y=a=>{if(bw(a),aT){let b=(0,p.pathToString)(a);aM.path!==b&&ax({...aM,path:b})}},T[69]=aT,T[70]=bw,T[71]=aM,T[72]=ax,T[73]=y):y=T[73];let bL=y;T[74]!==ap||T[75]!==aI||T[76]!==aJ?(z=ap({schemaType:aJ,documentId:aI}),T[74]=ap,T[75]=aI,T[76]=aJ,T[77]=z):z=T[77];let bM=z;T[78]!==aI||T[79]!==aJ||T[80]!==ar?(A=ar({schemaType:aJ,documentId:aI}),T[78]=aI,T[79]=aJ,T[80]=ar,T[81]=A):A=T[81];let bN=A,bO=(0,p.useUnique)(aF),bP=aM.view||bO[0]&&bO[0].id||null,bQ=function(a){let b,c,d,e,f=(0,h.c)(6),{resolveProductionUrl:g}=(0,p.useSource)().document;f[0]===Symbol.for("react.memo_cache_sentinel")?(b=new aL.BehaviorSubject(void 0),f[0]=b):b=f[0];let i=b;return f[1]!==a?(c=()=>{i.next(a)},d=[i,a],f[1]=a,f[2]=c,f[3]=d):(c=f[2],d=f[3]),(0,k.useEffect)(c,d),f[4]!==g?(e=i.asObservable().pipe((0,aW.distinctUntilChanged)(),(0,aW.debounceTime)(500),(0,aW.switchMap)(a=>(0,p.isRecord)(a)&&"string"==typeof a._id&&"string"==typeof a._type?(0,aL.from)(g({document:a})):(0,aL.of)(void 0)),(0,aW.distinctUntilChanged)(),(0,aW.catchError)(g$)),f[4]=g,f[5]=e):e=f[5],(0,aK.useObservable)(e)}(bt),{t:bR}=(0,p.useTranslation)(F);T[82]!==aI||T[83]!==aJ||T[84]!==aq||T[85]!==bh?(B=bh?aq({documentId:aI,documentType:aJ,schemaType:bh}):[],T[82]=aI,T[83]=aJ,T[84]=aq,T[85]=bh,T[86]=B):B=T[86];let bS=B,bT=bs&&(!aM.rev||ae||!!ad);T[87]!==bj||T[88]!==bt?(C=bj(bt),T[87]=bj,T[88]=bt,T[89]=C):C=T[89];let bU=C;T[90]!==bU||T[91]!==aI||T[92]!==bl?(D={strict:!0,displayed:bU,documentId:aI,editState:bl},T[90]=bU,T[91]=aI,T[92]=bl,T[93]=D):D=T[93];let{previousId:bV}=(0,p.useDocumentIdStack)(D);T[94]!==aM||T[95]!==ax?(E=(a,b)=>{ax({...aM,since:a,rev:b||void 0})},T[94]=aM,T[95]=ax,T[96]=E):E=T[96];let bW=E;T[97]!==aw?(G=()=>aw.closeCurrent(),T[97]=aw,T[98]=G):G=T[98];let bX=G;T[99]!==aw?(H=()=>aw.duplicateCurrent(),T[99]=aw,T[100]=H):H=T[100];let bY=H;T[101]!==av||T[102]!==au?(I=()=>{let a="true"!==av.stickyParams.displayInlineChanges;au.log(a?gX:gY),av.navigate({stickyParams:{displayInlineChanges:String(a)}})},T[101]=av,T[102]=au,T[103]=I):I=T[103];let bZ=I;T[104]!==aN||T[105]!==a_||T[106]!==aI||T[107]!==aJ||T[108]!==a8||T[109]!==a9||T[110]!==bQ||T[111]!==bV||T[112]!==ay||T[113]!==bR||T[114]!==au||T[115]!==bZ||T[116]!==bt._id?(J=async a=>{if("production-preview"===a.action&&bQ)return window.open(bQ),!0;if("copy-document-url"===a.action&&navigator){au.log(gW);let a=aN({coreUi:a=>`${a}/intent/edit/id=${aI};type=${aJ}`});return await navigator.clipboard.writeText(a),ay({id:"copy-document-url",status:"info",title:bR("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===a.action?(a8(),!0):(("inspect"===a.action||"string"==typeof a.action&&a.action.startsWith(dt))&&a9(a),"compareVersions"===a.action&&"u">typeof bV?(a_.navigateDiffView({mode:"version",previousDocument:{type:aJ,id:bV},nextDocument:{type:aJ,id:bt._id}}),!0):"toggleInlineChanges"===a.action&&(bZ(),!0))},T[104]=aN,T[105]=a_,T[106]=aI,T[107]=aJ,T[108]=a8,T[109]=a9,T[110]=bQ,T[111]=bV,T[112]=ay,T[113]=bR,T[114]=au,T[115]=bZ,T[116]=bt._id,T[117]=J):J=T[117];let b$=J;T[118]!==aI||T[119]!==aJ||T[120]!==bq||T[121]!==bh||T[122]!==am?(K=()=>{am({documentId:aI,documentType:aJ,schemaType:bh,onChange:bq})},L=[aI,aJ,bh,bq,am],T[118]=aI,T[119]=aJ,T[120]=bq,T[121]=bh,T[122]=am,T[123]=K,T[124]=L):(K=T[123],L=T[124]),(0,k.useEffect)(K,L),T[125]!==bg||T[126]!==bm?(M=bg(bm),T[125]=bg,T[126]=bm,T[127]=M):M=T[127];let b_=M,b0=bf(bl),b1=ag&&!af&&bT;b:{if(bl.version&&(0,p.isGoingToUnpublish)(bl.version)){N=bl.published;break b}N=bU}let b2=N,b3=a3||null;T[128]!==aD?(O=aD||[],T[128]=aD,T[129]=O):O=T[129],T[130]!==bK||T[131]!==bP||T[132]!==bM||T[133]!==a2||T[134]!==a5||T[135]!==bA||T[136]!==bB||T[137]!==b_||T[138]!==bo||T[139]!==b2||T[140]!==aI||T[141]!==aH||T[142]!==aJ||T[143]!==bl||T[144]!==bS||T[145]!==bp||T[146]!==bu||T[147]!==a7||T[148]!==a8||T[149]!==bb||T[150]!==b$||T[151]!==bX||T[152]!==bY||T[153]!==bL||T[154]!==bn||T[155]!==V||T[156]!==ba||T[157]!==a4||T[158]!==b0||T[159]!==bc||T[160]!==a1||T[161]!==bx||T[162]!==bN||T[163]!==ak||T[164]!==be||T[165]!==ab||T[166]!==bC||T[167]!==bq||T[168]!==bD||T[169]!==bE||T[170]!==bG||T[171]!==bF||T[172]!==Z||T[173]!==a6||T[174]!==bH||T[175]!==X||T[176]!==bv||T[177]!==bQ||T[178]!==bT||T[179]!==aj||T[180]!==b1||T[181]!==bh||T[182]!==aU||T[183]!==bW||T[184]!==b3||T[185]!==O||T[186]!==ad||T[187]!==ac||T[188]!==aE||T[189]!==br||T[190]!==bt||T[191]!==bO?(P={actions:bK,activeViewId:bP,badges:bM,changesOpen:a2,closeInspector:a5,collapsedFieldSets:bA,collapsedPaths:bB,compareValue:b_,connectionState:bo,displayed:b2,documentId:aI,documentIdRaw:aH,documentType:aJ,editState:bl,fieldActions:bS,focusPath:bp,inspector:b3,inspectors:a4,onBlur:bC,onChange:bq,onFocus:bD,onPathOpen:bL,onHistoryClose:a7,onHistoryOpen:a8,onInspectClose:bb,onMenuAction:b$,onPaneClose:bX,onPaneSplit:bY,onSetActiveFieldGroup:bE,onSetCollapsedPath:bF,onSetCollapsedFieldSet:bG,onSetMaximizedPane:Z,maximized:ab,openInspector:a6,openPath:bH,index:V,inspectOpen:ba,validation:br,menuItemGroups:O,paneKey:X,previewUrl:bQ,ready:bT,schemaType:bh,hasUpstreamVersion:bn,isPermissionsLoading:bx,isInitialValueLoading:a1,permissions:bv,setTimelineRange:bW,setIsDeleting:bd,isDeleting:bc,isDeleted:b0,timelineError:ad,timelineStore:ac,title:aE,value:bt,selectedReleaseId:aU,views:bO,formState:bu,unstable_languageFilter:bN,revisionId:aj,revisionNotFound:b1,lastNonDeletedRevId:ak,lastRevisionDocument:be},T[130]=bK,T[131]=bP,T[132]=bM,T[133]=a2,T[134]=a5,T[135]=bA,T[136]=bB,T[137]=b_,T[138]=bo,T[139]=b2,T[140]=aI,T[141]=aH,T[142]=aJ,T[143]=bl,T[144]=bS,T[145]=bp,T[146]=bu,T[147]=a7,T[148]=a8,T[149]=bb,T[150]=b$,T[151]=bX,T[152]=bY,T[153]=bL,T[154]=bn,T[155]=V,T[156]=ba,T[157]=a4,T[158]=b0,T[159]=bc,T[160]=a1,T[161]=bx,T[162]=bN,T[163]=ak,T[164]=be,T[165]=ab,T[166]=bC,T[167]=bq,T[168]=bD,T[169]=bE,T[170]=bG,T[171]=bF,T[172]=Z,T[173]=a6,T[174]=bH,T[175]=X,T[176]=bv,T[177]=bQ,T[178]=bT,T[179]=aj,T[180]=b1,T[181]=bh,T[182]=aU,T[183]=bW,T[184]=b3,T[185]=O,T[186]=ad,T[187]=ac,T[188]=aE,T[189]=br,T[190]=bt,T[191]=bO,T[192]=P):P=T[192];let b4=P,b5=(0,k.useRef)(void 0);return T[193]!==aT||T[194]!==by||T[195]!==bz||T[196]!==aw||T[197]!==aM||T[198]!==bT?(Q=()=>{if(bT&&aM.path){let{path:a,...b}=aM;a!==b5.current&&bz((0,aX.resolveKeyedPath)(by.current?.value,(0,aX.fromString)(a))),aT||aw.setParams(b)}b5.current=aM.path},R=[by,bz,aw,aM,bT,aT],T[193]=aT,T[194]=by,T[195]=bz,T[196]=aw,T[197]=aM,T[198]=bT,T[199]=Q,T[200]=R):(Q=T[199],R=T[200]),(0,k.useEffect)(Q,R),T[201]!==U||T[202]!==b4?(S=(0,g.jsx)(l.DocumentPaneContext.Provider,{value:b4,children:U}),T[201]=U,T[202]=b4,T[203]=S):S=T[203],S}let g0=a=>{let b,c,d,e,f,i,j,k=(0,h.c)(37),{params:l}=eb(),m=void 0===l?ds:l,n=hf(a.pane.options,m),q=(0,p.useSchema)(),r=n.type,s=!!q.get(n.type)?.liveEdit,{selectedPerspectiveName:t,selectedReleaseId:u,selectedPerspective:v}=(0,p.usePerspective)(),{data:w}=(0,p.useArchivedReleases)();k[0]!==n.id?(b=(0,o.getPublishedId)(n.id),k[0]=n.id,k[1]=b):b=k[1];let x=(0,p.useEditState)(b,r,"default",u),y=s&&"drafts"===v&&!x?.draft,{rev:z,since:A}=m,B=m.historyVersion;a:{if(y){let a;k[2]!==n.id?(a=(0,o.getPublishedId)(n.id),k[2]=n.id,k[3]=a):a=k[3],c=a;break a}if(B&&w.some(a=>(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===B)){let a;k[4]!==B||k[5]!==n.id?(a=(0,o.getVersionId)(n.id,B),k[4]=B,k[5]=n.id,k[6]=a):a=k[6],c=a;break a}if(typeof t>"u"){let a;k[7]!==n.id?(a=(0,o.getDraftId)(n.id),k[7]=n.id,k[8]=a):a=k[8],c=a;break a}if("published"===t){let a;k[9]!==n.id?(a=(0,o.getPublishedId)(n.id),k[9]=n.id,k[10]=a):a=k[10],c=a;break a}if(0!==t.length){let a;k[11]!==n.id||k[12]!==t?(a=(0,o.getVersionId)(n.id,t),k[11]=n.id,k[12]=t,k[13]=a):a=k[13],c=a;break a}c=n.id}let C=c;k[14]!==C||k[15]!==n.type||k[16]!==z||k[17]!==A?(d={documentId:C,documentType:n.type,rev:z,since:A},k[14]=C,k[15]=n.type,k[16]=z,k[17]=A,k[18]=d):d=k[18];let D=(0,p.useEventsStore)(d),E=D.error,F=D.revision?.revisionId||null,G=!!(z&&!D.revision?.loading),H=D.revision?.document||null,I=D.sinceRevision?.document||null,J=!D.loading,K=0===D.events.length;k[19]!==D.events?(e=D.events.find(g1)?.id||null,k[19]=D.events,k[20]=e):e=k[20],k[21]!==D.error||k[22]!==K||k[23]!==e||k[24]!==F||k[25]!==G||k[26]!==H||k[27]!==I||k[28]!==J?(f={error:E,revisionId:F,onOlderRevision:G,revisionDocument:H,sinceDocument:I,ready:J,isPristine:K,lastNonDeletedRevId:e},k[21]=D.error,k[22]=K,k[23]=e,k[24]=F,k[25]=G,k[26]=H,k[27]=I,k[28]=J,k[29]=f):f=k[29];let L=f;return k[30]!==L||k[31]!==B||k[32]!==a?(i=B?(0,g.jsx)(p.PerspectiveProvider,{selectedPerspectiveName:B,excludedPerspectives:p.EMPTY_ARRAY,children:(0,g.jsx)(g_,{...a,historyStore:L})}):(0,g.jsx)(g_,{...a,historyStore:L}),k[30]=L,k[31]=B,k[32]=a,k[33]=i):i=k[33],k[34]!==i||k[35]!==D?(j=(0,g.jsx)(p.EventsProvider,{value:D,children:i}),k[34]=i,k[35]=D,k[36]=j):j=k[36],j};function g1(a){return!(0,p.isDeleteDocumentGroupEvent)(a)&&!(0,p.isDeleteDocumentVersionEvent)(a)}let g2=a=>{let b,c,d,e,f=(0,h.c)(20),{pane:i}=a,j=eb(),l=hf(i.options,j.params),m=j.params||ds,[n,q]=(0,k.useState)(null);f[0]!==l.id?(b=(0,o.getPublishedId)(l.id),f[0]=l.id,f[1]=b):b=f[1],f[2]!==l.type||f[3]!==m.rev||f[4]!==m.since||f[5]!==b?(c={documentId:b,documentType:l.type,onError:q,rev:m.rev,since:m.since},f[2]=l.type,f[3]=m.rev,f[4]=m.since,f[5]=b,f[6]=c):c=f[6];let r=(0,p.useTimelineStore)(c),s=(0,p.useTimelineSelector)(r,g3),t=(0,p.useTimelineSelector)(r,g4),u=(0,p.useTimelineSelector)(r,g5),v=(0,p.useTimelineSelector)(r,g6),w=(0,p.useTimelineSelector)(r,g7),x=(0,p.useTimelineSelector)(r,g8),y=(0,p.useTimelineSelector)(r,g9),z=t?.id||null,A=!!x;f[7]!==y||f[8]!==s||f[9]!==r||f[10]!==z||f[11]!==v||f[12]!==u||f[13]!==A||f[14]!==n||f[15]!==w?(d={store:r,error:n,revisionId:z,onOlderRevision:s,revisionDocument:v,sinceDocument:u,ready:w,isPristine:A,lastNonDeletedRevId:y},f[7]=y,f[8]=s,f[9]=r,f[10]=z,f[11]=v,f[12]=u,f[13]=A,f[14]=n,f[15]=w,f[16]=d):d=f[16];let B=d;return f[17]!==B||f[18]!==a?(e=(0,g.jsx)(g_,{...a,historyStore:B}),f[17]=B,f[18]=a,f[19]=e):e=f[19],e};function g3(a){return a.onOlderRevision}function g4(a){return a.revTime}function g5(a){return a.sinceAttributes}function g6(a){return a.timelineDisplayed}function g7(a){return a.timelineReady}function g8(a){return a.isPristine}function g9(a){return a.lastNonDeletedRevId}function ha(a){let b=(0,h.c)(4),{children:c}=a,d=eb(),{excludedPerspectives:e}=(0,p.usePerspective)(),{scheduledDraft:f}=d.params;if(f){let a;return b[0]!==c||b[1]!==e||b[2]!==f?(a=(0,g.jsx)(p.PerspectiveProvider,{selectedPerspectiveName:f,excludedPerspectives:e,children:c}),b[0]=c,b[1]=e,b[2]=f,b[3]=a):a=b[3],a}return c}let hb=(0,k.memo)(a=>{let b,c,d,e=(0,h.c)(9),f=(0,p.useSource)(),{setParams:i,params:j}=eb();e[0]!==j||e[1]!==i?(b=a=>{i({...j,scheduledDraft:a},{perspective:""})},e[0]=j,e[1]=i,e[2]=b):b=e[2];let k=b;return e[3]!==a||e[4]!==f.beta?.eventsAPI?.documents?(c=f.beta?.eventsAPI?.documents?(0,g.jsx)(g0,{...a}):(0,g.jsx)(g2,{...a}),e[3]=a,e[4]=f.beta?.eventsAPI?.documents,e[5]=c):c=e[5],e[6]!==k||e[7]!==c?(d=(0,g.jsx)(ha,{children:(0,g.jsx)(p.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:k,children:c})}),e[6]=k,e[7]=c,e[8]=d):d=e[8],d});hb.displayName="Memo(DocumentPaneProviderWrapper)";let hc=(0,k.memo)(function(a){let b,c,d=(0,h.c)(5),{name:e}=(0,p.useSource)(),f=a.pane.source||e;return d[0]!==a?(b=(0,g.jsx)(p.CopyPasteProvider,{children:(0,g.jsx)(hd,{...a})}),d[0]=a,d[1]=b):b=d[1],d[2]!==f||d[3]!==b?(c=(0,g.jsx)(p.SourceProvider,{name:f,children:b}),d[2]=f,d[3]=b,d[4]=c):c=d[4],c});function hd(a){var b,c,d;let e,f,j,l,m,n,o,q,r,s,t,u,v=(0,h.c)(57),{pane:w,paneKey:x}=a,{resolveNewDocumentOptions:y}=(0,p.useSource)().document,{selectedPerspectiveName:z}=(0,p.usePerspective)(),A=eb(),B=hf(w.options,A.params),{documentType:C,isLoaded:D}=(0,p.useDocumentType)(B.id,B.type);!function(){let a,b,c,d,e,f=(0,h.c)(10),{params:g,setParams:i}=eb(),j=void 0===g?ds:g,{selectedPerspectiveName:l}=(0,p.usePerspective)(),m=(0,k.useRef)(!1);f[0]!==j||f[1]!==i?(a=a=>{["since","historyVersion","rev","preserveRev"].some(a=>j[a])&&i({...j,rev:"true"===j.preserveRev?j.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},f[0]=j,f[1]=i,f[2]=a):a=f[2];let n=(0,k.useEffectEvent)(a);f[3]!==l||f[4]!==n?(b=()=>{m.current&&n(l)},f[3]=l,f[4]=n,f[5]=b):b=f[5],f[6]!==l?(c=[l],f[6]=l,f[7]=c):c=f[7],(0,k.useEffect)(b,c),f[8]===Symbol.for("react.memo_cache_sentinel")?(d=()=>(m.current=!0,()=>{m.current=!1}),e=[],f[8]=d,f[9]=e):(d=f[8],e=f[9]),(0,k.useEffect)(d,e)}();let E=((u=(0,h.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(t={pick:cu,defaultComponent:gT},u[0]=t):t=u[0],(0,p.useMiddlewareComponents)(t));v[0]!==B.id||v[1]!==B.type||v[2]!==y?(e=y({type:"document",documentId:B.id,schemaType:B.type}),v[0]=B.id,v[1]=B.type,v[2]=y,v[3]=e):e=v[3];let G=e;v[4]!==G?(f={templateItems:G},v[4]=G,v[5]=f):f=v[5];let[H,I]=(0,p.useTemplatePermissions)(f),J=D&&!I;v[6]!==C||v[7]!==J||v[8]!==B||v[9]!==a?(j=J&&C&&B.type!==C?(b=a,c=B,d=C,{...b,pane:{...b.pane,options:{...c,type:d}}}):a,v[6]=C,v[7]=J,v[8]=B,v[9]=a,v[10]=j):j=v[10];let K=j,{ReferenceChildLink:L,handleEditReference:M,groupIndex:N,routerPanesState:O}=A;v[11]!==N||v[12]!==O?(l=O[N+1]?.[0].params||{},v[11]=N,v[12]=O,v[13]=l):l=v[13];let P=l,Q=O.length,{parentRefPath:R}=P;v[14]!==N||v[15]!==R||v[16]!==Q?(m=R?{path:(0,aX.fromString)(R),state:N>=Q-1?"none":N>=Q-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=N,v[15]=R,v[16]=Q,v[17]=m):m=v[17];let S=m,{t:T}=(0,p.useTranslation)(F);if("*"===B.type&&!J){let a,b;return v[18]!==T?(a=T("panes.document-pane.document-not-found.loading"),v[18]=T,v[19]=a):a=v[19],v[20]!==x||v[21]!==a?(b=(0,g.jsx)(di,{flex:2.5,minWidth:320,paneKey:x,title:a}),v[20]=x,v[21]=a,v[22]=b):b=v[22],b}if(!C){let a,b,c,d,e;return v[23]!==T?(a=T("panes.document-pane.document-not-found.title"),v[23]=T,v[24]=a):a=v[24],v[25]!==B.id?(b={id:B.id},v[25]=B.id,v[26]=b):b=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(c={Code:he},v[27]=c):c=v[27],v[28]!==T||v[29]!==b?(d=(0,g.jsx)(i.Stack,{space:4,children:(0,g.jsx)(i.Text,{as:"p",children:(0,g.jsx)(p.Translate,{t:T,i18nKey:"panes.document-pane.document-not-found.text",values:b,components:c})})}),v[28]=T,v[29]=b,v[30]=d):d=v[30],v[31]!==x||v[32]!==a||v[33]!==d?(e=(0,g.jsx)(de,{flex:2.5,minWidth:320,paneKey:x,title:a,children:d}),v[31]=x,v[32]=a,v[33]=d,v[34]=e):e=v[34],e}let U=`${C}-${B.id}-${z||""}`;return v[35]!==E||v[36]!==B.id||v[37]!==B.type?(n=(0,g.jsx)(E,{documentId:B.id,documentType:B.type}),v[35]=E,v[36]=B.id,v[37]=B.type,v[38]=n):n=v[38],v[39]!==B.id||v[40]!==B.type||v[41]!==n?(o=(0,g.jsx)(dk,{documentId:B.id,documentType:B.type,children:n}),v[39]=B.id,v[40]=B.type,v[41]=n,v[42]=o):o=v[42],v[43]!==B.id||v[44]!==B.type||v[45]!==o?(q=(0,g.jsx)(cG,{documentId:B.id,documentType:B.type,children:o}),v[43]=B.id,v[44]=B.type,v[45]=o,v[46]=q):q=v[46],v[47]!==L||v[48]!==S||v[49]!==M||v[50]!==q||v[51]!==H?(r=(0,g.jsx)(p.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:L,onEditReference:M,initialValueTemplateItems:H,activePath:S,children:q}),v[47]=L,v[48]=S,v[49]=M,v[50]=q,v[51]=H,v[52]=r):r=v[52],v[53]!==K||v[54]!==U||v[55]!==r?(s=(0,g.jsx)(hb,{...K,children:r},U),v[53]=K,v[54]=U,v[55]=r,v[56]=s):s=v[56],s}function he(a){let{children:b}=a;return(0,g.jsx)("code",{children:b})}function hf(a,b){let c,d,e=(0,h.c)(8);e[0]!==b?(c=void 0===b?{}:b,e[0]=b,e[1]=c):c=e[1];let f=c,g=(0,p.useTemplates)();a:{let b,c;if(a.type&&"*"!==a.type){d=a;break a}let h=a.template||f.template;e[2]!==h||e[3]!==g?(b=h?g.find(a=>a.id===h):void 0,e[2]=h,e[3]=g,e[4]=b):b=e[4];let i=b?.schemaType;if(!i){d=a;break a}e[5]!==i||e[6]!==a?(c={...a,type:i},e[5]=i,e[6]=a,e[7]=c):c=e[7],d=c}return d}let hg=(0,k.forwardRef)(function(a,b){let c,d,e,f=(0,h.c)(9),{routerPanesState:i,groupIndex:j}=(0,k.useContext)(l.PaneRouterContext);f[0]!==j||f[1]!==i?(c=i.slice(0,j),f[0]=j,f[1]=i,f[2]=c):c=f[2];let m=c;f[3]!==m?(d={panes:m},f[3]=m,f[4]=d):d=f[4];let n=d;return f[5]!==a||f[6]!==b||f[7]!==n?(e=(0,g.jsx)(s.StateLink,{...a,ref:b,state:n}),f[5]=a,f[6]=b,f[7]=n,f[8]=e):e=f[8],e}),hh=(0,k.forwardRef)(function(a,b){let c,d,e,f,i,j,m=(0,h.c)(19);m[0]!==a?({childId:c,childPayload:e,childParameters:d,...f}=a,m[0]=a,m[1]=c,m[2]=d,m[3]=e,m[4]=f):(c=m[1],d=m[2],e=m[3],f=m[4]);let{routerPanesState:n,groupIndex:o}=(0,k.useContext)(l.PaneRouterContext);if(m[5]!==c||m[6]!==d||m[7]!==e||m[8]!==o||m[9]!==n){let a;m[11]!==c||m[12]!==d||m[13]!==e?(a=[{id:c,params:d,payload:e}],m[11]=c,m[12]=d,m[13]=e,m[14]=a):a=m[14],i={panes:[...n.slice(0,o+1),a]},m[5]=c,m[6]=d,m[7]=e,m[8]=o,m[9]=n,m[10]=i}else i=m[10];return m[15]!==b||m[16]!==f||m[17]!==i?(j=(0,g.jsx)(s.StateLink,{...f,ref:b,state:i}),m[15]=b,m[16]=f,m[17]=i,m[18]=j):j=m[18],j}),hi=(0,k.forwardRef)(function(a,b){let c,d,e,f,i,j,m,n=(0,h.c)(20),{routerPanesState:o,groupIndex:q,siblingIndex:r}=(0,k.useContext)(l.PaneRouterContext);n[0]!==a?({params:c,payload:d,...e}=a,n[0]=a,n[1]=c,n[2]=d,n[3]=e):(c=n[1],d=n[2],e=n[3]);let t=(0,p.useUnique)(c),u=(0,p.useUnique)(d),v=o[q],w=v[r],x=t??w.params,y=u??w.payload;n[4]!==w||n[5]!==x||n[6]!==y?(f={...w,params:x,payload:y},n[4]=w,n[5]=x,n[6]=y,n[7]=f):f=n[7];let z=f;n[8]!==v||n[9]!==z||n[10]!==r?(i=[...v.slice(0,r),z,...v.slice(r+1)],n[8]=v,n[9]=z,n[10]=r,n[11]=i):i=n[11];let A=i;n[12]!==o||n[13]!==q||n[14]!==A?(j={panes:[...o.slice(0,q),A,...o.slice(q+1)]},n[12]=o,n[13]=q,n[14]=A,n[15]=j):j=n[15];let B=j;return n[16]!==B||n[17]!==b||n[18]!==e?(m=(0,g.jsx)(s.StateLink,{ref:b,...e,state:B}),n[16]=B,n[17]=b,n[18]=e,n[19]=m):m=n[19],m}),hj=(0,k.forwardRef)(function(a,b){let c,d,e,f,i,j,k,l,m,n,p,q=(0,h.c)(24);q[0]!==a?({documentId:d,documentType:e,parentRefPath:f,children:c,template:j,...i}=a,q[0]=a,q[1]=c,q[2]=d,q[3]=e,q[4]=f,q[5]=i,q[6]=j):(c=q[1],d=q[2],e=q[3],f=q[4],i=q[5],j=q[6]),q[7]!==d?(k=(0,o.getPublishedId)(d),q[7]=d,q[8]=k):k=q[8];let r=j?.params;return q[9]!==f?(l=(0,aX.toString)(f),q[9]=f,q[10]=l):l=q[10],q[11]!==j?(m=j&&{template:j?.id},q[11]=j,q[12]=m):m=q[12],q[13]!==e||q[14]!==l||q[15]!==m?(n={type:e,parentRefPath:l,...m},q[13]=e,q[14]=l,q[15]=m,q[16]=n):n=q[16],q[17]!==c||q[18]!==b||q[19]!==i||q[20]!==k||q[21]!==r||q[22]!==n?(p=(0,g.jsx)(hh,{...i,ref:b,childId:k,childPayload:r,childParameters:n,children:c}),q[17]=c,q[18]=b,q[19]=i,q[20]=k,q[21]=r,q[22]=n,q[23]=p):p=q[23],p}),hk=[];function hl(a){let b,c,d,e,f,i,j,k,m,n,o,p,q,r=(0,h.c)(60),{children:t,flatIndex:u,index:v,params:w,payload:x,siblingIndex:y}=a,{navigate:z,navigateIntent:A,resolvePathFromState:B}=(0,s.useRouter)(),C=(0,s.useRouterState)(),{panes:D,expand:E}=cH(),F=C?.panes||hk,G=D?.[D.length-2],H=v-1;r[0]!==H||r[1]!==F||r[2]!==C||r[3]!==y?(b=a=>{let b=F[H]||[],c=b[y],d=a(b,c),e=[...F.slice(0,H),d,...F.slice(H+1)];return{...C,panes:e}},r[0]=H,r[1]=F,r[2]=C,r[3]=y,r[4]=b):b=r[4];let I=b;r[5]!==I||r[6]!==z?(c=(a,b)=>{let c=I(a);return setTimeout(()=>z(c,b?{stickyParams:b}:void 0),0),c},r[5]=I,r[6]=z,r[7]=c):c=r[7];let J=c;r[8]!==I||r[9]!==B||r[10]!==y?(d=a=>B(I((b,c)=>[...b.slice(0,y),{...c,params:a},...b.slice(y+1)])),r[8]=I,r[9]=B,r[10]=y,r[11]=d):d=r[11];let K=d;r[12]!==J||r[13]!==y?(e=a=>{J((b,c)=>[...b.slice(0,y),{...c,payload:a},...b.slice(y+1)])},r[12]=J,r[13]=y,r[14]=e):e=r[14];let L=e;r[15]!==J||r[16]!==y?(f=(a,b)=>{J((b,c)=>[...b.slice(0,y),{...c,params:a},...b.slice(y+1)],b)},r[15]=J,r[16]=y,r[17]=f):f=r[17];let M=f;r[18]!==H||r[19]!==z||r[20]!==F?(i=a=>{let{id:b,parentRefPath:c,type:d,template:e,version:f}=a;z({panes:[...F.slice(0,H+1),[{id:b,params:{template:e.id,parentRefPath:(0,aX.toString)(c),type:d,version:f},payload:e.params}]]})},r[18]=H,r[19]=z,r[20]=F,r[21]=i):i=r[21];let N=i,O=!!F[H]&&F[H].length>1,P=F[H]?F[H].length:0,Q=u?hg:void 0;r[22]!==J?(k=a=>{let b=void 0===a?{}:a;J(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},j=()=>{J(hm)},r[22]=J,r[23]=j,r[24]=k):(j=r[23],k=r[24]),r[25]!==E||r[26]!==H||r[27]!==G||r[28]!==z||r[29]!==F?(m=a=>{(void 0===a||a)&&G&&E(G.element),z({panes:F.slice(0,H)})},r[25]=E,r[26]=H,r[27]=G,r[28]=z,r[29]=F,r[30]=m):m=r[30],r[31]!==J||r[32]!==y?(n=a=>{J((b,c)=>{let d={...c,payload:a?.payload||c.payload,params:a?.params||c.params};return[...b.slice(0,y),d,...b.slice(y)]})},r[31]=J,r[32]=y,r[33]=n):n=r[33],r[34]!==w||r[35]!==M?(o=a=>{let b=(0,aR.omit)(w,"view");return M(a?{...b,view:a}:b)},r[34]=w,r[35]=M,r[36]=o):o=r[36],r[37]!==K||r[38]!==u||r[39]!==H||r[40]!==N||r[41]!==A||r[42]!==w||r[43]!==x||r[44]!==F||r[45]!==M||r[46]!==L||r[47]!==y||r[48]!==j||r[49]!==m||r[50]!==n||r[51]!==o||r[52]!==O||r[53]!==P||r[54]!==Q||r[55]!==k?(p={index:u,groupIndex:H,siblingIndex:y,payload:x,params:w,hasGroupSiblings:O,groupLength:P,routerPanesState:F,ChildLink:hh,BackLink:Q,ReferenceChildLink:hj,handleEditReference:N,ParameterizedLink:hi,replaceCurrent:k,closeCurrent:j,closeCurrentAndAfter:m,duplicateCurrent:n,setView:o,setParams:M,setPayload:L,createPathWithParams:K,navigateIntent:A},r[37]=K,r[38]=u,r[39]=H,r[40]=N,r[41]=A,r[42]=w,r[43]=x,r[44]=F,r[45]=M,r[46]=L,r[47]=y,r[48]=j,r[49]=m,r[50]=n,r[51]=o,r[52]=O,r[53]=P,r[54]=Q,r[55]=k,r[56]=p):p=r[56];let R=p;return r[57]!==t||r[58]!==R?(q=(0,g.jsx)(l.PaneRouterContext.Provider,{value:R,children:t}),r[57]=t,r[58]=R,r[59]=q):q=r[59],q}function hm(a,b){return a.length>1?a.filter(a=>a!==b):a}function hn(a){let b,c,d,e,f,j=(0,h.c)(14),{isSelected:k,pane:l,paneKey:m}=a;j[0]!==l?(b=(0,p.isRecord)(l)&&l.type||null,j[0]=l,j[1]=b):b=j[1];let n=b,{t:o}=(0,p.useTranslation)(F);return j[2]!==o?(c=o("panes.unknown-pane-type.title"),j[2]=o,j[3]=c):c=j[3],j[4]!==c?(d=(0,g.jsx)(c4,{title:c}),j[4]=c,j[5]=d):d=j[5],j[6]!==o||j[7]!==n?(e=(0,g.jsx)(cO,{children:(0,g.jsx)(i.Box,{padding:4,children:"string"==typeof n?(0,g.jsx)(i.Text,{as:"p",muted:!0,children:(0,g.jsx)(p.Translate,{t:o,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:n}})}):(0,g.jsx)(i.Text,{as:"p",muted:!0,children:(0,g.jsx)(p.Translate,{t:o,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),j[6]=o,j[7]=n,j[8]=e):e=j[8],j[9]!==k||j[10]!==m||j[11]!==d||j[12]!==e?(f=(0,g.jsxs)(cL,{id:m,selected:k,children:[d,e]}),j[9]=k,j[10]=m,j[11]=d,j[12]=e,j[13]=f):f=j[13],f}let ho={component:(0,k.lazy)(()=>a.A(955027)),document:(0,k.lazy)(()=>Promise.resolve().then(function(){return kn})),documentList:(0,k.lazy)(()=>Promise.resolve().then(function(){return ko})),list:(0,k.lazy)(()=>a.A(694330))},hp=(0,k.memo)(function(a){let b,c,d,e,f=(0,h.c)(25),{active:i,childItemId:j,groupIndex:l,index:m,itemId:n,pane:o,paneKey:p,params:q,payload:r,path:s,selected:t,siblingIndex:u,maximized:v,onSetMaximizedPane:w}=a,x=ho[o.type]||hn;f[0]!==p||f[1]!==s||f[2]!==t?(b=(0,g.jsx)(di,{paneKey:p,path:s,selected:t}),f[0]=p,f[1]=s,f[2]=t,f[3]=b):b=f[3];let y=j||"";return f[4]!==x||f[5]!==i||f[6]!==m||f[7]!==n||f[8]!==v||f[9]!==w||f[10]!==o||f[11]!==p||f[12]!==t||f[13]!==y?(c=(0,g.jsx)(x,{childItemId:y,index:m,itemId:n,isActive:i,isSelected:t,paneKey:p,pane:o,maximized:v,onSetMaximizedPane:w}),f[4]=x,f[5]=i,f[6]=m,f[7]=n,f[8]=v,f[9]=w,f[10]=o,f[11]=p,f[12]=t,f[13]=y,f[14]=c):c=f[14],f[15]!==b||f[16]!==c?(d=(0,g.jsx)(k.Suspense,{fallback:b,children:c}),f[15]=b,f[16]=c,f[17]=d):d=f[17],f[18]!==l||f[19]!==m||f[20]!==q||f[21]!==r||f[22]!==u||f[23]!==d?(e=(0,g.jsx)(hl,{flatIndex:m,index:l,params:q,payload:r,siblingIndex:u,children:d}),f[18]=l,f[19]=m,f[20]=q,f[21]=r,f[22]=u,f[23]=d,f[24]=e):e=f[24],e},({params:a={},payload:b=null,...c},{params:d={},payload:e=null,...f})=>{if(!(0,aS.isEqual)(a,d)||!(0,aS.isEqual)(b,e))return!1;for(let a of new Set([...Object.keys(c),...Object.keys(f)]))if(c[a]!==f[a])return!1;return!0});function hq(a){let b,c,d=(0,h.c)(10),{document:e}=a,f=(0,p.useSchema)().get(e._type),{t:i}=(0,p.useTranslation)(F),{title:j}=dz();if(!f){let a,b;return d[0]!==e._type||d[1]!==i?(a=i("doc-title.unknown-schema-type.text",{schemaType:e._type}),d[0]=e._type,d[1]=i,d[2]=a):a=d[2],d[3]!==a?(b=(0,g.jsx)("code",{children:a}),d[3]=a,d[4]=b):b=d[4],b}return d[5]!==i||d[6]!==j?(b=j||(0,g.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:i("doc-title.fallback.text")}),d[5]=i,d[6]=j,d[7]=b):b=d[7],d[8]!==b?(c=(0,g.jsx)(g.Fragment,{children:b}),d[8]=b,d[9]=c):c=d[9],c}let hr=(0,aI.styled)(i.Box).withConfig({displayName:"ChevronWrapper",componentId:"sc-1ldyu0k-0"})`margin-left:auto;`,hs=aI.styled.details.withConfig({displayName:"CrossDatasetReferencesDetails",componentId:"sc-1ldyu0k-1"})`flex:none;&[open] ${hr}{transform:rotate(180deg);}`,ht=aI.styled.summary.withConfig({displayName:"CrossDatasetReferencesSummary",componentId:"sc-1ldyu0k-2"})`list-style:none;&::-webkit-details-marker{display:none;}`,hu=aI.styled.table.withConfig({displayName:"Table",componentId:"sc-1ldyu0k-3"})`width:100%;text-align:left;padding:0 ${({theme:a})=>(0,i.rem)(a.sanity.space[2])};border-collapse:collapse;th{padding:${({theme:a})=>(0,i.rem)(a.sanity.space[1])};}td{padding:0 ${({theme:a})=>(0,i.rem)(a.sanity.space[1])};}tr > *:last-child{text-align:right;}`,hv=(0,aI.styled)(i.Flex).withConfig({displayName:"DocumentIdFlex",componentId:"sc-1ldyu0k-4"})`min-height:33px;`,hw=a=>{let b,c,d,e,f,j,k=(0,h.c)(13),{t:l}=(0,p.useTranslation)(F),m=a.totalCount-a.references.length;return m?(k[0]!==m||k[1]!==l?(b=l("confirm-delete-dialog.other-reference-count.title",{count:m}),k[0]=m,k[1]=l,k[2]=b):b=k[2],k[3]!==b?(c=(0,g.jsx)(i.Text,{size:1,muted:!0,children:b}),k[3]=b,k[4]=c):c=k[4],k[5]!==l?(d=l("confirm-delete-dialog.other-reference-count.tooltip"),k[5]=l,k[6]=d):d=k[6],k[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(i.Text,{size:1,muted:!0,children:(0,g.jsx)(u.InfoOutlineIcon,{})}),k[7]=e):e=k[7],k[8]!==d?(f=(0,g.jsx)(r.Tooltip,{portal:!0,placement:"top",content:d,children:e}),k[8]=d,k[9]=f):f=k[9],k[10]!==c||k[11]!==f?(j=(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsxs)(i.Inline,{space:2,children:[c,f]})}),k[10]=c,k[11]=f,k[12]=j):j=k[12],j):null};function hx(a){let b,c,d,e,f,j,k,l=(0,h.c)(30),{icon:m,layout:n,presence:o,schemaType:q,sortOrder:s,value:t}=a,u=(0,p.useDocumentVersionInfo)(t._id),{perspectiveStack:v}=(0,p.usePerspective)();a:{let a;if(!s){b=void 0;break a}l[0]!==s.by?(a={ordering:{title:"",name:"",by:s.by}},l[0]=s.by,l[1]=a):a=l[1],b=a}let w=b;l[2]!==v||l[3]!==a.documentPreviewStore||l[4]!==q||l[5]!==t._id||l[6]!==w?(c=(0,p.getPreviewStateObservable)(a.documentPreviewStore,q,t._id,v,w),l[2]=v,l[3]=a.documentPreviewStore,l[4]=q,l[5]=t._id,l[6]=w,l[7]=c):c=l[7];let x=c;l[8]===Symbol.for("react.memo_cache_sentinel")?(d={snapshot:null,isLoading:!0,original:null},l[8]=d):d=l[8];let{snapshot:y,original:z,isLoading:A}=(0,aK.useObservable)(x,d);l[9]!==A||l[10]!==o||l[11]!==u.draft||l[12]!==u.published||l[13]!==u.versions?(e=A?null:(0,g.jsx)(r.TooltipDelayGroupProvider,{children:(0,g.jsxs)(i.Flex,{align:"center",gap:3,children:[o&&o.length>0&&(0,g.jsx)(p.DocumentPreviewPresence,{presence:o}),(0,g.jsx)(p.DocumentStatusIndicator,{draft:u.draft,published:u.published,versions:u.versions})]})}),l[9]=A,l[10]=o,l[11]=u.draft,l[12]=u.published,l[13]=u.versions,l[14]=e):e=l[14];let B=e;l[15]!==u.draft||l[16]!==u.published||l[17]!==u.versions?(f=(0,g.jsx)(p.DocumentStatus,{draft:u.draft,published:u.published,versions:u.versions}),l[15]=u.draft,l[16]=u.published,l[17]=u.versions,l[18]=f):f=l[18];let C=f;return l[19]!==z||l[20]!==y||l[21]!==t?(j=(0,p.getPreviewValueWithFallback)({snapshot:y,original:z,fallback:t}),l[19]=z,l[20]=y,l[21]=t,l[22]=j):j=l[22],l[23]!==m||l[24]!==A||l[25]!==n||l[26]!==B||l[27]!==j||l[28]!==C?(k=(0,g.jsx)(p.SanityDefaultPreview,{...j,isPlaceholder:A,icon:m,layout:n,status:B,tooltip:C}),l[23]=m,l[24]=A,l[25]=n,l[26]=B,l[27]=j,l[28]=C,l[29]=k):k=l[29],k}let hy=[];function hz(a){let b,c,d,e,f=(0,h.c)(16),{onClick:i,type:j,value:k}=a,l=k?._id;f[0]!==l?(b=(0,o.getPublishedId)(l),f[0]=l,f[1]=b):b=f[1];let m=(0,p.useDocumentPresence)(b),n=(0,p.useDocumentPreviewStore)(),{ReferenceChildLink:q}=eb();f[2]!==q||f[3]!==j?.name||f[4]!==k?._id?(c=function(a){return(0,g.jsx)(q,{documentId:k?._id,documentType:j?.name,parentRefPath:hy,...a})},f[2]=q,f[3]=j?.name,f[4]=k?._id,f[5]=c):c=f[5];let r=c,s=j?.icon,t=m?.length>0?m:hy;return f[6]!==n||f[7]!==s||f[8]!==t||f[9]!==j||f[10]!==k?(d=(0,g.jsx)(hx,{documentPreviewStore:n,icon:s,layout:"compact",presence:t,schemaType:j,value:k}),f[6]=n,f[7]=s,f[8]=t,f[9]=j,f[10]=k,f[11]=d):d=f[11],f[12]!==i||f[13]!==r||f[14]!==d?(e=(0,g.jsx)(p.PreviewCard,{__unstable_focusRing:!0,as:r,"data-as":"a",onClick:i,radius:2,children:d}),f[12]=i,f[13]=r,f[14]=d,f[15]=e):e=f[15],e}let hA=(0,aI.styled)(i.Text).withConfig({displayName:"EllipsisText",componentId:"sc-1meclkc-0"})`max-width:120px;`,hB=a=>{let b,c,d,e,f,j,k,l,m,n,q,r,s,t=(0,h.c)(43),{versionId:u,schemaType:v}=a,{t:w}=(0,p.useTranslation)(),x=(0,p.useDocumentPreviewStore)();t[0]!==u?(b=(0,p.getDocumentVariantType)(u),t[0]=u,t[1]=b):b=t[1];let y=b,{data:z}=(0,p.useActiveReleases)();if(t[2]!==x||t[3]!==y||t[4]!==v||t[5]!==u){let a=["version"===y?(0,o.getVersionFromId)(u):"published"===y?"published":"drafts"];c=(0,p.getPreviewStateObservable)(x,v,(0,o.getPublishedId)(u),a),t[2]=x,t[3]=y,t[4]=v,t[5]=u,t[6]=c}else c=t[6];let A=c;t[7]===Symbol.for("react.memo_cache_sentinel")?(d={snapshot:null,isLoading:!0,original:null},t[7]=d):d=t[7];let{snapshot:B,original:C,isLoading:D}=(0,aK.useObservable)(A,d);a:{let a;if("version"!==y){e=void 0;break a}if(t[8]!==z||t[9]!==u){let b;t[11]!==u?(b=a=>(0,p.getReleaseIdFromReleaseDocumentId)(a._id)===(0,o.getVersionFromId)(u),t[11]=u,t[12]=b):b=t[12],a=z.find(b),t[8]=z,t[9]=u,t[10]=a}else a=t[10];e=a}let E=e;b:{let a;if("version"===y){f=void 0;break b}t[13]!==y||t[14]!==w?(a=w("published"===y?"release.chip.published":"release.chip.draft"),t[13]=y,t[14]=w,t[15]=a):a=t[15],f=a}let F=f;t[16]!==y||t[17]!==E?(j=E?(0,p.getReleaseTone)(E):"published"===y?"positive":"caution",t[16]=y,t[17]=E,t[18]=j):j=t[18];let G=j;return t[19]!==C||t[20]!==v.name||t[21]!==B||t[22]!==u?(k=(0,p.getPreviewValueWithFallback)({snapshot:B,original:C,fallback:{_id:u,_type:v.name}}),t[19]=C,t[20]=v.name,t[21]=B,t[22]=u,t[23]=k):k=t[23],t[24]===Symbol.for("react.memo_cache_sentinel")?(l={backgroundColor:"transparent"},t[24]=l):l=t[24],t[25]!==G?(m=(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.ReleaseAvatarIcon,{tone:G})}),t[25]=G,t[26]=m):m=t[26],t[27]!==y||t[28]!==E?.metadata?.title||t[29]!==F||t[30]!==u?(n="version"===y?(0,g.jsx)(p.ReleaseTitle,{title:E?.metadata?.title,fallback:(0,o.getVersionFromId)(u),children:hD}):(0,g.jsx)(hA,{size:1,weight:"medium",textOverflow:"ellipsis",children:F}),t[27]=y,t[28]=E?.metadata?.title,t[29]=F,t[30]=u,t[31]=n):n=t[31],t[32]!==n||t[33]!==m?(q=(0,g.jsxs)(i.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[m,n]}),t[32]=n,t[33]=m,t[34]=q):q=t[34],t[35]!==q||t[36]!==G?(r=(0,g.jsx)(i.Card,{border:!0,radius:"full",children:(0,g.jsx)(i.Card,{radius:"full",tone:G,style:l,children:q})}),t[35]=q,t[36]=G,t[37]=r):r=t[37],t[38]!==D||t[39]!==v.icon||t[40]!==r||t[41]!==k?(s=(0,g.jsx)(p.SanityDefaultPreview,{...k,isPlaceholder:D,icon:v.icon,layout:"default",status:r}),t[38]=D,t[39]=v.icon,t[40]=r,t[41]=k,t[42]=s):s=t[42],s},hC=a=>{let b,c,d,e=(0,h.c)(8),{documentType:f,documentVersions:j}=a,k=(0,p.useSchema)();e[0]!==f||e[1]!==k?(b=k.get(f),e[0]=f,e[1]=k,e[2]=b):b=e[2];let l=b;if(!l)throw Error(`Schema type ${f} not found`);return e[3]!==j||e[4]!==l?(c=j?.map(a=>(0,g.jsx)(hB,{versionId:a,schemaType:l},a)),e[3]=j,e[4]=l,e[5]=c):c=e[5],e[6]!==c?(d=(0,g.jsx)(i.Card,{border:!0,padding:1,radius:2,children:(0,g.jsx)(i.Stack,{children:c})}),e[6]=c,e[7]=d):d=e[7],d};function hD(a){let{displayTitle:b}=a;return(0,g.jsx)(hA,{size:1,weight:"medium",textOverflow:"ellipsis",children:b})}function hE(a){let b,c,d,e,f,k,l,m,n,o,q,s,t,v,w,x,y,z,A,B=(0,h.c)(66),{crossDatasetReferences:C,internalReferences:D,documentTitle:E,totalCount:G,action:H,datasetNames:I,hasUnknownDatasetNames:J,documentId:K,documentType:L,onReferenceLinkClick:M,documentVersions:N}=a,O=(0,p.useSchema)(),P=(0,j.useToast)(),{t:Q}=(0,p.useTranslation)(F);B[0]!==M||B[1]!==O||B[2]!==Q?(b=a=>{let b=O.get(a._type);return b?(0,g.jsx)(hz,{type:b,value:a,onClick:M}):(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsx)(p.SanityDefaultPreview,{icon:u.UnknownIcon,title:Q("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:Q("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:a._id}),layout:"default"})})},B[0]=M,B[1]=O,B[2]=Q,B[3]=b):b=B[3];let R=b;B[4]!==H||B[5]!==E||B[6]!==L||B[7]!==N||B[8]!==Q?(c=()=>(0,g.jsxs)(i.Stack,{space:4,children:[(0,g.jsx)(i.Text,{as:"p",size:1,children:(0,g.jsx)(p.Translate,{t:Q,i18nKey:"confirm-delete-dialog.confirmation.text",context:H,components:{DocumentTitle:()=>(0,g.jsx)("strong",{children:E})}})}),"delete"===H&&(0,g.jsx)(hC,{documentType:L,documentVersions:N})]}),B[4]=H,B[5]=E,B[6]=L,B[7]=N,B[8]=Q,B[9]=c):c=B[9];let S=c;if(D?.totalCount===0&&C?.totalCount===0){let a;return B[10]!==S?(a=S(),B[10]=S,B[11]=a):a=B[11],a}B[12]!==J?(d=J?["unavailable"]:[],B[12]=J,B[13]=d):d=B[13],B[14]!==I||B[15]!==d?(e=[...I,...d],B[14]=I,B[15]=d,B[16]=e):e=B[16];let T=e,U=T.length,V=T.join(", "),W=J&&T.length?"unavailable":"";B[17]!==T.length||B[18]!==Q||B[19]!==V||B[20]!==W?(f=Q("confirm-delete-dialog.cdr-summary.subtitle",{count:U,datasets:V,context:W}),B[17]=T.length,B[18]=Q,B[19]=V,B[20]=W,B[21]=f):f=B[21];let X=f;return B[22]!==S?(k=S(),B[22]=S,B[23]=k):k=B[23],B[24]===Symbol.for("react.memo_cache_sentinel")?(l=(0,g.jsx)(i.Card,{borderTop:!0,padding:1}),B[24]=l):l=B[24],B[25]===Symbol.for("react.memo_cache_sentinel")?(m=(0,g.jsx)(i.Text,{"aria-hidden":"true",size:1,children:(0,g.jsx)(u.WarningOutlineIcon,{})}),B[25]=m):m=B[25],B[26]!==E?(n={DocumentTitle:()=>E},B[26]=E,B[27]=n):n=B[27],B[28]!==G?(o={count:G},B[28]=G,B[29]=o):o=B[29],B[30]!==Q||B[31]!==n||B[32]!==o?(q=(0,g.jsxs)("div",{children:[l,(0,g.jsx)(i.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,g.jsxs)(i.Flex,{children:[m,(0,g.jsx)(i.Box,{flex:1,marginLeft:3,children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:n,t:Q,values:o})})})]})})]}),B[30]=Q,B[31]=n,B[32]=o,B[33]=q):q=B[33],B[34]!==E?(s={DocumentTitle:()=>E},B[34]=E,B[35]=s):s=B[35],B[36]!==H||B[37]!==Q||B[38]!==s?(t=(0,g.jsx)(i.Box,{flex:"none",children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:Q,context:H,components:s})})}),B[36]=H,B[37]=Q,B[38]=s,B[39]=t):t=B[39],B[40]!==D||B[41]!==R?(v=D.totalCount>0&&(0,g.jsxs)(i.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[D?.references.map(a=>(0,g.jsx)(i.Box,{as:"li",children:R(a)},a._id)),D.totalCount>D.references.length&&(0,g.jsx)(i.Box,{as:"li",padding:3,children:(0,g.jsx)(hw,{...D})})]}),B[40]=D,B[41]=R,B[42]=v):v=B[42],B[43]!==C||B[44]!==X||B[45]!==K||B[46]!==D.totalCount||B[47]!==T.length||B[48]!==Q||B[49]!==P?(w=C.totalCount>0&&(0,g.jsxs)(hs,{"data-testid":"cross-dataset-references",style:{borderTop:D.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,g.jsx)(ht,{children:(0,g.jsx)(i.Card,{as:"a",marginTop:2*(D.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,g.jsxs)(i.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(u.DocumentsIcon,{})}),(0,g.jsxs)(i.Stack,{space:2,children:[(0,g.jsx)(i.Text,{textOverflow:"ellipsis",size:1,children:Q("confirm-delete-dialog.cdr-summary.title",{count:T.length,documentCount:Q("confirm-delete-dialog.cdr-summary.document-count",{count:C.totalCount})})}),(0,g.jsx)(i.Text,{title:X,textOverflow:"ellipsis",size:1,muted:!0,children:X})]}),(0,g.jsx)(hr,{children:(0,g.jsx)(i.Text,{muted:!0,size:1,children:(0,g.jsx)(u.ChevronDownIcon,{})})})]})})}),(0,g.jsxs)(i.Box,{overflow:"auto",paddingTop:2,children:[(0,g.jsxs)(hu,{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:(0,g.jsx)(i.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:Q("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,g.jsx)("th",{children:(0,g.jsx)(i.Text,{muted:!0,size:1,weight:"medium",children:Q("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,g.jsx)("th",{children:(0,g.jsx)(i.Text,{muted:!0,size:1,weight:"medium",children:Q("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,g.jsx)("tbody",{children:C.references.filter(hF).map((a,b)=>{let{projectId:c,datasetName:d,documentId:e}=a;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsx)(i.Text,{size:1,children:c})}),(0,g.jsx)("td",{children:(0,g.jsx)(i.Text,{size:1,children:d||"unavailable"})}),(0,g.jsx)("td",{children:(0,g.jsxs)(hv,{align:"center",gap:2,justify:"flex-end",children:[(0,g.jsx)(i.Text,{textOverflow:"ellipsis",size:1,children:e||"unavailable"}),e&&(0,g.jsx)(r.Button,{mode:"bleed",icon:u.CopyIcon,tooltipProps:{content:Q("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(e).catch(()=>{P.push({status:"error",title:Q("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${K}-${b}`)})})]}),(0,g.jsx)(hw,{...C})]})]}),B[43]=C,B[44]=X,B[45]=K,B[46]=D.totalCount,B[47]=T.length,B[48]=Q,B[49]=P,B[50]=w):w=B[50],B[51]!==v||B[52]!==w?(x=(0,g.jsx)(i.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,g.jsxs)(i.Flex,{direction:"column",children:[v,w]})}),B[51]=v,B[52]=w,B[53]=x):x=B[53],B[54]!==E?(y={DocumentTitle:()=>E},B[54]=E,B[55]=y):y=B[55],B[56]!==H||B[57]!==Q||B[58]!==y?(z=(0,g.jsx)(i.Box,{flex:"none",children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:Q,context:H,components:y})})}),B[56]=H,B[57]=Q,B[58]=y,B[59]=z):z=B[59],B[60]!==q||B[61]!==t||B[62]!==x||B[63]!==z||B[64]!==k?(A=(0,g.jsxs)(i.Flex,{direction:"column",gap:4,children:[k,q,t,x,z]}),B[60]=q,B[61]=t,B[62]=x,B[63]=z,B[64]=k,B[65]=A):A=B[65],A}function hF(a){return"projectId"in a}let hG=()=>(b||(b=(0,aL.fromEvent)(document,"visibilitychange").pipe((0,aW.startWith)(null),(0,aW.map)(()=>"visible"===document.visibilityState),(0,aW.distinctUntilChanged)(),(0,aW.switchMap)(a=>a?(0,aL.timer)(0,5e3):aL.EMPTY),(0,aW.shareReplay)({refCount:!0,bufferSize:1}))),b);function hH(a,b){let{versionedClient:c}=b;return hG().pipe((0,aW.switchMap)(()=>(function(a,{versionedClient:b}){let c=(0,o.getDraftId)(a),d=(0,o.getPublishedId)(a),e={uri:b.getDataUrl("doc",`${c},${d}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return b.observable.request(e).pipe((0,aW.map)(({omitted:a})=>{let b=a.filter(a=>"existence"===a.reason);if(2!==b.length)return 0===b.length||b.some(a=>a.id===c)?d:c}))})(a,b)),(0,aW.switchMap)(a=>{if(!a)return(0,aL.of)({totalCount:0,references:[]});let b=c.config().dataset;return c.observable.request({url:`/data/references/${b}/documents/${a}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,aW.catchError)(a=>{if("object"==typeof a&&a&&"statusCode"in a&&"response"in a&&404===a.statusCode)return(0,aL.of)({totalCount:0,references:[]});throw a}))}))}let hI=(0,p.createHookFromObservableFactory)(([a,b])=>b.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:a},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),hJ=(0,p.createHookFromObservableFactory)(([a,b])=>hG().pipe((0,aW.switchMap)(()=>hH(a,{versionedClient:b}))));function hK(a){return"string"!=typeof a.datasetName}function hL(a){return!!a&&""!==a}function hM(a){return a?.datasetName||""}function hN(a){return a.projectId}let hO=(0,aI.styled)(i.Box).withConfig({displayName:"DialogBody",componentId:"sc-jawiy-0"})`box-sizing:border-box;`,hP=(0,aI.styled)(i.Flex).attrs({align:"center",direction:"column",justify:"center"}).withConfig({displayName:"LoadingContainer",componentId:"sc-jawiy-1"})`height:110px;`;function hQ(a){let b,c,d,e,f,i,j,l,m,n,q,s,t=(0,h.c)(51),{id:u,type:v,action:w,onCancel:x,onConfirm:y}=a,z=void 0===w?"delete":w,{t:A}=(0,p.useTranslation)(F),B=`deletion-confirmation-${(0,k.useId)()}`,{internalReferences:C,crossDatasetReferences:D,isLoading:E,totalCount:G,projectIds:H,datasetNames:I,hasUnknownDatasetNames:J}=function(a){let b,c,d,e,f,g,i,j,k=(0,h.c)(24),l=(0,p.useClient)(p.DEFAULT_STUDIO_CLIENT_OPTIONS),m=(0,p.useDocumentStore)();k[0]!==a?(b=(0,o.getPublishedId)(a),k[0]=a,k[1]=b):b=k[1];let n=b;k[2]!==m||k[3]!==n?(c=[n,m],k[2]=m,k[3]=n,k[4]=c):c=k[4];let[q,r]=hI(c);k[5]!==n||k[6]!==l?(d=[n,l],k[5]=n,k[6]=l,k[7]=d):d=k[7];let[s,t]=hJ(d);k[8]!==s?.references?(e=()=>Array.from(new Set(s?.references.map(hN).filter(Boolean))).sort(),k[8]=s?.references,k[9]=e):e=k[9],k[10]!==e?(f=e(),k[10]=e,k[11]=f):f=k[11];let u=f;k[12]!==s?.references?(g=Array.from(new Set(s?.references.map(hM).filter(hL))).sort(),k[12]=s?.references,k[13]=g):g=k[13];let v=g;k[14]!==s?.references?(i=()=>!!s?.references.some(hK),k[14]=s?.references,k[15]=i):i=k[15];let w=i(),x=(q?.totalCount||0)+(s?.totalCount||0),y=r||t;return k[16]!==s||k[17]!==v||k[18]!==w||k[19]!==q||k[20]!==u||k[21]!==x||k[22]!==y?(j={totalCount:x,projectIds:u,datasetNames:v,hasUnknownDatasetNames:w,internalReferences:q,crossDatasetReferences:s,isLoading:y},k[16]=s,k[17]=v,k[18]=w,k[19]=q,k[20]=u,k[21]=x,k[22]=y,k[23]=j):j=k[23],j}(u);t[0]!==u||t[1]!==v?(b={_id:u,_type:v},t[0]=u,t[1]=v,t[2]=b):b=t[2];let K=b;t[3]!==K?(c=(0,g.jsx)(hq,{document:K}),t[3]=K,t[4]=c):c=t[4];let L=c,M=!E;t[5]!==u?(d=(0,o.getPublishedId)(u),t[5]=u,t[6]=d):d=t[6],t[7]!==d?(e={documentId:d},t[7]=d,t[8]=e):e=t[8];let{data:N,loading:O}=(0,p.useDocumentVersions)(e);t[9]!==N||t[10]!==y?(f=()=>{y(N)},t[9]=N,t[10]=y,t[11]=f):f=t[11];let P=f;return t[12]!==z||t[13]!==A?(i=A("confirm-delete-dialog.header.text",{context:z}),t[12]=z,t[13]=A,t[14]=i):i=t[14],t[15]!==A?(j=A("confirm-delete-dialog.cancel-button.text"),t[15]=A,t[16]=j):j=t[16],t[17]!==x||t[18]!==j?(l={onClick:x,text:j},t[17]=x,t[18]=j,t[19]=l):l=t[19],t[20]!==z||t[21]!==P||t[22]!==M||t[23]!==A||t[24]!==G?(m=M?{text:A(G>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:z}),onClick:P}:void 0,t[20]=z,t[21]=P,t[22]=M,t[23]=A,t[24]=G,t[25]=m):m=t[25],t[26]!==l||t[27]!==m?(n={cancelButton:l,confirmButton:m},t[26]=l,t[27]=m,t[28]=n):n=t[28],t[29]!==z||t[30]!==D||t[31]!==I||t[32]!==L||t[33]!==N||t[34]!==J||t[35]!==u||t[36]!==C||t[37]!==E||t[38]!==x||t[39]!==H||t[40]!==A||t[41]!==G||t[42]!==v||t[43]!==O?(q=(0,g.jsx)(hO,{children:D&&C&&!E&&!O?(0,g.jsx)(hE,{crossDatasetReferences:D,internalReferences:C,documentTitle:L,isLoading:E,totalCount:G,action:z,projectIds:H,datasetNames:I,hasUnknownDatasetNames:J,onReferenceLinkClick:x,documentId:u,documentType:v,documentVersions:N}):(0,g.jsx)(hP,{"data-testid":"loading-container",children:(0,g.jsx)(p.LoadingBlock,{showText:!0,title:A("confirm-delete-dialog.loading.text")})})}),t[29]=z,t[30]=D,t[31]=I,t[32]=L,t[33]=N,t[34]=J,t[35]=u,t[36]=C,t[37]=E,t[38]=x,t[39]=H,t[40]=A,t[41]=G,t[42]=v,t[43]=O,t[44]=q):q=t[44],t[45]!==B||t[46]!==x||t[47]!==n||t[48]!==q||t[49]!==i?(s=(0,g.jsx)(r.Dialog,{width:1,id:B,header:i,footer:n,onClose:x,onClickOutside:x,children:q}),t[45]=B,t[46]=x,t[47]=n,t[48]=q,t[49]=i,t[50]=s):s=t[50],s}function hR(a){let b,c,d=(0,h.c)(6),{t:e}=(0,p.useTranslation)(F),f=(0,k.useId)(),[j,l]=(0,k.useState)(null);d[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>l(null),d[0]=b):b=d[0];let m=b;return d[1]!==j||d[2]!==f||d[3]!==a||d[4]!==e?(c=j?(0,g.jsx)(r.Dialog,{id:`dialog-error-${f}`,"data-testid":"confirm-delete-error-dialog",header:e("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:e("confirm-delete-dialog.error.retry-button.text"),onClick:m,tone:"default"}},onClose:a.onCancel,children:(0,g.jsx)(i.Box,{padding:4,children:(0,g.jsx)(i.Text,{size:1,children:e("confirm-delete-dialog.error.message.text")})})}):(0,g.jsx)(r.ErrorBoundary,{onCatch:l,children:(0,g.jsx)(hQ,{...a})}),d[1]=j,d[2]=f,d[3]=a,d[4]=e,d[5]=c):c=d[5],c}let hS=(0,k.forwardRef)(function(a,b){let c,d,e,f,i=(0,h.c)(10);i[0]!==a?({intent:c,...d}=a,i[0]=a,i[1]=c,i[2]=d):(c=i[1],d=i[2]),i[3]!==c?(e=(0,k.forwardRef)(function(a,b){return(0,g.jsx)(s.IntentLink,{...a,intent:c.type,params:c.params,ref:b,searchParams:c.searchParams})}),i[3]=c,i[4]=e):e=i[4];let j=e;return i[5]!==j||i[6]!==a.disabled||i[7]!==b||i[8]!==d?(f=a.disabled?(0,g.jsx)(r.Button,{...d,as:"a",role:"link","aria-disabled":"true"}):(0,g.jsx)(r.Button,{...d,as:j,"data-as":"a",ref:b}),i[5]=j,i[6]=a.disabled,i[7]=b,i[8]=d,i[9]=f):f=i[9],f});function hT(a){let b,c,d,e=(0,h.c)(12),{reveal:f,context:i,loading:j,children:k}=a,l=(0,p.useCurrentUser)(),{t:m}=(0,p.useTranslation)(F);if(!f){let a;return e[0]!==k?(a=(0,g.jsx)(g.Fragment,{children:k}),e[0]=k,e[1]=a):a=e[1],a}return e[2]!==i||e[3]!==l||e[4]!==j||e[5]!==m?(b=j?m("insufficient-permissions-message-tooltip.loading-text"):(0,g.jsx)(p.InsufficientPermissionsMessage,{context:i,currentUser:l}),e[2]=i,e[3]=l,e[4]=j,e[5]=m,e[6]=b):b=e[6],e[7]!==k?(c=(0,g.jsx)("div",{children:k}),e[7]=k,e[8]=c):c=e[8],e[9]!==b||e[10]!==c?(d=(0,g.jsx)(r.Tooltip,{content:b,portal:!0,children:c}),e[9]=b,e[10]=c,e[11]=d):d=e[11],d}let hU={constrainSize:!0,placement:"bottom",portal:!0},hV=(a,b,c)=>{let d=a.find(a=>a.id===b.templateId)?.schemaType;if(!d)return null;let e={template:b.templateId,type:d,version:c,id:b.initialDocumentId};return{type:"create",params:b.parameters?[e,b.parameters]:e,searchParams:c?[["perspective",c]]:void 0}};function hW(a){let b,c,d,e,f,j,l,m,n=(0,h.c)(60),{templateItems:o}=a,q=(0,p.useTemplates)(),{selectedReleaseId:t}=(0,p.usePerspective)(),{t:v}=(0,p.useTranslation)(F);n[0]!==o||n[1]!==q?(b=[...o,...q],n[0]=o,n[1]=q,n[2]=b):b=n[2];let w=(0,p.useGetI18nText)(b);n[3]!==o?(c={templateItems:o},n[3]=o,n[4]=c):c=n[4];let[x,y]=(0,p.useTemplatePermissions)(c),z=!y&&x?.length!==0&&x?.every(hY);a:{let a;if(!x){let a;n[5]===Symbol.for("react.memo_cache_sentinel")?(a={},n[5]=a):a=n[5],d=a;break a}n[6]!==x?(a=x.reduce(hX,{}),n[6]=x,n[7]=a):a=n[7],d=a}let A=d;if(0===o.length)return null;if(z){let a,b,c;return n[8]!==v?(a=v("pane-header.disabled-created-button.aria-label"),n[8]=v,n[9]=a):a=n[9],n[10]!==a?(b=(0,g.jsx)(r.Button,{"aria-label":a,icon:u.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),n[10]=a,n[11]=b):b=n[11],n[12]!==y||n[13]!==b?(c=(0,g.jsx)(hT,{context:"create-document-type",reveal:!0,loading:y,children:b}),n[12]=y,n[13]=b,n[14]=c):c=n[14],c}if(1===o.length){let a,b,c,d,e,f,h=o[0],i=!A[h.id]?.granted;n[15]!==h||n[16]!==t||n[17]!==q?(a=hV(q,h,t),n[15]=h,n[16]=t,n[17]=q,n[18]=a):a=n[18];let j=a;if(!j)return null;n[19]!==h||n[20]!==w?(b=w(h),n[19]=h,n[20]=w,n[21]=b):b=n[21];let k=b.title,l=h.icon||u.AddIcon;return n[22]!==v?(c=v("pane-header.create-new-button.tooltip"),n[22]=v,n[23]=c):c=n[23],n[24]!==c?(d={content:c},n[24]=c,n[25]=d):d=n[25],n[26]!==i||n[27]!==j||n[28]!==b.title||n[29]!==l||n[30]!==d?(e=(0,g.jsx)(hS,{"aria-label":k,icon:l,intent:j,mode:"bleed",disabled:i,"data-testid":"action-intent-button",tooltipProps:d}),n[26]=i,n[27]=j,n[28]=b.title,n[29]=l,n[30]=d,n[31]=e):e=n[31],n[32]!==i||n[33]!==y||n[34]!==e?(f=(0,g.jsx)(hT,{reveal:i,loading:y,context:"create-document-type",children:e}),n[32]=i,n[33]=y,n[34]=e,n[35]=f):f=n[35],f}if(n[36]!==v?(e=v("pane-header.create-new-button.tooltip"),n[36]=v,n[37]=e):e=n[37],n[38]!==e?(f=(0,g.jsx)(r.Button,{icon:u.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:e}}),n[38]=e,n[39]=f):f=n[39],n[40]!==w||n[41]!==y||n[42]!==A||n[43]!==t||n[44]!==v||n[45]!==o||n[46]!==q){let a;n[48]!==w||n[49]!==y||n[50]!==A||n[51]!==t||n[52]!==v||n[53]!==q?(a=(a,b)=>{let c=!A[a.id]?.granted,d=hV(q,a,t),e=q.find(b=>b.id===a.templateId);if(!e||!d)return null;let f=(0,k.forwardRef)((a,b)=>c?(0,g.jsx)("button",{type:"button",disabled:!0,...a,ref:b}):(0,g.jsx)(s.IntentLink,{...a,intent:d.type,params:d.params,searchParams:d.searchParams,ref:b}));f.displayName="Link";let{title:h}=w({...a,title:a.title||w(e).title});return(0,g.jsx)(hT,{context:"create-document-type",reveal:c,loading:y,children:(0,g.jsx)(r.MenuItem,{as:f,"data-as":c?"button":"a",text:h,"aria-label":c?v("pane-header.disabled-created-button.aria-label"):h,disabled:c,"data-testid":`action-intent-button-${b}`})},a.id)},n[48]=w,n[49]=y,n[50]=A,n[51]=t,n[52]=v,n[53]=q,n[54]=a):a=n[54],j=o.map(a),n[40]=w,n[41]=y,n[42]=A,n[43]=t,n[44]=v,n[45]=o,n[46]=q,n[47]=j}else j=n[47];return n[55]!==j?(l=(0,g.jsx)(i.Menu,{children:j}),n[55]=j,n[56]=l):l=n[56],n[57]!==f||n[58]!==l?(m=(0,g.jsx)(r.MenuButton,{button:f,id:"create-menu",menu:l,popover:hU}),n[57]=f,n[58]=l,n[59]=m):m=n[59],m}function hX(a,b){return a[b.id]=b,a}function hY(a){return!a.granted}function hZ(a){return null!=a}let h$=(0,k.memo)(function(a){let b,c,d,e,f,j,k,l,m,n,o=(0,h.c)(28),{initialValueTemplateItems:q,menuItems:r,menuItemGroups:s,actionHandlers:t}=a,u=void 0===q?p.EMPTY_ARRAY:q,v=void 0===r?p.EMPTY_ARRAY:r,w=void 0===s?p.EMPTY_ARRAY:s,x=void 0===t?p.EMPTY_OBJECT:t,y=(0,p.useTemplates)();o[0]!==x?(b=a=>{if(a.id){let b=x.setMenuItemState;if(b&&b({_menuItemId:a.id,...a.params}),!a.action||"setMenuItemState"===a.action)return!!b}if("string"==typeof a.action&&!(a.action in x))return console.warn("No handler for action:",a.action),!1;let b="function"==typeof a.action?a.action:"string"==typeof a.action?x[a.action]:null;return!!b&&(b(a.id?{...a.params,_menuItemId:a.id,isSelected:!a.selected}:{...a.params,isSelected:!a.selected}),!0)},o[0]=x,o[1]=b):b=o[1];let z=b;o[2]!==z||o[3]!==w||o[4]!==v?(c=eV({actionHandler:z,menuItemGroups:w,menuItems:v.filter(h_)}),o[2]=z,o[3]=w,o[4]=v,o[5]=c):c=o[5];let A=c;o[6]!==A?(d=A.filter(eT),o[6]=A,o[7]=d):d=o[7];let B=d;o[8]!==A?(e=A.filter(eU),o[8]=A,o[9]=e):e=o[9];let C=e;if(o[10]!==v||o[11]!==y){let a;o[13]!==y?(a=(a,b)=>{if(a.intent?.type!=="create")return null;let{params:c}=a.intent;if(!c)return null;let d=Array.isArray(c)?c[0]:c,e=Array.isArray(c)?c[1]:void 0,f=d.template||d.type;if(!f)return null;let g=y.find(a=>a.id===f);return g?{item:a,template:g,templateParams:e,menuItemIndex:b,initialDocumentId:d.id}:null},o[13]=y,o[14]=a):a=o[14],f=v.map(a).filter(hZ).map(h0),o[10]=v,o[11]=y,o[12]=f}else f=o[12];let D=f;o[15]!==D||o[16]!==u?(j=(0,aT.uniqBy)([...D,...u],h1),o[15]=D,o[16]=u,o[17]=j):j=o[17];let E=j;return o[18]!==E?(k=(0,g.jsx)(hW,{templateItems:E}),o[18]=E,o[19]=k):k=o[19],o[20]!==B?(l=B.map(h2),o[20]=B,o[21]=l):l=o[21],o[22]!==C?(m=C.length>0&&(0,g.jsx)(cX,{nodes:C}),o[22]=C,o[23]=m):m=o[23],o[24]!==k||o[25]!==l||o[26]!==m?(n=(0,g.jsxs)(i.Flex,{gap:1,children:[k,l,m]}),o[24]=k,o[25]=l,o[26]=m,o[27]=n):n=o[27],n});function h_(a){return a.intent?.type!=="create"}function h0(a){let{initialDocumentId:b,item:c,template:d,menuItemIndex:e,templateParams:f}=a;return{id:`menuItem${e}`,initialDocumentId:b,templateId:d.id,type:"initialValueTemplateItem",title:c.title||d.title,i18n:c.i18n||d.i18n,icon:c.icon,description:d.description,parameters:f,schemaType:d.schemaType}}function h1(a){var b=[a.initialDocumentId,a.templateId,a.parameters];let c=a=>"object"==typeof a&&a?Array.isArray(a)?a.map(c):Object.entries(a).sort(([a],[b])=>a.localeCompare(b,"en")):a;return JSON.stringify(c(JSON.parse(JSON.stringify(b))))}function h2(a){return(0,g.jsx)(c6,{node:a},a.key)}function h3(a){let b,c,d,e,f,i,j,k=(0,h.c)(16),{t:l}=(0,p.useTranslation)(F),{layout:m,value:n}=a;return k[0]===Symbol.for("react.memo_cache_sentinel")?(b={Code:"code"},k[0]=b):b=k[0],k[1]!==n._type?(c={documentType:n._type},k[1]=n._type,k[2]=c):c=k[2],k[3]!==l||k[4]!==c?(d=(0,g.jsx)("em",{children:(0,g.jsx)(p.Translate,{t:l,i18nKey:"pane-item.missing-schema-type.title",components:b,values:c})}),k[3]=l,k[4]=c,k[5]=d):d=k[5],k[6]===Symbol.for("react.memo_cache_sentinel")?(e={Code:"code"},k[6]=e):e=k[6],k[7]!==n._id?(f={documentId:n._id},k[7]=n._id,k[8]=f):f=k[8],k[9]!==l||k[10]!==f?(i=(0,g.jsx)(p.Translate,{t:l,i18nKey:"pane-item.missing-schema-type.subtitle",components:e,values:f}),k[9]=l,k[10]=f,k[11]=i):i=k[11],k[12]!==m||k[13]!==d||k[14]!==i?(j=(0,g.jsx)(p.SanityDefaultPreview,{title:d,subtitle:i,media:h4,layout:m}),k[12]=m,k[13]=d,k[14]=i,k[15]=j):j=k[15],j}function h4(){return(0,g.jsx)(u.WarningOutlineIcon,{})}function h5(a,b,c){return!1!==a&&(a||b&&b.icon||c||!1)}function h6(a){let b,c,d,e,f,j,l,m,n=(0,h.c)(43),{icon:o,id:r,layout:s,pressed:t,schemaType:v,selected:w,sortOrder:x,title:y,value:z,margin:A,marginBottom:B,marginTop:C}=a,D=void 0===s?"default":s,E=(0,p.useSchema)(),F=(0,p.useDocumentPreviewStore)(),{ChildLink:G}=eb(),H=(0,p.useDocumentPresence)(r),I=!!(v&&v.name&&E.get(v.name)),[J,K]=(0,k.useState)(!1);a:{let a,c,d,e;if(z&&(0,q.isSanityDocument)(z)){let a,c;if(!v||!I){let a;n[0]!==z?(a=(0,g.jsx)(h3,{value:z}),n[0]=z,n[1]=a):a=n[1],b=a;break a}n[2]!==o||n[3]!==v?(a=h5(o,v,u.DocumentIcon),n[2]=o,n[3]=v,n[4]=a):a=n[4],n[5]!==H||n[6]!==F||n[7]!==D||n[8]!==v||n[9]!==x||n[10]!==a||n[11]!==z?(c=(0,g.jsx)(hx,{documentPreviewStore:F,icon:a,layout:D,schemaType:v,sortOrder:x,value:z,presence:H}),n[5]=H,n[6]=F,n[7]=D,n[8]=v,n[9]=x,n[10]=a,n[11]=z,n[12]=c):c=n[12],b=c;break a}n[13]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:.5},n[13]=a):a=n[13],n[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,g.jsx)(i.Box,{style:a,children:(0,g.jsx)(i.Text,{muted:!0,size:1,children:(0,g.jsx)(u.ChevronRightIcon,{})})}),n[14]=c):c=n[14],n[15]!==o||n[16]!==v?(d=h5(o,v,u.FolderIcon),n[15]=o,n[16]=v,n[17]=d):d=n[17],n[18]!==d||n[19]!==y?(e=(0,g.jsx)(p.SanityDefaultPreview,{status:c,icon:d,layout:"compact",title:y}),n[18]=d,n[19]=y,n[20]=e):e=n[20],b=e}let L=b;n[21]===Symbol.for("react.memo_cache_sentinel")?(c=a=>{a.metaKey?K(!1):K(!0)},n[21]=c):c=n[21];let M=c;n[22]===Symbol.for("react.memo_cache_sentinel")?(d=()=>K(!1),n[22]=d):d=n[22],n[23]!==w?(e=[w],n[23]=w,n[24]=e):e=n[24],(0,k.useEffect)(d,e);let[N,O]=(0,k.useState)(!1),P=(0,k.useRef)(null);n[25]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{P.current=setTimeout(()=>(0,k.startTransition)(()=>O(!0)),400)},n[25]=f):f=n[25];let Q=f;n[26]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{P.current&&clearTimeout(P.current),(0,k.startTransition)(()=>O(!1))},n[26]=j):j=n[26];let R=j,S=`pane-item-${y}`,T=w||J;return n[27]!==r||n[28]!==N||n[29]!==v||n[30]!==z?(l=N&&v?.name&&z&&(0,q.isSanityDocument)(z)&&(0,g.jsx)(h7,{documentId:r,documentType:v.name}),n[27]=r,n[28]=N,n[29]=v,n[30]=z,n[31]=l):l=n[31],n[32]!==r||n[33]!==A||n[34]!==B||n[35]!==C||n[36]!==t||n[37]!==L||n[38]!==l||n[39]!==S||n[40]!==G||n[41]!==T?(m=(0,g.jsxs)(p.PreviewCard,{"data-testid":S,__unstable_focusRing:!0,as:G,childId:r,"data-as":"a",margin:A,marginBottom:B,marginTop:C,onClick:M,onMouseEnter:Q,onMouseLeave:R,pressed:t,radius:2,selected:T,sizing:"border",tabIndex:-1,tone:"inherit",children:[L,l]}),n[32]=r,n[33]=A,n[34]=B,n[35]=C,n[36]=t,n[37]=L,n[38]=l,n[39]=S,n[40]=G,n[41]=T,n[42]=m):m=n[42],m}function h7(a){let b,c=(0,h.c)(2),{documentId:d,documentType:e}=a;return c[0]!==d?(b=(0,o.getPublishedId)(d),c[0]=d,c[1]=b):b=c[1],(0,p.useEditState)(b,e),null}h7.displayName="PreloadDocumentPane";let h8=(0,k.memo)(a=>{let b,c=(0,h.c)(4),{children:d,group:e}=a,f=(0,k.useContext)(l.DocumentActionsStateContext);if(null===f)throw Error("DocumentActionsStateContext is not set. This should not happen.");return c[0]!==d||c[1]!==e||c[2]!==f?(b=d({states:e?f.filter(a=>(a.group||["default"]).includes(e)):f}),c[0]=d,c[1]=e,c[2]=f,c[3]=b):b=c[3],b});h8.displayName="Memo(RenderActionCollectionState)";let h9=(0,k.memo)(a=>{let b,c=(0,h.c)(4),{badges:d,children:e,badgeProps:f}=a;return c[0]!==f||c[1]!==d||c[2]!==e?(b=(0,g.jsx)(p.GetHookCollectionState,{hooks:d,args:f,children:e}),c[0]=f,c[1]=d,c[2]=e,c[3]=b):b=c[3],b});h9.displayName="Memo(RenderBadgeCollectionState)";let ia={documents:[],loading:!0};async function ib(a,{document:b,getClient:c}){let d=await a({document:b,getClient:c});return"string"==typeof d?{filter:d,filterParams:void 0}:d}let ic=(0,aI.styled)(i.Box).withConfig({displayName:"IncomingReferencesListContainer",componentId:"sc-17ysjqh-0"})`height:${({$itemCount:a})=>51*Math.min(a,10)}px;`;function id(a){let b,c,d,e,f,j,k=(0,h.c)(26),{type:l,document:m}=a;k[0]!==m.id||k[1]!==m.type||k[2]!==l?(b=l?.studioUrl?.({id:m.id,type:m.type}),k[0]=m.id,k[1]=m.type,k[2]=l,k[3]=b):b=k[3];let n=b,o=m.id,q=n?"a":"div",r=3*!!n;k[4]!==n?(c=n?{href:n,target:"_blank",rel:"noopener noreferrer",as:"a"}:{},k[4]=n,k[5]=c):c=k[5];let s=m.availability,t=!!n,u=!!n;return k[6]!==m.preview||k[7]!==l?(d=l?{type:l.type,title:m.preview.published?.title,icon:ie,preview:l.preview}:void 0,k[6]=m.preview,k[7]=l,k[8]=d):d=k[8],k[9]!==m.availability||k[10]!==m.dataset||k[11]!==m.id||k[12]!==m.preview||k[13]!==m.projectId||k[14]!==t||k[15]!==u||k[16]!==d?(e=(0,g.jsx)(p.CrossDatasetReferencePreview,{availability:s,hasStudioUrl:t,showStudioUrlIcon:u,preview:m.preview,refType:d,projectId:m.projectId,dataset:m.dataset,id:m.id,showTypeLabel:!1}),k[9]=m.availability,k[10]=m.dataset,k[11]=m.id,k[12]=m.preview,k[13]=m.projectId,k[14]=t,k[15]=u,k[16]=d,k[17]=e):e=k[17],k[18]!==e||k[19]!==q||k[20]!==r||k[21]!==c?(f=(0,g.jsx)(i.Box,{flex:1,children:(0,g.jsx)(p.PreviewCard,{"data-as":q,flex:1,radius:2,paddingRight:r,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,...c,children:e})}),k[18]=e,k[19]=q,k[20]=r,k[21]=c,k[22]=f):f=k[22],k[23]!==m.id||k[24]!==f?(j=(0,g.jsx)(i.Flex,{gap:1,align:"center",children:f},o),k[23]=m.id,k[24]=f,k[25]=j):j=k[25],j}function ie(){return null}let ig={documents:[],loading:!0};function ih(a){let b,c,d,e,f=(0,h.c)(17),{onClick:i,type:j,value:k,path:l}=a,m=k?._id;f[0]!==m?(b=(0,o.getPublishedId)(m),f[0]=m,f[1]=b):b=f[1];let n=(0,p.useDocumentPresence)(b),q=(0,p.useDocumentPreviewStore)(),{ChildLink:r}=eb();f[2]!==r||f[3]!==l||f[4]!==j.name||f[5]!==k?._id?(c=function(a){return(0,g.jsx)(r,{childId:(0,o.getPublishedId)(k?._id),childParameters:{type:j.name,path:(0,p.pathToString)(l)},...a})},f[2]=r,f[3]=l,f[4]=j.name,f[5]=k?._id,f[6]=c):c=f[6];let s=c,t=j.icon||!1;return f[7]!==n||f[8]!==q||f[9]!==t||f[10]!==j||f[11]!==k?(d=(0,g.jsx)(hx,{documentPreviewStore:q,icon:t,layout:"default",presence:n,schemaType:j,value:k}),f[7]=n,f[8]=q,f[9]=t,f[10]=j,f[11]=k,f[12]=d):d=f[12],f[13]!==i||f[14]!==s||f[15]!==d?(e=(0,g.jsx)(p.PreviewCard,{__unstable_focusRing:!0,as:s,"data-as":"a",onClick:i,radius:2,children:d}),f[13]=i,f[14]=s,f[15]=d,f[16]=e):e=f[16],e}m.motion.create(i.Flex);let ii=new WeakMap;function ij(a){let b=ii.get(a);if(b)return b;let c=(0,aV.nanoid)();return ii.set(a,c),c}let ik={by:[{field:"_updatedAt",direction:"desc"}]},il={},im=(0,aI.styled)(i.Box).withConfig({displayName:"RootBox",componentId:"sc-1xocekz-0"})`position:relative;opacity:${a=>a.$opacity||1};transition:opacity 0.4s;`,io=(0,aI.styled)(i.Box).withConfig({displayName:"CommandListBox",componentId:"sc-1xocekz-1"})`position:absolute;left:0;right:0;top:0;bottom:0;`,ip=[...Array(30).keys()];function iq(a){let b,c,d=(0,h.c)(4),{layout:e}=a;return d[0]!==e?(b=ip.map(a=>(0,g.jsx)(p.SanityDefaultPreview,{isPlaceholder:!0,layout:e},a)),d[0]=e,d[1]=b):b=d[1],d[2]!==b?(c=(0,g.jsx)(i.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:b}),d[2]=b,d[3]=c):c=d[3],c}function ir(a){let b,c,d,e,f,j,l,m=(0,h.c)(67),{childItemId:n,error:q,isRetrying:r,autoRetry:s,filterIsSimpleTypeConstraint:t,hasMaxItems:u,hasSearchQuery:v,isActive:w,isLazyLoading:x,muted:y,isLoading:z,isConnected:A,retryCount:B,canRetry:C,items:D,layout:E,loadingVariant:G,onEndReached:H,onRetry:I,paneTitle:J,searchInputElement:K,showIcons:L,sortOrder:M}=a,N=(0,p.useSchema)(),{collapsed:O}=cH(),{collapsed:P,index:Q}=cN(),[R,S]=(0,k.useState)(!P),{t:T}=(0,p.useTranslation)(F);m[0]!==H||m[1]!==R?(b=()=>{R&&H()},m[0]=H,m[1]=R,m[2]=b):b=m[2];let U=b;m[3]!==P?(c=()=>{if(P)return;let a=setTimeout(()=>{S(!0)},0);return()=>{clearTimeout(a)}},m[3]=P,m[4]=c):c=m[4],m[5]!==P||m[6]!==D?(d=[P,D],m[5]=P,m[6]=D,m[7]=d):d=m[7],(0,k.useEffect)(c,d),m[8]!==n||m[9]!==u||m[10]!==w||m[11]!==x||m[12]!==D.length||m[13]!==E||m[14]!==N||m[15]!==L||m[16]!==M||m[17]!==T?(e=(a,b)=>{let{activeIndex:c}=b,d=(0,o.getPublishedId)(a._id),e=n===d,f=!w&&e,h=w&&e,j=c===D.length-1,k=j&&x,l=j&&u;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h6,{icon:!!L&&void 0,id:d,layout:E,marginBottom:1,pressed:f,schemaType:N.get(a._type),selected:h,sortOrder:M,value:a}),k&&(0,g.jsx)(p.LoadingBlock,{}),l&&(0,g.jsx)(i.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,g.jsx)(i.Text,{align:"center",muted:!0,size:1,children:T("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=n,m[9]=u,m[10]=w,m[11]=x,m[12]=D.length,m[13]=E,m[14]=N,m[15]=L,m[16]=M,m[17]=T,m[18]=e):e=m[18];let V=e;a:{let a,b;if(v){let a,b;m[19]!==T?(a=T("panes.document-list-pane.no-documents.text"),m[19]=T,m[20]=a):a=m[20],m[21]!==a?(b=(0,g.jsx)(i.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,g.jsx)(i.Container,{width:1,children:(0,g.jsx)(i.Box,{paddingX:4,paddingY:5,children:(0,g.jsx)(i.Text,{align:"center",muted:!0,children:a})})})}),m[21]=a,m[22]=b):b=m[22],f=b;break a}m[23]!==t||m[24]!==T?(a=T(t?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[23]=t,m[24]=T,m[25]=a):a=m[25],m[26]!==a?(b=(0,g.jsx)(i.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,g.jsx)(i.Container,{width:1,children:(0,g.jsx)(i.Box,{paddingX:4,paddingY:5,children:(0,g.jsx)(i.Text,{align:"center",muted:!0,children:a})})})}),m[26]=a,m[27]=b):b=m[27],f=b}let W=f;b:{let a,b;if(!R){j=null;break b}let c=window.navigator.onLine;if(q){let a,b,d,e,f,h,k;m[28]!==T?(a=T("panes.document-list-pane.error.title"),m[28]=T,m[29]=a):a=m[29],m[30]!==a?(b=(0,g.jsx)(i.Heading,{as:"h3",children:a}),m[30]=a,m[31]=b):b=m[31],m[32]!==q||m[33]!==T?(d=p.isDev?(0,g.jsx)(p.Translate,{t:T,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:q.message},components:{Code:is}}):T(c?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[32]=q,m[33]=T,m[34]=d):d=m[34],m[35]!==d?(e=(0,g.jsx)(i.Text,{as:"p",children:d}),m[35]=d,m[36]=e):e=m[36];let l=c&&C?I:void 0;m[37]!==q||m[38]!==r||m[39]!==l?(f=(0,g.jsx)(p.ErrorActions,{error:q,eventId:null,onRetry:l,isRetrying:r}),m[37]=q,m[38]=r,m[39]=l,m[40]=f):f=m[40],m[41]!==s||m[42]!==C||m[43]!==r||m[44]!==B||m[45]!==T?(h=C?(0,g.jsx)(i.Text,{as:"p",muted:!0,size:1,children:r?T("panes.document-list-pane.error.retrying",{count:B}):s?T("panes.document-list-pane.error.will-retry-automatically",{count:B}):T("panes.document-list-pane.error.max-retries-attempted",{count:B})}):null,m[41]=s,m[42]=C,m[43]=r,m[44]=B,m[45]=T,m[46]=h):h=m[46],m[47]!==f||m[48]!==h||m[49]!==b||m[50]!==e?(k=(0,g.jsx)(i.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,g.jsx)(i.Container,{width:1,children:(0,g.jsxs)(i.Stack,{paddingX:4,paddingY:5,space:4,children:[b,e,f,h]})})}),m[47]=f,m[48]=h,m[49]=b,m[50]=e,m[51]=k):k=m[51],j=k;break b}if(A&&!z&&0===D.length){j=W;break b}if("initial"===G&&z){let a;m[52]!==E?(a=(0,g.jsx)(df,{ms:300,children:(0,g.jsx)(iq,{layout:E})}),m[52]=E,m[53]=a):a=m[53],j=a;break b}if("spinner"===G&&z){j=null;break b}let d=`${Q}-${P}`,e=y?.8:1;m[54]!==U||m[55]!==D||m[56]!==d||m[57]!==J||m[58]!==V||m[59]!==K?(a=(0,g.jsx)(io,{children:(0,g.jsx)(p.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:J,canReceiveFocus:!0,inputElement:K,itemHeight:51,items:D,onEndReached:U,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:V,wrapAround:!1},d)}),m[54]=U,m[55]=D,m[56]=d,m[57]=J,m[58]=V,m[59]=K,m[60]=a):a=m[60],m[61]!==e||m[62]!==a?(b=(0,g.jsx)(im,{overflow:"hidden",height:"fill",$opacity:e,children:a}),m[61]=e,m[62]=a,m[63]=b):b=m[63],j=b}let X=j,Y=O||"initial"===G?"hidden":"auto";return m[64]!==X||m[65]!==Y?(l=(0,g.jsx)(cO,{"data-testid":"document-list-pane",overflow:Y,children:X}),m[64]=X,m[65]=Y,m[66]=l):l=m[66],l}function is(a){let{children:b}=a;return(0,g.jsx)("code",{children:b})}function it(a,b={}){try{let c=function a(b){switch(b.type){case"OpCall":{let{left:a,right:c}=b;switch(b.op){case"==":return"AccessAttribute"!==a.type||"_type"!==a.name||a.base?"AccessAttribute"!==c.type||"_type"!==c.name||c.base||"Value"!==a.type||"string"!=typeof a.value?null:new Set([a.value]):"Value"!==c.type||"string"!=typeof c.value?null:new Set([c.value]);case"in":{if("AccessAttribute"!==a.type||"_type"!==a.name||a.base||"Array"!==c.type)return null;let b=new Set;for(let a of c.elements){if(a.isSplat||"Value"!==a.value.type||"string"!=typeof a.value.value)return null;b.add(a.value.value)}return b.size?b:null}default:return null}}case"Group":return a(b.base);case"Or":{let c=a(b.left);if(!c)return null;let d=a(b.right);return d?new Set([...c,...d]):null}case"And":{let c=a(b.left),d=a(b.right);return c||d?new Set([...c||[],...d||[]]):null}default:return null}}((0,bw.parse)(a,{params:b}));return c?Array.from(c).sort():null}catch{return null}}let iu=(0,p.createSWR)({maxSize:100});function iv(a){let{client:b,schema:c,sort:d,perspective:e,limit:f,params:g,filter:h,searchQuery:i,staticTypeNames:j,maxFieldDepth:k,searchStrategy:l}=a,m=d.by,n=d?.extendedProjection,o=(0,aL.defer)(()=>b.listen(`*[${h}]`,g,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,aL.mergeMap)((a,b)=>{let c=0===b;return c&&"reconnect"===a.type?(0,aL.throwError)(()=>Error("Failed to establish EventSource connection")):c&&"welcome"!==a.type?(0,aL.throwError)(()=>Error(`Received unexpected type of first event "${a.type}"`)):(0,aL.of)(a)}),(0,aL.share)()),[q,r]=(0,aL.partition)(o,a=>"welcome"===a.type),s=JSON.stringify({fiilter:h,limit:f,params:g,searchQuery:i,perspective:e,sort:d,staticTypeNames:j});return(0,aL.merge)(q,r.pipe((0,aL.throttleTime)(1e3,aL.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,bz.exhaustMapWithTrailing)(a=>(j?(0,aL.of)(j):b.observable.fetch(`array::unique(*[${h}][]._type)`,g)).pipe((0,aL.mergeMap)(o=>{let q=(0,p.getSearchableTypes)(c,j||[]).filter(a=>!!o.includes(a.name)&&(I(a,d.by,!0),!0)),r=(0,p.createSearch)(q,b,{filter:h,params:g,strategy:l,maxDepth:k}),s=()=>r({query:i||"",types:q},{__unstable_extendedProjection:n,comments:[`findability-source: ${i?"list-query":"list"}`],limit:f,skipSortByScore:!0,sort:m,perspective:e}).pipe((0,aL.map)(a=>a.hits.map(({hit:a})=>a)),(0,aL.map)(a=>({type:"result",documents:a})));return"mutation"===a.type&&"query"!==a.visibility?(0,aL.timer)(1200).pipe((0,aL.mergeMap)(s)):"reconnect"===a.type?(0,aL.of)(a):s()}))),(0,aW.scan)((a,b)=>({connected:"reconnect"!==b.type,documents:"result"===b.type?b.documents:a?.documents||[]}),null),(0,aL.filter)(a=>null!==a),iu(s),(0,aL.map)(({fromCache:a,value:b})=>({fromCache:a,...b})))}let iw={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function ix(a,b){if("error"===b.type)return{...a,error:b.error,retryCount:b.retryCount,isRetrying:b.retrying,autoRetry:b.autoRetry,canRetry:b.canRetry};if("result"===b.type){var c;return{...a,error:null,isRetrying:!1,fromCache:b.result.fromCache,connected:b.result.connected,isLoading:!1,items:(c=b.result.documents,(0,p.collate)(c).map(a=>{let b=a.draft||a.published||a.versions[0],c=!!a.draft;return{...b,hasPublished:!!a.published,hasDraft:c}})),isLoadingFullList:!1}}if("loadFullList"===b.type)return{...a,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${b.type}`)}function iy(a){return{type:"result",result:a}}function iz(a){return{type:"result",result:a}}function iA(a){let[,b]=a;return b?.documents.length===100}function iB(){return(0,by.observableCallback)()}function iC(){return(0,by.observableCallback)()}let iD="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",iE=aI.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,iF=aI.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,iG=(0,aI.styled)(u.SpinnerIcon).withConfig({displayName:"AnimatedSpinnerIcon",componentId:"sc-1nmsicq-0"})`animation:${iE} 500ms linear infinite;`,iH=(0,aI.styled)(u.SpinnerIcon).withConfig({displayName:"SubtleSpinnerIcon",componentId:"sc-1nmsicq-1"})`animation:${iE} 1500ms linear infinite;opacity:0.4;`,iI=(0,aI.styled)(u.SpinnerIcon).withConfig({displayName:"DelayedSubtleSpinnerIcon",componentId:"sc-1nmsicq-2"})`animation:${iE} 1500ms linear infinite,${iF} 1000ms linear;opacity:0.4;`,iJ=(0,k.memo)(function(a){var b;let c,d,e,f,j,l,m,n,o,r,s,t,v,w,x,y,z,A,B,C,D,E=(0,h.c)(70),{childItemId:G,isActive:H,pane:I,paneKey:J,sortOrder:K,layout:L}=a,M=(0,p.useSchema)(),N=(0,p.useActiveReleases)(),{perspectiveStack:O}=(0,p.usePerspective)(),{displayOptions:P,options:Q}=I,{apiVersion:R,filter:S}=Q,T=jc(Q.params||il);a:{let a;E[0]!==S||E[1]!==T?(a=it(S,T),E[0]=S,E[1]=T,E[2]=a):a=E[2];let b=a;if(b?.length===1){c=b[0];break a}c=null}let U=c,V=P?.showIcons!==!1,{t:W}=(0,p.useTranslation)(F),{title:X}=(0,p.useI18nText)(I),[Y,Z]=(0,k.useState)(""),[$,_]=(0,k.useState)(""),[aa,ab]=(0,k.useState)(null);E[3]!==M||E[4]!==K||E[5]!==U?(d=U&&K?(b=M.get(U),(D=K.by.map(a=>{if(a.mapWith)return a;let c=function(a,b){let c=aX.fromString(b),d=a;for(let a of c){if(!d)return;if("string"==typeof a){d=function(a,b){if(!("fields"in a))return;let c=a.fields.find(a=>a.name===b);return c?c.type:void 0}(d,a);continue}if(!((0,q.isKeySegment)(a)||(0,q.isIndexSegment)(a))||"array"!==d.jsonType)return;let[b,c]=d.of||[];if(c||!b)return;if(!(0,q.isReferenceSchemaType)(b)){d=b;continue}let[e,f]=b.to||[];if(f||!e)return;d=e}return d}(b,a.field);return c?!function(a,b){let c=a.type;for(;c;){if(c.name===b||!c.type&&c.jsonType===b)return!0;c=c.type}return!1}(c,"datetime")?"string"===c.jsonType?{...a,mapWith:"lower"}:a:{...a,mapWith:"dateTime"}:a})).every((a,b)=>a===K.by[b])?K:{...K,by:D}):K,E[3]=M,E[4]=K,E[5]=U,E[6]=d):d=E[6];let ac=(0,p.useUnique)(d),ad=R||p.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;E[7]!==ad?(e={...p.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:ad},E[7]=ad,E[8]=e):e=E[8];let ae=(0,p.useClient)(e);E[9]!==Y?(f=Y?.trim(),E[9]=Y,E[10]=f):f=E[10],E[11]!==ae||E[12]!==S||E[13]!==T||E[14]!==O||E[15]!==ac||E[16]!==f?(j={client:ae,filter:S,perspective:O,params:T,searchQuery:f,sortOrder:ac},E[11]=ae,E[12]=S,E[13]=T,E[14]=O,E[15]=ac,E[16]=f,E[17]=j):j=E[17];let{error:af,isLoadingFullList:ag,isLoading:ah,items:ai,fromCache:aj,isRetrying:ak,autoRetry:al,canRetry:am,retryCount:an,connected:ao,onLoadFullList:ap,onRetry:aq}=function(a){let b,c,d,e=(0,h.c)(31),{client:f,filter:g,params:i,sortOrder:j,searchQuery:l,perspective:m}=a,{strategy:n}=(0,p.useWorkspace)().search,o=(0,p.useSchema)(),q=(0,p.useSearchMaxFieldDepth)();e[0]!==i||e[1]!==g?(b=it(g,i),e[0]=i,e[1]=g,e[2]=b):b=e[2];let r=b,[s]=(0,k.useState)(iC),[t,u]=s,[v]=(0,k.useState)(iB),[w,x]=v,y=l||"",z=j||ik;if(e[3]!==f||e[4]!==q||e[5]!==w||e[6]!==t||e[7]!==i||e[8]!==m||e[9]!==o||e[10]!==g||e[11]!==n||e[12]!==y||e[13]!==z||e[14]!==r){let a,b={client:f,filter:g,limit:100,params:i,schema:o,perspective:m,searchQuery:y,sort:z,staticTypeNames:r,maxFieldDepth:q,searchStrategy:n},d=iv(b).pipe((0,aW.shareReplay)({refCount:!0,bufferSize:1})),h=w.pipe((0,aW.withLatestFrom)(d),(0,aW.filter)(iA),(0,aW.take)(1),(0,aW.mergeMap)(()=>(0,aL.concat)((0,aL.of)({type:"loadFullList"}),iv({...b,limit:2e3}).pipe((0,aW.map)(iz)))),(0,aW.share)());e[16]!==t?(a=(a,b,c)=>{var d,e;let f=(e=a)instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${iD}`):Error(`${String(e)} ${iD}`),g=window.navigator.onLine,h=g&&!((d=a)instanceof bx.ChannelError)&&(d instanceof bx.ServerError||!(d instanceof bx.ClientError)||403===d.statusCode),i=b<10,j=(0,aL.merge)(g?t:(0,aL.fromEvent)(window,"online"),g&&i?(0,aL.timer)(1e3*b):aL.NEVER).pipe((0,aW.take)(1),(0,aW.switchMap)(()=>(0,aL.merge)((0,aL.of)({type:"error",error:f,retrying:!0,autoRetry:i,canRetry:h,retryCount:b}),c)));return(0,aL.concat)((0,aL.of)({type:"error",error:f,retrying:!1,autoRetry:i,canRetry:h,retryCount:b}),j)},e[16]=t,e[17]=a):a=e[17],c=(0,aL.merge)(d.pipe((0,aW.map)(iy),(0,aW.takeUntil)(h)),h).pipe((0,p.catchWithCount)(a),(0,aW.scan)(ix,iw)),e[3]=f,e[4]=q,e[5]=w,e[6]=t,e[7]=i,e[8]=m,e[9]=o,e[10]=g,e[11]=n,e[12]=y,e[13]=z,e[14]=r,e[15]=c}else c=e[15];let A=c,{error:B,items:C,isLoading:D,fromCache:E,connected:F,canRetry:G,isLoadingFullList:H,isRetrying:I,autoRetry:J,retryCount:K}=(0,aK.useObservable)(A,iw);return e[18]!==J||e[19]!==G||e[20]!==F||e[21]!==B||e[22]!==E||e[23]!==D||e[24]!==H||e[25]!==I||e[26]!==C||e[27]!==x||e[28]!==u||e[29]!==K?(d={error:B,onRetry:u,isLoading:D,items:C,isRetrying:I,canRetry:G,retryCount:K,autoRetry:J,connected:F,fromCache:E,onLoadFullList:x,isLoadingFullList:H},e[18]=J,e[19]=G,e[20]=F,e[21]=B,e[22]=E,e[23]=D,e[24]=H,e[25]=I,e[26]=C,e[27]=x,e[28]=u,e[29]=K,e[30]=d):d=e[30],d}(j),ar=ah||N.loading;E[18]===Symbol.for("react.memo_cache_sentinel")?(l=a=>a.pipe((0,aL.map)(iK),(0,aL.tap)(_),(0,aL.debounce)(iL),(0,aL.tap)(Z)),E[18]=l):l=E[18];let as=(0,aK.useObservableEvent)(l);E[19]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{Z(""),_("")},E[19]=m):m=E[19];let at=m;E[20]===Symbol.for("react.memo_cache_sentinel")?(n=a=>{"Escape"===a.key&&at()},E[20]=n):n=E[20];let au=n,[av,aw]=(0,k.useState)();E[21]!==av||E[22]!==ar||E[23]!==J?(r=()=>{av||ar||aw(J)},o=[av,ar,J],E[21]=av,E[22]=ar,E[23]=J,E[24]=o,E[25]=r):(o=E[24],r=E[25]),(0,k.useEffect)(r,o),E[26]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{at(),aw()},E[26]=s):s=E[26],E[27]!==J?(t=[J,at],E[27]=J,E[28]=t):t=E[28],(0,k.useEffect)(s,t);b:{if(ao&&ar&&av===J){v="spinner";break b}if(ao&&aj){v="subtle";break b}v="initial"}let ax=v;c:{if("spinner"===ax){w=iG;break c}if($&&"subtle"===ax){w=iH;break c}w=u.SearchIcon}let ay=w;(0,p.useReconnectingToast)(!ao),E[29]!==W?(x=W("panes.document-list-pane.search-input.aria-label"),E[29]=W,E[30]=x):x=E[30];let az=!!Y;E[31]===Symbol.for("react.memo_cache_sentinel")?(y=[2,2,1],E[31]=y):y=E[31];let aA=ao&&("subtle"!==ax||$)?null:iI;E[32]!==W?(z=W("panes.document-list-pane.search-input.placeholder"),E[32]=W,E[33]=z):z=E[33],E[34]!==as||E[35]!==$||E[36]!==x||E[37]!==az||E[38]!==aA||E[39]!==z||E[40]!==ay?(A=(0,g.jsx)(i.Box,{paddingX:3,paddingBottom:3,children:(0,g.jsx)(i.TextInput,{"aria-label":x,autoComplete:"off",border:!1,clearButton:az,fontSize:y,icon:ay,iconRight:aA,onChange:as,onClear:at,onKeyDown:au,padding:2,placeholder:z,radius:2,ref:ab,spellCheck:!1,value:$})}),E[34]=as,E[35]=$,E[36]=x,E[37]=az,E[38]=aA,E[39]=z,E[40]=ay,E[41]=A):A=E[41];let aB=!!U,aC=2e3===ai.length,aD=!!Y,aE="subtle"===ax;return E[42]!==al||E[43]!==am||E[44]!==G||E[45]!==ao||E[46]!==af||E[47]!==H||E[48]!==ar||E[49]!==ag||E[50]!==ak||E[51]!==ai||E[52]!==L||E[53]!==ax||E[54]!==ap||E[55]!==aq||E[56]!==J||E[57]!==an||E[58]!==aa||E[59]!==V||E[60]!==ac||E[61]!==aB||E[62]!==aC||E[63]!==aD||E[64]!==aE||E[65]!==X?(B=(0,g.jsx)(ir,{childItemId:G,error:af,filterIsSimpleTypeConstraint:aB,hasMaxItems:aC,hasSearchQuery:aD,isActive:H,isLazyLoading:ag,isLoading:ar,autoRetry:al,canRetry:am,retryCount:an,isRetrying:ak,isConnected:ao,items:ai,layout:L,muted:aE,loadingVariant:ax,onEndReached:ap,onRetry:aq,paneTitle:X,searchInputElement:aa,showIcons:V,sortOrder:ac},J),E[42]=al,E[43]=am,E[44]=G,E[45]=ao,E[46]=af,E[47]=H,E[48]=ar,E[49]=ag,E[50]=ak,E[51]=ai,E[52]=L,E[53]=ax,E[54]=ap,E[55]=aq,E[56]=J,E[57]=an,E[58]=aa,E[59]=V,E[60]=ac,E[61]=aB,E[62]=aC,E[63]=aD,E[64]=aE,E[65]=X,E[66]=B):B=E[66],E[67]!==A||E[68]!==B?(C=(0,g.jsxs)(g.Fragment,{children:[A,B]}),E[67]=A,E[68]=B,E[69]=C):C=E[69],C});function iK(a){return a.target.value}function iL(a){return""===a?(0,aL.of)(""):(0,aL.timer)(300)}let iM=(0,k.memo)(a=>{let b,c,d,e,f,i,j,k,l,m,n,o=(0,h.c)(33),{contentAfter:p,customMenuItemState:q,index:s,initialValueTemplates:t,menuItemGroups:v,menuItems:w,setLayout:x,setSortOrder:y,setCustomMenuItemState:z,title:A}=a;o[0]!==q?(b=void 0===q?{}:q,o[0]=q,o[1]=b):b=o[1];let B=b;o[2]!==t?(c=void 0===t?[]:t,o[2]=t,o[3]=c):c=o[3];let C=c;o[4]!==v?(d=void 0===v?[]:v,o[4]=v,o[5]=d):d=o[5];let D=d;o[6]!==w?(e=void 0===w?[]:w,o[6]=w,o[7]=e):e=o[7];let E=e,{features:F}=dr(),{collapsed:G,isLast:H}=cN(),I=H&&!G?-1:0;o[8]!==x?(f=a=>{let{layout:b}=a;x(b)},o[8]=x,o[9]=f):f=o[9],o[10]!==y?(i=a=>{y(a)},o[10]=y,o[11]=i):i=o[11],o[12]!==B||o[13]!==z?(j=a=>{let b=a._menuItemId,c=a.value??!0;B[b]===c?z(Object.fromEntries(Object.entries(B).filter(a=>{let[c]=a;return c!==b}))):z({...B,[b]:c})},o[12]=B,o[13]=z,o[14]=j):j=o[14],o[15]!==i||o[16]!==j||o[17]!==f?(k={setLayout:f,setSortOrder:i,setMenuItemState:j},o[15]=i,o[16]=j,o[17]=f,o[18]=k):k=o[18];let J=k;return o[19]!==J||o[20]!==C||o[21]!==D||o[22]!==E?(l=(0,g.jsx)(h$,{initialValueTemplateItems:C,actionHandlers:J,menuItemGroups:D,menuItems:E}),o[19]=J,o[20]=C,o[21]=D,o[22]=E,o[23]=l):l=o[23],o[24]!==F.backButton||o[25]!==s?(m=F.backButton&&s>0&&(0,g.jsx)(r.Button,{as:hg,"data-as":"a",icon:u.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),o[24]=F.backButton,o[25]=s,o[26]=m):m=o[26],o[27]!==p||o[28]!==l||o[29]!==m||o[30]!==I||o[31]!==A?(n=(0,g.jsx)(r.TooltipDelayGroupProvider,{children:(0,g.jsx)(c4,{actions:l,backButton:m,contentAfter:p,tabIndex:I,title:A})}),o[27]=p,o[28]=l,o[29]=m,o[30]=I,o[31]=A,o[32]=n):n=o[32],n});function iN(a){let{row:b,table:c}=a,{selectedAnchor:d,setSelectedAnchor:e}=c.options.meta||{},f=(0,k.useCallback)(a=>{if(a.shiftKey&&null!=d){let a=b.index,e=a<d?a:d,f=a<d?d:a,g=c.getRowModel().flatRows.slice(e,f+1).map(({id:a})=>a),h=c.getSelectedRowModel().rows.map(({id:a})=>a);c.setRowSelection(()=>[...g,...h].reduce((a,b)=>({...a,[b]:!0}),{}))}else e&&(e(b.getIsSelected()?null:b.index),b.toggleSelected())},[d,b,e,c]);return(0,g.jsx)(i.Checkbox,{style:{paddingLeft:4},checked:a.row.getIsSelected(),disabled:!a.row.getCanSelect(),onChange:()=>null,onClick:f})}function iO(a){let b,c,d,e,f,i,j,m,n,o,p,q,r,s,t,u,v,w=(0,h.c)(49),{children:x,table:y}=a,[z,A]=(0,k.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],w[0]=b):b=w[0];let[B,C]=(0,k.useState)(b);w[1]!==z?.state?(c=a=>{z?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),A(void 0===a?null:a),C([])},w[1]=z?.state,w[2]=c):c=w[2];let D=c;w[3]!==D?(d=()=>D(),w[3]=D,w[4]=d):d=w[4];let E=d;w[5]!==D||w[6]!==z||w[7]!==y?(e=a=>{if(!z)return;let b=y.getVisibleLeafColumns(),c=b.findIndex(a=>a.id===z.colId)+("left"===a?-1:1);c<0||c>=b.length||D({colId:b[c].id,rowIndex:z.rowIndex,state:"selected"})},w[5]=D,w[6]=z,w[7]=y,w[8]=e):e=w[8];let F=e;w[9]!==z?(f=a=>{z&&C(b=>{let{rowIndex:c}=z,d=b=>b+("down"===a?1:-1);if(!b.length){let a=d(c);return a<0?[]:[a]}let e=d(b[b.length-1]);return e<0?b:e===c?[]:b.includes(e)?b.slice(0,-1):[...b,e]})},w[9]=z,w[10]=f):f=w[10];let G=f;w[11]!==D?(i=(a,b)=>{D({colId:a,rowIndex:b,state:"selected"})},w[11]=D,w[12]=i):i=w[12];let H=i;w[13]!==D||w[14]!==z||w[15]!==B.length?(j=()=>{z&&(B.length?C([]):D("selected"===z.state?null:{...z,state:"selected"}))},w[13]=D,w[14]=z,w[15]=B.length,w[16]=j):j=w[16];let I=j;w[17]!==G||w[18]!==z||w[19]!==H?(m=(a,b)=>{if(!z)return;let c="ArrowDown"===b?"down":"up",d="down"===c?1:-1;if(a)G(c);else{let a=z.rowIndex+d;if(a<0)return;H(z.colId,a)}},w[17]=G,w[18]=z,w[19]=H,w[20]=m):m=w[20];let J=m;w[21]!==F||w[22]!==I||w[23]!==J||w[24]!==z?(n=a=>{if(!z)return;let{key:b,shiftKey:c}=a;switch(b){case"Shift":break;case"Escape":I();break;case"ArrowDown":case"ArrowUp":a.preventDefault(),J(c,b);break;case"ArrowLeft":case"ArrowRight":"selected"===z.state&&(a.preventDefault(),F("ArrowLeft"===b?"left":"right"))}},w[21]=F,w[22]=I,w[23]=J,w[24]=z,w[25]=n):n=w[25];let K=n;w[26]!==E||w[27]!==z?(o=a=>{z&&(document.getElementById(`cell-${z.colId}-${z.rowIndex}`)?.contains(a.target)||E())},w[26]=E,w[27]=z,w[28]=o):o=w[28];let L=o;w[29]!==L||w[30]!==K||w[31]!==z?(p=()=>(z&&(document.addEventListener("keydown",K),document.addEventListener("click",L)),()=>{z&&(document.removeEventListener("keydown",K),document.removeEventListener("click",L))}),q=[L,K,z],w[29]=L,w[30]=K,w[31]=z,w[32]=p,w[33]=q):(p=w[32],q=w[33]),(0,k.useEffect)(p,q),w[34]===Symbol.for("react.memo_cache_sentinel")?(r=()=>A(iP),w[34]=r):r=w[34];let M=r;w[35]!==z||w[36]!==B?(s=(a,b)=>z?.colId!==a?null:z.rowIndex===b?"focused"===z.state?"focused":"selectedAnchor":B.includes(b)?"selectedRange":null,w[35]=z,w[36]=B,w[37]=s):s=w[37];let N=s;w[38]!==D||w[39]!==z?(t=()=>{z&&D({colId:z.colId,rowIndex:z.rowIndex+1,state:"selected"})},w[38]=D,w[39]=z,w[40]=t):t=w[40];let O=t;w[41]!==N||w[42]!==E||w[43]!==H||w[44]!==O?(u={focusAnchorCell:M,resetFocusSelection:E,setSelectedAnchorCell:H,getStateByCellId:N,submitFocusedCell:O},w[41]=N,w[42]=E,w[43]=H,w[44]=O,w[45]=u):u=w[45];let P=u;return w[46]!==x||w[47]!==P?(v=(0,g.jsx)(l.DocumentSheetListContext.Provider,{value:P,children:x}),w[46]=x,w[47]=P,w[48]=v):v=w[48],v}function iP(a){return a?{...a,state:"focused"}:null}iM.displayName="Memo(PaneHeader)";let iQ=aI.styled.td.withConfig({displayName:"DataCell",componentId:"sc-1b0ndkq-0"})`display:flex;overflow:hidden;box-sizing:border-box;width:${({width:a})=>a}px;border-top:1px solid var(--card-border-color);background-color:var(--card-bg-color);`,iR=(0,aI.styled)(iQ).withConfig({displayName:"PinnedDataCell",componentId:"sc-1b0ndkq-1"})`position:sticky;z-index:2;`;function iS(a){let{getValue:b,column:c,row:d,fieldType:e}=a,f=`cell-${c.id}-${d.index}`,[h,j]=(0,k.useState)(()=>b()),[m,n]=(0,k.useState)(!1),o=(0,k.useRef)(null),{focusAnchorCell:p,resetFocusSelection:q,setSelectedAnchorCell:r,getStateByCellId:s,submitFocusedCell:t}=(()=>{let a=(0,k.useContext)(l.DocumentSheetListContext);if(void 0===a)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return a})(),u=s(c.id,d.index),v=(0,k.useCallback)(()=>{r(c.id,d.index),p()},[c.id,p,d.index,r]),{patchDocument:w}=a.table.options.meta||{},x=()=>{o.current?.focus(),o.current instanceof HTMLInputElement&&o.current.select()},y=(0,k.useCallback)(a=>{let{key:b}=a;"Enter"===b&&("selectedAnchor"===u&&x(),"focused"===u&&t())},[u,t]),z=(0,k.useCallback)(a=>{let b=a.clipboardData?.getData("Text");("string"==typeof b||"number"==typeof b)&&(j(b),w?.(d.id,c.id,b))},[c.id,w,d.id]),A=(0,k.useCallback)(()=>navigator.clipboard.writeText(h.toString()),[h]);(0,k.useEffect)(()=>(("selectedAnchor"===u||"focused"===u)&&document.addEventListener("keydown",y),("selectedAnchor"===u||"selectedRange"===u)&&document.addEventListener("paste",z),"selectedAnchor"===u&&document.addEventListener("copy",A),()=>{("selectedAnchor"===u||"focused"===u)&&document.removeEventListener("keydown",y),("selectedAnchor"===u||"selectedRange"===u)&&document.removeEventListener("paste",z),"selectedAnchor"===u&&document.removeEventListener("copy",A)}),[f,u,c.id,s,A,y,z,d.index]);let B=()=>"focused"===u?"2px solid blue":"selectedRange"===u?"1px solid green":"selectedAnchor"===u?"1px solid blue":"1px solid transparent",C={onFocus:v,onBlur:()=>{m&&(w?.(d.id,c.id,h),n(!1)),q()},onMouseDown:a=>{2===a.detail?x():(a.preventDefault(),r(c.id,d.index))},"aria-selected":!!u,"data-testid":f,id:f,ref:a=>{o.current=a}};return"boolean"===e.name?(0,g.jsxs)(i.Select,{...C,onChange:()=>null,radius:0,style:{boxShadow:"none",border:B(),padding:0},value:JSON.stringify(h),children:[(0,g.jsx)("option",{value:"True",children:"True"}),(0,g.jsx)("option",{value:"False",children:"False"})]}):(0,g.jsx)(i.TextInput,{...C,size:0,radius:0,border:!1,style:{border:B(),padding:"22px 16px"},value:"string"==typeof h||"number"==typeof h?h:JSON.stringify(h),onChange:a=>{n(!0),j(a.target.value)}})}function iT(a){let b=a.column.getIsPinned(),c=b&&a.column.getIsLastColumn("left")?2:1;return(0,g.jsx)(b?iR:iQ,{style:{left:a.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},width:a.column.getSize(),children:cc(a.column.columnDef.cell,a.getContext?.())},a.row.original._id+a.id)}let iU=a=>{let{documentPreviewStore:b,row:c,schemaType:d}=a,e=(0,k.useMemo)(()=>(0,p.getPreviewStateObservable)(b,d,c.original._id),[b,c.original._id,d]),f=(0,p.useDocumentVersionInfo)(c.original._id),{snapshot:h,isLoading:j}=(0,aK.useObservable)(e,{snapshot:null,isLoading:!0});if(j)return(0,g.jsx)(i.Text,{size:1,muted:!0,children:"Loading..."});let l=h?.title??"Untitled";return(0,g.jsxs)(i.Flex,{align:"center",gap:3,children:[(0,g.jsx)(p.DocumentStatusIndicator,{draft:f.draft,published:f.published,versions:void 0}),(0,g.jsx)(i.Text,{size:1,children:l})]})},iV=(a,b)=>"function"==typeof a?{...b,accessorFn:a}:{...b,accessorKey:a},iW=["string","number","boolean"],iX=(a,b)=>a.fields.reduce((a,c)=>{let{type:d,name:e}=c;return iW.includes(d.name)?[...a,iV(b?`${b}.${c.name}`:c.name,{id:b?`${b}_${c.name}`:c.name,header:c.type.title,enableHiding:!0,cell:a=>(0,g.jsx)(iS,{...a,fieldType:d})})]:"object"===d.name&&(0,q.isObjectSchemaType)(d)&&!b?[...a,{header:e,columns:iX(d,c.name)}]:a},[]),iY=a=>a.flatMap(a=>"accessorKey"in a?a:"columns"in a&&a.columns?iY(a.columns):[]);function iZ({table:a}){let{t:b}=(0,p.useTranslation)(),c=a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length>=5,d=(0,k.useCallback)(()=>{a.resetColumnVisibility()},[a]);return(0,g.jsx)(r.MenuButton,{button:(0,g.jsx)(r.Button,{mode:"bleed",text:b("sheet-list.edit-columns")}),id:"columns-control",menu:(0,g.jsx)(i.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,g.jsxs)(i.Flex,{direction:"column",height:"fill",gap:3,children:[(0,g.jsx)(i.Text,{weight:"semibold",size:1,children:b("sheet-list.select-fields")}),(0,g.jsx)(i.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,g.jsx)(i.Stack,{children:a.getAllLeafColumns().filter(a=>a.getCanHide()).map(b=>{let d,e,f=b.id.replace(/ /g,"-");return(0,g.jsxs)(i.Flex,{marginY:2,align:"center",children:[(0,g.jsx)(i.Checkbox,{readOnly:(d=b.getIsVisible(),e=1===a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length,c&&!d||e&&d),checked:b.getIsVisible(),onChange:()=>{b.toggleVisibility()},id:`col-visibility-${f}`,style:{display:"block"}}),(0,g.jsx)(i.Box,{flex:1,paddingLeft:3,children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)("label",{htmlFor:`col-visibility-${f}`,children:b.columnDef.header?.toString()})})})]},b.id)})})}),(0,g.jsx)(r.Button,{width:"fill",mode:"ghost",text:b("sheet-list.reset-columns"),onClick:d})]})}),placement:"bottom",popover:{portal:!0}})}let i$=(0,aI.styled)(i.Flex).withConfig({displayName:"SearchContainer",componentId:"sc-rt1blp-0"})`flex-shrink:0;`;function i_(){let a,b,c,d=(0,h.c)(5),{state:e}=(0,p.useSearchState)(),{filtersVisible:f}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(p.SearchHeader,{}),d[0]=a):a=d[0],d[1]!==f?(b=f&&(0,g.jsx)(p.Filters,{showTypeFilter:!1}),d[1]=f,d[2]=b):b=d[2],d[3]!==b?(c=(0,g.jsxs)(i$,{children:[a,b]}),d[3]=b,d[4]=c):c=d[4],c}let i0=aI.styled.th.withConfig({displayName:"Header",componentId:"sc-1l8g8jw-0"})`margin:16px;z-index:1;padding:22px 0px;border-top:1px solid var(--card-border-color);background-color:var(--card-badge-default-bg-color);box-sizing:border-box;text-align:left;width:${({width:a})=>a}px;max-width:${({width:a})=>a}px;`,i1=(0,aI.styled)(i0).withConfig({displayName:"PinnedHeader",componentId:"sc-1l8g8jw-1"})`position:sticky;z-index:2;`,i2=aI.styled.div.withConfig({displayName:"HoverMenu",componentId:"sc-1l8g8jw-2"})`visibility:hidden;${i0}:hover &{visibility:visible;}`;function i3(a){let{header:b,headerGroup:c}=a,{t:d}=(0,p.useTranslation)(),e=b.column.getIsPinned(),f=c.depth>0&&!b.column.parent?null:(0,g.jsx)(i.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:cc(b.column.columnDef.header,b.getContext())}),h=b.column.getCanHide()&&(0===c.depth?!b.column.columns.length:b.column.parent),j=e&&b.column.getIsLastColumn("left")?2:1;return(0,g.jsx)(e?i1:i0,{style:{left:b.column.getStart("left")??void 0,borderRight:`${j}px solid var(--card-border-color)`},"data-testid":`header-${b.id}`,width:b.getSize(),children:(0,g.jsxs)(i.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,g.jsx)(r.Tooltip,{delay:500,content:f,children:(0,g.jsx)(i.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:f})}),h&&(0,g.jsx)(i2,{children:(0,g.jsx)(r.MenuButton,{button:(0,g.jsx)(r.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:u.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,g.jsx)(i.Menu,{children:(0,g.jsx)(r.MenuItem,{text:d("sheet-list.hide-field"),icon:u.CloseIcon,onClick:()=>b.column.toggleVisibility()})})})})]})},b.id)}function i4({table:a}){return(0,g.jsx)(r.TooltipDelayGroupProvider,{children:(0,g.jsxs)(i.Flex,{gap:3,align:"center",children:[(0,g.jsx)(r.Button,{onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),icon:u.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,g.jsx)(r.Button,{onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),icon:u.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,g.jsxs)(i.Text,{style:{whiteSpace:"nowrap"},children:[a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),(0,g.jsx)(r.Button,{onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),icon:u.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,g.jsx)(r.Button,{onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),icon:u.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,g.jsx)("select",{value:a.getState().pagination.pageSize,onChange:b=>{a.setPageSize(Number(b.target.value))},children:[25,50,100].map(a=>(0,g.jsx)("option",{value:a,children:a},a))})]})})}function i5(a,b){switch(b.type){case"DOCUMENTS_SET":{let c=b.documents.reduce((a,b)=>({...a,[b._id]:b}),{});return{...a,documents:c}}case"DOCUMENT_RECEIVED":{let c=b.payload;return{...a,documents:{...a.documents,[c._id]:c}}}case"DOCUMENT_DELETED":{let{[b.id]:c,...d}=a.documents;return{...a,documents:d}}case"DOCUMENT_UPDATED":{let c=b.payload,d=c._id,e={...a.documents[d],...c};return{...a,documents:{...a.documents,[d]:e}}}default:return a}}let i6={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},i7=(0,aI.styled)(i.Flex).withConfig({displayName:"PaneContainer",componentId:"sc-t7phoh-0"})`height:100%;`,i8=aI.styled.div.withConfig({displayName:"TableContainer",componentId:"sc-t7phoh-1"})`overflow:auto;position:relative;`,i9=aI.styled.table.withConfig({displayName:"Table",componentId:"sc-t7phoh-2"})`border-collapse:separate;border-spacing:0;font-family:arial,sans-serif;white-space:nowrap;width:100%;border:1px solid lightgray;thead{display:grid;position:sticky;top:0;z-index:10;}tr{padding:0;}tr:last-child{border-bottom:none;}`;function ja({documentSchemaType:a}){let{dispatch:b,state:c}=(0,p.useSearchState)(),{columns:d,initialColumnsVisibility:e}=function(a){let b=(0,p.useDocumentPreviewStore)(),c=(0,k.useMemo)(()=>a?[{id:"selected",enableHiding:!1,header:a=>(0,g.jsxs)(i.Box,{children:[(0,g.jsx)(i.Checkbox,{style:{paddingLeft:4},indeterminate:a.table.getIsSomeRowsSelected(),onChange:a.table.getToggleAllPageRowsSelectedHandler()}),a.table.getSelectedRowModel().rows.length," selected"]}),cell:iN},iV("Preview",{enableHiding:!1,id:"Preview",cell:c=>(0,g.jsx)(iU,{...c,documentPreviewStore:b,schemaType:a})}),...iX(a)]:[],[b,a]),[d]=(0,k.useMemo)(()=>iY(c).reduce(([a,b],c)=>{if(!c.id)throw Error("Column must have an id");let d=c.id;return c.enableHiding?5===b?[{...a,[d]:!1},b]:[{...a,[d]:!0},b+1]:[{...a,[d]:!0},b]},[{},0]),[c]);return{columns:c,initialColumnsVisibility:d}}(a),{data:f}=function(a){let b,c,d,e,f=(0,h.c)(12),{typeName:g}=a,{state:i}=(0,p.useSearchState)();f[0]!==i.result.hits?(b=new Map,i.result.hits.forEach(a=>b.set((0,o.getPublishedId)(a.hit._id),a.hit)),f[0]=i.result.hits,f[1]=b):b=f[1];let j=b,l=`_type == "${g}"`;f[2]!==l?(c={filter:l},f[2]=l,f[3]=c):c=f[3];let{data:m,isLoading:n}=function(a){let b,c,d,e,f,g,i,j,l,m,n=(0,h.c)(27),{filter:q,params:r,apiVersion:s}=a,t=`*[${q}][0...2000]`,u=s||p.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;n[0]!==u?(b={...p.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:u},n[0]=u,n[1]=b):b=n[1];let v=(0,p.useClient)(b);n[2]===Symbol.for("react.memo_cache_sentinel")?(c={documents:{}},n[2]=c):c=n[2];let[w,x]=(0,k.useReducer)(i5,c),[y,z]=(0,k.useState)(null!==v),[A,B]=(0,k.useState)(null);n[3]!==t||n[4]!==v||n[5]!==r?(d=async()=>{if(!v)return void z(!1);try{let a=await v.fetch(t,r);x({type:"DOCUMENTS_SET",documents:a}),z(!1)}catch(a){B(a)}},n[3]=t,n[4]=v,n[5]=r,n[6]=d):d=n[6];let C=d;n[7]!==C?(e=async a=>{if("welcome"===a.type&&(z(!0),await C(),z(!1)),"reconnect"===a.type&&z(!0),"mutation"===a.type){if("appear"===a.transition){let b=a.result;b&&x({type:"DOCUMENT_RECEIVED",payload:b})}if("disappear"===a.transition&&x({type:"DOCUMENT_DELETED",id:a.documentId}),"update"===a.transition){let b=a.result;b&&x({type:"DOCUMENT_UPDATED",payload:b})}}},n[7]=C,n[8]=e):e=n[8];let D=e;a:{let a;if(!v){let a;n[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aL.of)(),n[9]=a):a=n[9],f=a;break a}if(n[10]!==t||n[11]!==v.observable||n[12]!==r){let b;n[14]===Symbol.for("react.memo_cache_sentinel")?(b=a=>(B(a),(0,aL.of)(a)),n[14]=b):b=n[14],a=v.observable.listen(t,r,i6).pipe((0,aL.catchError)(b)),n[10]=t,n[11]=v.observable,n[12]=r,n[13]=a}else a=n[13];f=a}let E=f;n[15]!==D||n[16]!==E?(g=()=>{let a=E.subscribe(D);return()=>{a?.unsubscribe()}},i=[D,E],n[15]=D,n[16]=E,n[17]=g,n[18]=i):(g=n[17],i=n[18]),(0,k.useEffect)(g,i),n[19]!==w.documents?(j=Object.keys(w.documents).reduce((a,b)=>{let c=w.documents[b],d=c._id===(0,o.getDraftId)(c._id),e=d?c._id:(0,o.getDraftId)(c._id);return a[e]&&!d||(a[e]=c),a},{}),n[19]=w.documents,n[20]=j):j=n[20];let F=j;n[21]!==F?(l=Object.values(F),n[21]=F,n[22]=l):l=n[22];let G=l;return n[23]!==G||n[24]!==A||n[25]!==y?(m={data:G,isLoading:y,error:A},n[23]=G,n[24]=A,n[25]=y,n[26]=m):m=n[26],m}(c);if(f[4]!==m||f[5]!==j){let a;f[7]!==j?(a=a=>j.has((0,o.getPublishedId)(a._id)),f[7]=j,f[8]=a):a=f[8],d=m.filter(a),f[4]=m,f[5]=j,f[6]=d}else d=f[6];let q=d;return f[9]!==q||f[10]!==n?(e={data:q,isLoading:n},f[9]=q,f[10]=n,f[11]=e):e=f[11],e}({typeName:a.name}),[j,l]=(0,k.useState)(null),m=c.result.hits.length,n=function(a){let b={state:{},onStateChange:()=>{},renderFallbackValue:null,...a},[c]=k.useState(()=>({current:function(a){var b,c;let d=[...cb,...null!=(b=a._features)?b:[]],e={_features:d},f=e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultOptions?void 0:b.getDefaultOptions(e)),{}),g={...null!=(c=a.initialState)?c:{}};e._features.forEach(a=>{var b;g=null!=(b=null==a.getInitialState?void 0:a.getInitialState(g))?b:g});let h=[],i=!1,j={_features:d,options:{...f,...a},initialState:g,_queue:a=>{h.push(a),i||(i=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();i=!1}).catch(a=>setTimeout(()=>{throw a})))},reset:()=>{e.setState(e.initialState)},setOptions:a=>{var b;b=bA(a,e.options),e.options=e.options.mergeOptions?e.options.mergeOptions(f,b):{...f,...b}},getState:()=>e.options.state,setState:a=>{null==e.options.onStateChange||e.options.onStateChange(a)},_getRowId:(a,b,c)=>{var d;return null!=(d=null==e.options.getRowId?void 0:e.options.getRowId(a,b,c))?d:`${c?[c.id,b].join("."):b}`},getCoreRowModel:()=>(e._getCoreRowModel||(e._getCoreRowModel=e.options.getCoreRowModel(e)),e._getCoreRowModel()),getRowModel:()=>e.getPaginationRowModel(),getRow:(a,b)=>{let c=(b?e.getPrePaginationRowModel():e.getRowModel()).rowsById[a];if(!c&&!(c=e.getCoreRowModel().rowsById[a]))throw Error();return c},_getDefaultColumnDef:bD(()=>[e.options.defaultColumn],a=>{var b;return a=null!=(b=a)?b:{},{header:a=>{let b=a.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:a=>{var b,c;return null!=(b=null==(c=a.renderValue())||null==c.toString?void 0:c.toString())?b:null},...e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultColumnDef?void 0:b.getDefaultColumnDef()),{}),...a}},bE(a,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>e.options.columns,getAllColumns:bD(()=>[e._getColumnDefs()],a=>{let b=function(a,c,d){return void 0===d&&(d=0),a.map(a=>{let f=function(a,b,c,d){var e,f;let g,h={...a._getDefaultColumnDef(),...b},i=h.accessorKey,j=null!=(e=null!=(f=h.id)?f:i?"function"==typeof String.prototype.replaceAll?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)?e:"string"==typeof h.header?h.header:void 0;if(h.accessorFn?g=h.accessorFn:i&&(g=i.includes(".")?a=>{let b=a;for(let a of i.split(".")){var c;b=null==(c=b)?void 0:c[a]}return b}:a=>a[h.accessorKey]),!j)throw Error();let k={id:`${String(j)}`,accessorFn:g,parent:d,depth:c,columnDef:h,columns:[],getFlatColumns:bD(()=>[!0],()=>{var a;return[k,...null==(a=k.columns)?void 0:a.flatMap(a=>a.getFlatColumns())]},bE(a.options,"debugColumns","column.getFlatColumns")),getLeafColumns:bD(()=>[a._getOrderColumnsFn()],a=>{var b;return null!=(b=k.columns)&&b.length?a(k.columns.flatMap(a=>a.getLeafColumns())):[k]},bE(a.options,"debugColumns","column.getLeafColumns"))};for(let b of a._features)null==b.createColumn||b.createColumn(k,a);return k}(e,a,d,c);return f.columns=a.columns?b(a.columns,f,d+1):[],f})};return b(a)},bE(a,"debugColumns","getAllColumns")),getAllFlatColumns:bD(()=>[e.getAllColumns()],a=>a.flatMap(a=>a.getFlatColumns()),bE(a,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:bD(()=>[e.getAllFlatColumns()],a=>a.reduce((a,b)=>(a[b.id]=b,a),{}),bE(a,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:bD(()=>[e.getAllColumns(),e._getOrderColumnsFn()],(a,b)=>b(a.flatMap(a=>a.getLeafColumns())),bE(a,"debugColumns","getAllLeafColumns")),getColumn:a=>e._getAllFlatColumnsById()[a]};Object.assign(e,j);for(let a=0;a<e._features.length;a++){let b=e._features[a];null==b||null==b.createTable||b.createTable(e)}return e}(b)})),[d,e]=k.useState(()=>c.current.initialState);return c.current.setOptions(b=>({...b,...a,state:{...d,...a.state},onStateChange:b=>{e(b),null==a.onStateChange||a.onStateChange(b)}})),c.current}({data:f,columns:d,getCoreRowModel:a=>bD(()=>[a.options.data],b=>{let c={rows:[],flatRows:[],rowsById:{}},d=function(b,e,f){void 0===e&&(e=0);let g=[];for(let i=0;i<b.length;i++){let j=bI(a,a._getRowId(b[i],i,f),b[i],i,e,void 0,null==f?void 0:f.id);if(c.flatRows.push(j),c.rowsById[j.id]=j,g.push(j),a.options.getSubRows){var h;j.originalSubRows=a.options.getSubRows(b[i],i),null!=(h=j.originalSubRows)&&h.length&&(j.subRows=d(j.originalSubRows,e+1,j))}}return g};return c.rows=d(b),c},bE(a.options,"debugTable","getRowModel",()=>a._autoResetPageIndex())),getFilteredRowModel:a=>bD(()=>[a.getPreFilteredRowModel(),a.getState().columnFilters,a.getState().globalFilter],(b,c,d)=>{var e,f,g,h,i,j,k,l,m,n;let o,p,q,r,s,t,u,v,w,x;if(!b.rows.length||!(null!=c&&c.length)&&!d){for(let a=0;a<b.flatRows.length;a++)b.flatRows[a].columnFilters={},b.flatRows[a].columnFiltersMeta={};return b}let y=[],z=[];(null!=c?c:[]).forEach(b=>{var c;let d=a.getColumn(b.id);if(!d)return;let e=d.getFilterFn();e&&y.push({id:b.id,filterFn:e,resolvedValue:null!=(c=null==e.resolveFilterValue?void 0:e.resolveFilterValue(b.value))?c:b.value})});let A=(null!=c?c:[]).map(a=>a.id),B=a.getGlobalFilterFn(),C=a.getAllLeafColumns().filter(a=>a.getCanGlobalFilter());d&&B&&C.length&&(A.push("__global__"),C.forEach(a=>{var b;z.push({id:a.id,filterFn:B,resolvedValue:null!=(b=null==B.resolveFilterValue?void 0:B.resolveFilterValue(d))?b:d})}));for(let a=0;a<b.flatRows.length;a++){let c=b.flatRows[a];if(c.columnFilters={},y.length)for(let a=0;a<y.length;a++){let b=(o=y[a]).id;c.columnFilters[b]=o.filterFn(c,b,o.resolvedValue,a=>{c.columnFiltersMeta[b]=a})}if(z.length){for(let a=0;a<z.length;a++){let b=(p=z[a]).id;if(p.filterFn(c,b,p.resolvedValue,a=>{c.columnFiltersMeta[b]=a})){c.columnFilters.__global__=!0;break}}!0!==c.columnFilters.__global__&&(c.columnFilters.__global__=!1)}}return e=b.rows,f=a=>{for(let b=0;b<A.length;b++)if(!1===a.columnFilters[A[b]])return!1;return!0},a.options.filterFromLeafRows?(g=e,h=f,q=[],r={},s=null!=(j=(i=a).options.maxLeafRowFilterDepth)?j:100,{rows:(t=function(a,b){void 0===b&&(b=0);let c=[];for(let e=0;e<a.length;e++){var d;let f=a[e],g=bI(i,f.id,f.original,f.index,f.depth,void 0,f.parentId);if(g.columnFilters=f.columnFilters,null!=(d=f.subRows)&&d.length&&b<s){if(g.subRows=t(f.subRows,b+1),h(f=g)&&!g.subRows.length||h(f)||g.subRows.length){c.push(f),r[f.id]=f,q.push(f);continue}}else h(f=g)&&(c.push(f),r[f.id]=f,q.push(f))}return c})(g),flatRows:q,rowsById:r}):(k=e,l=f,u=[],v={},w=null!=(n=(m=a).options.maxLeafRowFilterDepth)?n:100,{rows:(x=function(a,b){void 0===b&&(b=0);let c=[];for(let e=0;e<a.length;e++){let f=a[e];if(l(f)){var d;if(null!=(d=f.subRows)&&d.length&&b<w){let a=bI(m,f.id,f.original,f.index,f.depth,void 0,f.parentId);a.subRows=x(f.subRows,b+1),f=a}c.push(f),u.push(f),v[f.id]=f}}return c})(k),flatRows:u,rowsById:v})},bE(a.options,"debugTable","getFilteredRowModel",()=>a._autoResetPageIndex())),getPaginationRowModel:a=>bD(()=>[a.getState().pagination,a.getPrePaginationRowModel(),a.options.paginateExpandedRows?void 0:a.getState().expanded],(b,c)=>{let d;if(!c.rows.length)return c;let{pageSize:e,pageIndex:f}=b,{rows:g,flatRows:h,rowsById:i}=c,j=e*f;if(g=g.slice(j,j+e),a.options.paginateExpandedRows)d={rows:g,flatRows:h,rowsById:i};else{var k;let a,b;k={rows:g,flatRows:h,rowsById:i},a=[],b=c=>{var d;a.push(c),null!=(d=c.subRows)&&d.length&&c.getIsExpanded()&&c.subRows.forEach(b)},k.rows.forEach(b),d={rows:a,flatRows:k.flatRows,rowsById:k.rowsById}}d.flatRows=[];let l=a=>{d.flatRows.push(a),a.subRows.length&&a.subRows.forEach(l)};return d.rows.forEach(l),d},bE(a.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:e},getRowId:a=>a._id,meta:{selectedAnchor:j,setSelectedAnchor:l,patchDocument:(a,b,c)=>null}}),{rows:q}=n.getRowModel();(0,k.useEffect)(()=>(b({type:"TERMS_TYPE_ADD",schemaType:a}),()=>{b({type:"TERMS_TYPE_REMOVE",schemaType:a})}),[a,b]);let r=(0,k.useCallback)(a=>(0,g.jsx)(i.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:a.getVisibleCells().map(b=>(0,g.jsx)(iT,{...b},a.original._id+b.id))},a.original._id+a.id),[]),s=`Total: ${m} rows, showing ${q.length} rows`;return(0,g.jsxs)(i7,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,g.jsxs)(i.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,g.jsxs)(i.Flex,{direction:"row",align:"center",children:[(0,g.jsx)(i_,{}),(0,g.jsx)(i.Text,{size:0,muted:!0,children:s})]}),(0,g.jsx)(iZ,{table:n})]}),(0,g.jsx)(i8,{children:(0,g.jsx)(iO,{table:n,children:(0,g.jsxs)(i9,{children:[(0,g.jsx)("thead",{children:n.getHeaderGroups().map(a=>(0,g.jsx)(i.Box,{as:"tr",children:a.headers.map(b=>(0,g.jsx)(i3,{header:b,headerGroup:a},b.id))},a.id))}),(0,g.jsx)("tbody",{children:n.getRowModel().rows.map(r)})]})})}),(0,g.jsx)(i.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,g.jsx)(i4,{table:n})})]})}function jb(a){let b,c,d,e=(0,h.c)(7),f=(0,p.useSchema)(),i=a.pane.schemaTypeName;if(e[0]!==f||e[1]!==i?(c=!(b=f.get(i))||!(0,q.isDocumentSchemaType)(b),e[0]=f,e[1]=i,e[2]=b,e[3]=c):(b=e[2],c=e[3]),c)throw Error(`Schema type "${i}" not found or not a document schema`);return e[4]!==a||e[5]!==b?(d=(0,g.jsx)(p.SearchProvider,{children:(0,g.jsx)(ja,{...a,documentSchemaType:b})}),e[4]=a,e[5]=b,e[6]=d):d=e[6],d}function jc(a){let[b,c]=(0,k.useState)(a);return(0,aU.default)(b,a)?b:(c(a),a)}let jd=(0,k.memo)(function(a){let b,c,d,e,f,i,j,l,m,n,o,q=(0,h.c)(41),{index:r,isSelected:s,pane:t,paneKey:u}=a,{name:v}=(0,p.useSource)(),{defaultLayout:w,initialValueTemplates:x,menuItemGroups:y,menuItems:z,options:A}=t,B=void 0===x?p.EMPTY_ARRAY:x,{defaultOrdering:C,filter:D}=A,E=void 0===C?p.EMPTY_ARRAY:C,F=jc(A.params||il),G=t.source;a:{let a;q[0]!==D||q[1]!==F?(a=it(D,F),q[0]=D,q[1]=F,q[2]=a):a=q[2];let c=a;if(c?.length===1){b=c[0];break a}b=null}let H=b,[I,J]=dF("layout",H??t.id,void 0===w?"default":w),{title:K}=(0,p.useI18nText)(t);q[3]!==E?(c=E?.length>0?{by:E}:ik,q[3]=E,q[4]=c):c=q[4];let L=c,[M,N]=dF("sort-order",H??t.id,L);q[5]===Symbol.for("react.memo_cache_sentinel")?(d={},q[5]=d):d=q[5];let[O,P]=(0,k.useState)(d);q[6]!==z?(e=z?.map(a=>a.id?a:{...a,id:ij(a)}),q[6]=z,q[7]=e):e=q[7];let Q=e;q[8]!==O||q[9]!==I||q[10]!==Q||q[11]!==M?(f=(a=>{let{menuItems:b,sortOrderRaw:c,layout:d,customMenuItemState:e={}}=a;return b?.map(a=>{if(a.params?.layout)return{...a,selected:d===a.params?.layout};if(a?.params?.by)return{...a,selected:(0,aS.isEqual)(c?.by,a?.params?.by||p.EMPTY_ARRAY)};if(a.id&&a.id in e){let b=e[a.id],c=a.params?.value??!0;return{...a,selected:(0,aS.isEqual)(b,c)}}return{...a,selected:a.selected??!1}})})({menuItems:Q,sortOrderRaw:M,layout:I,customMenuItemState:O}),q[8]=O,q[9]=I,q[10]=Q,q[11]=M,q[12]=f):f=q[12];let R=f,S="sheetList"===I;q[13]!==S||q[14]!==I||q[15]!==a||q[16]!==M?(i=S?(0,g.jsx)(jb,{...a},a.pane.id):(0,g.jsx)(iJ,{...a,sortOrder:M,layout:I}),q[13]=S,q[14]=I,q[15]=a,q[16]=M,q[17]=i):i=q[17];let T=i,U=G||v;return q[18]!==S?(j=S?{}:{currentMaxWidth:350,maxWidth:640},q[18]=S,q[19]=j):j=q[19],q[20]!==t.source?(l=!1,q[20]=t.source,q[21]=l):l=q[21],q[22]!==O||q[23]!==r||q[24]!==B||q[25]!==y||q[26]!==R||q[27]!==J||q[28]!==N||q[29]!==K?(m=(0,g.jsx)(iM,{customMenuItemState:O,index:r,initialValueTemplates:B,menuItemGroups:y,menuItems:R,setLayout:J,setSortOrder:N,setCustomMenuItemState:P,title:K}),q[22]=O,q[23]=r,q[24]=B,q[25]=y,q[26]=R,q[27]=J,q[28]=N,q[29]=K,q[30]=m):m=q[30],q[31]!==s||q[32]!==u||q[33]!==T||q[34]!==j||q[35]!==l||q[36]!==m?(n=(0,g.jsxs)(cL,{"data-ui":"DocumentListPane",id:u,minWidth:320,...j,selected:s,children:[l,m,T]}),q[31]=s,q[32]=u,q[33]=T,q[34]=j,q[35]=l,q[36]=m,q[37]=n):n=q[37],q[38]!==n||q[39]!==U?(o=(0,g.jsx)(p.SourceProvider,{name:U,children:n}),q[38]=n,q[39]=U,q[40]=o):o=q[40],o});jd.displayName="Memo(PaneContainer)";let je=a=>{let{liveEditSchemaType:b,version:c}=a;return b&&!c?{label:"Live",color:"danger"}:null};je.displayName="LiveEditBadge";let jf={activePanes:[]};function jg(a){jf.activePanes=a}function jh(a,b,c,d){let e=c?.panes||[],f=jf.activePanes||[],g=b.id||(0,aH.uuid)();for(let c=f.length-1;c>=0;c--){let h=f[c];if("object"==typeof h&&(h.canHandleIntent?.(a,b,{pane:h,index:c})||"documentList"===h.type&&h.schemaTypeName===b.type&&"_type == $type"===h.options.filter)){let f=function(a,{template:b,version:c,inspect:d,comment:e,task:f,scheduledDraft:g}){switch(a){case"create":return{template:b,version:c};case"edit":return{inspect:d,comment:e,task:f,scheduledDraft:g};default:return eC}}(a,b);return{panes:e.slice(0,c).concat([[{id:g,params:f,payload:d}]])}}}return{intent:a,params:b,payload:d}}let ji=(0,aI.styled)(p.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-jiqgdv-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`,jj=(0,aI.styled)(i.Box).withConfig({displayName:"Grid",componentId:"sc-jiqgdv-1"})`&:not([hidden]){display:grid;}grid-template-columns:48px 1fr;align-items:center;gap:0.25em;`;function jk(a){let b,c,d,e,f,j,l,m,n,o,q,r,s=(0,h.c)(39),{showChanges:t}=a,{documentId:u,schemaType:v,timelineError:w,timelineStore:x,value:y}=dj(),{selectedReleaseId:z}=(0,p.usePerspective)(),[A,B]=(0,k.useState)(null),C=(0,p.useTimelineSelector)(x,jq),D=(0,p.useTimelineSelector)(x,jp),E=(0,p.useTimelineSelector)(x,jo),G=(0,p.useTimelineSelector)(x,jn),H=(0,p.useTimelineSelector)(x,jm),I="loading"===G,J=!E,{t:K}=(0,p.useTranslation)(F);s[0]!==D||s[1]!==u||s[2]!==J||s[3]!==v||s[4]!==y?(b={documentId:u,schemaType:v,FieldWrapper:jl,rootDiff:D,isComparingCurrent:J,value:y,showFromValue:!0},s[0]=D,s[1]=u,s[2]=J,s[3]=v,s[4]=y,s[5]=b):b=s[5];let L=b;if(z){let a;return s[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(i.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,g.jsx)(i.Card,{flex:1,padding:2,paddingTop:0,children:(0,g.jsx)(f8,{versionError:!0})})}),s[6]=a):a=s[6],a}return s[7]!==K?(c=K("changes.from.label"),s[7]=K,s[8]=c):c=s[8],s[9]!==c?(d=(0,g.jsx)(i.Text,{size:1,muted:!0,children:c}),s[9]=c,s[10]=d):d=s[10],s[11]!==H?(e=(0,g.jsx)(gb,{mode:"since",chunk:H,placement:"bottom-start"}),s[11]=H,s[12]=e):e=s[12],s[13]!==K?(f=K("changes.to.label"),s[13]=K,s[14]=f):f=s[14],s[15]!==f?(j=(0,g.jsx)(i.Text,{size:1,muted:!0,children:f}),s[15]=f,s[16]=j):j=s[16],s[17]!==C?(l=(0,g.jsx)(gb,{chunk:C,mode:"rev",placement:"bottom-end"}),s[17]=C,s[18]=l):l=s[18],s[19]!==d||s[20]!==e||s[21]!==j||s[22]!==l?(m=(0,g.jsx)(i.Box,{padding:3,children:(0,g.jsxs)(jj,{paddingX:2,paddingBottom:2,children:[d,e,j,l]})}),s[19]=d,s[20]=e,s[21]=j,s[22]=l,s[23]=m):m=s[23],s[24]!==D||s[25]!==L||s[26]!==I||s[27]!==v||s[28]!==t||s[29]!==w?(n=t&&(0,g.jsx)(jr,{diff:D,documentContext:L,error:w,loading:I,schemaType:v}),s[24]=D,s[25]=L,s[26]=I,s[27]=v,s[28]=t,s[29]=w,s[30]=n):n=s[30],s[31]!==n?(o=(0,g.jsx)(ji,{"data-ui":"Scroller",ref:B,children:(0,g.jsx)(i.Box,{flex:1,paddingX:3,height:"fill",children:n})}),s[31]=n,s[32]=o):o=s[32],s[33]!==A||s[34]!==o?(q=(0,g.jsx)(i.Card,{flex:1,paddingX:2,paddingY:2,children:(0,g.jsx)(i.BoundaryElementProvider,{element:A,children:o})}),s[33]=A,s[34]=o,s[35]=q):q=s[35],s[36]!==q||s[37]!==m?(r=(0,g.jsxs)(i.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,q]}),s[36]=q,s[37]=m,s[38]=r):r=s[38],r}function jl(a){return(0,g.jsx)(p.ChangeFieldWrapper,{...a,hasRevertHover:!1})}function jm(a){return a.sinceTime}function jn(a){return a.selectionState}function jo(a){return a.onOlderRevision}function jp(a){return a.diff}function jq(a){return a.revTime}function jr(a){let b,c,d=(0,h.c)(9),{error:e,diff:f,documentContext:i,loading:j,schemaType:k}=a;if(e){let a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(p.NoChanges,{}),d[0]=a):a=d[0],a}if(j){let a;return d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(p.LoadingBlock,{showText:!0}),d[1]=a):a=d[1],a}if(!f){let a;return d[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(p.NoChanges,{}),d[2]=a):a=d[2],a}return d[3]!==f||d[4]!==k?(b=(0,g.jsx)(p.ChangeList,{diff:f,schemaType:k}),d[3]=f,d[4]=k,d[5]=b):b=d[5],d[6]!==i||d[7]!==b?(c=(0,g.jsx)(l.DocumentChangeContext.Provider,{value:i,children:b}),d[6]=i,d[7]=b,d[8]=c):c=d[8],c}function js(a){let b,c,d,e,f,j,k,l,m=(0,h.c)(27),{event:n,isSelected:o,onSelect:q,optionsMenu:s}=a,{t}=(0,p.useTranslation)("studio");m[0]!==n?(b=!(0,p.isDeleteDocumentVersionEvent)(n)&&!(0,p.isDeleteDocumentGroupEvent)(n)&&!(0,p.isUnpublishDocumentEvent)(n)&&!(0,p.isScheduleDocumentVersionEvent)(n)&&!(0,p.isUnscheduleDocumentVersionEvent)(n),m[0]=n,m[1]=b):b=m[1];let u=b;m[2]!==n||m[3]!==u||m[4]!==q?(c=a=>{a.preventDefault(),a.stopPropagation(),u&&q(n)},m[2]=n,m[3]=u,m[4]=q,m[5]=c):c=m[5];let v=c;m[6]!==u||m[7]!==t?(d=u?"":t("changes.not-selectable"),m[6]=u,m[7]=t,m[8]=d):d=m[8];let w=u?"button":"div",x=u?"pointer":"default";return m[9]!==x?(e={cursor:x,width:"100%"},m[9]=x,m[10]=e):e=m[10],m[11]!==n?(f=(0,g.jsx)(p.Event,{event:n,showChangesBy:"tooltip"}),m[11]=n,m[12]=f):f=m[12],m[13]!==n.timestamp||m[14]!==v||m[15]!==o||m[16]!==w||m[17]!==e||m[18]!==f?(j=(0,g.jsx)(i.Card,{as:w,onClick:v,padding:2,pressed:o,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":n.timestamp,style:e,children:f}),m[13]=n.timestamp,m[14]=v,m[15]=o,m[16]=w,m[17]=e,m[18]=f,m[19]=j):j=m[19],m[20]!==u||m[21]!==d||m[22]!==j?(k=(0,g.jsx)(r.Tooltip,{content:d,disabled:u,children:j}),m[20]=u,m[21]=d,m[22]=j,m[23]=k):k=m[23],m[24]!==s||m[25]!==k?(l=(0,g.jsxs)(i.Flex,{gap:1,children:[k,s]}),m[24]=s,m[25]=k,m[26]=l):l=m[26],l}function jt(a){let b,c,d,e,f,j,k,l,m,n,q,t,u,v=(0,h.c)(47),{event:w}=a,{t:x}=(0,p.useTranslation)(F),{t:y}=(0,p.useTranslation)(),z=(0,i.usePortal)(),{params:A,setParams:B}=eb(),C=(0,p.useSetPerspective)(),{document:D}=(0,p.useWorkspace)(),{drafts:E}=D,{enabled:G}=E;v[0]!==w.id||v[1]!==w.versionId||v[2]!==w.versionRevisionId||v[3]!==A||v[4]!==B?(b=()=>{B({...A,rev:w.versionRevisionId||"@lastPublished",since:void 0,historyEvent:w.id,historyVersion:(0,o.getVersionFromId)(w.versionId)})},v[0]=w.id,v[1]=w.versionId,v[2]=w.versionRevisionId,v[3]=A,v[4]=B,v[5]=b):b=v[5];let H=b;v[6]!==w.versionRevisionId||v[7]!==G||v[8]!==A||v[9]!==B||v[10]!==C?(c=()=>{B({...A,rev:w.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{C(G?"drafts":"published")},100)},v[6]=w.versionRevisionId,v[7]=G,v[8]=A,v[9]=B,v[10]=C,v[11]=c):c=v[11];let I=c,J=w.release?.metadata?.title;v[12]!==y?(d=y("release.placeholder-untitled-release"),v[12]=y,v[13]=d):d=v[13];let K=d;v[14]!==w.release?(e=a=>{let{children:b}=a;return(0,g.jsx)(p.VersionInlineBadge,{$tone:w.release?(0,p.isReleaseDocument)(w.release)?(0,p.getReleaseTone)(w.release):"default":void 0,children:b})},v[14]=w.release,v[15]=e):e=v[15];let L=e;v[16]!==w.release?(f=w.release&&!(0,p.isReleaseDocument)(w.release),v[16]=w.release,v[17]=f):f=v[17];let M=f,N=`timeline-item-menu-button-${w.versionId}`;v[18]!==x?(j=x("timeline-item.menu-button.aria-label"),v[18]=x,v[19]=j):j=v[19],v[20]!==w.release||v[21]!==M||v[22]!==x?(k=M?x("timeline-item.not-found-release.tooltip",{releaseId:w.release?._id?(0,p.getReleaseIdFromReleaseDocumentId)(w.release._id):void 0}):x("timeline-item.menu-button.tooltip"),v[20]=w.release,v[21]=M,v[22]=x,v[23]=k):k=v[23],v[24]!==k?(l={content:k},v[24]=k,v[25]=l):l=v[25],v[26]!==M||v[27]!==l||v[28]!==j?(m=(0,g.jsx)(p.ContextMenuButton,{"aria-label":j,tooltipProps:l,disabled:M}),v[26]=M,v[27]=l,v[28]=j,v[29]=m):m=v[29],v[30]!==L||v[31]!==w.release||v[32]!==w.versionRevisionId||v[33]!==I||v[34]!==H||v[35]!==K||v[36]!==J||v[37]!==x?(n=(0,g.jsx)(i.Menu,{padding:1,children:w.release?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.IntentLink,{intent:p.RELEASES_INTENT,params:{id:(0,p.getReleaseIdFromReleaseDocumentId)(w.release._id)},style:{textDecoration:"none"},children:(0,g.jsx)(i.MenuItem,{padding:3,children:(0,g.jsx)(i.Flex,{align:"center",justify:"flex-start",children:(0,g.jsx)(i.Text,{size:1,style:{textDecoration:"none"},children:(0,g.jsx)(p.ReleaseTitle,{title:J,fallback:K,children:a=>{let{displayTitle:b}=a;return(0,g.jsx)(p.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,g.jsx)(L,{children:b})}},i18nKey:"events.open.release",values:{releaseTitle:b},t:x})}})})})})}),(0,g.jsx)(i.MenuItem,{onClick:H,children:(0,g.jsx)(i.Flex,{align:"center",justify:"flex-start",children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.ReleaseTitle,{title:J,fallback:K,children:a=>{let{displayTitle:b}=a;return(0,g.jsx)(p.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,g.jsx)(L,{children:b})}},i18nKey:"events.inspect.release",values:{releaseTitle:b},t:x})}})})})})]}):(0,g.jsx)(i.MenuItem,{onClick:I,disabled:!w.versionRevisionId,children:(0,g.jsx)(i.Flex,{align:"center",children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{components:{VersionBadge:ju},i18nKey:"events.open.draft",t:x})})})})}),v[30]=L,v[31]=w.release,v[32]=w.versionRevisionId,v[33]=I,v[34]=H,v[35]=K,v[36]=J,v[37]=x,v[38]=n):n=v[38];let O=!z.elements?.[ga]||ga;return v[39]===Symbol.for("react.memo_cache_sentinel")?(q=["bottom-end","bottom-start"],v[39]=q):q=v[39],v[40]!==O?(t={portal:O,placement:"bottom",fallbackPlacements:q},v[40]=O,v[41]=t):t=v[41],v[42]!==m||v[43]!==n||v[44]!==t||v[45]!==N?(u=(0,g.jsx)(r.MenuButton,{id:N,button:m,menu:n,popover:t}),v[42]=m,v[43]=n,v[44]=t,v[45]=N,v[46]=u):u=v[46],u}function ju(a){let{children:b}=a;return(0,g.jsx)(p.VersionInlineBadge,{$tone:"caution",children:b})}let jv=m.motion.create(i.Box),jw={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},jx=a=>{let b,c,d,e,f,j,l,m,n,o,q,r,s=(0,h.c)(38),{events:t,hasMoreEvents:u,selectedEventId:v,onLoadMore:w,onSelect:x,listMaxHeight:y,fetchEventChildren:z}=a,A=void 0===y?"calc(100vh - 280px)":y,[B,C]=(0,k.useState)(!1),{t:D}=(0,p.useTranslation)("studio");s[0]!==t||s[1]!==v?(b=()=>{if(v){let a=t.find(a=>a.id===v);if(a&&"parentId"in a&&a.parentId)return new Set([a.parentId])}return new Set},s[0]=t,s[1]=v,s[2]=b):b=s[2];let[E,F]=(0,k.useState)(b);s[3]===Symbol.for("react.memo_cache_sentinel")?(c=new Set,s[3]=c):c=s[3];let[G,H]=(0,k.useState)(c);s[4]!==t||s[5]!==E?(d=t.filter(a=>(0,p.isCreateDocumentVersionEvent)(a)&&a.parentId?t[t.length-1].id===a.id||E.has(a.parentId):!(0,p.isEditDocumentVersionEvent)(a)||!a.parentId||E.has(a.parentId)),s[4]=t,s[5]=E,s[6]=d):d=s[6];let I=d;s[7]!==z?(e=a=>async()=>{let b=a.id,c=!1;F(a=>{let d=new Set(a);return a.has(b)?d.delete(b):(c=!0,d.add(b)),d}),c&&(H(a=>{let c=new Set(a);return c.add(b),c}),await z(a),H(a=>{let c=new Set(a);return c.delete(b),c}))},s[7]=z,s[8]=e):e=s[8];let J=e;s[9]!==x?(f=a=>{x(a)},s[9]=x,s[10]=f):f=s[10];let K=f;s[11]!==E||s[12]!==J?(j=a=>{let b=(0,p.getDocumentVariantType)(a.documentId);return(0,p.isPublishDocumentVersionEvent)(a)&&"published"===b?(0,g.jsx)(jt,{event:a}):(0,p.isPublishDocumentVersionEvent)(a)&&"draft"===b&&a.creationEvent||(0,p.isDeleteDocumentVersionEvent)(a)&&a.creationEvent?(0,g.jsx)(fS,{isExpanded:E.has(a.id),onExpand:J(a)}):null},s[11]=E,s[12]=J,s[13]=j):j=s[13];let L=j;s[14]!==I.length||s[15]!==G||s[16]!==K||s[17]!==u||s[18]!==L||s[19]!==v?(l=(a,b)=>{let{activeIndex:c}=b,d=(0,p.isCreateDocumentVersionEvent)(a)&&a.parentId&&G.has(a.parentId),e=c===I.length-1;return d?(0,g.jsx)(jv,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,g.jsx)(i.Flex,{align:"center",justify:"center",style:{height:57},children:(0,g.jsx)(i.Spinner,{})})}):(0,g.jsxs)(jv,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in a?jw:void 0,paddingLeft:((0,p.isEditDocumentVersionEvent)(a)||(0,p.isCreateDocumentVersionEvent)(a))&&a.parentId&&!e?4:1,children:[(0,g.jsx)(js,{event:a,isSelected:a.id===v,onSelect:K,optionsMenu:L(a)}),e&&u&&(0,g.jsx)(p.LoadingBlock,{})]},a.timestamp)},s[14]=I.length,s[15]=G,s[16]=K,s[17]=u,s[18]=L,s[19]=v,s[20]=l):l=s[20];let M=l;if(s[21]===Symbol.for("react.memo_cache_sentinel")?(n=()=>C(!0),m=[],s[21]=m,s[22]=n):(m=s[21],n=s[22]),(0,k.useEffect)(n,m),s[23]!==I||s[24]!==v){let a;s[26]!==v?(a=a=>a.id===v,s[26]=v,s[27]=a):a=s[27],o=I.findIndex(a),s[23]=I,s[24]=v,s[25]=o}else o=s[25];let N=o,O=!N||B;return s[28]!==I||s[29]!==A||s[30]!==w||s[31]!==M||s[32]!==N||s[33]!==D?(q=I.length>0?(0,g.jsx)(fU,{direction:"column",$maxHeight:A,id:"timeline-list-wrapper",children:(0,g.jsx)(p.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:D("timeline.list.aria-label"),autoFocus:"list",initialIndex:N,initialScrollAlign:"center",itemHeight:57,items:I,onEndReached:w,onEndReachedIndexOffset:20,overscan:5,renderItem:M,wrapAround:!1})}):(0,g.jsxs)(i.Stack,{padding:3,space:3,children:[(0,g.jsx)(i.Text,{size:1,weight:"medium",children:D("timeline.error.no-document-history-title")}),(0,g.jsx)(i.Text,{muted:!0,size:1,children:D("timeline.error.no-document-history-description")})]}),s[28]=I,s[29]=A,s[30]=w,s[31]=M,s[32]=N,s[33]=D,s[34]=q):q=s[34],s[35]!==O||s[36]!==q?(r=(0,g.jsx)(fV,{$visible:O,"data-ui":"timeline",children:q}),s[35]=O,s[36]=q,s[37]=r):r=s[37],r};jx.displayName="EventsTimeline";let jy=(0,aI.styled)(r.Popover).withConfig({displayName:"Root",componentId:"sc-mrgvta-0"})`overflow:hidden;overflow:clip;`,jz={timestamp:{dateStyle:"medium",timeStyle:"short"}};function jA(a){let b,c,d,e,f,l,m,n,o,q,s,t,v,w,x,y,z=(0,h.c)(58),{event:A,events:B,mode:C,placement:D}=a,{setTimelineRange:E}=dj(),[F,G]=(0,k.useState)(!1),[H,I]=(0,k.useState)(null),[J,K]=(0,k.useState)(null),L=(0,j.useToast)(),{nextCursor:M,loading:N,error:O,findRangeForRevision:P,findRangeForSince:Q,loadMoreEvents:R,expandEvent:S}=(0,p.useEvents)(),{t:T}=(0,p.useTranslation)("studio");z[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{G(!0)},z[0]=b):b=z[0];let U=b;z[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{G(!1)},z[1]=c):c=z[1];let V=c;z[2]!==H||z[3]!==F?(d=a=>{F&&("Escape"===a.key||"Tab"===a.key)&&(V(),H?.focus())},z[2]=H,z[3]=F,z[4]=d):d=z[4],(0,i.useGlobalKeyDown)(d),z[5]!==H||z[6]!==J?(e=()=>[H,J],z[5]=H,z[6]=J,z[7]=e):e=z[7],(0,i.useClickOutsideEvent)(F&&V,e),z[8]!==P||z[9]!==E||z[10]!==T||z[11]!==L?(f=a=>{try{(()=>{if((0,p.isDeleteDocumentVersionEvent)(a)||(0,p.isDeleteDocumentGroupEvent)(a)||(0,p.isUnpublishDocumentEvent)(a)||(0,p.isScheduleDocumentVersionEvent)(a)||(0,p.isUnscheduleDocumentVersionEvent)(a))return console.error("Event is not selectable");let[b,c]=P(a?.id);E(b,c),V()})()}catch(a){L.push({closable:!0,description:a.message,status:"error",title:T("timeline.error.unable-to-load-revision")})}},z[8]=P,z[9]=E,z[10]=T,z[11]=L,z[12]=f):f=z[12];let W=f;z[13]!==Q||z[14]!==E||z[15]!==T||z[16]!==L?(l=a=>{try{let[b,c]=Q(a.id);E(b,c),V()}catch(a){L.push({closable:!0,description:a.message,status:"error",title:T("timeline.error.unable-to-load-revision")})}},z[13]=Q,z[14]=E,z[15]=T,z[16]=L,z[17]=l):l=z[17];let X=l;z[18]!==R||z[19]!==N||z[20]!==M?(m=()=>{!N&&M&&R()},z[18]=R,z[19]=N,z[20]=M,z[21]=m):m=z[21];let Y=m;a:{let a;if(O){let a;z[22]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(f8,{}),z[22]=a):a=z[22],n=a;break a}let b=!!M,c=A?.id,d="rev"===C?W:X;z[23]!==B||z[24]!==S||z[25]!==Y||z[26]!==c||z[27]!==d||z[28]!==b?(a=(0,g.jsx)(jx,{events:B,fetchEventChildren:S,hasMoreEvents:b,selectedEventId:c,onLoadMore:Y,onSelect:d}),z[23]=B,z[24]=S,z[25]=Y,z[26]=c,z[27]=d,z[28]=b,z[29]=a):a=z[29],n=a}let Z=n;z[30]!==A||z[31]!==T?(o=A?T(p.TIMELINE_ITEM_I18N_KEY_MAPPING[A.documentVariantType][A.type],{context:"timestamp",timestamp:new Date(A.timestamp),formatParams:jz}):T("timeline.latest-revision"),z[30]=A,z[31]=T,z[32]=o):o=z[32];let $=o;z[33]!==A||z[34]!==B||z[35]!==T?(q=A?T(p.TIMELINE_ITEM_I18N_KEY_MAPPING[A.documentVariantType][A.type],{context:"timestamp",timestamp:new Date(A.timestamp),formatParams:jz}):B.length>0?T("timeline.since-version-missing"):T("timeline.no-previous-events"),z[33]=A,z[34]=B,z[35]=T,z[36]=q):q=z[36];let _="rev"===C?$:q;z[37]!==J?(s={"timeline-menu":J},z[37]=J,z[38]=s):s=z[38];let aa=s,ab=F&&Z,ac=F?"timeline-menu-close-button":"timeline-menu-open-button",ad=N||!B.length,ae=F?V:U;return z[39]===Symbol.for("react.memo_cache_sentinel")?(t={maxWidth:"100%"},z[39]=t):t=z[39],z[40]!==_||z[41]!==N||z[42]!==T?(v=N?T("timeline.loading-history"):_,z[40]=_,z[41]=N,z[42]=T,z[43]=v):v=z[43],z[44]!==F||z[45]!==ac||z[46]!==ad||z[47]!==ae||z[48]!==v?(w=(0,g.jsx)(i.Flex,{width:"fill",children:(0,g.jsx)(r.Button,{"data-testid":ac,disabled:ad,mode:"ghost",onClick:ae,ref:I,selected:F,width:"fill",tooltipProps:null,justify:"space-between",style:t,iconRight:u.ChevronDownIcon,text:v})}),z[44]=F,z[45]=ac,z[46]=ad,z[47]=ae,z[48]=v,z[49]=w):w=z[49],z[50]!==F||z[51]!==D||z[52]!==ab||z[53]!==w?(x=(0,g.jsx)(jy,{"data-testid":"timeline-menu",constrainSize:!0,content:ab,"data-ui":"versionMenu",open:F,placement:D,matchReferenceWidth:!0,portal:!0,ref:K,children:w}),z[50]=F,z[51]=D,z[52]=ab,z[53]=w,z[54]=x):x=z[54],z[55]!==aa||z[56]!==x?(y=(0,g.jsx)(i.PortalProvider,{__unstable_elements:aa,children:x}),z[55]=aa,z[56]=x,z[57]=y):y=z[57],y}let jB=(0,aI.styled)(p.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-qjtu5v-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`,jC=(0,aI.styled)(i.Box).withConfig({displayName:"Grid",componentId:"sc-qjtu5v-1"})`&:not([hidden]){display:grid;}grid-template-columns:48px 1fr;align-items:center;gap:0.25em;`,jD=(0,aI.styled)(i.Flex).withConfig({displayName:"SpinnerContainer",componentId:"sc-qjtu5v-2"})`width:100%;position:absolute;bottom:-4px;`,jE={diff:null,loading:!0,error:null},jF=()=>{let a,b,c,d,e,f,j,k,m,n,o,q=(0,h.c)(31),{documentId:r,schemaType:s,editState:t,displayed:u}=dj(),{selectedPerspective:v,selectedPerspectiveName:w,selectedReleaseId:x}=(0,p.usePerspective)(),{t:y}=(0,p.useTranslation)(F);q[0]!==u||q[1]!==t?.published?(a=(0,aJ.diffInput)((0,aJ.wrap)(t?.published??{},{author:""}),(0,aJ.wrap)(u??{},{author:""})),q[0]=u,q[1]=t?.published,q[2]=a):a=q[2];let z=a;return(!x||t?.version)&&("drafts"!==v||t?.draft)&&"published"!==w&&u?._rev?(q[3]!==y?(b=y("events.compare-with-published.title"),q[3]=y,q[4]=b):b=q[4],q[5]!==b?(c=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:b}),q[5]=b,q[6]=c):c=q[6],q[7]!==v?(d=(0,p.isReleaseDocument)(v)?v.metadata?.title:"draft",q[7]=v,q[8]=d):d=q[8],q[9]!==d?(e={version:d},q[9]=d,q[10]=e):e=q[10],q[11]!==y||q[12]!==e?(f=(0,g.jsx)(i.Text,{size:1,muted:!0,children:(0,g.jsx)(p.Translate,{i18nKey:"events.compare-with-published.description",t:y,values:e})}),q[11]=y,q[12]=e,q[13]=f):f=q[13],q[14]!==c||q[15]!==f?(j=(0,g.jsx)(i.Card,{borderBottom:!0,paddingBottom:3,children:(0,g.jsxs)(i.Stack,{space:3,paddingTop:1,children:[c,f]})}),q[14]=c,q[15]=f,q[16]=j):j=q[16],q[17]!==u||q[18]!==r||q[19]!==z||q[20]!==s?(k={documentId:r,schemaType:s,rootDiff:z,isComparingCurrent:!0,FieldWrapper:jK,value:u,showFromValue:!0},q[17]=u,q[18]=r,q[19]=z,q[20]=s,q[21]=k):k=q[21],q[22]!==z||q[23]!==s?(m=(0,g.jsx)(i.Box,{paddingY:1,children:(0,g.jsx)(p.ChangeList,{diff:z,schemaType:s})}),q[22]=z,q[23]=s,q[24]=m):m=q[24],q[25]!==k||q[26]!==m?(n=(0,g.jsx)(l.DocumentChangeContext.Provider,{value:k,children:m}),q[25]=k,q[26]=m,q[27]=n):n=q[27],q[28]!==j||q[29]!==n?(o=(0,g.jsxs)(i.Stack,{space:2,marginBottom:3,children:[j,n]}),q[28]=j,q[29]=n,q[30]=o):o=q[30],o):null};function jG(a){let b,c,d,e,f,j,l,n,o,q,r,s,t,u,v,w,x,y,z,A=(0,h.c)(83),{showChanges:B}=a,{documentId:C,schemaType:D,timelineError:E,value:F,formState:G}=dj(),[H,I]=(0,k.useState)(null),{events:J,revision:K,sinceRevision:L,getChangesList:M}=(0,p.useEvents)(),N=!K?.revisionId;A[0]!==M?(b=M(),A[0]=M,A[1]=b):b=A[1];let O=b,{diff:P,loading:Q,error:R}=(0,aK.useObservable)(O,jE),{t:S}=(0,p.useTranslation)("studio");A[2]!==P||A[3]!==C||A[4]!==G?.readOnly||A[5]!==N||A[6]!==D||A[7]!==F?(c=()=>({documentId:C,schemaType:D,FieldWrapper:jH,rootDiff:P,isComparingCurrent:N&&!G?.readOnly,value:F,showFromValue:!0}),A[2]=P,A[3]=C,A[4]=G?.readOnly,A[5]=N,A[6]=D,A[7]=F,A[8]=c):c=A[8],A[9]!==c?(d=c(),A[9]=c,A[10]=d):d=A[10];let T=d;a:{let a,b,c;if(!J){let a;A[11]===Symbol.for("react.memo_cache_sentinel")?(a=[null,null],A[11]=a):a=A[11],e=a;break a}A[12]!==J||A[13]!==L?.revisionId?(a=J.find(a=>a.id===L?.revisionId)||null,A[12]=J,A[13]=L?.revisionId,A[14]=a):a=A[14],A[15]!==J||A[16]!==K?.revisionId?(b=J.find(a=>a.id===K?.revisionId)||J[0],A[15]=J,A[16]=K?.revisionId,A[17]=b):b=A[17],A[18]!==a||A[19]!==b?(c=[a,b],A[18]=a,A[19]=b,A[20]=c):c=A[20],e=c}let[U,V]=e;b:{let a;if(!V){let a;A[21]!==J?(a=J.slice(1),A[21]=J,A[22]=a):a=A[22],f=a;break b}if(A[23]!==J||A[24]!==V){let b;A[26]!==V?(b=a=>"parentId"in V&&"parentId"in a&&a.parentId===V.parentId||"parentId"in a&&V.id===a.parentId?{...a,parentId:void 0}:a,A[26]=V,A[27]=b):b=A[27],a=J.slice(J.indexOf(V)+1).map(b),A[23]=J,A[24]=V,A[25]=a}else a=A[25];f=a}let W=f;if(!J.length){let a,b,c,d,e;return A[28]!==S?(a=S("timeline.error.no-document-history-title"),A[28]=S,A[29]=a):a=A[29],A[30]!==a?(b=(0,g.jsx)(i.Text,{size:1,weight:"medium",children:a}),A[30]=a,A[31]=b):b=A[31],A[32]!==S?(c=S("timeline.error.no-document-history-description"),A[32]=S,A[33]=c):c=A[33],A[34]!==c?(d=(0,g.jsx)(i.Text,{muted:!0,size:1,children:c}),A[34]=c,A[35]=d):d=A[35],A[36]!==b||A[37]!==d?(e=(0,g.jsx)(i.Box,{paddingX:2,children:(0,g.jsxs)(i.Stack,{padding:3,space:3,children:[b,d]})}),A[36]=b,A[37]=d,A[38]=e):e=A[38],e}A[39]===Symbol.for("react.memo_cache_sentinel")?(j={position:"relative"},A[39]=j):j=A[39],A[40]!==S?(l=S("changes.inspector.from-label"),A[40]=S,A[41]=l):l=A[41],A[42]!==l?(n=(0,g.jsx)(i.Text,{size:1,muted:!0,children:l}),A[42]=l,A[43]=n):n=A[43];let X=U||null;A[44]!==W||A[45]!==X?(o=(0,g.jsx)(jA,{event:X,events:W,mode:"since",placement:"bottom-start"}),A[44]=W,A[45]=X,A[46]=o):o=A[46],A[47]!==S?(q=S("changes.inspector.to-label"),A[47]=S,A[48]=q):q=A[48],A[49]!==q?(r=(0,g.jsx)(i.Text,{size:1,muted:!0,children:q}),A[49]=q,A[50]=r):r=A[50];let Y=V||null;return A[51]!==J||A[52]!==Y?(s=(0,g.jsx)(jA,{event:Y,events:J,mode:"rev",placement:"bottom-end"}),A[51]=J,A[52]=Y,A[53]=s):s=A[53],A[54]!==o||A[55]!==r||A[56]!==s||A[57]!==n?(t=(0,g.jsxs)(jC,{paddingX:2,paddingBottom:2,children:[n,o,r,s]}),A[54]=o,A[55]=r,A[56]=s,A[57]=n,A[58]=t):t=A[58],A[59]!==Q||A[60]!==S?(u=Q&&(0,g.jsx)(m.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,g.jsxs)(jD,{justify:"center",align:"center",gap:2,children:[(0,g.jsx)(i.Text,{muted:!0,size:0,children:S("changes.loading-changes")}),(0,g.jsx)(i.Spinner,{size:0})]})}),A[59]=Q,A[60]=S,A[61]=u):u=A[61],A[62]!==t||A[63]!==u?(v=(0,g.jsxs)(i.Box,{padding:3,style:j,children:[t,u]}),A[62]=t,A[63]=u,A[64]=v):v=A[64],A[65]!==R||A[66]!==T||A[67]!==K?.loading||A[68]!==D||A[69]!==B||A[70]!==U||A[71]!==L?.loading||A[72]!==E||A[73]!==V?.id?(w=B&&(0,g.jsx)(jI,{documentContext:T,error:E||R,loading:K?.loading||L?.loading||!1,schemaType:D,sameRevisionSelected:U?.id===V?.id,sinceEvent:U}),A[65]=R,A[66]=T,A[67]=K?.loading,A[68]=D,A[69]=B,A[70]=U,A[71]=L?.loading,A[72]=E,A[73]=V?.id,A[74]=w):w=A[74],A[75]!==w?(x=(0,g.jsx)(jB,{"data-ui":"Scroller",ref:I,children:(0,g.jsx)(i.Box,{flex:1,paddingX:3,height:"fill",children:w})}),A[75]=w,A[76]=x):x=A[76],A[77]!==H||A[78]!==x?(y=(0,g.jsx)(i.Card,{flex:1,paddingX:2,paddingY:2,children:(0,g.jsx)(i.BoundaryElementProvider,{element:H,children:x})}),A[77]=H,A[78]=x,A[79]=y):y=A[79],A[80]!==v||A[81]!==y?(z=(0,g.jsxs)(i.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[v,y]}),A[80]=v,A[81]=y,A[82]=z):z=A[82],z}function jH(a){return a.path.length>0?(0,g.jsx)(p.ChangeFieldWrapper,{...a}):a.children}function jI(a){let b,c,d=(0,h.c)(15),{error:e,documentContext:f,loading:j,schemaType:k,sameRevisionSelected:n,sinceEvent:o}=a;if(e){let a,b,c;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(jF,{}),d[0]=a):a=d[0],d[1]!==e||d[2]!==o?.type?(b=o?.type!=="historyCleared"&&(0,g.jsx)(p.ChangesError,{error:e}),d[1]=e,d[2]=o?.type,d[3]=b):b=d[3],d[4]!==b?(c=(0,g.jsxs)(g.Fragment,{children:[a,b]}),d[4]=b,d[5]=c):c=d[5],c}if(j){let a;return d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(p.LoadingBlock,{showText:!0}),d[6]=a):a=d[6],a}if(n){let a;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(jJ,{}),d[7]=a):a=d[7],a}if(!f.rootDiff){let a;return d[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(m.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,g.jsx)(p.NoChanges,{})}),d[8]=a):a=d[8],a}return d[9]!==f.rootDiff||d[10]!==k?(b=(0,g.jsx)(i.Box,{paddingY:1,children:(0,g.jsx)(p.ChangeList,{diff:f.rootDiff,schemaType:k})}),d[9]=f.rootDiff,d[10]=k,d[11]=b):b=d[11],d[12]!==f||d[13]!==b?(c=(0,g.jsx)(l.DocumentChangeContext.Provider,{value:f,children:b}),d[12]=f,d[13]=b,d[14]=c):c=d[14],c}function jJ(){let a,b,c,d,e,f,j,k=(0,h.c)(12),{t:l}=(0,p.useTranslation)("");return k[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:1},b={opacity:0},c={delay:.2,duration:.2},k[0]=a,k[1]=b,k[2]=c):(a=k[0],b=k[1],c=k[2]),k[3]!==l?(d=l("changes.same-revision-selected-title"),k[3]=l,k[4]=d):d=k[4],k[5]!==d?(e=(0,g.jsx)(i.Text,{size:1,weight:"medium",as:"h3",children:d}),k[5]=d,k[6]=e):e=k[6],k[7]!==l?(f=(0,g.jsx)(i.Text,{as:"p",size:1,muted:!0,children:(0,g.jsx)(p.Translate,{i18nKey:"changes.same-revision-selected-description",t:l})}),k[7]=l,k[8]=f):f=k[8],k[9]!==e||k[10]!==f?(j=(0,g.jsx)(m.motion.div,{animate:a,initial:b,transition:c,children:(0,g.jsxs)(i.Stack,{space:3,paddingTop:2,children:[e,f]})}),k[9]=e,k[10]=f,k[11]=j):j=k[11],j}function jK(a){return a.children}let jL=(0,aI.styled)(p.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-1f5fnfo-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`;function jM(a){let b,c,d,e=(0,h.c)(21),{showList:f}=a,[l,m]=(0,k.useState)(null),[n,o]=(0,k.useState)(0),{setTimelineRange:q}=dj();e[0]!==n?(b=a=>{!n&&a&&(o(a.clientHeight?a.clientHeight-1:0),m(a))},e[0]=n,e[1]=b):b=e[1];let r=b,{events:s,nextCursor:t,loading:u,error:v,revision:w,loadMoreEvents:x,findRangeForRevision:y,expandEvent:z}=(0,p.useEvents)(),{t:A}=(0,p.useTranslation)("studio"),B=(0,j.useToast)();e[2]!==y||e[3]!==q||e[4]!==A||e[5]!==B?(c=a=>{try{(()=>{if((0,p.isDeleteDocumentVersionEvent)(a)||(0,p.isDeleteDocumentGroupEvent)(a)||(0,p.isUnpublishDocumentEvent)(a)||(0,p.isScheduleDocumentVersionEvent)(a)||(0,p.isUnscheduleDocumentVersionEvent)(a))return console.error("Event is not selectable");let[b,c]=y(a.id);q(b,c)})()}catch(a){B.push({closable:!0,description:a.message,status:"error",title:A("timeline.error.unable-to-load-revision")})}},e[2]=y,e[3]=q,e[4]=A,e[5]=B,e[6]=c):c=e[6];let C=c,D=u&&!s.length;return e[7]!==v||e[8]!==s||e[9]!==z||e[10]!==r||e[11]!==D||e[12]!==n||e[13]!==x||e[14]!==u||e[15]!==t||e[16]!==w?.revisionId||e[17]!==l||e[18]!==C||e[19]!==f?(d=(0,g.jsx)(i.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,g.jsx)(i.Card,{flex:1,padding:2,paddingTop:0,children:v?(0,g.jsx)(f8,{}):(0,g.jsx)(i.BoundaryElementProvider,{element:l,children:(0,g.jsxs)(jL,{"data-ui":"Scroller",ref:r,children:[n&&f&&!D?(0,g.jsx)(jx,{events:s,fetchEventChildren:z,hasMoreEvents:!!t,selectedEventId:w?.revisionId||s[0]?.id,onLoadMore:x,onSelect:C,listMaxHeight:`${n}px`}):null,u&&(0,g.jsx)(p.LoadingBlock,{})]})})})}),e[7]=v,e[8]=s,e[9]=z,e[10]=r,e[11]=D,e[12]=n,e[13]=x,e[14]=u,e[15]=t,e[16]=w?.revisionId,e[17]=l,e[18]=C,e[19]=f,e[20]=d):d=e[20],d}let jN=(0,aI.styled)(p.ScrollContainer).withConfig({displayName:"Scroller",componentId:"sc-1ey5vbx-0"})`height:100%;overflow:auto;position:relative;scroll-behavior:smooth;`;function jO(a){let b,c,d,e,f=(0,h.c)(20),{showList:l}=a,{timelineError:m,setTimelineRange:n,timelineStore:o}=dj(),{selectedReleaseId:q}=(0,p.usePerspective)(),[r,s]=(0,k.useState)(null),[t,u]=(0,k.useState)(0);f[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{a?.clientHeight&&(u(a.clientHeight-1),s(a))},f[0]=b):b=f[0];let v=b,w=(0,p.useTimelineSelector)(o,jS),x=(0,p.useTimelineSelector)(o,jR),y=(0,p.useTimelineSelector)(o,jQ),z=(0,p.useTimelineSelector)(o,jP),{t:A}=(0,p.useTranslation)("studio"),B=(0,j.useToast)();f[1]!==n||f[2]!==A||f[3]!==o||f[4]!==B?(c=a=>{try{(()=>{let[b,c]=o?.findRangeForRev(a)||[null,null];n(b,c)})()}catch(a){B.push({closable:!0,description:a.message,status:"error",title:A("timeline.error.unable-to-load-revision")})}},f[1]=n,f[2]=A,f[3]=o,f[4]=B,f[5]=c):c=f[5];let C=c;f[6]!==z||f[7]!==o?(d=()=>{z||o?.loadMore()},f[6]=z,f[7]=o,f[8]=d):d=f[8];let D=d;return f[9]!==w||f[10]!==D||f[11]!==y||f[12]!==t||f[13]!==x||f[14]!==r||f[15]!==C||f[16]!==q||f[17]!==l||f[18]!==m?(e=(0,g.jsx)(i.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,g.jsx)(i.Card,{flex:1,padding:2,paddingTop:0,children:m||q?(0,g.jsx)(f8,{versionError:!!q}):(0,g.jsx)(i.BoundaryElementProvider,{element:r,children:(0,g.jsx)(jN,{"data-ui":"Scroller",ref:v,children:t&&l?(0,g.jsx)(f7,{chunks:w,hasMoreChunks:y,lastChunk:x,onLoadMore:D,onSelect:C,listMaxHeight:`${t}px`}):null})})})}),f[9]=w,f[10]=D,f[11]=y,f[12]=t,f[13]=x,f[14]=r,f[15]=C,f[16]=q,f[17]=l,f[18]=m,f[19]=e):e=f[19],e}function jP(a){return a.isLoading}function jQ(a){return a.hasMoreChunks}function jR(a){return a.realRevChunk}function jS(a){return a.chunks}let jT=(0,aI.styled)(i.Flex).withConfig({displayName:"FadeInFlex",componentId:"sc-a5131c-0"})`opacity:0;transition:opacity 200ms;&[data-ready]{opacity:1;}`,jU=["history","review"],jV=m.motion.create(i.Flex),jW=a=>{let b,c,d,e,f,j,k=(0,h.c)(25),{t:l}=(0,p.useTranslation)(F),{document:m,referenceToId:n}=a;k[0]!==m||k[1]!==n?(b=(0,p.getReferencePaths)(m,n),k[0]=m,k[1]=n,k[2]=b):b=k[2];let q=b,r=m._id,t=(0,p.useSchema)(),{navigate:u}=(0,s.useRouter)(),{routerPanesState:v,groupIndex:w}=eb(),x=m?._type;k[3]!==w||k[4]!==r||k[5]!==u||k[6]!==q||k[7]!==v||k[8]!==x?(c=()=>{x&&u({panes:[...v.slice(0,w+1),[{id:(0,o.getPublishedId)(r),params:{type:x,path:(0,p.pathToString)(q[0])}}]]})},k[3]=w,k[4]=r,k[5]=u,k[6]=q,k[7]=v,k[8]=x,k[9]=c):c=k[9];let y=c;k[10]!==m._type||k[11]!==t?(d=t.get(m._type),k[10]=m._type,k[11]=t,k[12]=d):d=k[12];let z=d;if(!z){let a,b;return k[13]!==m._type||k[14]!==l?(a=l("incoming-references-pane.schema-type-not-found",{type:m._type}),k[13]=m._type,k[14]=l,k[15]=a):a=k[15],k[16]!==a?(b=(0,g.jsx)(i.Card,{radius:2,tone:"critical",children:(0,g.jsx)(i.Box,{paddingY:4,paddingX:3,children:(0,g.jsx)(i.Text,{size:1,children:a})})}),k[16]=a,k[17]=b):b=k[17],b}return k[18]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:0},f={opacity:1},k[18]=e,k[19]=f):(e=k[18],f=k[19]),k[20]!==m||k[21]!==y||k[22]!==q[0]||k[23]!==z?(j=(0,g.jsx)(i.Card,{radius:2,tone:"default",children:(0,g.jsx)(jV,{initial:e,animate:f,gap:1,align:"center",children:(0,g.jsx)(i.Box,{flex:1,children:(0,g.jsx)(ih,{type:z,value:m,onClick:y,path:q[0]})})})}),k[20]=m,k[21]=y,k[22]=q[0],k[23]=z,k[24]=j):j=k[24],j};function jX(a){let b,c,d,e,f=(0,h.c)(16),{type:j,documents:k,renderItem:l,getItemKey:m,emptyMessage:n}=a,o=(0,p.useSchema)(),{t:q}=(0,p.useTranslation)(F);f[0]!==o||f[1]!==j?(b=o.get(j),f[0]=o,f[1]=j,f[2]=b):b=f[2];let r=b?.title||j;return f[3]!==r?(c=(0,g.jsx)(i.Flex,{align:"center",justify:"space-between",paddingBottom:2,gap:2,children:(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsx)(i.Text,{size:1,weight:"medium",children:r})})}),f[3]=r,f[4]=c):c=f[4],f[5]!==k||f[6]!==n||f[7]!==m||f[8]!==l||f[9]!==q||f[10]!==r?(d=k.length>0?(0,g.jsx)(i.Card,{radius:2,padding:1,border:!0,tone:"default",children:(0,g.jsx)(ic,{$itemCount:k.length,children:(0,g.jsx)(p.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:q("incoming-references-input.list-label",{type:r}),canReceiveFocus:!0,fixedHeight:!0,getItemKey:m,itemHeight:51,items:k,onlyShowSelectionWhenActive:!0,overscan:5,renderItem:l,wrapAround:!1})})}):(0,g.jsx)(i.Box,{padding:0,children:(0,g.jsx)(i.Card,{border:!0,radius:3,padding:1,tone:"default",children:(0,g.jsx)(i.Box,{paddingY:3,paddingX:2,children:(0,g.jsx)(i.Text,{size:1,muted:!0,children:n})})})}),f[5]=k,f[6]=n,f[7]=m,f[8]=l,f[9]=q,f[10]=r,f[11]=d):d=f[11],f[12]!==c||f[13]!==d||f[14]!==j?(e=(0,g.jsxs)(i.Stack,{padding:2,space:1,marginBottom:2,children:[c,d]},j),f[12]=c,f[13]=d,f[14]=j,f[15]=e):e=f[15],e}function jY(){let a,b,c,d,e,f,i,j=(0,h.c)(26),{documentId:k}=dj(),{t:l}=(0,p.useTranslation)(F),{getClient:m}=(0,p.useSource)(),n=(0,p.useDocumentPreviewStore)(),q=(0,p.useClient)(p.DEFAULT_STUDIO_CLIENT_OPTIONS);j[0]!==k||j[1]!==n||j[2]!==m?(a=(function({documentId:a,documentPreviewStore:b,type:c,filter:d,filterParams:e,getClient:f}){let g=(0,o.getPublishedId)(a);return("function"==typeof d?b.unstable_observeDocument(a).pipe((0,aL.distinctUntilChanged)((a,b)=>a?._rev===b?._rev),(0,aL.switchMap)(a=>ib(d,{document:a,getClient:f})),(0,aL.map)(a=>({filter:a.filter,filterParams:a.filterParams||e}))):(0,aL.of)({filter:d,filterParams:e})).pipe((0,aL.distinctUntilChanged)((a,b)=>a.filter===b.filter&&JSON.stringify(a.filterParams)===JSON.stringify(b.filterParams)),(0,aL.switchMap)(({filter:a,filterParams:d})=>b.unstable_observeDocumentIdSet(`references("${g}") ${c?`&& _type == "${c}"`:""} ${a?`&& ${a}`:""}`,d,{insert:"append"}).pipe((0,aL.map)(a=>a.documentIds),(0,aM.mergeMapArray)(a=>b.unstable_observeDocument(a).pipe((0,aL.filter)(Boolean),(0,aL.map)(a=>a))),(0,aL.map)(a=>{let b=[];return a.filter(a=>{let c=(0,o.getPublishedId)(a._id);return!b.includes(c)&&(b.push(c),!0)})}),(0,aL.map)(a=>({documents:a,loading:!1})),(0,aL.startWith)(ia))))})({documentId:k,documentPreviewStore:n,getClient:m}).pipe((0,aL.map)(j3),(0,aL.map)(j2)),j[0]=k,j[1]=n,j[2]=m,j[3]=a):a=j[3];let r=(0,aK.useObservable)(a,null);j[4]!==q||j[5]!==k||j[6]!==n?(b=(function({documentId:a,type:b,client:c,documentPreviewStore:d}){return hH(a,{versionedClient:c}).pipe((0,aL.map)(a=>a?b?.dataset?a.references.filter(a=>a.datasetName===b.dataset&&a.documentId):a.references.filter(a=>a.documentId&&a.datasetName):[]),(0,aM.mergeMapArray)(a=>d.observeDocumentTypeFromId((0,o.getPublishedId)(a.documentId),{dataset:a.datasetName,projectId:a.projectId}).pipe((0,aL.map)(b=>({...a,documentType:b})))),(0,aM.mergeMapArray)(a=>{if(!a.documentType)return(0,aL.of)(null);if(!b)return(0,aL.of)({type:a.documentType,id:a.documentId,preview:{published:{_id:a.documentId,title:`Document Id: ${a.documentId}`,subtitle:`Dataset: ${a.datasetName} - Project Id: ${a.projectId}`,media:(0,g.jsx)(u.DocumentIcon,{})}},availability:{available:!0,reason:"READABLE"},projectId:a.projectId,dataset:a.datasetName});if(a.documentType!==b.type)return(0,aL.of)(null);let c=(0,p.getPreviewPaths)(b.preview)||[];return d.observePaths({_id:(0,o.getPublishedId)(a.documentId)},c,{dataset:a.datasetName,projectId:a.projectId}).pipe((0,aL.map)(c=>{let d=(0,p.prepareForPreview)(c,{type:b.type,title:b.title||"",icon:()=>(0,g.jsx)(u.DocumentIcon,{}),preview:b.preview});return{type:a.documentType,id:a.documentId,preview:{published:{...d,media:d.media??(0,g.jsx)(u.DocumentIcon,{})}},availability:{available:!0,reason:"READABLE"},projectId:a.projectId,dataset:a.datasetName}}))}),(0,aL.map)(a=>({documents:a.filter(p.isNonNullable),loading:!1})),(0,aL.startWith)(ig))})({documentId:k,client:q,documentPreviewStore:n}).pipe((0,aL.map)(j_),(0,aL.map)(j$)),j[4]=q,j[5]=k,j[6]=n,j[7]=b):b=j[7];let s=(0,aK.useObservable)(b,null);j[8]!==k?(c=a=>(0,g.jsx)(jW,{document:a,referenceToId:k}),j[8]=k,j[9]=c):c=j[9];let t=c;j[10]!==l?(d=l("incoming-references-pane.no-references-found"),j[10]=l,j[11]=d):d=j[11];let v=d;return j[12]!==v||j[13]!==r?.list||j[14]!==r?.loading||j[15]!==t||j[16]!==l?(e=r?.loading?(0,g.jsx)(p.LoadingBlock,{showText:!0,title:l("incoming-references-input.types-loading")}):r?.list.map(a=>{let{type:b,documents:c}=a;return(0,g.jsx)(jX,{type:b,documents:c,renderItem:t,getItemKey:a=>c[a]._id,emptyMessage:v},b)}),j[12]=v,j[13]=r?.list,j[14]=r?.loading,j[15]=t,j[16]=l,j[17]=e):e=j[17],j[18]!==s?.list||j[19]!==s?.loading||j[20]!==v||j[21]!==l?(f=s?.loading?(0,g.jsx)(p.LoadingBlock,{showText:!0,title:l("incoming-references-input.types-loading-cross-dataset")}):s?.list.map(a=>{let{type:b,documents:c}=a;return(0,g.jsx)(jX,{type:b,documents:c,renderItem:jZ,getItemKey:a=>c[a].id,emptyMessage:v},b)}),j[18]=s?.list,j[19]=s?.loading,j[20]=v,j[21]=l,j[22]=f):f=j[22],j[23]!==e||j[24]!==f?(i=(0,g.jsxs)(g.Fragment,{children:[e,f]}),j[23]=e,j[24]=f,j[25]=i):i=j[25],i}function jZ(a){return(0,g.jsx)(id,{document:a})}function j$(a){return{list:a,loading:!1}}function j_(a){let{documents:b}=a;return Object.entries(b.reduce(j1,{})).map(j0)}function j0(a){let[b,c]=a;return{type:b,documents:c}}function j1(a,b){let c=b.type;return a[c]?a[c].push(b):a[c]=[b],a}function j2(a){return{list:a,loading:!1}}function j3(a){let{documents:b}=a;return Object.entries(b.reduce(j5,{})).map(j4)}function j4(a){let[b,c]=a;return{type:b,documents:c}}function j5(a,b){let c=b._type;return a[c]?a[c].push(b):a[c]=[b],a}let j6={error:u.ErrorOutlineIcon,warning:u.WarningOutlineIcon,info:u.InfoOutlineIcon},j7={error:"critical",warning:"caution",info:"primary"};function j8(a){let b,c,d,e,f=(0,h.c)(17),{marker:j,onOpen:l,schemaType:m,value:n}=a;f[0]!==j.path||f[1]!==l?(b=()=>l(j.path),f[0]=j.path,f[1]=l,f[2]=b):b=f[2];let o=b,[p,q]=(0,k.useState)(null),s=j6[j.level];return f[3]!==p?(c=p&&(0,g.jsx)(i.Card,{padding:3,radius:2,tone:"critical",children:(0,g.jsx)(i.Text,{size:1,children:p.error.message})}),f[3]=p,f[4]=c):c=f[4],f[5]!==s||f[6]!==p||f[7]!==o||f[8]!==j.level||f[9]!==j.message||f[10]!==j.path||f[11]!==m||f[12]!==n?(d=!p&&(0,g.jsx)(i.Card,{__unstable_focusRing:!0,as:"button",onClick:o,padding:3,radius:2,tone:j7[j.level],children:(0,g.jsxs)(i.Flex,{align:"flex-start",gap:3,children:[(0,g.jsx)(i.Box,{flex:"none",children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(s,{})})}),(0,g.jsxs)(i.Stack,{flex:1,space:2,children:[(0,g.jsx)(j9,{path:j.path,schemaType:m,value:n}),(0,g.jsx)(i.Text,{muted:!0,size:1,children:j.message})]})]})}),f[5]=s,f[6]=p,f[7]=o,f[8]=j.level,f[9]=j.message,f[10]=j.path,f[11]=m,f[12]=n,f[13]=d):d=f[13],f[14]!==c||f[15]!==d?(e=(0,g.jsxs)(r.ErrorBoundary,{onCatch:q,children:[c,d]}),f[14]=c,f[15]=d,f[16]=e):e=f[16],e}function j9(a){let b,c,d,e=(0,h.c)(8),{path:f,schemaType:j,value:k}=a;a:{try{let a;e[0]!==f||e[1]!==j||e[2]!==k?(a=function(a){let{path:b,schemaType:c,value:d}=a,e=[],f=c,g=d;for(let a of b){if("string"==typeof a){if(!(0,p.isRecord)(g)&&void 0!==g)throw Error(`Parent value is not an object, cannot get path segment: .${a}`);if("object"!==f.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${a}`);g=g?.[a];let b=f.fields.find(b=>b.name===a);if(!b)return e.push({name:a}),e;f=b.type,e.push(f);continue}if("number"==typeof a){if(!(0,p.isArray)(g)&&void 0!==g)throw Error(`Parent value is not an array, cannot get path segment: [${a}]`);if("array"!==f.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${a}]`);g=g?.[a];let b=f.of.find(a=>"string"==typeof g?"string"===a.jsonType:"number"==typeof g?"number"===a.jsonType:"boolean"==typeof g?"boolean"===a.jsonType:!!(0,p.isRecord)(g)&&a.name===g?._type);if(!b)throw Error(`Item type not found: [${a}]`);f=b,e.push(f);continue}if((0,p.isRecord)(a)&&a._key){if(typeof g>"u")return e;if(!(0,p.isArray)(g))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${a}]`);if("array"!==f.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${a}`);if(typeof(g=(g??[]).find(b=>(0,p.isRecord)(b)&&b._key===a._key))>"u")return e;if(!(0,p.isRecord)(g))throw Error(`Array item not found: [_key == ${a._key}]`);let b=f.of.find(a=>(0,p.isRecord)(g)&&a.name===g?._type);if(!b&&!g?._type){let a=f.of.filter(a=>"object"===a.jsonType);1===a.length&&(b=a[0])}if(!b)throw Error(`Array item type not found: .${g?._type}`);f=b,e.push(f);continue}throw Error(`Invalid path segment: ${JSON.stringify(a)}`)}return e}({path:f,schemaType:j,value:k}),e[0]=f,e[1]=j,e[2]=k,e[3]=a):a=e[3],b=a;break a}catch(a){console.error(a)}b=null}let l=b;return l?.length?(e[4]!==l?(c=l.map(ka),e[4]=l,e[5]=c):c=e[5],e[6]!==c?(d=(0,g.jsx)(i.Text,{size:1,children:c}),e[6]=c,e[7]=d):d=e[7],d):null}function ka(a,b){return(0,g.jsxs)(k.Fragment,{children:[b>0&&(0,g.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,g.jsx)("span",{style:{fontWeight:500},children:a.title||a.name})]},b)}function kb(a){return{level:a.level,message:a.message,path:a.path}}let kc={},kd=s.route.create("/",[s.route.intents("/intent"),s.route.create("/edit/:type/:editDocumentId",[s.route.create({path:"/:params",transform:{params:{toState:function(a){try{return JSON.parse(decodeURIComponent(a))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(a){return JSON.stringify(a)}}}})]),s.route.create({path:"/:panes",children:[s.route.create("/:action",s.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(a){var b;return -1!==(b=decodeURIComponent(a)).indexOf(",{")?function(a){let b=[],c=a;for(;c.length;){let[a,d,e]=c.match(ke)||[];if(!a){c=c.slice(1);continue}let f=e&&function(a){try{return JSON.parse(a)}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(e);b.push({id:d,payload:f}),c=c.slice(a.length)}return[b]}(b):b.split(";").map(a=>{let[b,...c]=a.split("|").map(a=>{let b,[c,...d]=a.split(",");return b={id:c,params:kc,payload:void 0},d.reduce((a,b)=>{if(/^[a-z0-9]+=[^=]+/i.test(b)){let c=b.slice(0,b.indexOf("=")),d=b.slice(c.length+1);a.params={...a.params,[decodeURIComponent(c)]:decodeURIComponent(d)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(b)?a.payload=function(a){try{return a?(0,s.decodeJsonParams)(a):void 0}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(b):console.warn("Unknown pane segment: %s - skipping",b);return a},b)});return[b,...c.map(a=>({...b,...a,id:a.id||b.id,params:{...(0,aR.omit)(b.params,kf),...a.params},payload:a.payload||b.payload}))]}).filter(a=>a.length>0)},toPath:function(a){return(a||[]).map(a=>a.map(kh).join("|")).map(encodeURIComponent).join(";")}}}})]),ke=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,kf=["view","since","rev","inspect","comment"],kg=Boolean;function kh(a,b,c){let{payload:d,params:e={},id:f}=a,[g]=c,h=a===g,i=0!==b&&f===g.id,j=typeof d>"u"?void 0:(0,s.encodeJsonParams)(d),k=Object.entries(e).filter(a=>{let[b,c]=a;return!!c&&(!!h||!(c===g.params?.[b]&&!kf.includes(b)))}).map(([a,b])=>`${encodeURIComponent(a)}=${encodeURIComponent(b)}`);return[i?"":f].concat([k.length>0&&k,j].filter(kg).flat()).join(",")||","}let ki=[fD,fF,fu,fw,fr,eS],kj=["delete","discardChanges"],kk=[je],kl=[{name:"sanity/structure/validation",component:function(a){let b,c,d,e,f,j,k,l=(0,h.c)(23),{onClose:m}=a,{onFocus:n,onPathOpen:o,schemaType:q,validation:r,value:s,editState:t}=dj(),{t:u}=(0,p.useTranslation)("validation");l[0]!==n||l[1]!==o?(b=a=>{o(a),n(a)},l[0]=n,l[1]=o,l[2]=b):b=l[2];let v=b;l[3]!==t?(c=t&&t.version&&(0,p.isGoingToUnpublish)(t.version),l[3]=t,l[4]=c):c=l[4];let w=c;return l[5]!==u?(d=u("panel.close-button-aria-label"),l[5]=u,l[6]=d):d=l[6],l[7]!==u?(e=u("panel.title"),l[7]=u,l[8]=e):e=l[8],l[9]!==m||l[10]!==d||l[11]!==e?(f=(0,g.jsx)(dD,{as:"header",closeButtonLabel:d,flex:"none",onClose:m,title:e}),l[9]=m,l[10]=d,l[11]=e,l[12]=f):f=l[12],l[13]!==v||l[14]!==w||l[15]!==q||l[16]!==u||l[17]!==r||l[18]!==s?(j=(0,g.jsx)(i.Card,{flex:1,overflow:"auto",padding:3,children:w?(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsx)(i.Text,{muted:!0,size:1,children:u("panel.unpublish-message")})}):(0,g.jsxs)(g.Fragment,{children:[0===r.length&&(0,g.jsx)(i.Box,{padding:2,children:(0,g.jsx)(i.Text,{muted:!0,size:1,children:u("panel.no-errors-message")})}),r.length>0&&(0,g.jsx)(i.Stack,{space:2,children:r.map((a,b)=>(0,g.jsx)(j8,{marker:a,onOpen:v,schemaType:q,value:s},b))})]})}),l[13]=v,l[14]=w,l[15]=q,l[16]=u,l[17]=r,l[18]=s,l[19]=j):j=l[19],l[20]!==f||l[21]!==j?(k=(0,g.jsxs)(i.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[f,j]}),l[20]=f,l[21]=j,l[22]=k):k=l[22],k},useMenuItem:function(a){let b,c,d,e,f,g,i=(0,h.c)(11),{documentType:j}=a,{t:k}=(0,p.useTranslation)("validation"),{selectedReleaseId:l}=(0,p.usePerspective)(),{value:m}=dj(),{validation:n}=(0,p.useValidationStatus)(m._id,j,!l);i[0]!==n?(b=n.map(kb),i[0]=n,i[1]=b):b=i[1];let o=b,r=o.some(q.isValidationError),s=o.some(q.isValidationWarning);i[2]!==m?(c=(0,p.isGoingToUnpublish)(m),i[2]=m,i[3]=c):c=i[3];let t=c;a:{if(r){d=u.ErrorOutlineIcon;break a}if(s){d=u.WarningOutlineIcon;break a}d=u.CheckmarkCircleIcon}let v=d;b:{if(r){e="critical";break b}if(s){e="caution";break b}e="positive"}let w=e,x=0===o.length||t;return i[4]!==k?(f=k("panel.title"),i[4]=k,i[5]=f):f=i[5],i[6]!==v||i[7]!==x||i[8]!==f||i[9]!==w?(g={hidden:x,icon:v,title:f,tone:w,showAsAction:!0},i[6]=v,i[7]=x,i[8]=f,i[9]=w,i[10]=g):g=i[10],g}},{name:dv,useMenuItem:()=>{let{features:a}=dr(),{t:b}=(0,p.useTranslation)();return{hidden:!a.reviewChanges,icon:u.RestoreIcon,title:b("changes.title")}},component:function(a){let b,c,d,e,f,l,m,n,o,q,s,t,v,w,x,y,z,A,B,C,D,E,G,H,I,J,K,L=(0,h.c)(73),{params:M,setParams:N}=eb(),O=(0,p.useSource)(),[P,Q]=(0,k.useState)(null),{t:R}=(0,p.useTranslation)(F),{t:S}=(0,p.useTranslation)(),T=M?.inspect===dv,{selectedPerspective:U}=(0,p.usePerspective)();L[0]!==M?(b=(K=M?.changesInspectorTab)&&jU.includes(K)?M.changesInspectorTab:jU[0],L[0]=M,L[1]=b):b=L[1];let V=b;L[2]!==M||L[3]!==N?(c=a=>N({...M,changesInspectorTab:a,since:"history"===a?void 0:M?.since}),L[2]=M,L[3]=N,L[4]=c):c=L[4];let W=c,X=T?"":void 0;L[5]!==R?(d=R("changes.tab.history"),L[5]=R,L[6]=d):d=L[6],L[7]!==W?(e=()=>W("history"),L[7]=W,L[8]=e):e=L[8];let Y="history"===V;L[9]!==d||L[10]!==e||L[11]!==Y?(f=(0,g.jsx)(r.Tab,{"aria-controls":"history-panel",id:"history-tab",label:d,onClick:e,selected:Y}),L[9]=d,L[10]=e,L[11]=Y,L[12]=f):f=L[12],L[13]!==R?(l=R("changes.tab.review-changes"),L[13]=R,L[14]=l):l=L[14],L[15]!==W?(m=()=>W("review"),L[15]=W,L[16]=m):m=L[16];let Z="review"===V;L[17]!==l||L[18]!==m||L[19]!==Z?(n=(0,g.jsx)(r.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:l,onClick:m,selected:Z}),L[17]=l,L[18]=m,L[19]=Z,L[20]=n):n=L[20],L[21]!==n||L[22]!==f?(o=(0,g.jsxs)(i.TabList,{space:1,flex:1,children:[f,n]}),L[21]=n,L[22]=f,L[23]=o):o=L[23],L[24]!==R?(q=R("changes.action.close-label"),L[24]=R,L[25]=q):q=L[25];let $=a.onClose;L[26]!==R?(s=R("document-inspector.close-button.tooltip"),L[26]=R,L[27]=s):s=L[27],L[28]!==s?(t={content:s},L[28]=s,L[29]=t):t=L[29],L[30]!==a.onClose||L[31]!==q||L[32]!==t?(v=(0,g.jsx)(r.Button,{"aria-label":q,icon:u.CloseIcon,mode:"bleed",onClick:$,tooltipProps:t}),L[30]=a.onClose,L[31]=q,L[32]=t,L[33]=v):v=L[33],L[34]!==o||L[35]!==v?(w=(0,g.jsx)(i.Card,{paddingBottom:1,children:(0,g.jsxs)(i.Flex,{align:"center",padding:3,gap:2,children:[o,v]})}),L[34]=o,L[35]=v,L[36]=w):w=L[36],L[37]!==R?(x=(0,g.jsx)(i.Box,{flex:1,padding:1,children:(0,g.jsx)(i.Text,{size:1,children:(0,g.jsx)(p.Translate,{t:R,i18nKey:"changes.banner.tooltip"})})}),L[37]=R,L[38]=x):x=L[38],L[39]===Symbol.for("react.memo_cache_sentinel")?(y=(0,g.jsx)(i.Text,{size:0,muted:!0,children:(0,g.jsx)(u.InfoOutlineIcon,{fontSize:1})}),L[39]=y):y=L[39],L[40]!==P||L[41]!==x?(z=(0,g.jsx)(r.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:P,content:x,children:y}),L[40]=P,L[41]=x,L[42]=z):z=L[42],L[43]!==U||L[44]!==R||L[45]!==S?(A=function(a,{t:b,tCore:c}){return(0,p.isReleaseDocument)(a)?a.metadata.title||c("release.placeholder-untitled-release"):"drafts"===a?b("compare-versions.status.draft"):"published"===a?b("compare-versions.status.published"):a}(U,{t:R,tCore:S}),L[43]=U,L[44]=R,L[45]=S,L[46]=A):A=L[46],L[47]!==A?(B={perspective:A},L[47]=A,L[48]=B):B=L[48],L[49]!==R||L[50]!==B?(C=(0,g.jsx)(i.Text,{size:0,muted:!0,children:(0,g.jsx)(p.Translate,{t:R,values:B,i18nKey:"changes.banner.description"})}),L[49]=R,L[50]=B,L[51]=C):C=L[51],L[52]!==z||L[53]!==C?(D=(0,g.jsx)(i.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,g.jsxs)(i.Flex,{gap:2,align:"flex-start",children:[z,C]})}),L[52]=z,L[53]=C,L[54]=D):D=L[54];let _="history"!==V;L[55]!==V||L[56]!==O.beta?.eventsAPI?.documents?(E=O.beta?.eventsAPI?.documents?(0,g.jsx)(jM,{showList:"history"===V}):(0,g.jsx)(jO,{showList:"history"===V}),L[55]=V,L[56]=O.beta?.eventsAPI?.documents,L[57]=E):E=L[57],L[58]!==_||L[59]!==E?(G=(0,g.jsx)(j.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:_,id:"history-panel",children:E}),L[58]=_,L[59]=E,L[60]=G):G=L[60];let aa="review"!==V;return L[61]!==V||L[62]!==O.beta?.eventsAPI?.documents?(H=O.beta?.eventsAPI?.documents?(0,g.jsx)(g.Fragment,{children:"review"===V?(0,g.jsx)(jG,{showChanges:"review"===V}):null}):(0,g.jsx)(jk,{showChanges:"review"===V}),L[61]=V,L[62]=O.beta?.eventsAPI?.documents,L[63]=H):H=L[63],L[64]!==aa||L[65]!==H?(I=(0,g.jsx)(j.TabPanel,{"aria-labelledby":"review-tab",hidden:aa,id:"review-panel",height:"fill",children:H}),L[64]=aa,L[65]=H,L[66]=I):I=L[66],L[67]!==w||L[68]!==X||L[69]!==D||L[70]!==G||L[71]!==I?(J=(0,g.jsxs)(jT,{direction:"column",padding:0,height:"fill","data-ready":X,ref:Q,children:[w,D,G,I]}),L[67]=w,L[68]=X,L[69]=D,L[70]=G,L[71]=I,L[72]=J):J=L[72],J},onClose:({params:a})=>({params:{...a,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:a})=>({params:{...a,since:"@lastPublished"}})},{name:"sanity/structure/incoming-references",useMenuItem:()=>{let{t:a}=(0,p.useTranslation)();return{icon:u.SyncIcon,title:a("incoming-references.title")}},component:a=>{let b,c,d,e,f,j=(0,h.c)(11),{t:k}=(0,p.useTranslation)();j[0]!==k?(b=k("panel.close-button-aria-label"),j[0]=k,j[1]=b):b=j[1];let l=a.onClose;return j[2]!==k?(c=k("incoming-references.title"),j[2]=k,j[3]=c):c=j[3],j[4]!==a.onClose||j[5]!==b||j[6]!==c?(d=(0,g.jsx)(dD,{as:"header",closeButtonLabel:b,flex:"none",onClose:l,title:c}),j[4]=a.onClose,j[5]=b,j[6]=c,j[7]=d):d=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(i.Card,{flex:1,overflow:"auto",padding:3,children:(0,g.jsx)(jY,{})}),j[8]=e):e=j[8],j[9]!==d?(f=(0,g.jsxs)(i.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[d,e]}),j[9]=d,j[10]=f):f=j[10],f}}],km=(0,p.definePlugin)(b=>{let c=b?.icon||u.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(a,b)=>{let c=Array.from(new Set([...a,...ki])),d=c.filter(a=>kj.includes(a.action)),e=c.filter(a=>!kj.includes(a.action));return"published"===b.versionType?[...[...e].sort((a,b)=>"unpublish"===a.action?-1:+("unpublish"===b.action)),...d]:[...e,...d]},badges:a=>Array.from(new Set([...a,...kk])),inspectors:a=>Array.from(new Set([...a,...kl]))},tools:[{name:b?.name||"structure",title:b?.title||"Structure",icon:c,component:(0,k.lazy)(()=>a.A(576936)),canHandleIntent:(a,b)=>{var c;return"create"===a?function(a){if(!("type"in a))return!1;let b={};return"mode"in a&&(b.mode="structure"===a.mode),"template"in a&&(b.template=!0),!Object.keys(b).length||b}(b):"edit"===a&&"id"in(c=b)&&(!("mode"in c)||{mode:"structure"===c.mode})},getIntentState:jh,controlsDocumentTitle:!0,options:b,router:kd,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[G]}}});var kn=Object.freeze({__proto__:null,default:hc}),ko=Object.freeze({__proto__:null,default:jd});a.s(["BackLink",()=>hg,"ConfirmDeleteDialogContainer",()=>hR,"DocumentInspectorHeader",()=>dD,"DocumentPane",()=>hc,"DocumentPaneProviderWrapper",()=>hb,"LOADING_PANE",()=>eD,"LoadingPane",()=>di,"Pane",()=>cL,"PaneContainer",()=>jd,"PaneContent",()=>cO,"PaneHeader",()=>c4,"PaneHeaderActions",()=>h$,"PaneItem",()=>h6,"PaneLayout",()=>dc,"StructureToolPane",()=>hp,"_DEBUG",()=>!1,"assignId",()=>ij,"setActivePanes",()=>jg,"structureTool",()=>km,"useDocumentLastRev",()=>gU,"useDocumentPane",()=>dj,"useDocumentTitle",()=>dz,"usePane",()=>cN,"usePaneLayout",()=>cH,"usePaneRouter",()=>eb,"useStructureTool",()=>dr],416905)}];

//# sourceMappingURL=node_modules_85b461e7._.js.map